//! Mirador 0.9.0
//! Built on 2015-09-23
/*! jQuery v1.9.1 | (c) 2005, 2012 jQuery Foundation, Inc. | jquery.org/license
*/
(function(t,e){function n(t){var e=t.length,n=le.type(t);return le.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===n||"function"!==n&&(0===e||"number"==typeof e&&e>0&&e-1 in t)}function i(t){var e=Se[t]={};return le.each(t.match(ce)||[],function(t,n){e[n]=!0}),e}function r(t,n,i,r){if(le.acceptData(t)){var o,s,a=le.expando,l="string"==typeof n,u=t.nodeType,c=u?le.cache:t,h=u?t[a]:t[a]&&a;if(h&&c[h]&&(r||c[h].data)||!l||i!==e)return h||(u?t[a]=h=J.pop()||le.guid++:h=a),c[h]||(c[h]={},u||(c[h].toJSON=le.noop)),("object"==typeof n||"function"==typeof n)&&(r?c[h]=le.extend(c[h],n):c[h].data=le.extend(c[h].data,n)),o=c[h],r||(o.data||(o.data={}),o=o.data),i!==e&&(o[le.camelCase(n)]=i),l?(s=o[n],null==s&&(s=o[le.camelCase(n)])):s=o,s}}function o(t,e,n){if(le.acceptData(t)){var i,r,o,s=t.nodeType,l=s?le.cache:t,u=s?t[le.expando]:le.expando;if(l[u]){if(e&&(o=n?l[u]:l[u].data)){le.isArray(e)?e=e.concat(le.map(e,le.camelCase)):e in o?e=[e]:(e=le.camelCase(e),e=e in o?[e]:e.split(" "));for(i=0,r=e.length;r>i;i++)delete o[e[i]];if(!(n?a:le.isEmptyObject)(o))return}(n||(delete l[u].data,a(l[u])))&&(s?le.cleanData([t],!0):le.support.deleteExpando||l!=l.window?delete l[u]:l[u]=null)}}}function s(t,n,i){if(i===e&&1===t.nodeType){var r="data-"+n.replace(Ee,"-$1").toLowerCase();if(i=t.getAttribute(r),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:_e.test(i)?le.parseJSON(i):i}catch(o){}le.data(t,n,i)}else i=e}return i}function a(t){var e;for(e in t)if(("data"!==e||!le.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function l(){return!0}function u(){return!1}function c(t,e){do t=t[e];while(t&&1!==t.nodeType);return t}function h(t,e,n){if(e=e||0,le.isFunction(e))return le.grep(t,function(t,i){var r=!!e.call(t,i,t);return r===n});if(e.nodeType)return le.grep(t,function(t){return t===e===n});if("string"==typeof e){var i=le.grep(t,function(t){return 1===t.nodeType});if(Ue.test(e))return le.filter(e,i,!n);e=le.filter(e,i)}return le.grep(t,function(t){return le.inArray(t,e)>=0===n})}function d(t){var e=$e.split("|"),n=t.createDocumentFragment();if(n.createElement)for(;e.length;)n.createElement(e.pop());return n}function p(t,e){return t.getElementsByTagName(e)[0]||t.appendChild(t.ownerDocument.createElement(e))}function f(t){var e=t.getAttributeNode("type");return t.type=(e&&e.specified)+"/"+t.type,t}function g(t){var e=on.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function m(t,e){for(var n,i=0;null!=(n=t[i]);i++)le._data(n,"globalEval",!e||le._data(e[i],"globalEval"))}function v(t,e){if(1===e.nodeType&&le.hasData(t)){var n,i,r,o=le._data(t),s=le._data(e,o),a=o.events;if(a){delete s.handle,s.events={};for(n in a)for(i=0,r=a[n].length;r>i;i++)le.event.add(e,n,a[n][i])}s.data&&(s.data=le.extend({},s.data))}}function y(t,e){var n,i,r;if(1===e.nodeType){if(n=e.nodeName.toLowerCase(),!le.support.noCloneEvent&&e[le.expando]){r=le._data(e);for(i in r.events)le.removeEvent(e,i,r.handle);e.removeAttribute(le.expando)}"script"===n&&e.text!==t.text?(f(e).text=t.text,g(e)):"object"===n?(e.parentNode&&(e.outerHTML=t.outerHTML),le.support.html5Clone&&t.innerHTML&&!le.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===n&&en.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===n?e.defaultSelected=e.selected=t.defaultSelected:("input"===n||"textarea"===n)&&(e.defaultValue=t.defaultValue)}}function b(t,n){var i,r,o=0,s=typeof t.getElementsByTagName!==Q?t.getElementsByTagName(n||"*"):typeof t.querySelectorAll!==Q?t.querySelectorAll(n||"*"):e;if(!s)for(s=[],i=t.childNodes||t;null!=(r=i[o]);o++)!n||le.nodeName(r,n)?s.push(r):le.merge(s,b(r,n));return n===e||n&&le.nodeName(t,n)?le.merge([t],s):s}function w(t){en.test(t.type)&&(t.defaultChecked=t.checked)}function x(t,e){if(e in t)return e;for(var n=e.charAt(0).toUpperCase()+e.slice(1),i=e,r=En.length;r--;)if(e=En[r]+n,e in t)return e;return i}function T(t,e){return t=e||t,"none"===le.css(t,"display")||!le.contains(t.ownerDocument,t)}function S(t,e){for(var n,i,r,o=[],s=0,a=t.length;a>s;s++)i=t[s],i.style&&(o[s]=le._data(i,"olddisplay"),n=i.style.display,e?(o[s]||"none"!==n||(i.style.display=""),""===i.style.display&&T(i)&&(o[s]=le._data(i,"olddisplay",k(i.nodeName)))):o[s]||(r=T(i),(n&&"none"!==n||!r)&&le._data(i,"olddisplay",r?n:le.css(i,"display"))));for(s=0;a>s;s++)i=t[s],i.style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?o[s]||"":"none"));return t}function _(t,e,n){var i=yn.exec(e);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):e}function E(t,e,n,i,r){for(var o=n===(i?"border":"content")?4:"width"===e?1:0,s=0;4>o;o+=2)"margin"===n&&(s+=le.css(t,n+_n[o],!0,r)),i?("content"===n&&(s-=le.css(t,"padding"+_n[o],!0,r)),"margin"!==n&&(s-=le.css(t,"border"+_n[o]+"Width",!0,r))):(s+=le.css(t,"padding"+_n[o],!0,r),"padding"!==n&&(s+=le.css(t,"border"+_n[o]+"Width",!0,r)));return s}function C(t,e,n){var i=!0,r="width"===e?t.offsetWidth:t.offsetHeight,o=hn(t),s=le.support.boxSizing&&"border-box"===le.css(t,"boxSizing",!1,o);if(0>=r||null==r){if(r=dn(t,e,o),(0>r||null==r)&&(r=t.style[e]),bn.test(r))return r;i=s&&(le.support.boxSizingReliable||r===t.style[e]),r=parseFloat(r)||0}return r+E(t,e,n||(s?"border":"content"),i,o)+"px"}function k(t){var e=G,n=xn[t];return n||(n=M(t,e),"none"!==n&&n||(cn=(cn||le("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(e.documentElement),e=(cn[0].contentWindow||cn[0].contentDocument).document,e.write("<!doctype html><html><body>"),e.close(),n=M(t,e),cn.detach()),xn[t]=n),n}function M(t,e){var n=le(e.createElement(t)).appendTo(e.body),i=le.css(n[0],"display");return n.remove(),i}function P(t,e,n,i){var r;if(le.isArray(e))le.each(e,function(e,r){n||kn.test(t)?i(t,r):P(t+"["+("object"==typeof r?e:"")+"]",r,n,i)});else if(n||"object"!==le.type(e))i(t,e);else for(r in e)P(t+"["+r+"]",e[r],n,i)}function I(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,r=0,o=e.toLowerCase().match(ce)||[];if(le.isFunction(n))for(;i=o[r++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function z(t,n,i,r){function o(l){var u;return s[l]=!0,le.each(t[l]||[],function(t,l){var c=l(n,i,r);return"string"!=typeof c||a||s[c]?a?!(u=c):e:(n.dataTypes.unshift(c),o(c),!1)}),u}var s={},a=t===qn;return o(n.dataTypes[0])||!s["*"]&&o("*")}function A(t,n){var i,r,o=le.ajaxSettings.flatOptions||{};for(r in n)n[r]!==e&&((o[r]?t:i||(i={}))[r]=n[r]);return i&&le.extend(!0,t,i),t}function H(t,n,i){var r,o,s,a,l=t.contents,u=t.dataTypes,c=t.responseFields;for(a in c)a in i&&(n[c[a]]=i[a]);for(;"*"===u[0];)u.shift(),o===e&&(o=t.mimeType||n.getResponseHeader("Content-Type"));if(o)for(a in l)if(l[a]&&l[a].test(o)){u.unshift(a);break}if(u[0]in i)s=u[0];else{for(a in i){if(!u[0]||t.converters[a+" "+u[0]]){s=a;break}r||(r=a)}s=s||r}return s?(s!==u[0]&&u.unshift(s),i[s]):e}function O(t,e){var n,i,r,o,s={},a=0,l=t.dataTypes.slice(),u=l[0];if(t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l[1])for(r in t.converters)s[r.toLowerCase()]=t.converters[r];for(;i=l[++a];)if("*"!==i){if("*"!==u&&u!==i){if(r=s[u+" "+i]||s["* "+i],!r)for(n in s)if(o=n.split(" "),o[1]===i&&(r=s[u+" "+o[0]]||s["* "+o[0]])){r===!0?r=s[n]:s[n]!==!0&&(i=o[0],l.splice(a--,0,i));break}if(r!==!0)if(r&&t["throws"])e=r(e);else try{e=r(e)}catch(c){return{state:"parsererror",error:r?c:"No conversion from "+u+" to "+i}}}u=i}return{state:"success",data:e}}function N(){try{return new t.XMLHttpRequest}catch(e){}}function L(){try{return new t.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function D(){return setTimeout(function(){Jn=e}),Jn=le.now()}function R(t,e){le.each(e,function(e,n){for(var i=(oi[e]||[]).concat(oi["*"]),r=0,o=i.length;o>r;r++)if(i[r].call(t,e,n))return})}function j(t,e,n){var i,r,o=0,s=ri.length,a=le.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var e=Jn||D(),n=Math.max(0,u.startTime+u.duration-e),i=n/u.duration||0,o=1-i,s=0,l=u.tweens.length;l>s;s++)u.tweens[s].run(o);return a.notifyWith(t,[u,o,n]),1>o&&l?n:(a.resolveWith(t,[u]),!1)},u=a.promise({elem:t,props:le.extend({},e),opts:le.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:Jn||D(),duration:n.duration,tweens:[],createTween:function(e,n){var i=le.Tween(t,u.opts,e,n,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(i),i},stop:function(e){var n=0,i=e?u.tweens.length:0;if(r)return this;for(r=!0;i>n;n++)u.tweens[n].run(1);return e?a.resolveWith(t,[u,e]):a.rejectWith(t,[u,e]),this}}),c=u.props;for(B(c,u.opts.specialEasing);s>o;o++)if(i=ri[o].call(u,t,c,u.opts))return i;return R(u,c),le.isFunction(u.opts.start)&&u.opts.start.call(t,u),le.fx.timer(le.extend(l,{elem:t,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function B(t,e){var n,i,r,o,s;for(r in t)if(i=le.camelCase(r),o=e[i],n=t[r],le.isArray(n)&&(o=n[1],n=t[r]=n[0]),r!==i&&(t[i]=n,delete t[r]),s=le.cssHooks[i],s&&"expand"in s){n=s.expand(n),delete t[i];for(r in n)r in t||(t[r]=n[r],e[r]=o)}else e[i]=o}function F(t,e,n){var i,r,o,s,a,l,u,c,h,d=this,p=t.style,f={},g=[],m=t.nodeType&&T(t);n.queue||(c=le._queueHooks(t,"fx"),null==c.unqueued&&(c.unqueued=0,h=c.empty.fire,c.empty.fire=function(){c.unqueued||h()}),c.unqueued++,d.always(function(){d.always(function(){c.unqueued--,le.queue(t,"fx").length||c.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],"inline"===le.css(t,"display")&&"none"===le.css(t,"float")&&(le.support.inlineBlockNeedsLayout&&"inline"!==k(t.nodeName)?p.zoom=1:p.display="inline-block")),n.overflow&&(p.overflow="hidden",le.support.shrinkWrapBlocks||d.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(r in e)if(s=e[r],ei.exec(s)){if(delete e[r],l=l||"toggle"===s,s===(m?"hide":"show"))continue;g.push(r)}if(o=g.length){a=le._data(t,"fxshow")||le._data(t,"fxshow",{}),"hidden"in a&&(m=a.hidden),l&&(a.hidden=!m),m?le(t).show():d.done(function(){le(t).hide()}),d.done(function(){var e;le._removeData(t,"fxshow");for(e in f)le.style(t,e,f[e])});for(r=0;o>r;r++)i=g[r],u=d.createTween(i,m?a[i]:0),f[i]=a[i]||le.style(t,i),i in a||(a[i]=u.start,m&&(u.end=u.start,u.start="width"===i||"height"===i?1:0))}}function W(t,e,n,i,r){return new W.prototype.init(t,e,n,i,r)}function U(t,e){var n,i={height:t},r=0;for(e=e?1:0;4>r;r+=2-e)n=_n[r],i["margin"+n]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function q(t){return le.isWindow(t)?t:9===t.nodeType?t.defaultView||t.parentWindow:!1}var V,$,Q=typeof e,G=t.document,Z=t.location,X=t.jQuery,Y=t.$,K={},J=[],te="1.9.1",ee=J.concat,ne=J.push,ie=J.slice,re=J.indexOf,oe=K.toString,se=K.hasOwnProperty,ae=te.trim,le=function(t,e){return new le.fn.init(t,e,$)},ue=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ce=/\S+/g,he=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,de=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,pe=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,fe=/^[\],:{}\s]*$/,ge=/(?:^|:|,)(?:\s*\[)+/g,me=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,ve=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,ye=/^-ms-/,be=/-([\da-z])/gi,we=function(t,e){return e.toUpperCase()},xe=function(t){(G.addEventListener||"load"===t.type||"complete"===G.readyState)&&(Te(),le.ready())},Te=function(){G.addEventListener?(G.removeEventListener("DOMContentLoaded",xe,!1),t.removeEventListener("load",xe,!1)):(G.detachEvent("onreadystatechange",xe),t.detachEvent("onload",xe))};le.fn=le.prototype={jquery:te,constructor:le,init:function(t,n,i){var r,o;if(!t)return this;if("string"==typeof t){if(r="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:de.exec(t),!r||!r[1]&&n)return!n||n.jquery?(n||i).find(t):this.constructor(n).find(t);if(r[1]){if(n=n instanceof le?n[0]:n,le.merge(this,le.parseHTML(r[1],n&&n.nodeType?n.ownerDocument||n:G,!0)),pe.test(r[1])&&le.isPlainObject(n))for(r in n)le.isFunction(this[r])?this[r](n[r]):this.attr(r,n[r]);return this}if(o=G.getElementById(r[2]),o&&o.parentNode){if(o.id!==r[2])return i.find(t);this.length=1,this[0]=o}return this.context=G,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):le.isFunction(t)?i.ready(t):(t.selector!==e&&(this.selector=t.selector,this.context=t.context),le.makeArray(t,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return ie.call(this)},get:function(t){return null==t?this.toArray():0>t?this[this.length+t]:this[t]},pushStack:function(t){var e=le.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return le.each(this,t,e)},ready:function(t){return le.ready.promise().done(t),this},slice:function(){return this.pushStack(ie.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},map:function(t){return this.pushStack(le.map(this,function(e,n){return t.call(e,n,e)}))},end:function(){return this.prevObject||this.constructor(null)},push:ne,sort:[].sort,splice:[].splice},le.fn.init.prototype=le.fn,le.extend=le.fn.extend=function(){var t,n,i,r,o,s,a=arguments[0]||{},l=1,u=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[1]||{},l=2),"object"==typeof a||le.isFunction(a)||(a={}),u===l&&(a=this,--l);u>l;l++)if(null!=(o=arguments[l]))for(r in o)t=a[r],i=o[r],a!==i&&(c&&i&&(le.isPlainObject(i)||(n=le.isArray(i)))?(n?(n=!1,s=t&&le.isArray(t)?t:[]):s=t&&le.isPlainObject(t)?t:{},a[r]=le.extend(c,s,i)):i!==e&&(a[r]=i));return a},le.extend({noConflict:function(e){return t.$===le&&(t.$=Y),e&&t.jQuery===le&&(t.jQuery=X),le},isReady:!1,readyWait:1,holdReady:function(t){t?le.readyWait++:le.ready(!0)},ready:function(t){if(t===!0?!--le.readyWait:!le.isReady){if(!G.body)return setTimeout(le.ready);le.isReady=!0,t!==!0&&--le.readyWait>0||(V.resolveWith(G,[le]),le.fn.trigger&&le(G).trigger("ready").off("ready"))}},isFunction:function(t){return"function"===le.type(t)},isArray:Array.isArray||function(t){return"array"===le.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?K[oe.call(t)]||"object":typeof t},isPlainObject:function(t){if(!t||"object"!==le.type(t)||t.nodeType||le.isWindow(t))return!1;try{if(t.constructor&&!se.call(t,"constructor")&&!se.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var i;for(i in t);return i===e||se.call(t,i)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},error:function(t){throw Error(t)},parseHTML:function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||G;var i=pe.exec(t),r=!n&&[];return i?[e.createElement(i[1])]:(i=le.buildFragment([t],e,r),r&&le(r).remove(),le.merge([],i.childNodes))},parseJSON:function(n){return t.JSON&&t.JSON.parse?t.JSON.parse(n):null===n?n:"string"==typeof n&&(n=le.trim(n),n&&fe.test(n.replace(me,"@").replace(ve,"]").replace(ge,"")))?Function("return "+n)():(le.error("Invalid JSON: "+n),e)},parseXML:function(n){var i,r;if(!n||"string"!=typeof n)return null;try{t.DOMParser?(r=new DOMParser,i=r.parseFromString(n,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(n))}catch(o){i=e}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length||le.error("Invalid XML: "+n),i},noop:function(){},globalEval:function(e){e&&le.trim(e)&&(t.execScript||function(e){t.eval.call(t,e)})(e)},camelCase:function(t){return t.replace(ye,"ms-").replace(be,we)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,i){var r,o=0,s=t.length,a=n(t);if(i){if(a)for(;s>o&&(r=e.apply(t[o],i),r!==!1);o++);else for(o in t)if(r=e.apply(t[o],i),r===!1)break}else if(a)for(;s>o&&(r=e.call(t[o],o,t[o]),r!==!1);o++);else for(o in t)if(r=e.call(t[o],o,t[o]),r===!1)break;return t},trim:ae&&!ae.call("﻿ ")?function(t){return null==t?"":ae.call(t)}:function(t){return null==t?"":(t+"").replace(he,"")},makeArray:function(t,e){var i=e||[];return null!=t&&(n(Object(t))?le.merge(i,"string"==typeof t?[t]:t):ne.call(i,t)),i},inArray:function(t,e,n){var i;if(e){if(re)return re.call(e,t,n);for(i=e.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in e&&e[n]===t)return n}return-1},merge:function(t,n){var i=n.length,r=t.length,o=0;if("number"==typeof i)for(;i>o;o++)t[r++]=n[o];else for(;n[o]!==e;)t[r++]=n[o++];return t.length=r,t},grep:function(t,e,n){var i,r=[],o=0,s=t.length;for(n=!!n;s>o;o++)i=!!e(t[o],o),n!==i&&r.push(t[o]);return r},map:function(t,e,i){var r,o=0,s=t.length,a=n(t),l=[];if(a)for(;s>o;o++)r=e(t[o],o,i),null!=r&&(l[l.length]=r);else for(o in t)r=e(t[o],o,i),null!=r&&(l[l.length]=r);return ee.apply([],l)},guid:1,proxy:function(t,n){var i,r,o;return"string"==typeof n&&(o=t[n],n=t,t=o),le.isFunction(t)?(i=ie.call(arguments,2),r=function(){return t.apply(n||this,i.concat(ie.call(arguments)))},r.guid=t.guid=t.guid||le.guid++,r):e},access:function(t,n,i,r,o,s,a){var l=0,u=t.length,c=null==i;if("object"===le.type(i)){o=!0;for(l in i)le.access(t,n,l,i[l],!0,s,a)}else if(r!==e&&(o=!0,le.isFunction(r)||(a=!0),c&&(a?(n.call(t,r),n=null):(c=n,n=function(t,e,n){return c.call(le(t),n)})),n))for(;u>l;l++)n(t[l],i,a?r:r.call(t[l],l,n(t[l],i)));return o?t:c?n.call(t):u?n(t[0],i):s},now:function(){return(new Date).getTime()}}),le.ready.promise=function(e){if(!V)if(V=le.Deferred(),"complete"===G.readyState)setTimeout(le.ready);else if(G.addEventListener)G.addEventListener("DOMContentLoaded",xe,!1),t.addEventListener("load",xe,!1);else{G.attachEvent("onreadystatechange",xe),t.attachEvent("onload",xe);var n=!1;try{n=null==t.frameElement&&G.documentElement}catch(i){}n&&n.doScroll&&function r(){if(!le.isReady){try{n.doScroll("left")}catch(t){return setTimeout(r,50)}Te(),le.ready()}}()}return V.promise(e)},le.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){K["[object "+e+"]"]=e.toLowerCase()}),$=le(G);var Se={};le.Callbacks=function(t){t="string"==typeof t?Se[t]||i(t):le.extend({},t);var n,r,o,s,a,l,u=[],c=!t.once&&[],h=function(e){for(r=t.memory&&e,o=!0,a=l||0,l=0,s=u.length,n=!0;u&&s>a;a++)if(u[a].apply(e[0],e[1])===!1&&t.stopOnFalse){r=!1;break}n=!1,u&&(c?c.length&&h(c.shift()):r?u=[]:d.disable())},d={add:function(){if(u){var e=u.length;(function i(e){le.each(e,function(e,n){var r=le.type(n);"function"===r?t.unique&&d.has(n)||u.push(n):n&&n.length&&"string"!==r&&i(n)})})(arguments),n?s=u.length:r&&(l=e,h(r))}return this},remove:function(){return u&&le.each(arguments,function(t,e){for(var i;(i=le.inArray(e,u,i))>-1;)u.splice(i,1),n&&(s>=i&&s--,a>=i&&a--)}),this},has:function(t){return t?le.inArray(t,u)>-1:!(!u||!u.length)},empty:function(){return u=[],this},disable:function(){return u=c=r=e,this},disabled:function(){return!u},lock:function(){return c=e,r||d.disable(),this},locked:function(){return!c},fireWith:function(t,e){return e=e||[],e=[t,e.slice?e.slice():e],!u||o&&!c||(n?c.push(e):h(e)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!o}};return d},le.extend({Deferred:function(t){var e=[["resolve","done",le.Callbacks("once memory"),"resolved"],["reject","fail",le.Callbacks("once memory"),"rejected"],["notify","progress",le.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var t=arguments;return le.Deferred(function(n){le.each(e,function(e,o){var s=o[0],a=le.isFunction(t[e])&&t[e];r[o[1]](function(){var t=a&&a.apply(this,arguments);t&&le.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===i?n.promise():this,a?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?le.extend(t,i):i}},r={};return i.pipe=i.then,le.each(e,function(t,o){var s=o[2],a=o[3];i[o[1]]=s.add,a&&s.add(function(){n=a},e[1^t][2].disable,e[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?i:this,arguments),this},r[o[0]+"With"]=s.fireWith}),i.promise(r),t&&t.call(r,r),r},when:function(t){var e,n,i,r=0,o=ie.call(arguments),s=o.length,a=1!==s||t&&le.isFunction(t.promise)?s:0,l=1===a?t:le.Deferred(),u=function(t,n,i){return function(r){n[t]=this,i[t]=arguments.length>1?ie.call(arguments):r,i===e?l.notifyWith(n,i):--a||l.resolveWith(n,i)}};if(s>1)for(e=Array(s),n=Array(s),i=Array(s);s>r;r++)o[r]&&le.isFunction(o[r].promise)?o[r].promise().done(u(r,i,o)).fail(l.reject).progress(u(r,n,e)):--a;return a||l.resolveWith(i,o),l.promise()}}),le.support=function(){var e,n,i,r,o,s,a,l,u,c,h=G.createElement("div");if(h.setAttribute("className","t"),h.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=h.getElementsByTagName("*"),i=h.getElementsByTagName("a")[0],!n||!i||!n.length)return{};o=G.createElement("select"),a=o.appendChild(G.createElement("option")),r=h.getElementsByTagName("input")[0],i.style.cssText="top:1px;float:left;opacity:.5",e={getSetAttribute:"t"!==h.className,leadingWhitespace:3===h.firstChild.nodeType,tbody:!h.getElementsByTagName("tbody").length,htmlSerialize:!!h.getElementsByTagName("link").length,style:/top/.test(i.getAttribute("style")),hrefNormalized:"/a"===i.getAttribute("href"),opacity:/^0.5/.test(i.style.opacity),cssFloat:!!i.style.cssFloat,checkOn:!!r.value,optSelected:a.selected,enctype:!!G.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==G.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===G.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},r.checked=!0,e.noCloneChecked=r.cloneNode(!0).checked,o.disabled=!0,e.optDisabled=!a.disabled;try{delete h.test}catch(d){e.deleteExpando=!1}r=G.createElement("input"),r.setAttribute("value",""),e.input=""===r.getAttribute("value"),r.value="t",r.setAttribute("type","radio"),e.radioValue="t"===r.value,r.setAttribute("checked","t"),r.setAttribute("name","t"),s=G.createDocumentFragment(),s.appendChild(r),e.appendChecked=r.checked,e.checkClone=s.cloneNode(!0).cloneNode(!0).lastChild.checked,h.attachEvent&&(h.attachEvent("onclick",function(){e.noCloneEvent=!1}),h.cloneNode(!0).click());for(c in{submit:!0,change:!0,focusin:!0})h.setAttribute(l="on"+c,"t"),e[c+"Bubbles"]=l in t||h.attributes[l].expando===!1;return h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",e.clearCloneStyle="content-box"===h.style.backgroundClip,le(function(){var n,i,r,o="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",s=G.getElementsByTagName("body")[0];s&&(n=G.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",s.appendChild(n).appendChild(h),h.innerHTML="<table><tr><td></td><td>t</td></tr></table>",r=h.getElementsByTagName("td"),r[0].style.cssText="padding:0;margin:0;border:0;display:none",u=0===r[0].offsetHeight,r[0].style.display="",r[1].style.display="none",e.reliableHiddenOffsets=u&&0===r[0].offsetHeight,h.innerHTML="",h.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",e.boxSizing=4===h.offsetWidth,e.doesNotIncludeMarginInBodyOffset=1!==s.offsetTop,t.getComputedStyle&&(e.pixelPosition="1%"!==(t.getComputedStyle(h,null)||{}).top,e.boxSizingReliable="4px"===(t.getComputedStyle(h,null)||{width:"4px"}).width,i=h.appendChild(G.createElement("div")),i.style.cssText=h.style.cssText=o,i.style.marginRight=i.style.width="0",h.style.width="1px",e.reliableMarginRight=!parseFloat((t.getComputedStyle(i,null)||{}).marginRight)),typeof h.style.zoom!==Q&&(h.innerHTML="",h.style.cssText=o+"width:1px;padding:1px;display:inline;zoom:1",e.inlineBlockNeedsLayout=3===h.offsetWidth,h.style.display="block",h.innerHTML="<div></div>",h.firstChild.style.width="5px",e.shrinkWrapBlocks=3!==h.offsetWidth,e.inlineBlockNeedsLayout&&(s.style.zoom=1)),s.removeChild(n),n=h=r=i=null)}),n=o=s=a=i=r=null,e}();var _e=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,Ee=/([A-Z])/g;le.extend({cache:{},expando:"jQuery"+(te+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(t){return t=t.nodeType?le.cache[t[le.expando]]:t[le.expando],!!t&&!a(t)},data:function(t,e,n){return r(t,e,n)},removeData:function(t,e){return o(t,e)},_data:function(t,e,n){return r(t,e,n,!0)},_removeData:function(t,e){return o(t,e,!0)},acceptData:function(t){if(t.nodeType&&1!==t.nodeType&&9!==t.nodeType)return!1;var e=t.nodeName&&le.noData[t.nodeName.toLowerCase()];return!e||e!==!0&&t.getAttribute("classid")===e}}),le.fn.extend({data:function(t,n){var i,r,o=this[0],a=0,l=null;if(t===e){if(this.length&&(l=le.data(o),1===o.nodeType&&!le._data(o,"parsedAttrs"))){for(i=o.attributes;i.length>a;a++)r=i[a].name,r.indexOf("data-")||(r=le.camelCase(r.slice(5)),s(o,r,l[r]));le._data(o,"parsedAttrs",!0)}return l}return"object"==typeof t?this.each(function(){le.data(this,t)}):le.access(this,function(n){return n===e?o?s(o,t,le.data(o,t)):null:(this.each(function(){le.data(this,t,n)}),e)},null,n,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){le.removeData(this,t)})}}),le.extend({queue:function(t,n,i){var r;return t?(n=(n||"fx")+"queue",r=le._data(t,n),i&&(!r||le.isArray(i)?r=le._data(t,n,le.makeArray(i)):r.push(i)),r||[]):e},dequeue:function(t,e){e=e||"fx";var n=le.queue(t,e),i=n.length,r=n.shift(),o=le._queueHooks(t,e),s=function(){le.dequeue(t,e)};"inprogress"===r&&(r=n.shift(),i--),o.cur=r,r&&("fx"===e&&n.unshift("inprogress"),delete o.stop,r.call(t,s,o)),!i&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return le._data(t,n)||le._data(t,n,{empty:le.Callbacks("once memory").add(function(){le._removeData(t,e+"queue"),le._removeData(t,n)})})}}),le.fn.extend({queue:function(t,n){var i=2;return"string"!=typeof t&&(n=t,t="fx",i--),i>arguments.length?le.queue(this[0],t):n===e?this:this.each(function(){var e=le.queue(this,t,n);le._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&le.dequeue(this,t)})},dequeue:function(t){return this.each(function(){le.dequeue(this,t)})},delay:function(t,e){return t=le.fx?le.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,n){var i=setTimeout(e,t);n.stop=function(){clearTimeout(i)}})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,n){var i,r=1,o=le.Deferred(),s=this,a=this.length,l=function(){--r||o.resolveWith(s,[s])};for("string"!=typeof t&&(n=t,t=e),t=t||"fx";a--;)i=le._data(s[a],t+"queueHooks"),i&&i.empty&&(r++,i.empty.add(l));return l(),o.promise(n)}});var Ce,ke,Me=/[\t\r\n]/g,Pe=/\r/g,Ie=/^(?:input|select|textarea|button|object)$/i,ze=/^(?:a|area)$/i,Ae=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,He=/^(?:checked|selected)$/i,Oe=le.support.getSetAttribute,Ne=le.support.input;le.fn.extend({attr:function(t,e){return le.access(this,le.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){le.removeAttr(this,t)})},prop:function(t,e){return le.access(this,le.prop,t,e,arguments.length>1)},removeProp:function(t){return t=le.propFix[t]||t,this.each(function(){try{this[t]=e,delete this[t]}catch(n){}})},addClass:function(t){var e,n,i,r,o,s=0,a=this.length,l="string"==typeof t&&t;if(le.isFunction(t))return this.each(function(e){le(this).addClass(t.call(this,e,this.className))});if(l)for(e=(t||"").match(ce)||[];a>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Me," "):" ")){for(o=0;r=e[o++];)0>i.indexOf(" "+r+" ")&&(i+=r+" ");n.className=le.trim(i)}return this},removeClass:function(t){var e,n,i,r,o,s=0,a=this.length,l=0===arguments.length||"string"==typeof t&&t;if(le.isFunction(t))return this.each(function(e){le(this).removeClass(t.call(this,e,this.className))});if(l)for(e=(t||"").match(ce)||[];a>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Me," "):"")){for(o=0;r=e[o++];)for(;i.indexOf(" "+r+" ")>=0;)i=i.replace(" "+r+" "," ");n.className=t?le.trim(i):""}return this},toggleClass:function(t,e){var n=typeof t,i="boolean"==typeof e;return le.isFunction(t)?this.each(function(n){le(this).toggleClass(t.call(this,n,this.className,e),e)}):this.each(function(){if("string"===n)for(var r,o=0,s=le(this),a=e,l=t.match(ce)||[];r=l[o++];)a=i?a:!s.hasClass(r),s[a?"addClass":"removeClass"](r);else(n===Q||"boolean"===n)&&(this.className&&le._data(this,"__className__",this.className),this.className=this.className||t===!1?"":le._data(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(Me," ").indexOf(e)>=0)return!0;return!1},val:function(t){var n,i,r,o=this[0];return arguments.length?(r=le.isFunction(t),this.each(function(n){var o,s=le(this);1===this.nodeType&&(o=r?t.call(this,n,s.val()):t,null==o?o="":"number"==typeof o?o+="":le.isArray(o)&&(o=le.map(o,function(t){return null==t?"":t+""})),i=le.valHooks[this.type]||le.valHooks[this.nodeName.toLowerCase()],i&&"set"in i&&i.set(this,o,"value")!==e||(this.value=o))})):o?(i=le.valHooks[o.type]||le.valHooks[o.nodeName.toLowerCase()],i&&"get"in i&&(n=i.get(o,"value"))!==e?n:(n=o.value,"string"==typeof n?n.replace(Pe,""):null==n?"":n)):void 0}}),le.extend({valHooks:{option:{get:function(t){var e=t.attributes.value;return!e||e.specified?t.value:t.text}},select:{get:function(t){for(var e,n,i=t.options,r=t.selectedIndex,o="select-one"===t.type||0>r,s=o?null:[],a=o?r+1:i.length,l=0>r?a:o?r:0;a>l;l++)if(n=i[l],!(!n.selected&&l!==r||(le.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&le.nodeName(n.parentNode,"optgroup"))){if(e=le(n).val(),o)return e;s.push(e)}return s},set:function(t,e){var n=le.makeArray(e);return le(t).find("option").each(function(){this.selected=le.inArray(le(this).val(),n)>=0}),n.length||(t.selectedIndex=-1),n}}},attr:function(t,n,i){var r,o,s,a=t.nodeType;return t&&3!==a&&8!==a&&2!==a?typeof t.getAttribute===Q?le.prop(t,n,i):(o=1!==a||!le.isXMLDoc(t),o&&(n=n.toLowerCase(),r=le.attrHooks[n]||(Ae.test(n)?ke:Ce)),i===e?r&&o&&"get"in r&&null!==(s=r.get(t,n))?s:(typeof t.getAttribute!==Q&&(s=t.getAttribute(n)),null==s?e:s):null!==i?r&&o&&"set"in r&&(s=r.set(t,i,n))!==e?s:(t.setAttribute(n,i+""),i):(le.removeAttr(t,n),e)):void 0},removeAttr:function(t,e){var n,i,r=0,o=e&&e.match(ce);if(o&&1===t.nodeType)for(;n=o[r++];)i=le.propFix[n]||n,Ae.test(n)?!Oe&&He.test(n)?t[le.camelCase("default-"+n)]=t[i]=!1:t[i]=!1:le.attr(t,n,""),t.removeAttribute(Oe?n:i)},attrHooks:{type:{set:function(t,e){if(!le.support.radioValue&&"radio"===e&&le.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(t,n,i){var r,o,s,a=t.nodeType;return t&&3!==a&&8!==a&&2!==a?(s=1!==a||!le.isXMLDoc(t),s&&(n=le.propFix[n]||n,o=le.propHooks[n]),i!==e?o&&"set"in o&&(r=o.set(t,i,n))!==e?r:t[n]=i:o&&"get"in o&&null!==(r=o.get(t,n))?r:t[n]):void 0},propHooks:{tabIndex:{get:function(t){var n=t.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):Ie.test(t.nodeName)||ze.test(t.nodeName)&&t.href?0:e}}}}),ke={get:function(t,n){var i=le.prop(t,n),r="boolean"==typeof i&&t.getAttribute(n),o="boolean"==typeof i?Ne&&Oe?null!=r:He.test(n)?t[le.camelCase("default-"+n)]:!!r:t.getAttributeNode(n);return o&&o.value!==!1?n.toLowerCase():e
},set:function(t,e,n){return e===!1?le.removeAttr(t,n):Ne&&Oe||!He.test(n)?t.setAttribute(!Oe&&le.propFix[n]||n,n):t[le.camelCase("default-"+n)]=t[n]=!0,n}},Ne&&Oe||(le.attrHooks.value={get:function(t,n){var i=t.getAttributeNode(n);return le.nodeName(t,"input")?t.defaultValue:i&&i.specified?i.value:e},set:function(t,n,i){return le.nodeName(t,"input")?(t.defaultValue=n,e):Ce&&Ce.set(t,n,i)}}),Oe||(Ce=le.valHooks.button={get:function(t,n){var i=t.getAttributeNode(n);return i&&("id"===n||"name"===n||"coords"===n?""!==i.value:i.specified)?i.value:e},set:function(t,n,i){var r=t.getAttributeNode(i);return r||t.setAttributeNode(r=t.ownerDocument.createAttribute(i)),r.value=n+="","value"===i||n===t.getAttribute(i)?n:e}},le.attrHooks.contenteditable={get:Ce.get,set:function(t,e,n){Ce.set(t,""===e?!1:e,n)}},le.each(["width","height"],function(t,n){le.attrHooks[n]=le.extend(le.attrHooks[n],{set:function(t,i){return""===i?(t.setAttribute(n,"auto"),i):e}})})),le.support.hrefNormalized||(le.each(["href","src","width","height"],function(t,n){le.attrHooks[n]=le.extend(le.attrHooks[n],{get:function(t){var i=t.getAttribute(n,2);return null==i?e:i}})}),le.each(["href","src"],function(t,e){le.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}})),le.support.style||(le.attrHooks.style={get:function(t){return t.style.cssText||e},set:function(t,e){return t.style.cssText=e+""}}),le.support.optSelected||(le.propHooks.selected=le.extend(le.propHooks.selected,{get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}})),le.support.enctype||(le.propFix.enctype="encoding"),le.support.checkOn||le.each(["radio","checkbox"],function(){le.valHooks[this]={get:function(t){return null===t.getAttribute("value")?"on":t.value}}}),le.each(["radio","checkbox"],function(){le.valHooks[this]=le.extend(le.valHooks[this],{set:function(t,n){return le.isArray(n)?t.checked=le.inArray(le(t).val(),n)>=0:e}})});var Le=/^(?:input|select|textarea)$/i,De=/^key/,Re=/^(?:mouse|contextmenu)|click/,je=/^(?:focusinfocus|focusoutblur)$/,Be=/^([^.]*)(?:\.(.+)|)$/;le.event={global:{},add:function(t,n,i,r,o){var s,a,l,u,c,h,d,p,f,g,m,v=le._data(t);if(v){for(i.handler&&(u=i,i=u.handler,o=u.selector),i.guid||(i.guid=le.guid++),(a=v.events)||(a=v.events={}),(h=v.handle)||(h=v.handle=function(t){return typeof le===Q||t&&le.event.triggered===t.type?e:le.event.dispatch.apply(h.elem,arguments)},h.elem=t),n=(n||"").match(ce)||[""],l=n.length;l--;)s=Be.exec(n[l])||[],f=m=s[1],g=(s[2]||"").split(".").sort(),c=le.event.special[f]||{},f=(o?c.delegateType:c.bindType)||f,c=le.event.special[f]||{},d=le.extend({type:f,origType:m,data:r,handler:i,guid:i.guid,selector:o,needsContext:o&&le.expr.match.needsContext.test(o),namespace:g.join(".")},u),(p=a[f])||(p=a[f]=[],p.delegateCount=0,c.setup&&c.setup.call(t,r,g,h)!==!1||(t.addEventListener?t.addEventListener(f,h,!1):t.attachEvent&&t.attachEvent("on"+f,h))),c.add&&(c.add.call(t,d),d.handler.guid||(d.handler.guid=i.guid)),o?p.splice(p.delegateCount++,0,d):p.push(d),le.event.global[f]=!0;t=null}},remove:function(t,e,n,i,r){var o,s,a,l,u,c,h,d,p,f,g,m=le.hasData(t)&&le._data(t);if(m&&(c=m.events)){for(e=(e||"").match(ce)||[""],u=e.length;u--;)if(a=Be.exec(e[u])||[],p=g=a[1],f=(a[2]||"").split(".").sort(),p){for(h=le.event.special[p]||{},p=(i?h.delegateType:h.bindType)||p,d=c[p]||[],a=a[2]&&RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=o=d.length;o--;)s=d[o],!r&&g!==s.origType||n&&n.guid!==s.guid||a&&!a.test(s.namespace)||i&&i!==s.selector&&("**"!==i||!s.selector)||(d.splice(o,1),s.selector&&d.delegateCount--,h.remove&&h.remove.call(t,s));l&&!d.length&&(h.teardown&&h.teardown.call(t,f,m.handle)!==!1||le.removeEvent(t,p,m.handle),delete c[p])}else for(p in c)le.event.remove(t,p+e[u],n,i,!0);le.isEmptyObject(c)&&(delete m.handle,le._removeData(t,"events"))}},trigger:function(n,i,r,o){var s,a,l,u,c,h,d,p=[r||G],f=se.call(n,"type")?n.type:n,g=se.call(n,"namespace")?n.namespace.split("."):[];if(l=h=r=r||G,3!==r.nodeType&&8!==r.nodeType&&!je.test(f+le.event.triggered)&&(f.indexOf(".")>=0&&(g=f.split("."),f=g.shift(),g.sort()),a=0>f.indexOf(":")&&"on"+f,n=n[le.expando]?n:new le.Event(f,"object"==typeof n&&n),n.isTrigger=!0,n.namespace=g.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=e,n.target||(n.target=r),i=null==i?[n]:le.makeArray(i,[n]),c=le.event.special[f]||{},o||!c.trigger||c.trigger.apply(r,i)!==!1)){if(!o&&!c.noBubble&&!le.isWindow(r)){for(u=c.delegateType||f,je.test(u+f)||(l=l.parentNode);l;l=l.parentNode)p.push(l),h=l;h===(r.ownerDocument||G)&&p.push(h.defaultView||h.parentWindow||t)}for(d=0;(l=p[d++])&&!n.isPropagationStopped();)n.type=d>1?u:c.bindType||f,s=(le._data(l,"events")||{})[n.type]&&le._data(l,"handle"),s&&s.apply(l,i),s=a&&l[a],s&&le.acceptData(l)&&s.apply&&s.apply(l,i)===!1&&n.preventDefault();if(n.type=f,!(o||n.isDefaultPrevented()||c._default&&c._default.apply(r.ownerDocument,i)!==!1||"click"===f&&le.nodeName(r,"a")||!le.acceptData(r)||!a||!r[f]||le.isWindow(r))){h=r[a],h&&(r[a]=null),le.event.triggered=f;try{r[f]()}catch(m){}le.event.triggered=e,h&&(r[a]=h)}return n.result}},dispatch:function(t){t=le.event.fix(t);var n,i,r,o,s,a=[],l=ie.call(arguments),u=(le._data(this,"events")||{})[t.type]||[],c=le.event.special[t.type]||{};if(l[0]=t,t.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,t)!==!1){for(a=le.event.handlers.call(this,t,u),n=0;(o=a[n++])&&!t.isPropagationStopped();)for(t.currentTarget=o.elem,s=0;(r=o.handlers[s++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(r.namespace))&&(t.handleObj=r,t.data=r.data,i=((le.event.special[r.origType]||{}).handle||r.handler).apply(o.elem,l),i!==e&&(t.result=i)===!1&&(t.preventDefault(),t.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(t,n){var i,r,o,s,a=[],l=n.delegateCount,u=t.target;if(l&&u.nodeType&&(!t.button||"click"!==t.type))for(;u!=this;u=u.parentNode||this)if(1===u.nodeType&&(u.disabled!==!0||"click"!==t.type)){for(o=[],s=0;l>s;s++)r=n[s],i=r.selector+" ",o[i]===e&&(o[i]=r.needsContext?le(i,this).index(u)>=0:le.find(i,this,null,[u]).length),o[i]&&o.push(r);o.length&&a.push({elem:u,handlers:o})}return n.length>l&&a.push({elem:this,handlers:n.slice(l)}),a},fix:function(t){if(t[le.expando])return t;var e,n,i,r=t.type,o=t,s=this.fixHooks[r];for(s||(this.fixHooks[r]=s=Re.test(r)?this.mouseHooks:De.test(r)?this.keyHooks:{}),i=s.props?this.props.concat(s.props):this.props,t=new le.Event(o),e=i.length;e--;)n=i[e],t[n]=o[n];return t.target||(t.target=o.srcElement||G),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,s.filter?s.filter(t,o):t},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,n){var i,r,o,s=n.button,a=n.fromElement;return null==t.pageX&&null!=n.clientX&&(r=t.target.ownerDocument||G,o=r.documentElement,i=r.body,t.pageX=n.clientX+(o&&o.scrollLeft||i&&i.scrollLeft||0)-(o&&o.clientLeft||i&&i.clientLeft||0),t.pageY=n.clientY+(o&&o.scrollTop||i&&i.scrollTop||0)-(o&&o.clientTop||i&&i.clientTop||0)),!t.relatedTarget&&a&&(t.relatedTarget=a===t.target?n.toElement:a),t.which||s===e||(t.which=1&s?1:2&s?3:4&s?2:0),t}},special:{load:{noBubble:!0},click:{trigger:function(){return le.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):e}},focus:{trigger:function(){if(this!==G.activeElement&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){return this===G.activeElement&&this.blur?(this.blur(),!1):e},delegateType:"focusout"},beforeunload:{postDispatch:function(t){t.result!==e&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,i){var r=le.extend(new le.Event,n,{type:t,isSimulated:!0,originalEvent:{}});i?le.event.trigger(r,null,e):le.event.dispatch.call(e,r),r.isDefaultPrevented()&&n.preventDefault()}},le.removeEvent=G.removeEventListener?function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)}:function(t,e,n){var i="on"+e;t.detachEvent&&(typeof t[i]===Q&&(t[i]=null),t.detachEvent(i,n))},le.Event=function(t,n){return this instanceof le.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||t.returnValue===!1||t.getPreventDefault&&t.getPreventDefault()?l:u):this.type=t,n&&le.extend(this,n),this.timeStamp=t&&t.timeStamp||le.now(),this[le.expando]=!0,e):new le.Event(t,n)},le.Event.prototype={isDefaultPrevented:u,isPropagationStopped:u,isImmediatePropagationStopped:u,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=l,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=l,t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=l,this.stopPropagation()}},le.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,e){le.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,r=t.relatedTarget,o=t.handleObj;return(!r||r!==i&&!le.contains(i,r))&&(t.type=o.origType,n=o.handler.apply(this,arguments),t.type=e),n}}}),le.support.submitBubbles||(le.event.special.submit={setup:function(){return le.nodeName(this,"form")?!1:(le.event.add(this,"click._submit keypress._submit",function(t){var n=t.target,i=le.nodeName(n,"input")||le.nodeName(n,"button")?n.form:e;i&&!le._data(i,"submitBubbles")&&(le.event.add(i,"submit._submit",function(t){t._submit_bubble=!0}),le._data(i,"submitBubbles",!0))}),e)},postDispatch:function(t){t._submit_bubble&&(delete t._submit_bubble,this.parentNode&&!t.isTrigger&&le.event.simulate("submit",this.parentNode,t,!0))},teardown:function(){return le.nodeName(this,"form")?!1:(le.event.remove(this,"._submit"),e)}}),le.support.changeBubbles||(le.event.special.change={setup:function(){return Le.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(le.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),le.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1),le.event.simulate("change",this,t,!0)})),!1):(le.event.add(this,"beforeactivate._change",function(t){var e=t.target;Le.test(e.nodeName)&&!le._data(e,"changeBubbles")&&(le.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||le.event.simulate("change",this.parentNode,t,!0)}),le._data(e,"changeBubbles",!0))}),e)},handle:function(t){var n=t.target;return this!==n||t.isSimulated||t.isTrigger||"radio"!==n.type&&"checkbox"!==n.type?t.handleObj.handler.apply(this,arguments):e},teardown:function(){return le.event.remove(this,"._change"),!Le.test(this.nodeName)}}),le.support.focusinBubbles||le.each({focus:"focusin",blur:"focusout"},function(t,e){var n=0,i=function(t){le.event.simulate(e,t.target,le.event.fix(t),!0)};le.event.special[e]={setup:function(){0===n++&&G.addEventListener(t,i,!0)},teardown:function(){0===--n&&G.removeEventListener(t,i,!0)}}}),le.fn.extend({on:function(t,n,i,r,o){var s,a;if("object"==typeof t){"string"!=typeof n&&(i=i||n,n=e);for(s in t)this.on(s,n,i,t[s],o);return this}if(null==i&&null==r?(r=n,i=n=e):null==r&&("string"==typeof n?(r=i,i=e):(r=i,i=n,n=e)),r===!1)r=u;else if(!r)return this;return 1===o&&(a=r,r=function(t){return le().off(t),a.apply(this,arguments)},r.guid=a.guid||(a.guid=le.guid++)),this.each(function(){le.event.add(this,t,r,i,n)})},one:function(t,e,n,i){return this.on(t,e,n,i,1)},off:function(t,n,i){var r,o;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,le(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(o in t)this.off(o,n,t[o]);return this}return(n===!1||"function"==typeof n)&&(i=n,n=e),i===!1&&(i=u),this.each(function(){le.event.remove(this,t,i,n)})},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},trigger:function(t,e){return this.each(function(){le.event.trigger(t,e,this)})},triggerHandler:function(t,n){var i=this[0];return i?le.event.trigger(t,n,i,!0):e}}),function(t,e){function n(t){return fe.test(t+"")}function i(){var t,e=[];return t=function(n,i){return e.push(n+=" ")>_.cacheLength&&delete t[e.shift()],t[n]=i}}function r(t){return t[j]=!0,t}function o(t){var e=z.createElement("div");try{return t(e)}catch(n){return!1}finally{e=null}}function s(t,e,n,i){var r,o,s,a,l,u,c,p,f,g;if((e?e.ownerDocument||e:B)!==z&&I(e),e=e||z,n=n||[],!t||"string"!=typeof t)return n;if(1!==(a=e.nodeType)&&9!==a)return[];if(!H&&!i){if(r=ge.exec(t))if(s=r[1]){if(9===a){if(o=e.getElementById(s),!o||!o.parentNode)return n;if(o.id===s)return n.push(o),n}else if(e.ownerDocument&&(o=e.ownerDocument.getElementById(s))&&D(e,o)&&o.id===s)return n.push(o),n}else{if(r[2])return Y.apply(n,K.call(e.getElementsByTagName(t),0)),n;if((s=r[3])&&F.getByClassName&&e.getElementsByClassName)return Y.apply(n,K.call(e.getElementsByClassName(s),0)),n}if(F.qsa&&!O.test(t)){if(c=!0,p=j,f=e,g=9===a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(u=h(t),(c=e.getAttribute("id"))?p=c.replace(ye,"\\$&"):e.setAttribute("id",p),p="[id='"+p+"'] ",l=u.length;l--;)u[l]=p+d(u[l]);f=pe.test(t)&&e.parentNode||e,g=u.join(",")}if(g)try{return Y.apply(n,K.call(f.querySelectorAll(g),0)),n}catch(m){}finally{c||e.removeAttribute("id")}}}return w(t.replace(se,"$1"),e,n,i)}function a(t,e){var n=e&&t,i=n&&(~e.sourceIndex||G)-(~t.sourceIndex||G);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function l(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function u(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function c(t){return r(function(e){return e=+e,r(function(n,i){for(var r,o=t([],n.length,e),s=o.length;s--;)n[r=o[s]]&&(n[r]=!(i[r]=n[r]))})})}function h(t,e){var n,i,r,o,a,l,u,c=V[t+" "];if(c)return e?0:c.slice(0);for(a=t,l=[],u=_.preFilter;a;){(!n||(i=ae.exec(a)))&&(i&&(a=a.slice(i[0].length)||a),l.push(r=[])),n=!1,(i=ue.exec(a))&&(n=i.shift(),r.push({value:n,type:i[0].replace(se," ")}),a=a.slice(n.length));for(o in _.filter)!(i=de[o].exec(a))||u[o]&&!(i=u[o](i))||(n=i.shift(),r.push({value:n,type:o,matches:i}),a=a.slice(n.length));if(!n)break}return e?a.length:a?s.error(t):V(t,l).slice(0)}function d(t){for(var e=0,n=t.length,i="";n>e;e++)i+=t[e].value;return i}function p(t,e,n){var i=e.dir,r=n&&"parentNode"===i,o=U++;return e.first?function(e,n,o){for(;e=e[i];)if(1===e.nodeType||r)return t(e,n,o)}:function(e,n,s){var a,l,u,c=W+" "+o;if(s){for(;e=e[i];)if((1===e.nodeType||r)&&t(e,n,s))return!0}else for(;e=e[i];)if(1===e.nodeType||r)if(u=e[j]||(e[j]={}),(l=u[i])&&l[0]===c){if((a=l[1])===!0||a===S)return a===!0}else if(l=u[i]=[c],l[1]=t(e,n,s)||S,l[1]===!0)return!0}}function f(t){return t.length>1?function(e,n,i){for(var r=t.length;r--;)if(!t[r](e,n,i))return!1;return!0}:t[0]}function g(t,e,n,i,r){for(var o,s=[],a=0,l=t.length,u=null!=e;l>a;a++)(o=t[a])&&(!n||n(o,i,r))&&(s.push(o),u&&e.push(a));return s}function m(t,e,n,i,o,s){return i&&!i[j]&&(i=m(i)),o&&!o[j]&&(o=m(o,s)),r(function(r,s,a,l){var u,c,h,d=[],p=[],f=s.length,m=r||b(e||"*",a.nodeType?[a]:a,[]),v=!t||!r&&e?m:g(m,d,t,a,l),y=n?o||(r?t:f||i)?[]:s:v;if(n&&n(v,y,a,l),i)for(u=g(y,p),i(u,[],a,l),c=u.length;c--;)(h=u[c])&&(y[p[c]]=!(v[p[c]]=h));if(r){if(o||t){if(o){for(u=[],c=y.length;c--;)(h=y[c])&&u.push(v[c]=h);o(null,y=[],u,l)}for(c=y.length;c--;)(h=y[c])&&(u=o?J.call(r,h):d[c])>-1&&(r[u]=!(s[u]=h))}}else y=g(y===s?y.splice(f,y.length):y),o?o(null,s,y,l):Y.apply(s,y)})}function v(t){for(var e,n,i,r=t.length,o=_.relative[t[0].type],s=o||_.relative[" "],a=o?1:0,l=p(function(t){return t===e},s,!0),u=p(function(t){return J.call(e,t)>-1},s,!0),c=[function(t,n,i){return!o&&(i||n!==P)||((e=n).nodeType?l(t,n,i):u(t,n,i))}];r>a;a++)if(n=_.relative[t[a].type])c=[p(f(c),n)];else{if(n=_.filter[t[a].type].apply(null,t[a].matches),n[j]){for(i=++a;r>i&&!_.relative[t[i].type];i++);return m(a>1&&f(c),a>1&&d(t.slice(0,a-1)).replace(se,"$1"),n,i>a&&v(t.slice(a,i)),r>i&&v(t=t.slice(i)),r>i&&d(t))}c.push(n)}return f(c)}function y(t,e){var n=0,i=e.length>0,o=t.length>0,a=function(r,a,l,u,c){var h,d,p,f=[],m=0,v="0",y=r&&[],b=null!=c,w=P,x=r||o&&_.find.TAG("*",c&&a.parentNode||a),T=W+=null==w?1:Math.random()||.1;for(b&&(P=a!==z&&a,S=n);null!=(h=x[v]);v++){if(o&&h){for(d=0;p=t[d++];)if(p(h,a,l)){u.push(h);break}b&&(W=T,S=++n)}i&&((h=!p&&h)&&m--,r&&y.push(h))}if(m+=v,i&&v!==m){for(d=0;p=e[d++];)p(y,f,a,l);if(r){if(m>0)for(;v--;)y[v]||f[v]||(f[v]=X.call(u));f=g(f)}Y.apply(u,f),b&&!r&&f.length>0&&m+e.length>1&&s.uniqueSort(u)}return b&&(W=T,P=w),y};return i?r(a):a}function b(t,e,n){for(var i=0,r=e.length;r>i;i++)s(t,e[i],n);return n}function w(t,e,n,i){var r,o,s,a,l,u=h(t);if(!i&&1===u.length){if(o=u[0]=u[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&9===e.nodeType&&!H&&_.relative[o[1].type]){if(e=_.find.ID(s.matches[0].replace(we,xe),e)[0],!e)return n;t=t.slice(o.shift().value.length)}for(r=de.needsContext.test(t)?0:o.length;r--&&(s=o[r],!_.relative[a=s.type]);)if((l=_.find[a])&&(i=l(s.matches[0].replace(we,xe),pe.test(o[0].type)&&e.parentNode||e))){if(o.splice(r,1),t=i.length&&d(o),!t)return Y.apply(n,K.call(i,0)),n;break}}return k(t,u)(i,e,H,n,pe.test(t)),n}function x(){}var T,S,_,E,C,k,M,P,I,z,A,H,O,N,L,D,R,j="sizzle"+-new Date,B=t.document,F={},W=0,U=0,q=i(),V=i(),$=i(),Q=typeof e,G=1<<31,Z=[],X=Z.pop,Y=Z.push,K=Z.slice,J=Z.indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(this[e]===t)return e;return-1},te="[\\x20\\t\\r\\n\\f]",ee="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ne=ee.replace("w","w#"),ie="([*^$|!~]?=)",re="\\["+te+"*("+ee+")"+te+"*(?:"+ie+te+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ne+")|)|)"+te+"*\\]",oe=":("+ee+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+re.replace(3,8)+")*)|.*)\\)|)",se=RegExp("^"+te+"+|((?:^|[^\\\\])(?:\\\\.)*)"+te+"+$","g"),ae=RegExp("^"+te+"*,"+te+"*"),ue=RegExp("^"+te+"*([\\x20\\t\\r\\n\\f>+~])"+te+"*"),ce=RegExp(oe),he=RegExp("^"+ne+"$"),de={ID:RegExp("^#("+ee+")"),CLASS:RegExp("^\\.("+ee+")"),NAME:RegExp("^\\[name=['\"]?("+ee+")['\"]?\\]"),TAG:RegExp("^("+ee.replace("w","w*")+")"),ATTR:RegExp("^"+re),PSEUDO:RegExp("^"+oe),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+te+"*(even|odd|(([+-]|)(\\d*)n|)"+te+"*(?:([+-]|)"+te+"*(\\d+)|))"+te+"*\\)|)","i"),needsContext:RegExp("^"+te+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+te+"*((?:-\\d)?\\d*)"+te+"*\\)|)(?=[^-]|$)","i")},pe=/[\x20\t\r\n\f]*[+~]/,fe=/^[^{]+\{\s*\[native code/,ge=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,me=/^(?:input|select|textarea|button)$/i,ve=/^h\d$/i,ye=/'|\\/g,be=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,we=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,xe=function(t,e){var n="0x"+e-65536;return n!==n?e:0>n?String.fromCharCode(n+65536):String.fromCharCode(55296|n>>10,56320|1023&n)};try{K.call(B.documentElement.childNodes,0)[0].nodeType}catch(Te){K=function(t){for(var e,n=[];e=this[t++];)n.push(e);return n}}C=s.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},I=s.setDocument=function(t){var i=t?t.ownerDocument||t:B;return i!==z&&9===i.nodeType&&i.documentElement?(z=i,A=i.documentElement,H=C(i),F.tagNameNoComments=o(function(t){return t.appendChild(i.createComment("")),!t.getElementsByTagName("*").length}),F.attributes=o(function(t){t.innerHTML="<select></select>";var e=typeof t.lastChild.getAttribute("multiple");return"boolean"!==e&&"string"!==e}),F.getByClassName=o(function(t){return t.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",t.getElementsByClassName&&t.getElementsByClassName("e").length?(t.lastChild.className="e",2===t.getElementsByClassName("e").length):!1}),F.getByName=o(function(t){t.id=j+0,t.innerHTML="<a name='"+j+"'></a><div name='"+j+"'></div>",A.insertBefore(t,A.firstChild);var e=i.getElementsByName&&i.getElementsByName(j).length===2+i.getElementsByName(j+0).length;return F.getIdNotName=!i.getElementById(j),A.removeChild(t),e}),_.attrHandle=o(function(t){return t.innerHTML="<a href='#'></a>",t.firstChild&&typeof t.firstChild.getAttribute!==Q&&"#"===t.firstChild.getAttribute("href")})?{}:{href:function(t){return t.getAttribute("href",2)},type:function(t){return t.getAttribute("type")}},F.getIdNotName?(_.find.ID=function(t,e){if(typeof e.getElementById!==Q&&!H){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},_.filter.ID=function(t){var e=t.replace(we,xe);return function(t){return t.getAttribute("id")===e}}):(_.find.ID=function(t,n){if(typeof n.getElementById!==Q&&!H){var i=n.getElementById(t);return i?i.id===t||typeof i.getAttributeNode!==Q&&i.getAttributeNode("id").value===t?[i]:e:[]}},_.filter.ID=function(t){var e=t.replace(we,xe);return function(t){var n=typeof t.getAttributeNode!==Q&&t.getAttributeNode("id");return n&&n.value===e}}),_.find.TAG=F.tagNameNoComments?function(t,n){return typeof n.getElementsByTagName!==Q?n.getElementsByTagName(t):e}:function(t,e){var n,i=[],r=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},_.find.NAME=F.getByName&&function(t,n){return typeof n.getElementsByName!==Q?n.getElementsByName(name):e},_.find.CLASS=F.getByClassName&&function(t,n){return typeof n.getElementsByClassName===Q||H?e:n.getElementsByClassName(t)},N=[],O=[":focus"],(F.qsa=n(i.querySelectorAll))&&(o(function(t){t.innerHTML="<select><option selected=''></option></select>",t.querySelectorAll("[selected]").length||O.push("\\["+te+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),t.querySelectorAll(":checked").length||O.push(":checked")}),o(function(t){t.innerHTML="<input type='hidden' i=''/>",t.querySelectorAll("[i^='']").length&&O.push("[*^$]="+te+"*(?:\"\"|'')"),t.querySelectorAll(":enabled").length||O.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),O.push(",.*:")})),(F.matchesSelector=n(L=A.matchesSelector||A.mozMatchesSelector||A.webkitMatchesSelector||A.oMatchesSelector||A.msMatchesSelector))&&o(function(t){F.disconnectedMatch=L.call(t,"div"),L.call(t,"[s!='']:x"),N.push("!=",oe)}),O=RegExp(O.join("|")),N=RegExp(N.join("|")),D=n(A.contains)||A.compareDocumentPosition?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},R=A.compareDocumentPosition?function(t,e){var n;return t===e?(M=!0,0):(n=e.compareDocumentPosition&&t.compareDocumentPosition&&t.compareDocumentPosition(e))?1&n||t.parentNode&&11===t.parentNode.nodeType?t===i||D(B,t)?-1:e===i||D(B,e)?1:0:4&n?-1:1:t.compareDocumentPosition?-1:1}:function(t,e){var n,r=0,o=t.parentNode,s=e.parentNode,l=[t],u=[e];if(t===e)return M=!0,0;if(!o||!s)return t===i?-1:e===i?1:o?-1:s?1:0;if(o===s)return a(t,e);for(n=t;n=n.parentNode;)l.unshift(n);for(n=e;n=n.parentNode;)u.unshift(n);for(;l[r]===u[r];)r++;return r?a(l[r],u[r]):l[r]===B?-1:u[r]===B?1:0},M=!1,[0,0].sort(R),F.detectDuplicates=M,z):z},s.matches=function(t,e){return s(t,null,null,e)},s.matchesSelector=function(t,e){if((t.ownerDocument||t)!==z&&I(t),e=e.replace(be,"='$1']"),!(!F.matchesSelector||H||N&&N.test(e)||O.test(e)))try{var n=L.call(t,e);if(n||F.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(i){}return s(e,z,null,[t]).length>0},s.contains=function(t,e){return(t.ownerDocument||t)!==z&&I(t),D(t,e)},s.attr=function(t,e){var n;return(t.ownerDocument||t)!==z&&I(t),H||(e=e.toLowerCase()),(n=_.attrHandle[e])?n(t):H||F.attributes?t.getAttribute(e):((n=t.getAttributeNode(e))||t.getAttribute(e))&&t[e]===!0?e:n&&n.specified?n.value:null},s.error=function(t){throw Error("Syntax error, unrecognized expression: "+t)},s.uniqueSort=function(t){var e,n=[],i=1,r=0;if(M=!F.detectDuplicates,t.sort(R),M){for(;e=t[i];i++)e===t[i-1]&&(r=n.push(i));for(;r--;)t.splice(n[r],1)}return t},E=s.getText=function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=E(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i];i++)n+=E(e);return n},_=s.selectors={cacheLength:50,createPseudo:r,match:de,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(we,xe),t[3]=(t[4]||t[5]||"").replace(we,xe),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||s.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&s.error(t[0]),t},PSEUDO:function(t){var e,n=!t[5]&&t[2];return de.CHILD.test(t[0])?null:(t[4]?t[2]=t[4]:n&&ce.test(n)&&(e=h(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){return"*"===t?function(){return!0}:(t=t.replace(we,xe).toLowerCase(),function(e){return e.nodeName&&e.nodeName.toLowerCase()===t})},CLASS:function(t){var e=q[t+" "];return e||(e=RegExp("(^|"+te+")"+t+"("+te+"|$)"))&&q(t,function(t){return e.test(t.className||typeof t.getAttribute!==Q&&t.getAttribute("class")||"")})},ATTR:function(t,e,n){return function(i){var r=s.attr(i,t);return null==r?"!="===e:e?(r+="","="===e?r===n:"!="===e?r!==n:"^="===e?n&&0===r.indexOf(n):"*="===e?n&&r.indexOf(n)>-1:"$="===e?n&&r.slice(-n.length)===n:"~="===e?(" "+r+" ").indexOf(n)>-1:"|="===e?r===n||r.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(t,e,n,i,r){var o="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===i&&0===r?function(t){return!!t.parentNode}:function(e,n,l){var u,c,h,d,p,f,g=o!==s?"nextSibling":"previousSibling",m=e.parentNode,v=a&&e.nodeName.toLowerCase(),y=!l&&!a;if(m){if(o){for(;g;){for(h=e;h=h[g];)if(a?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;f=g="only"===t&&!f&&"nextSibling"}return!0}if(f=[s?m.firstChild:m.lastChild],s&&y){for(c=m[j]||(m[j]={}),u=c[t]||[],p=u[0]===W&&u[1],d=u[0]===W&&u[2],h=p&&m.childNodes[p];h=++p&&h&&h[g]||(d=p=0)||f.pop();)if(1===h.nodeType&&++d&&h===e){c[t]=[W,p,d];break}}else if(y&&(u=(e[j]||(e[j]={}))[t])&&u[0]===W)d=u[1];else for(;(h=++p&&h&&h[g]||(d=p=0)||f.pop())&&((a?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++d||(y&&((h[j]||(h[j]={}))[t]=[W,d]),h!==e)););return d-=r,d===i||0===d%i&&d/i>=0}}},PSEUDO:function(t,e){var n,i=_.pseudos[t]||_.setFilters[t.toLowerCase()]||s.error("unsupported pseudo: "+t);return i[j]?i(e):i.length>1?(n=[t,t,"",e],_.setFilters.hasOwnProperty(t.toLowerCase())?r(function(t,n){for(var r,o=i(t,e),s=o.length;s--;)r=J.call(t,o[s]),t[r]=!(n[r]=o[s])}):function(t){return i(t,0,n)}):i}},pseudos:{not:r(function(t){var e=[],n=[],i=k(t.replace(se,"$1"));return i[j]?r(function(t,e,n,r){for(var o,s=i(t,null,r,[]),a=t.length;a--;)(o=s[a])&&(t[a]=!(e[a]=o))}):function(t,r,o){return e[0]=t,i(e,null,o,n),!n.pop()}}),has:r(function(t){return function(e){return s(t,e).length>0}}),contains:r(function(t){return function(e){return(e.textContent||e.innerText||E(e)).indexOf(t)>-1}}),lang:r(function(t){return he.test(t||"")||s.error("unsupported lang: "+t),t=t.replace(we,xe).toLowerCase(),function(e){var n;do if(n=H?e.getAttribute("xml:lang")||e.getAttribute("lang"):e.lang)return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===A},focus:function(t){return t===z.activeElement&&(!z.hasFocus||z.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeName>"@"||3===t.nodeType||4===t.nodeType)return!1;return!0},parent:function(t){return!_.pseudos.empty(t)},header:function(t){return ve.test(t.nodeName)},input:function(t){return me.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||e.toLowerCase()===t.type)},first:c(function(){return[0]}),last:c(function(t,e){return[e-1]}),eq:c(function(t,e,n){return[0>n?n+e:n]}),even:c(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:c(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:c(function(t,e,n){for(var i=0>n?n+e:n;--i>=0;)t.push(i);return t}),gt:c(function(t,e,n){for(var i=0>n?n+e:n;e>++i;)t.push(i);return t})}};for(T in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_.pseudos[T]=l(T);for(T in{submit:!0,reset:!0})_.pseudos[T]=u(T);k=s.compile=function(t,e){var n,i=[],r=[],o=$[t+" "];if(!o){for(e||(e=h(t)),n=e.length;n--;)o=v(e[n]),o[j]?i.push(o):r.push(o);o=$(t,y(r,i))}return o},_.pseudos.nth=_.pseudos.eq,_.filters=x.prototype=_.pseudos,_.setFilters=new x,I(),s.attr=le.attr,le.find=s,le.expr=s.selectors,le.expr[":"]=le.expr.pseudos,le.unique=s.uniqueSort,le.text=s.getText,le.isXMLDoc=s.isXML,le.contains=s.contains}(t);var Fe=/Until$/,We=/^(?:parents|prev(?:Until|All))/,Ue=/^.[^:#\[\.,]*$/,qe=le.expr.match.needsContext,Ve={children:!0,contents:!0,next:!0,prev:!0};le.fn.extend({find:function(t){var e,n,i,r=this.length;if("string"!=typeof t)return i=this,this.pushStack(le(t).filter(function(){for(e=0;r>e;e++)if(le.contains(i[e],this))return!0}));for(n=[],e=0;r>e;e++)le.find(t,this[e],n);return n=this.pushStack(r>1?le.unique(n):n),n.selector=(this.selector?this.selector+" ":"")+t,n},has:function(t){var e,n=le(t,this),i=n.length;return this.filter(function(){for(e=0;i>e;e++)if(le.contains(this,n[e]))return!0})},not:function(t){return this.pushStack(h(this,t,!1))},filter:function(t){return this.pushStack(h(this,t,!0))},is:function(t){return!!t&&("string"==typeof t?qe.test(t)?le(t,this.context).index(this[0])>=0:le.filter(t,this).length>0:this.filter(t).length>0)},closest:function(t,e){for(var n,i=0,r=this.length,o=[],s=qe.test(t)||"string"!=typeof t?le(t,e||this.context):0;r>i;i++)for(n=this[i];n&&n.ownerDocument&&n!==e&&11!==n.nodeType;){if(s?s.index(n)>-1:le.find.matchesSelector(n,t)){o.push(n);break}n=n.parentNode}return this.pushStack(o.length>1?le.unique(o):o)},index:function(t){return t?"string"==typeof t?le.inArray(this[0],le(t)):le.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){var n="string"==typeof t?le(t,e):le.makeArray(t&&t.nodeType?[t]:t),i=le.merge(this.get(),n);return this.pushStack(le.unique(i))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),le.fn.andSelf=le.fn.addBack,le.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return le.dir(t,"parentNode")},parentsUntil:function(t,e,n){return le.dir(t,"parentNode",n)},next:function(t){return c(t,"nextSibling")},prev:function(t){return c(t,"previousSibling")},nextAll:function(t){return le.dir(t,"nextSibling")},prevAll:function(t){return le.dir(t,"previousSibling")
},nextUntil:function(t,e,n){return le.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return le.dir(t,"previousSibling",n)},siblings:function(t){return le.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return le.sibling(t.firstChild)},contents:function(t){return le.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:le.merge([],t.childNodes)}},function(t,e){le.fn[t]=function(n,i){var r=le.map(this,e,n);return Fe.test(t)||(i=n),i&&"string"==typeof i&&(r=le.filter(i,r)),r=this.length>1&&!Ve[t]?le.unique(r):r,this.length>1&&We.test(t)&&(r=r.reverse()),this.pushStack(r)}}),le.extend({filter:function(t,e,n){return n&&(t=":not("+t+")"),1===e.length?le.find.matchesSelector(e[0],t)?[e[0]]:[]:le.find.matches(t,e)},dir:function(t,n,i){for(var r=[],o=t[n];o&&9!==o.nodeType&&(i===e||1!==o.nodeType||!le(o).is(i));)1===o.nodeType&&r.push(o),o=o[n];return r},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}});var $e="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Qe=/ jQuery\d+="(?:null|\d+)"/g,Ge=RegExp("<(?:"+$e+")[\\s/>]","i"),Ze=/^\s+/,Xe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ye=/<([\w:]+)/,Ke=/<tbody/i,Je=/<|&#?\w+;/,tn=/<(?:script|style|link)/i,en=/^(?:checkbox|radio)$/i,nn=/checked\s*(?:[^=]|=\s*.checked.)/i,rn=/^$|\/(?:java|ecma)script/i,on=/^true\/(.*)/,sn=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,an={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:le.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},ln=d(G),un=ln.appendChild(G.createElement("div"));an.optgroup=an.option,an.tbody=an.tfoot=an.colgroup=an.caption=an.thead,an.th=an.td,le.fn.extend({text:function(t){return le.access(this,function(t){return t===e?le.text(this):this.empty().append((this[0]&&this[0].ownerDocument||G).createTextNode(t))},null,t,arguments.length)},wrapAll:function(t){if(le.isFunction(t))return this.each(function(e){le(this).wrapAll(t.call(this,e))});if(this[0]){var e=le(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(t){return le.isFunction(t)?this.each(function(e){le(this).wrapInner(t.call(this,e))}):this.each(function(){var e=le(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=le.isFunction(t);return this.each(function(n){le(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){le.nodeName(this,"body")||le(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(t){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.appendChild(t)})},prepend:function(){return this.domManip(arguments,!0,function(t){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.insertBefore(t,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,!1,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,i=0;null!=(n=this[i]);i++)(!t||le.filter(t,[n]).length>0)&&(e||1!==n.nodeType||le.cleanData(b(n)),n.parentNode&&(e&&le.contains(n.ownerDocument,n)&&m(b(n,"script")),n.parentNode.removeChild(n)));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&le.cleanData(b(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&le.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return le.clone(this,t,e)})},html:function(t){return le.access(this,function(t){var n=this[0]||{},i=0,r=this.length;if(t===e)return 1===n.nodeType?n.innerHTML.replace(Qe,""):e;if(!("string"!=typeof t||tn.test(t)||!le.support.htmlSerialize&&Ge.test(t)||!le.support.leadingWhitespace&&Ze.test(t)||an[(Ye.exec(t)||["",""])[1].toLowerCase()])){t=t.replace(Xe,"<$1></$2>");try{for(;r>i;i++)n=this[i]||{},1===n.nodeType&&(le.cleanData(b(n,!1)),n.innerHTML=t);n=0}catch(o){}}n&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(t){var e=le.isFunction(t);return e||"string"==typeof t||(t=le(t).not(this).detach()),this.domManip([t],!0,function(t){var e=this.nextSibling,n=this.parentNode;n&&(le(this).remove(),n.insertBefore(t,e))})},detach:function(t){return this.remove(t,!0)},domManip:function(t,n,i){t=ee.apply([],t);var r,o,s,a,l,u,c=0,h=this.length,d=this,m=h-1,v=t[0],y=le.isFunction(v);if(y||!(1>=h||"string"!=typeof v||le.support.checkClone)&&nn.test(v))return this.each(function(r){var o=d.eq(r);y&&(t[0]=v.call(this,r,n?o.html():e)),o.domManip(t,n,i)});if(h&&(u=le.buildFragment(t,this[0].ownerDocument,!1,this),r=u.firstChild,1===u.childNodes.length&&(u=r),r)){for(n=n&&le.nodeName(r,"tr"),a=le.map(b(u,"script"),f),s=a.length;h>c;c++)o=u,c!==m&&(o=le.clone(o,!0,!0),s&&le.merge(a,b(o,"script"))),i.call(n&&le.nodeName(this[c],"table")?p(this[c],"tbody"):this[c],o,c);if(s)for(l=a[a.length-1].ownerDocument,le.map(a,g),c=0;s>c;c++)o=a[c],rn.test(o.type||"")&&!le._data(o,"globalEval")&&le.contains(l,o)&&(o.src?le.ajax({url:o.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):le.globalEval((o.text||o.textContent||o.innerHTML||"").replace(sn,"")));u=r=null}return this}}),le.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){le.fn[t]=function(t){for(var n,i=0,r=[],o=le(t),s=o.length-1;s>=i;i++)n=i===s?this:this.clone(!0),le(o[i])[e](n),ne.apply(r,n.get());return this.pushStack(r)}}),le.extend({clone:function(t,e,n){var i,r,o,s,a,l=le.contains(t.ownerDocument,t);if(le.support.html5Clone||le.isXMLDoc(t)||!Ge.test("<"+t.nodeName+">")?o=t.cloneNode(!0):(un.innerHTML=t.outerHTML,un.removeChild(o=un.firstChild)),!(le.support.noCloneEvent&&le.support.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||le.isXMLDoc(t)))for(i=b(o),a=b(t),s=0;null!=(r=a[s]);++s)i[s]&&y(r,i[s]);if(e)if(n)for(a=a||b(t),i=i||b(o),s=0;null!=(r=a[s]);s++)v(r,i[s]);else v(t,o);return i=b(o,"script"),i.length>0&&m(i,!l&&b(t,"script")),i=a=r=null,o},buildFragment:function(t,e,n,i){for(var r,o,s,a,l,u,c,h=t.length,p=d(e),f=[],g=0;h>g;g++)if(o=t[g],o||0===o)if("object"===le.type(o))le.merge(f,o.nodeType?[o]:o);else if(Je.test(o)){for(a=a||p.appendChild(e.createElement("div")),l=(Ye.exec(o)||["",""])[1].toLowerCase(),c=an[l]||an._default,a.innerHTML=c[1]+o.replace(Xe,"<$1></$2>")+c[2],r=c[0];r--;)a=a.lastChild;if(!le.support.leadingWhitespace&&Ze.test(o)&&f.push(e.createTextNode(Ze.exec(o)[0])),!le.support.tbody)for(o="table"!==l||Ke.test(o)?"<table>"!==c[1]||Ke.test(o)?0:a:a.firstChild,r=o&&o.childNodes.length;r--;)le.nodeName(u=o.childNodes[r],"tbody")&&!u.childNodes.length&&o.removeChild(u);for(le.merge(f,a.childNodes),a.textContent="";a.firstChild;)a.removeChild(a.firstChild);a=p.lastChild}else f.push(e.createTextNode(o));for(a&&p.removeChild(a),le.support.appendChecked||le.grep(b(f,"input"),w),g=0;o=f[g++];)if((!i||-1===le.inArray(o,i))&&(s=le.contains(o.ownerDocument,o),a=b(p.appendChild(o),"script"),s&&m(a),n))for(r=0;o=a[r++];)rn.test(o.type||"")&&n.push(o);return a=null,p},cleanData:function(t,e){for(var n,i,r,o,s=0,a=le.expando,l=le.cache,u=le.support.deleteExpando,c=le.event.special;null!=(n=t[s]);s++)if((e||le.acceptData(n))&&(r=n[a],o=r&&l[r])){if(o.events)for(i in o.events)c[i]?le.event.remove(n,i):le.removeEvent(n,i,o.handle);l[r]&&(delete l[r],u?delete n[a]:typeof n.removeAttribute!==Q?n.removeAttribute(a):n[a]=null,J.push(r))}}});var cn,hn,dn,pn=/alpha\([^)]*\)/i,fn=/opacity\s*=\s*([^)]*)/,gn=/^(top|right|bottom|left)$/,mn=/^(none|table(?!-c[ea]).+)/,vn=/^margin/,yn=RegExp("^("+ue+")(.*)$","i"),bn=RegExp("^("+ue+")(?!px)[a-z%]+$","i"),wn=RegExp("^([+-])=("+ue+")","i"),xn={BODY:"block"},Tn={position:"absolute",visibility:"hidden",display:"block"},Sn={letterSpacing:0,fontWeight:400},_n=["Top","Right","Bottom","Left"],En=["Webkit","O","Moz","ms"];le.fn.extend({css:function(t,n){return le.access(this,function(t,n,i){var r,o,s={},a=0;if(le.isArray(n)){for(o=hn(t),r=n.length;r>a;a++)s[n[a]]=le.css(t,n[a],!1,o);return s}return i!==e?le.style(t,n,i):le.css(t,n)},t,n,arguments.length>1)},show:function(){return S(this,!0)},hide:function(){return S(this)},toggle:function(t){var e="boolean"==typeof t;return this.each(function(){(e?t:T(this))?le(this).show():le(this).hide()})}}),le.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=dn(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":le.support.cssFloat?"cssFloat":"styleFloat"},style:function(t,n,i,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,s,a,l=le.camelCase(n),u=t.style;if(n=le.cssProps[l]||(le.cssProps[l]=x(u,l)),a=le.cssHooks[n]||le.cssHooks[l],i===e)return a&&"get"in a&&(o=a.get(t,!1,r))!==e?o:u[n];if(s=typeof i,"string"===s&&(o=wn.exec(i))&&(i=(o[1]+1)*o[2]+parseFloat(le.css(t,n)),s="number"),!(null==i||"number"===s&&isNaN(i)||("number"!==s||le.cssNumber[l]||(i+="px"),le.support.clearCloneStyle||""!==i||0!==n.indexOf("background")||(u[n]="inherit"),a&&"set"in a&&(i=a.set(t,i,r))===e)))try{u[n]=i}catch(c){}}},css:function(t,n,i,r){var o,s,a,l=le.camelCase(n);return n=le.cssProps[l]||(le.cssProps[l]=x(t.style,l)),a=le.cssHooks[n]||le.cssHooks[l],a&&"get"in a&&(s=a.get(t,!0,i)),s===e&&(s=dn(t,n,r)),"normal"===s&&n in Sn&&(s=Sn[n]),""===i||i?(o=parseFloat(s),i===!0||le.isNumeric(o)?o||0:s):s},swap:function(t,e,n,i){var r,o,s={};for(o in e)s[o]=t.style[o],t.style[o]=e[o];r=n.apply(t,i||[]);for(o in e)t.style[o]=s[o];return r}}),t.getComputedStyle?(hn=function(e){return t.getComputedStyle(e,null)},dn=function(t,n,i){var r,o,s,a=i||hn(t),l=a?a.getPropertyValue(n)||a[n]:e,u=t.style;return a&&(""!==l||le.contains(t.ownerDocument,t)||(l=le.style(t,n)),bn.test(l)&&vn.test(n)&&(r=u.width,o=u.minWidth,s=u.maxWidth,u.minWidth=u.maxWidth=u.width=l,l=a.width,u.width=r,u.minWidth=o,u.maxWidth=s)),l}):G.documentElement.currentStyle&&(hn=function(t){return t.currentStyle},dn=function(t,n,i){var r,o,s,a=i||hn(t),l=a?a[n]:e,u=t.style;return null==l&&u&&u[n]&&(l=u[n]),bn.test(l)&&!gn.test(n)&&(r=u.left,o=t.runtimeStyle,s=o&&o.left,s&&(o.left=t.currentStyle.left),u.left="fontSize"===n?"1em":l,l=u.pixelLeft+"px",u.left=r,s&&(o.left=s)),""===l?"auto":l}),le.each(["height","width"],function(t,n){le.cssHooks[n]={get:function(t,i,r){return i?0===t.offsetWidth&&mn.test(le.css(t,"display"))?le.swap(t,Tn,function(){return C(t,n,r)}):C(t,n,r):e},set:function(t,e,i){var r=i&&hn(t);return _(t,e,i?E(t,n,i,le.support.boxSizing&&"border-box"===le.css(t,"boxSizing",!1,r),r):0)}}}),le.support.opacity||(le.cssHooks.opacity={get:function(t,e){return fn.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var n=t.style,i=t.currentStyle,r=le.isNumeric(e)?"alpha(opacity="+100*e+")":"",o=i&&i.filter||n.filter||"";n.zoom=1,(e>=1||""===e)&&""===le.trim(o.replace(pn,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===e||i&&!i.filter)||(n.filter=pn.test(o)?o.replace(pn,r):o+" "+r)}}),le(function(){le.support.reliableMarginRight||(le.cssHooks.marginRight={get:function(t,n){return n?le.swap(t,{display:"inline-block"},dn,[t,"marginRight"]):e}}),!le.support.pixelPosition&&le.fn.position&&le.each(["top","left"],function(t,n){le.cssHooks[n]={get:function(t,i){return i?(i=dn(t,n),bn.test(i)?le(t).position()[n]+"px":i):e}}})}),le.expr&&le.expr.filters&&(le.expr.filters.hidden=function(t){return 0>=t.offsetWidth&&0>=t.offsetHeight||!le.support.reliableHiddenOffsets&&"none"===(t.style&&t.style.display||le.css(t,"display"))},le.expr.filters.visible=function(t){return!le.expr.filters.hidden(t)}),le.each({margin:"",padding:"",border:"Width"},function(t,e){le.cssHooks[t+e]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];4>i;i++)r[t+_n[i]+e]=o[i]||o[i-2]||o[0];return r}},vn.test(t)||(le.cssHooks[t+e].set=_)});var Cn=/%20/g,kn=/\[\]$/,Mn=/\r?\n/g,Pn=/^(?:submit|button|image|reset|file)$/i,In=/^(?:input|select|textarea|keygen)/i;le.fn.extend({serialize:function(){return le.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=le.prop(this,"elements");return t?le.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!le(this).is(":disabled")&&In.test(this.nodeName)&&!Pn.test(t)&&(this.checked||!en.test(t))}).map(function(t,e){var n=le(this).val();return null==n?null:le.isArray(n)?le.map(n,function(t){return{name:e.name,value:t.replace(Mn,"\r\n")}}):{name:e.name,value:n.replace(Mn,"\r\n")}}).get()}}),le.param=function(t,n){var i,r=[],o=function(t,e){e=le.isFunction(e)?e():null==e?"":e,r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(n===e&&(n=le.ajaxSettings&&le.ajaxSettings.traditional),le.isArray(t)||t.jquery&&!le.isPlainObject(t))le.each(t,function(){o(this.name,this.value)});else for(i in t)P(i,t[i],n,o);return r.join("&").replace(Cn,"+")},le.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){le.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),le.fn.hover=function(t,e){return this.mouseenter(t).mouseleave(e||t)};var zn,An,Hn=le.now(),On=/\?/,Nn=/#.*$/,Ln=/([?&])_=[^&]*/,Dn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Rn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,jn=/^(?:GET|HEAD)$/,Bn=/^\/\//,Fn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Wn=le.fn.load,Un={},qn={},Vn="*/".concat("*");try{An=Z.href}catch($n){An=G.createElement("a"),An.href="",An=An.href}zn=Fn.exec(An.toLowerCase())||[],le.fn.load=function(t,n,i){if("string"!=typeof t&&Wn)return Wn.apply(this,arguments);var r,o,s,a=this,l=t.indexOf(" ");return l>=0&&(r=t.slice(l,t.length),t=t.slice(0,l)),le.isFunction(n)?(i=n,n=e):n&&"object"==typeof n&&(s="POST"),a.length>0&&le.ajax({url:t,type:s,dataType:"html",data:n}).done(function(t){o=arguments,a.html(r?le("<div>").append(le.parseHTML(t)).find(r):t)}).complete(i&&function(t,e){a.each(i,o||[t.responseText,e,t])}),this},le.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){le.fn[e]=function(t){return this.on(e,t)}}),le.each(["get","post"],function(t,n){le[n]=function(t,i,r,o){return le.isFunction(i)&&(o=o||r,r=i,i=e),le.ajax({url:t,type:n,dataType:o,data:i,success:r})}}),le.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:An,type:"GET",isLocal:Rn.test(zn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Vn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":t.String,"text html":!0,"text json":le.parseJSON,"text xml":le.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?A(A(t,le.ajaxSettings),e):A(le.ajaxSettings,t)},ajaxPrefilter:I(Un),ajaxTransport:I(qn),ajax:function(t,n){function i(t,n,i,r){var o,h,y,b,x,S=n;2!==w&&(w=2,l&&clearTimeout(l),c=e,a=r||"",T.readyState=t>0?4:0,i&&(b=H(d,T,i)),t>=200&&300>t||304===t?(d.ifModified&&(x=T.getResponseHeader("Last-Modified"),x&&(le.lastModified[s]=x),x=T.getResponseHeader("etag"),x&&(le.etag[s]=x)),204===t?(o=!0,S="nocontent"):304===t?(o=!0,S="notmodified"):(o=O(d,b),S=o.state,h=o.data,y=o.error,o=!y)):(y=S,(t||!S)&&(S="error",0>t&&(t=0))),T.status=t,T.statusText=(n||S)+"",o?g.resolveWith(p,[h,S,T]):g.rejectWith(p,[T,S,y]),T.statusCode(v),v=e,u&&f.trigger(o?"ajaxSuccess":"ajaxError",[T,d,o?h:y]),m.fireWith(p,[T,S]),u&&(f.trigger("ajaxComplete",[T,d]),--le.active||le.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=e),n=n||{};var r,o,s,a,l,u,c,h,d=le.ajaxSetup({},n),p=d.context||d,f=d.context&&(p.nodeType||p.jquery)?le(p):le.event,g=le.Deferred(),m=le.Callbacks("once memory"),v=d.statusCode||{},y={},b={},w=0,x="canceled",T={readyState:0,getResponseHeader:function(t){var e;if(2===w){if(!h)for(h={};e=Dn.exec(a);)h[e[1].toLowerCase()]=e[2];e=h[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===w?a:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return w||(t=b[n]=b[n]||t,y[t]=e),this},overrideMimeType:function(t){return w||(d.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>w)for(e in t)v[e]=[v[e],t[e]];else T.always(t[T.status]);return this},abort:function(t){var e=t||x;return c&&c.abort(e),i(0,e),this}};if(g.promise(T).complete=m.add,T.success=T.done,T.error=T.fail,d.url=((t||d.url||An)+"").replace(Nn,"").replace(Bn,zn[1]+"//"),d.type=n.method||n.type||d.method||d.type,d.dataTypes=le.trim(d.dataType||"*").toLowerCase().match(ce)||[""],null==d.crossDomain&&(r=Fn.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]===zn[1]&&r[2]===zn[2]&&(r[3]||("http:"===r[1]?80:443))==(zn[3]||("http:"===zn[1]?80:443)))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=le.param(d.data,d.traditional)),z(Un,d,n,T),2===w)return T;u=d.global,u&&0===le.active++&&le.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!jn.test(d.type),s=d.url,d.hasContent||(d.data&&(s=d.url+=(On.test(s)?"&":"?")+d.data,delete d.data),d.cache===!1&&(d.url=Ln.test(s)?s.replace(Ln,"$1_="+Hn++):s+(On.test(s)?"&":"?")+"_="+Hn++)),d.ifModified&&(le.lastModified[s]&&T.setRequestHeader("If-Modified-Since",le.lastModified[s]),le.etag[s]&&T.setRequestHeader("If-None-Match",le.etag[s])),(d.data&&d.hasContent&&d.contentType!==!1||n.contentType)&&T.setRequestHeader("Content-Type",d.contentType),T.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Vn+"; q=0.01":""):d.accepts["*"]);for(o in d.headers)T.setRequestHeader(o,d.headers[o]);if(d.beforeSend&&(d.beforeSend.call(p,T,d)===!1||2===w))return T.abort();x="abort";for(o in{success:1,error:1,complete:1})T[o](d[o]);if(c=z(qn,d,n,T)){T.readyState=1,u&&f.trigger("ajaxSend",[T,d]),d.async&&d.timeout>0&&(l=setTimeout(function(){T.abort("timeout")},d.timeout));try{w=1,c.send(y,i)}catch(S){if(!(2>w))throw S;i(-1,S)}}else i(-1,"No Transport");return T},getScript:function(t,n){return le.get(t,e,n,"script")},getJSON:function(t,e,n){return le.get(t,e,n,"json")}}),le.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return le.globalEval(t),t}}}),le.ajaxPrefilter("script",function(t){t.cache===e&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),le.ajaxTransport("script",function(t){if(t.crossDomain){var n,i=G.head||le("head")[0]||G.documentElement;return{send:function(e,r){n=G.createElement("script"),n.async=!0,t.scriptCharset&&(n.charset=t.scriptCharset),n.src=t.url,n.onload=n.onreadystatechange=function(t,e){(e||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,e||r(200,"success"))},i.insertBefore(n,i.firstChild)},abort:function(){n&&n.onload(e,!0)}}}});var Qn=[],Gn=/(=)\?(?=&|$)|\?\?/;le.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Qn.pop()||le.expando+"_"+Hn++;return this[t]=!0,t}}),le.ajaxPrefilter("json jsonp",function(n,i,r){var o,s,a,l=n.jsonp!==!1&&(Gn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Gn.test(n.data)&&"data");return l||"jsonp"===n.dataTypes[0]?(o=n.jsonpCallback=le.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,l?n[l]=n[l].replace(Gn,"$1"+o):n.jsonp!==!1&&(n.url+=(On.test(n.url)?"&":"?")+n.jsonp+"="+o),n.converters["script json"]=function(){return a||le.error(o+" was not called"),a[0]},n.dataTypes[0]="json",s=t[o],t[o]=function(){a=arguments},r.always(function(){t[o]=s,n[o]&&(n.jsonpCallback=i.jsonpCallback,Qn.push(o)),a&&le.isFunction(s)&&s(a[0]),a=s=e}),"script"):e});var Zn,Xn,Yn=0,Kn=t.ActiveXObject&&function(){var t;for(t in Zn)Zn[t](e,!0)};le.ajaxSettings.xhr=t.ActiveXObject?function(){return!this.isLocal&&N()||L()}:N,Xn=le.ajaxSettings.xhr(),le.support.cors=!!Xn&&"withCredentials"in Xn,Xn=le.support.ajax=!!Xn,Xn&&le.ajaxTransport(function(n){if(!n.crossDomain||le.support.cors){var i;return{send:function(r,o){var s,a,l=n.xhr();if(n.username?l.open(n.type,n.url,n.async,n.username,n.password):l.open(n.type,n.url,n.async),n.xhrFields)for(a in n.xhrFields)l[a]=n.xhrFields[a];n.mimeType&&l.overrideMimeType&&l.overrideMimeType(n.mimeType),n.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");try{for(a in r)l.setRequestHeader(a,r[a])}catch(u){}l.send(n.hasContent&&n.data||null),i=function(t,r){var a,u,c,h;try{if(i&&(r||4===l.readyState))if(i=e,s&&(l.onreadystatechange=le.noop,Kn&&delete Zn[s]),r)4!==l.readyState&&l.abort();else{h={},a=l.status,u=l.getAllResponseHeaders(),"string"==typeof l.responseText&&(h.text=l.responseText);try{c=l.statusText}catch(d){c=""}a||!n.isLocal||n.crossDomain?1223===a&&(a=204):a=h.text?200:404}}catch(p){r||o(-1,p)}h&&o(a,c,h,u)},n.async?4===l.readyState?setTimeout(i):(s=++Yn,Kn&&(Zn||(Zn={},le(t).unload(Kn)),Zn[s]=i),l.onreadystatechange=i):i()},abort:function(){i&&i(e,!0)}}}});var Jn,ti,ei=/^(?:toggle|show|hide)$/,ni=RegExp("^(?:([+-])=|)("+ue+")([a-z%]*)$","i"),ii=/queueHooks$/,ri=[F],oi={"*":[function(t,e){var n,i,r=this.createTween(t,e),o=ni.exec(e),s=r.cur(),a=+s||0,l=1,u=20;if(o){if(n=+o[2],i=o[3]||(le.cssNumber[t]?"":"px"),"px"!==i&&a){a=le.css(r.elem,t,!0)||n||1;do l=l||".5",a/=l,le.style(r.elem,t,a+i);while(l!==(l=r.cur()/s)&&1!==l&&--u)}r.unit=i,r.start=a,r.end=o[1]?a+(o[1]+1)*n:n}return r}]};le.Animation=le.extend(j,{tweener:function(t,e){le.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,i=0,r=t.length;r>i;i++)n=t[i],oi[n]=oi[n]||[],oi[n].unshift(e)},prefilter:function(t,e){e?ri.unshift(t):ri.push(t)}}),le.Tween=W,W.prototype={constructor:W,init:function(t,e,n,i,r,o){this.elem=t,this.prop=n,this.easing=r||"swing",this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=o||(le.cssNumber[n]?"":"px")},cur:function(){var t=W.propHooks[this.prop];return t&&t.get?t.get(this):W.propHooks._default.get(this)},run:function(t){var e,n=W.propHooks[this.prop];return this.pos=e=this.options.duration?le.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):W.propHooks._default.set(this),this}},W.prototype.init.prototype=W.prototype,W.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=le.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){le.fx.step[t.prop]?le.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[le.cssProps[t.prop]]||le.cssHooks[t.prop])?le.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},W.propHooks.scrollTop=W.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},le.each(["toggle","show","hide"],function(t,e){var n=le.fn[e];le.fn[e]=function(t,i,r){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(U(e,!0),t,i,r)}}),le.fn.extend({fadeTo:function(t,e,n,i){return this.filter(T).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var r=le.isEmptyObject(t),o=le.speed(e,n,i),s=function(){var e=j(this,le.extend({},t),o);s.finish=function(){e.stop(!0)},(r||le._data(this,"finish"))&&e.stop(!0)};return s.finish=s,r||o.queue===!1?this.each(s):this.queue(o.queue,s)},stop:function(t,n,i){var r=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=n,n=t,t=e),n&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,n=null!=t&&t+"queueHooks",o=le.timers,s=le._data(this);if(n)s[n]&&s[n].stop&&r(s[n]);else for(n in s)s[n]&&s[n].stop&&ii.test(n)&&r(s[n]);for(n=o.length;n--;)o[n].elem!==this||null!=t&&o[n].queue!==t||(o[n].anim.stop(i),e=!1,o.splice(n,1));(e||!i)&&le.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=le._data(this),i=n[t+"queue"],r=n[t+"queueHooks"],o=le.timers,s=i?i.length:0;for(n.finish=!0,le.queue(this,t,[]),r&&r.cur&&r.cur.finish&&r.cur.finish.call(this),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;s>e;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),le.each({slideDown:U("show"),slideUp:U("hide"),slideToggle:U("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){le.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),le.speed=function(t,e,n){var i=t&&"object"==typeof t?le.extend({},t):{complete:n||!n&&e||le.isFunction(t)&&t,duration:t,easing:n&&e||e&&!le.isFunction(e)&&e};return i.duration=le.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in le.fx.speeds?le.fx.speeds[i.duration]:le.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){le.isFunction(i.old)&&i.old.call(this),i.queue&&le.dequeue(this,i.queue)},i},le.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},le.timers=[],le.fx=W.prototype.init,le.fx.tick=function(){var t,n=le.timers,i=0;for(Jn=le.now();n.length>i;i++)t=n[i],t()||n[i]!==t||n.splice(i--,1);n.length||le.fx.stop(),Jn=e},le.fx.timer=function(t){t()&&le.timers.push(t)&&le.fx.start()},le.fx.interval=13,le.fx.start=function(){ti||(ti=setInterval(le.fx.tick,le.fx.interval))},le.fx.stop=function(){clearInterval(ti),ti=null},le.fx.speeds={slow:600,fast:200,_default:400},le.fx.step={},le.expr&&le.expr.filters&&(le.expr.filters.animated=function(t){return le.grep(le.timers,function(e){return t===e.elem}).length}),le.fn.offset=function(t){if(arguments.length)return t===e?this:this.each(function(e){le.offset.setOffset(this,t,e)});var n,i,r={top:0,left:0},o=this[0],s=o&&o.ownerDocument;return s?(n=s.documentElement,le.contains(n,o)?(typeof o.getBoundingClientRect!==Q&&(r=o.getBoundingClientRect()),i=q(s),{top:r.top+(i.pageYOffset||n.scrollTop)-(n.clientTop||0),left:r.left+(i.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):r):void 0},le.offset={setOffset:function(t,e,n){var i=le.css(t,"position");"static"===i&&(t.style.position="relative");var r,o,s=le(t),a=s.offset(),l=le.css(t,"top"),u=le.css(t,"left"),c=("absolute"===i||"fixed"===i)&&le.inArray("auto",[l,u])>-1,h={},d={};c?(d=s.position(),r=d.top,o=d.left):(r=parseFloat(l)||0,o=parseFloat(u)||0),le.isFunction(e)&&(e=e.call(t,n,a)),null!=e.top&&(h.top=e.top-a.top+r),null!=e.left&&(h.left=e.left-a.left+o),"using"in e?e.using.call(t,h):s.css(h)}},le.fn.extend({position:function(){if(this[0]){var t,e,n={top:0,left:0},i=this[0];return"fixed"===le.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),le.nodeName(t[0],"html")||(n=t.offset()),n.top+=le.css(t[0],"borderTopWidth",!0),n.left+=le.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-le.css(i,"marginTop",!0),left:e.left-n.left-le.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||G.documentElement;t&&!le.nodeName(t,"html")&&"static"===le.css(t,"position");)t=t.offsetParent;return t||G.documentElement})}}),le.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,n){var i=/Y/.test(n);le.fn[t]=function(r){return le.access(this,function(t,r,o){var s=q(t);return o===e?s?n in s?s[n]:s.document.documentElement[r]:t[r]:(s?s.scrollTo(i?le(s).scrollLeft():o,i?o:le(s).scrollTop()):t[r]=o,e)},t,r,arguments.length,null)}}),le.each({Height:"height",Width:"width"},function(t,n){le.each({padding:"inner"+t,content:n,"":"outer"+t},function(i,r){le.fn[r]=function(r,o){var s=arguments.length&&(i||"boolean"!=typeof r),a=i||(r===!0||o===!0?"margin":"border");return le.access(this,function(n,i,r){var o;return le.isWindow(n)?n.document.documentElement["client"+t]:9===n.nodeType?(o=n.documentElement,Math.max(n.body["scroll"+t],o["scroll"+t],n.body["offset"+t],o["offset"+t],o["client"+t])):r===e?le.css(n,i,a):le.style(n,i,r,a)},n,s?r:e,s,null)}})}),t.jQuery=t.$=le,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return le})})(window),/*! jQuery UI - v1.10.3 - 2013-06-06
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.draggable.js, jquery.ui.resizable.js, jquery.ui.button.js, jquery.ui.dialog.js, jquery.ui.menu.js, jquery.ui.slider.js
* Copyright 2013 jQuery Foundation and other contributors Licensed MIT */
function(t,e){function n(e,n){var r,o,s,a=e.nodeName.toLowerCase();return"area"===a?(r=e.parentNode,o=r.name,e.href&&o&&"map"===r.nodeName.toLowerCase()?(s=t("img[usemap=#"+o+"]")[0],!!s&&i(s)):!1):(/input|select|textarea|button|object/.test(a)?!e.disabled:"a"===a?e.href||n:n)&&i(e)}function i(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}var r=0,o=/^ui-id-\d+$/;t.ui=t.ui||{},t.extend(t.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({focus:function(e){return function(n,i){return"number"==typeof n?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),i&&i.call(e)},n)}):e.apply(this,arguments)}}(t.fn.focus),scrollParent:function(){var e;return e=t.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(t.css(this,"position"))&&/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!e.length?t(document):e},zIndex:function(n){if(n!==e)return this.css("zIndex",n);if(this.length)for(var i,r,o=t(this[0]);o.length&&o[0]!==document;){if(i=o.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(r=parseInt(o.css("zIndex"),10),!isNaN(r)&&0!==r))return r;o=o.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++r)})},removeUniqueId:function(){return this.each(function(){o.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(n){return!!t.data(n,e)}}):function(e,n,i){return!!t.data(e,i[3])},focusable:function(e){return n(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var i=t.attr(e,"tabindex"),r=isNaN(i);return(r||i>=0)&&n(e,!r)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(n,i){function r(e,n,i,r){return t.each(o,function(){n-=parseFloat(t.css(e,"padding"+this))||0,i&&(n-=parseFloat(t.css(e,"border"+this+"Width"))||0),r&&(n-=parseFloat(t.css(e,"margin"+this))||0)}),n}var o="Width"===i?["Left","Right"]:["Top","Bottom"],s=i.toLowerCase(),a={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+i]=function(n){return n===e?a["inner"+i].call(this):this.each(function(){t(this).css(s,r(this,n)+"px")})},t.fn["outer"+i]=function(e,n){return"number"!=typeof e?a["outer"+i].call(this,e):this.each(function(){t(this).css(s,r(this,e,!0,n)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(n){return arguments.length?e.call(this,t.camelCase(n)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.support.selectstart="onselectstart"in document.createElement("div"),t.fn.extend({disableSelection:function(){return this.bind((t.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(t){t.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),t.extend(t.ui,{plugin:{add:function(e,n,i){var r,o=t.ui[e].prototype;for(r in i)o.plugins[r]=o.plugins[r]||[],o.plugins[r].push([n,i[r]])},call:function(t,e,n){var i,r=t.plugins[e];if(r&&t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType)for(i=0;r.length>i;i++)t.options[r[i][0]]&&r[i][1].apply(t.element,n)}},hasScroll:function(e,n){if("hidden"===t(e).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",r=!1;return e[i]>0?!0:(e[i]=1,r=e[i]>0,e[i]=0,r)}})}(jQuery),function(t,e){var n=0,i=Array.prototype.slice,r=t.cleanData;t.cleanData=function(e){for(var n,i=0;null!=(n=e[i]);i++)try{t(n).triggerHandler("remove")}catch(o){}r(e)},t.widget=function(n,i,r){var o,s,a,l,u={},c=n.split(".")[0];n=n.split(".")[1],o=c+"-"+n,r||(r=i,i=t.Widget),t.expr[":"][o.toLowerCase()]=function(e){return!!t.data(e,o)},t[c]=t[c]||{},s=t[c][n],a=t[c][n]=function(t,n){return this._createWidget?(arguments.length&&this._createWidget(t,n),e):new a(t,n)},t.extend(a,s,{version:r.version,_proto:t.extend({},r),_childConstructors:[]}),l=new i,l.options=t.widget.extend({},l.options),t.each(r,function(n,r){return t.isFunction(r)?(u[n]=function(){var t=function(){return i.prototype[n].apply(this,arguments)},e=function(t){return i.prototype[n].apply(this,t)};return function(){var n,i=this._super,o=this._superApply;return this._super=t,this._superApply=e,n=r.apply(this,arguments),this._super=i,this._superApply=o,n}}(),e):(u[n]=r,e)}),a.prototype=t.widget.extend(l,{widgetEventPrefix:s?l.widgetEventPrefix:n},u,{constructor:a,namespace:c,widgetName:n,widgetFullName:o}),s?(t.each(s._childConstructors,function(e,n){var i=n.prototype;t.widget(i.namespace+"."+i.widgetName,a,n._proto)}),delete s._childConstructors):i._childConstructors.push(a),t.widget.bridge(n,a)},t.widget.extend=function(n){for(var r,o,s=i.call(arguments,1),a=0,l=s.length;l>a;a++)for(r in s[a])o=s[a][r],s[a].hasOwnProperty(r)&&o!==e&&(n[r]=t.isPlainObject(o)?t.isPlainObject(n[r])?t.widget.extend({},n[r],o):t.widget.extend({},o):o);return n},t.widget.bridge=function(n,r){var o=r.prototype.widgetFullName||n;t.fn[n]=function(s){var a="string"==typeof s,l=i.call(arguments,1),u=this;return s=!a&&l.length?t.widget.extend.apply(null,[s].concat(l)):s,a?this.each(function(){var i,r=t.data(this,o);return r?t.isFunction(r[s])&&"_"!==s.charAt(0)?(i=r[s].apply(r,l),i!==r&&i!==e?(u=i&&i.jquery?u.pushStack(i.get()):i,!1):e):t.error("no such method '"+s+"' for "+n+" widget instance"):t.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method '"+s+"'")}):this.each(function(){var e=t.data(this,o);e?e.option(s||{})._init():t.data(this,o,new r(s,this))}),u}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(n,i){var r,o,s,a=n;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof n)if(a={},r=n.split("."),n=r.shift(),r.length){for(o=a[n]=t.widget.extend({},this.options[n]),s=0;r.length-1>s;s++)o[r[s]]=o[r[s]]||{},o=o[r[s]];if(n=r.pop(),i===e)return o[n]===e?null:o[n];o[n]=i}else{if(i===e)return this.options[n]===e?null:this.options[n];a[n]=i}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(n,i,r){var o,s=this;"boolean"!=typeof n&&(r=i,i=n,n=!1),r?(i=o=t(i),this.bindings=this.bindings.add(i)):(r=i,i=this.element,o=this.widget()),t.each(r,function(r,a){function l(){return n||s.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof a?s[a]:a).apply(s,arguments):e}"string"!=typeof a&&(l.guid=a.guid=a.guid||l.guid||t.guid++);var u=r.match(/^(\w+)\s*(.*)$/),c=u[1]+s.eventNamespace,h=u[2];h?o.delegate(h,c,l):i.bind(c,l)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function n(){return("string"==typeof t?i[t]:t).apply(i,arguments)}var i=this;return setTimeout(n,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,n,i){var r,o,s=this.options[e];if(i=i||{},n=t.Event(n),n.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(r in o)r in n||(n[r]=o[r]);return this.element.trigger(n,i),!(t.isFunction(s)&&s.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,n){t.Widget.prototype["_"+e]=function(i,r,o){"string"==typeof r&&(r={effect:r});var s,a=r?r===!0||"number"==typeof r?n:r.effect||n:e;r=r||{},"number"==typeof r&&(r={duration:r}),s=!t.isEmptyObject(r),r.complete=o,r.delay&&i.delay(r.delay),s&&t.effects&&t.effects.effect[a]?i[e](r):a!==e&&i[a]?i[a](r.duration,r.easing,o):i.queue(function(n){t(this)[e](),o&&o.call(i[0]),n()})}})}(jQuery),function(t){var e=!1;t(document).mouseup(function(){e=!1}),t.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(n){return!0===t.data(n.target,e.widgetName+".preventClickEvent")?(t.removeData(n.target,e.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(!e){this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var i=this,r=1===n.which,o="string"==typeof this.options.cancel&&n.target.nodeName?t(n.target).closest(this.options.cancel).length:!1;return r&&!o&&this._mouseCapture(n)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=this._mouseStart(n)!==!1,!this._mouseStarted)?(n.preventDefault(),!0):(!0===t.data(n.target,this.widgetName+".preventClickEvent")&&t.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),e=!0,!0)):!0}},_mouseMove:function(e){return t.ui.ie&&(!document.documentMode||9>document.documentMode)&&!e.button?this._mouseUp(e):this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(t,e){function n(t,e,n){return[parseFloat(t[0])*(p.test(t[0])?e/100:1),parseFloat(t[1])*(p.test(t[1])?n/100:1)]}function i(e,n){return parseInt(t.css(e,n),10)||0}function r(e){var n=e[0];return 9===n.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(n)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}t.ui=t.ui||{};var o,s=Math.max,a=Math.abs,l=Math.round,u=/left|center|right/,c=/top|center|bottom/,h=/[\+\-]\d+(\.[\d]+)?%?/,d=/^\w+/,p=/%$/,f=t.fn.position;t.position={scrollbarWidth:function(){if(o!==e)return o;var n,i,r=t("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),s=r.children()[0];return t("body").append(r),n=s.offsetWidth,r.css("overflow","scroll"),i=s.offsetWidth,n===i&&(i=r[0].clientWidth),r.remove(),o=n-i},getScrollInfo:function(e){var n=e.isWindow?"":e.element.css("overflow-x"),i=e.isWindow?"":e.element.css("overflow-y"),r="scroll"===n||"auto"===n&&e.width<e.element[0].scrollWidth,o="scroll"===i||"auto"===i&&e.height<e.element[0].scrollHeight;return{width:o?t.position.scrollbarWidth():0,height:r?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var n=t(e||window),i=t.isWindow(n[0]);return{element:n,isWindow:i,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:i?n.width():n.outerWidth(),height:i?n.height():n.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return f.apply(this,arguments);e=t.extend({},e);var o,p,g,m,v,y,b=t(e.of),w=t.position.getWithinInfo(e.within),x=t.position.getScrollInfo(w),T=(e.collision||"flip").split(" "),S={};return y=r(b),b[0].preventDefault&&(e.at="left top"),p=y.width,g=y.height,m=y.offset,v=t.extend({},m),t.each(["my","at"],function(){var t,n,i=(e[this]||"").split(" ");1===i.length&&(i=u.test(i[0])?i.concat(["center"]):c.test(i[0])?["center"].concat(i):["center","center"]),i[0]=u.test(i[0])?i[0]:"center",i[1]=c.test(i[1])?i[1]:"center",t=h.exec(i[0]),n=h.exec(i[1]),S[this]=[t?t[0]:0,n?n[0]:0],e[this]=[d.exec(i[0])[0],d.exec(i[1])[0]]}),1===T.length&&(T[1]=T[0]),"right"===e.at[0]?v.left+=p:"center"===e.at[0]&&(v.left+=p/2),"bottom"===e.at[1]?v.top+=g:"center"===e.at[1]&&(v.top+=g/2),o=n(S.at,p,g),v.left+=o[0],v.top+=o[1],this.each(function(){var r,u,c=t(this),h=c.outerWidth(),d=c.outerHeight(),f=i(this,"marginLeft"),y=i(this,"marginTop"),_=h+f+i(this,"marginRight")+x.width,E=d+y+i(this,"marginBottom")+x.height,C=t.extend({},v),k=n(S.my,c.outerWidth(),c.outerHeight());"right"===e.my[0]?C.left-=h:"center"===e.my[0]&&(C.left-=h/2),"bottom"===e.my[1]?C.top-=d:"center"===e.my[1]&&(C.top-=d/2),C.left+=k[0],C.top+=k[1],t.support.offsetFractions||(C.left=l(C.left),C.top=l(C.top)),r={marginLeft:f,marginTop:y},t.each(["left","top"],function(n,i){t.ui.position[T[n]]&&t.ui.position[T[n]][i](C,{targetWidth:p,targetHeight:g,elemWidth:h,elemHeight:d,collisionPosition:r,collisionWidth:_,collisionHeight:E,offset:[o[0]+k[0],o[1]+k[1]],my:e.my,at:e.at,within:w,elem:c})}),e.using&&(u=function(t){var n=m.left-C.left,i=n+p-h,r=m.top-C.top,o=r+g-d,l={target:{element:b,left:m.left,top:m.top,width:p,height:g},element:{element:c,left:C.left,top:C.top,width:h,height:d},horizontal:0>i?"left":n>0?"right":"center",vertical:0>o?"top":r>0?"bottom":"middle"};h>p&&p>a(n+i)&&(l.horizontal="center"),d>g&&g>a(r+o)&&(l.vertical="middle"),l.important=s(a(n),a(i))>s(a(r),a(o))?"horizontal":"vertical",e.using.call(this,t,l)}),c.offset(t.extend(C,{using:u}))})},t.ui.position={fit:{left:function(t,e){var n,i=e.within,r=i.isWindow?i.scrollLeft:i.offset.left,o=i.width,a=t.left-e.collisionPosition.marginLeft,l=r-a,u=a+e.collisionWidth-o-r;e.collisionWidth>o?l>0&&0>=u?(n=t.left+l+e.collisionWidth-o-r,t.left+=l-n):t.left=u>0&&0>=l?r:l>u?r+o-e.collisionWidth:r:l>0?t.left+=l:u>0?t.left-=u:t.left=s(t.left-a,t.left)},top:function(t,e){var n,i=e.within,r=i.isWindow?i.scrollTop:i.offset.top,o=e.within.height,a=t.top-e.collisionPosition.marginTop,l=r-a,u=a+e.collisionHeight-o-r;e.collisionHeight>o?l>0&&0>=u?(n=t.top+l+e.collisionHeight-o-r,t.top+=l-n):t.top=u>0&&0>=l?r:l>u?r+o-e.collisionHeight:r:l>0?t.top+=l:u>0?t.top-=u:t.top=s(t.top-a,t.top)}},flip:{left:function(t,e){var n,i,r=e.within,o=r.offset.left+r.scrollLeft,s=r.width,l=r.isWindow?r.scrollLeft:r.offset.left,u=t.left-e.collisionPosition.marginLeft,c=u-l,h=u+e.collisionWidth-s-l,d="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];0>c?(n=t.left+d+p+f+e.collisionWidth-s-o,(0>n||a(c)>n)&&(t.left+=d+p+f)):h>0&&(i=t.left-e.collisionPosition.marginLeft+d+p+f-l,(i>0||h>a(i))&&(t.left+=d+p+f))},top:function(t,e){var n,i,r=e.within,o=r.offset.top+r.scrollTop,s=r.height,l=r.isWindow?r.scrollTop:r.offset.top,u=t.top-e.collisionPosition.marginTop,c=u-l,h=u+e.collisionHeight-s-l,d="top"===e.my[1],p=d?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,f="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,g=-2*e.offset[1];0>c?(i=t.top+p+f+g+e.collisionHeight-s-o,t.top+p+f+g>c&&(0>i||a(c)>i)&&(t.top+=p+f+g)):h>0&&(n=t.top-e.collisionPosition.marginTop+p+f+g-l,t.top+p+f+g>h&&(n>0||h>a(n))&&(t.top+=p+f+g))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,n,i,r,o,s=document.getElementsByTagName("body")[0],a=document.createElement("div");e=document.createElement(s?"div":"body"),i={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},s&&t.extend(i,{position:"absolute",left:"-1000px",top:"-1000px"});for(o in i)e.style[o]=i[o];e.appendChild(a),n=s||document.documentElement,n.insertBefore(e,n.firstChild),a.style.cssText="position: absolute; left: 10.7432222px;",r=t(a).offset().left,t.support.offsetFractions=r>10&&11>r,e.innerHTML="",n.removeChild(e)}()}(jQuery),function(t){t.widget("ui.draggable",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(e){var n=this.options;return this.helper||n.disabled||t(e.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(e),this.handle?(t(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){t("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(t(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(e){var n=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!n.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_mouseDrag:function(e,n){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),!n){var i=this._uiHash();if(this._trigger("drag",e,i)===!1)return this._mouseUp({}),!1;this.position=i.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var n=this,i=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(i=t.ui.ddmanager.drop(this,e)),this.dropped&&(i=this.dropped,this.dropped=!1),"original"!==this.options.helper||t.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){n._trigger("stop",e)!==!1&&n._clear()}):this._trigger("stop",e)!==!1&&this._clear(),!1):!1},_mouseUp:function(e){return t("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){return this.options.handle?!!t(e.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(e){var n=this.options,i=t.isFunction(n.helper)?t(n.helper.apply(this.element[0],[e])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),i[0]===this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.element.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,n,i,r=this.options;return r.containment?"window"===r.containment?(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):"document"===r.containment?(this.containment=[0,0,t(document).width()-this.helperProportions.width-this.margins.left,(t(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):r.containment.constructor===Array?(this.containment=r.containment,void 0):("parent"===r.containment&&(r.containment=this.helper[0].parentNode),n=t(r.containment),i=n[0],i&&(e="hidden"!==n.css("overflow"),this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(e?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n),void 0):(this.containment=null,void 0)},_convertPositionTo:function(e,n){n||(n=this.position);var i="absolute"===e?1:-1,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:r.scrollTop(),left:r.scrollLeft()}),{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*i}},_generatePosition:function(e){var n,i,r,o,s=this.options,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=e.pageX,u=e.pageY;return this.offset.scroll||(this.offset.scroll={top:a.scrollTop(),left:a.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(i=this.relative_container.offset(),n=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):n=this.containment,e.pageX-this.offset.click.left<n[0]&&(l=n[0]+this.offset.click.left),e.pageY-this.offset.click.top<n[1]&&(u=n[1]+this.offset.click.top),e.pageX-this.offset.click.left>n[2]&&(l=n[2]+this.offset.click.left),e.pageY-this.offset.click.top>n[3]&&(u=n[3]+this.offset.click.top)),s.grid&&(r=s.grid[1]?this.originalPageY+Math.round((u-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,u=n?r-this.offset.click.top>=n[1]||r-this.offset.click.top>n[3]?r:r-this.offset.click.top>=n[1]?r-s.grid[1]:r+s.grid[1]:r,o=s.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,l=n?o-this.offset.click.left>=n[0]||o-this.offset.click.left>n[2]?o:o-this.offset.click.left>=n[0]?o-s.grid[0]:o+s.grid[0]:o)),{top:u-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(e,n,i){return i=i||this._uiHash(),t.ui.plugin.call(this,e,[n,i]),"drag"===e&&(this.positionAbs=this._convertPositionTo("absolute")),t.Widget.prototype._trigger.call(this,e,n,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,n){var i=t(this).data("ui-draggable"),r=i.options,o=t.extend({},n,{item:i.element});i.sortables=[],t(r.connectToSortable).each(function(){var n=t.data(this,"ui-sortable");n&&!n.options.disabled&&(i.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",e,o))})},stop:function(e,n){var i=t(this).data("ui-draggable"),r=t.extend({},n,{item:i.element});t.each(i.sortables,function(){this.instance.isOver?(this.instance.isOver=0,i.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(e),this.instance.options.helper=this.instance.options._helper,"original"===i.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",e,r))})},drag:function(e,n){var i=t(this).data("ui-draggable"),r=this;t.each(i.sortables,function(){var o=!1,s=this;this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(o=!0,t.each(i.sortables,function(){return this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this!==s&&this.instance._intersectsWith(this.instance.containerCache)&&t.contains(s.instance.element[0],this.instance.element[0])&&(o=!1),o})),o?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=t(r).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},e.target=this.instance.currentItem[0],this.instance._mouseCapture(e,!0),this.instance._mouseStart(e,!0,!0),this.instance.offset.click.top=i.offset.click.top,this.instance.offset.click.left=i.offset.click.left,this.instance.offset.parent.left-=i.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=i.offset.parent.top-this.instance.offset.parent.top,i._trigger("toSortable",e),i.dropped=this.instance.element,i.currentItem=i.element,this.instance.fromOutside=i),this.instance.currentItem&&this.instance._mouseDrag(e)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",e,this.instance._uiHash(this.instance)),this.instance._mouseStop(e,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),i._trigger("fromSortable",e),i.dropped=!1)
})}}),t.ui.plugin.add("draggable","cursor",{start:function(){var e=t("body"),n=t(this).data("ui-draggable").options;e.css("cursor")&&(n._cursor=e.css("cursor")),e.css("cursor",n.cursor)},stop:function(){var e=t(this).data("ui-draggable").options;e._cursor&&t("body").css("cursor",e._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,n){var i=t(n.helper),r=t(this).data("ui-draggable").options;i.css("opacity")&&(r._opacity=i.css("opacity")),i.css("opacity",r.opacity)},stop:function(e,n){var i=t(this).data("ui-draggable").options;i._opacity&&t(n.helper).css("opacity",i._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(){var e=t(this).data("ui-draggable");e.scrollParent[0]!==document&&"HTML"!==e.scrollParent[0].tagName&&(e.overflowOffset=e.scrollParent.offset())},drag:function(e){var n=t(this).data("ui-draggable"),i=n.options,r=!1;n.scrollParent[0]!==document&&"HTML"!==n.scrollParent[0].tagName?(i.axis&&"x"===i.axis||(n.overflowOffset.top+n.scrollParent[0].offsetHeight-e.pageY<i.scrollSensitivity?n.scrollParent[0].scrollTop=r=n.scrollParent[0].scrollTop+i.scrollSpeed:e.pageY-n.overflowOffset.top<i.scrollSensitivity&&(n.scrollParent[0].scrollTop=r=n.scrollParent[0].scrollTop-i.scrollSpeed)),i.axis&&"y"===i.axis||(n.overflowOffset.left+n.scrollParent[0].offsetWidth-e.pageX<i.scrollSensitivity?n.scrollParent[0].scrollLeft=r=n.scrollParent[0].scrollLeft+i.scrollSpeed:e.pageX-n.overflowOffset.left<i.scrollSensitivity&&(n.scrollParent[0].scrollLeft=r=n.scrollParent[0].scrollLeft-i.scrollSpeed))):(i.axis&&"x"===i.axis||(e.pageY-t(document).scrollTop()<i.scrollSensitivity?r=t(document).scrollTop(t(document).scrollTop()-i.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<i.scrollSensitivity&&(r=t(document).scrollTop(t(document).scrollTop()+i.scrollSpeed))),i.axis&&"y"===i.axis||(e.pageX-t(document).scrollLeft()<i.scrollSensitivity?r=t(document).scrollLeft(t(document).scrollLeft()-i.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<i.scrollSensitivity&&(r=t(document).scrollLeft(t(document).scrollLeft()+i.scrollSpeed)))),r!==!1&&t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(n,e)}}),t.ui.plugin.add("draggable","snap",{start:function(){var e=t(this).data("ui-draggable"),n=e.options;e.snapElements=[],t(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var n=t(this),i=n.offset();this!==e.element[0]&&e.snapElements.push({item:this,width:n.outerWidth(),height:n.outerHeight(),top:i.top,left:i.left})})},drag:function(e,n){var i,r,o,s,a,l,u,c,h,d,p=t(this).data("ui-draggable"),f=p.options,g=f.snapTolerance,m=n.offset.left,v=m+p.helperProportions.width,y=n.offset.top,b=y+p.helperProportions.height;for(h=p.snapElements.length-1;h>=0;h--)a=p.snapElements[h].left,l=a+p.snapElements[h].width,u=p.snapElements[h].top,c=u+p.snapElements[h].height,a-g>v||m>l+g||u-g>b||y>c+g||!t.contains(p.snapElements[h].item.ownerDocument,p.snapElements[h].item)?(p.snapElements[h].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,e,t.extend(p._uiHash(),{snapItem:p.snapElements[h].item})),p.snapElements[h].snapping=!1):("inner"!==f.snapMode&&(i=g>=Math.abs(u-b),r=g>=Math.abs(c-y),o=g>=Math.abs(a-v),s=g>=Math.abs(l-m),i&&(n.position.top=p._convertPositionTo("relative",{top:u-p.helperProportions.height,left:0}).top-p.margins.top),r&&(n.position.top=p._convertPositionTo("relative",{top:c,left:0}).top-p.margins.top),o&&(n.position.left=p._convertPositionTo("relative",{top:0,left:a-p.helperProportions.width}).left-p.margins.left),s&&(n.position.left=p._convertPositionTo("relative",{top:0,left:l}).left-p.margins.left)),d=i||r||o||s,"outer"!==f.snapMode&&(i=g>=Math.abs(u-y),r=g>=Math.abs(c-b),o=g>=Math.abs(a-m),s=g>=Math.abs(l-v),i&&(n.position.top=p._convertPositionTo("relative",{top:u,left:0}).top-p.margins.top),r&&(n.position.top=p._convertPositionTo("relative",{top:c-p.helperProportions.height,left:0}).top-p.margins.top),o&&(n.position.left=p._convertPositionTo("relative",{top:0,left:a}).left-p.margins.left),s&&(n.position.left=p._convertPositionTo("relative",{top:0,left:l-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[h].snapping&&(i||r||o||s||d)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,e,t.extend(p._uiHash(),{snapItem:p.snapElements[h].item})),p.snapElements[h].snapping=i||r||o||s||d)}}),t.ui.plugin.add("draggable","stack",{start:function(){var e,n=this.data("ui-draggable").options,i=t.makeArray(t(n.stack)).sort(function(e,n){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(n).css("zIndex"),10)||0)});i.length&&(e=parseInt(t(i[0]).css("zIndex"),10)||0,t(i).each(function(n){t(this).css("zIndex",e+n)}),this.css("zIndex",e+i.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,n){var i=t(n.helper),r=t(this).data("ui-draggable").options;i.css("zIndex")&&(r._zIndex=i.css("zIndex")),i.css("zIndex",r.zIndex)},stop:function(e,n){var i=t(this).data("ui-draggable").options;i._zIndex&&t(n.helper).css("zIndex",i._zIndex)}})}(jQuery),function(t){function e(t){return parseInt(t,10)||0}function n(t){return!isNaN(parseInt(t,10))}t.widget("ui.resizable",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var e,n,i,r,o,s=this,a=this.options;if(this.element.addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!a.aspectRatio,aspectRatio:a.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:a.helper||a.ghost||a.animate?a.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=a.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),e=this.handles.split(","),this.handles={},n=0;e.length>n;n++)i=t.trim(e[n]),o="ui-resizable-"+i,r=t("<div class='ui-resizable-handle "+o+"'></div>"),r.css({zIndex:a.zIndex}),"se"===i&&r.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[i]=".ui-resizable-"+i,this.element.append(r);this._renderAxis=function(e){var n,i,r,o;e=e||this.element;for(n in this.handles)this.handles[n].constructor===String&&(this.handles[n]=t(this.handles[n],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(i=t(this.handles[n],this.element),o=/sw|ne|nw|se|n|s/.test(n)?i.outerHeight():i.outerWidth(),r=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),e.css(r,o),this._proportionallyResize()),t(this.handles[n]).length},this._renderAxis(this.element),this._handles=t(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){s.resizing||(this.className&&(r=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),s.axis=r&&r[1]?r[1]:"se")}),a.autoHide&&(this._handles.hide(),t(this.element).addClass("ui-resizable-autohide").mouseenter(function(){a.disabled||(t(this).removeClass("ui-resizable-autohide"),s._handles.show())}).mouseleave(function(){a.disabled||s.resizing||(t(this).addClass("ui-resizable-autohide"),s._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,n=function(e){t(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_mouseCapture:function(e){var n,i,r=!1;for(n in this.handles)i=t(this.handles[n])[0],(i===e.target||t.contains(i,e.target))&&(r=!0);return!this.options.disabled&&r},_mouseStart:function(n){var i,r,o,s=this.options,a=this.element.position(),l=this.element;return this.resizing=!0,/absolute/.test(l.css("position"))?l.css({position:"absolute",top:l.css("top"),left:l.css("left")}):l.is(".ui-draggable")&&l.css({position:"absolute",top:a.top,left:a.left}),this._renderProxy(),i=e(this.helper.css("left")),r=e(this.helper.css("top")),s.containment&&(i+=t(s.containment).scrollLeft()||0,r+=t(s.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:r},this.size=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalSize=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalPosition={left:i,top:r},this.sizeDiff={width:l.outerWidth()-l.width(),height:l.outerHeight()-l.height()},this.originalMousePosition={left:n.pageX,top:n.pageY},this.aspectRatio="number"==typeof s.aspectRatio?s.aspectRatio:this.originalSize.width/this.originalSize.height||1,o=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===o?this.axis+"-resize":o),l.addClass("ui-resizable-resizing"),this._propagate("start",n),!0},_mouseDrag:function(e){var n,i=this.helper,r={},o=this.originalMousePosition,s=this.axis,a=this.position.top,l=this.position.left,u=this.size.width,c=this.size.height,h=e.pageX-o.left||0,d=e.pageY-o.top||0,p=this._change[s];return p?(n=p.apply(this,[e,h,d]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(n=this._updateRatio(n,e)),n=this._respectSize(n,e),this._updateCache(n),this._propagate("resize",e),this.position.top!==a&&(r.top=this.position.top+"px"),this.position.left!==l&&(r.left=this.position.left+"px"),this.size.width!==u&&(r.width=this.size.width+"px"),this.size.height!==c&&(r.height=this.size.height+"px"),i.css(r),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(r)||this._trigger("resize",e,this.ui()),!1):!1},_mouseStop:function(e){this.resizing=!1;var n,i,r,o,s,a,l,u=this.options,c=this;return this._helper&&(n=this._proportionallyResizeElements,i=n.length&&/textarea/i.test(n[0].nodeName),r=i&&t.ui.hasScroll(n[0],"left")?0:c.sizeDiff.height,o=i?0:c.sizeDiff.width,s={width:c.helper.width()-o,height:c.helper.height()-r},a=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,l=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null,u.animate||this.element.css(t.extend(s,{top:l,left:a})),c.helper.height(c.size.height),c.helper.width(c.size.width),this._helper&&!u.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(t){var e,i,r,o,s,a=this.options;s={minWidth:n(a.minWidth)?a.minWidth:0,maxWidth:n(a.maxWidth)?a.maxWidth:1/0,minHeight:n(a.minHeight)?a.minHeight:0,maxHeight:n(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||t)&&(e=s.minHeight*this.aspectRatio,r=s.minWidth/this.aspectRatio,i=s.maxHeight*this.aspectRatio,o=s.maxWidth/this.aspectRatio,e>s.minWidth&&(s.minWidth=e),r>s.minHeight&&(s.minHeight=r),s.maxWidth>i&&(s.maxWidth=i),s.maxHeight>o&&(s.maxHeight=o)),this._vBoundaries=s},_updateCache:function(t){this.offset=this.helper.offset(),n(t.left)&&(this.position.left=t.left),n(t.top)&&(this.position.top=t.top),n(t.height)&&(this.size.height=t.height),n(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,i=this.size,r=this.axis;return n(t.height)?t.width=t.height*this.aspectRatio:n(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===r&&(t.left=e.left+(i.width-t.width),t.top=null),"nw"===r&&(t.top=e.top+(i.height-t.height),t.left=e.left+(i.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,i=this.axis,r=n(t.width)&&e.maxWidth&&e.maxWidth<t.width,o=n(t.height)&&e.maxHeight&&e.maxHeight<t.height,s=n(t.width)&&e.minWidth&&e.minWidth>t.width,a=n(t.height)&&e.minHeight&&e.minHeight>t.height,l=this.originalPosition.left+this.originalSize.width,u=this.position.top+this.size.height,c=/sw|nw|w/.test(i),h=/nw|ne|n/.test(i);return s&&(t.width=e.minWidth),a&&(t.height=e.minHeight),r&&(t.width=e.maxWidth),o&&(t.height=e.maxHeight),s&&c&&(t.left=l-e.minWidth),r&&c&&(t.left=l-e.maxWidth),a&&h&&(t.top=u-e.minHeight),o&&h&&(t.top=u-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var t,e,n,i,r,o=this.helper||this.element;for(t=0;this._proportionallyResizeElements.length>t;t++){if(r=this._proportionallyResizeElements[t],!this.borderDif)for(this.borderDif=[],n=[r.css("borderTopWidth"),r.css("borderRightWidth"),r.css("borderBottomWidth"),r.css("borderLeftWidth")],i=[r.css("paddingTop"),r.css("paddingRight"),r.css("paddingBottom"),r.css("paddingLeft")],e=0;n.length>e;e++)this.borderDif[e]=(parseInt(n[e],10)||0)+(parseInt(i[e],10)||0);r.css({height:o.height()-this.borderDif[0]-this.borderDif[2]||0,width:o.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var e=this.element,n=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var n=this.originalSize,i=this.originalPosition;return{left:i.left+e,width:n.width-e}},n:function(t,e,n){var i=this.originalSize,r=this.originalPosition;return{top:r.top+n,height:i.height-n}},s:function(t,e,n){return{height:this.originalSize.height+n}},se:function(e,n,i){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,n,i]))},sw:function(e,n,i){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,n,i]))},ne:function(e,n,i){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,n,i]))},nw:function(e,n,i){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,n,i]))}},_propagate:function(e,n){t.ui.plugin.call(this,e,[n,this.ui()]),"resize"!==e&&this._trigger(e,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var n=t(this).data("ui-resizable"),i=n.options,r=n._proportionallyResizeElements,o=r.length&&/textarea/i.test(r[0].nodeName),s=o&&t.ui.hasScroll(r[0],"left")?0:n.sizeDiff.height,a=o?0:n.sizeDiff.width,l={width:n.size.width-a,height:n.size.height-s},u=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,c=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;n.element.animate(t.extend(l,c&&u?{top:c,left:u}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var i={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};r&&r.length&&t(r[0]).css({width:i.width,height:i.height}),n._updateCache(i),n._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var n,i,r,o,s,a,l,u=t(this).data("ui-resizable"),c=u.options,h=u.element,d=c.containment,p=d instanceof t?d.get(0):/parent/.test(d)?h.parent().get(0):d;p&&(u.containerElement=t(p),/document/.test(d)||d===document?(u.containerOffset={left:0,top:0},u.containerPosition={left:0,top:0},u.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(n=t(p),i=[],t(["Top","Right","Left","Bottom"]).each(function(t,r){i[t]=e(n.css("padding"+r))}),u.containerOffset=n.offset(),u.containerPosition=n.position(),u.containerSize={height:n.innerHeight()-i[3],width:n.innerWidth()-i[1]},r=u.containerOffset,o=u.containerSize.height,s=u.containerSize.width,a=t.ui.hasScroll(p,"left")?p.scrollWidth:s,l=t.ui.hasScroll(p)?p.scrollHeight:o,u.parentData={element:p,left:r.left,top:r.top,width:a,height:l}))},resize:function(e){var n,i,r,o,s=t(this).data("ui-resizable"),a=s.options,l=s.containerOffset,u=s.position,c=s._aspectRatio||e.shiftKey,h={top:0,left:0},d=s.containerElement;d[0]!==document&&/static/.test(d.css("position"))&&(h=l),u.left<(s._helper?l.left:0)&&(s.size.width=s.size.width+(s._helper?s.position.left-l.left:s.position.left-h.left),c&&(s.size.height=s.size.width/s.aspectRatio),s.position.left=a.helper?l.left:0),u.top<(s._helper?l.top:0)&&(s.size.height=s.size.height+(s._helper?s.position.top-l.top:s.position.top),c&&(s.size.width=s.size.height*s.aspectRatio),s.position.top=s._helper?l.top:0),s.offset.left=s.parentData.left+s.position.left,s.offset.top=s.parentData.top+s.position.top,n=Math.abs((s._helper?s.offset.left-h.left:s.offset.left-h.left)+s.sizeDiff.width),i=Math.abs((s._helper?s.offset.top-h.top:s.offset.top-l.top)+s.sizeDiff.height),r=s.containerElement.get(0)===s.element.parent().get(0),o=/relative|absolute/.test(s.containerElement.css("position")),r&&o&&(n-=s.parentData.left),n+s.size.width>=s.parentData.width&&(s.size.width=s.parentData.width-n,c&&(s.size.height=s.size.width/s.aspectRatio)),i+s.size.height>=s.parentData.height&&(s.size.height=s.parentData.height-i,c&&(s.size.width=s.size.height*s.aspectRatio))},stop:function(){var e=t(this).data("ui-resizable"),n=e.options,i=e.containerOffset,r=e.containerPosition,o=e.containerElement,s=t(e.helper),a=s.offset(),l=s.outerWidth()-e.sizeDiff.width,u=s.outerHeight()-e.sizeDiff.height;e._helper&&!n.animate&&/relative/.test(o.css("position"))&&t(this).css({left:a.left-r.left-i.left,width:l,height:u}),e._helper&&!n.animate&&/static/.test(o.css("position"))&&t(this).css({left:a.left-r.left-i.left,width:l,height:u})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).data("ui-resizable"),n=e.options,i=function(e){t(e).each(function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})})};"object"!=typeof n.alsoResize||n.alsoResize.parentNode?i(n.alsoResize):n.alsoResize.length?(n.alsoResize=n.alsoResize[0],i(n.alsoResize)):t.each(n.alsoResize,function(t){i(t)})},resize:function(e,n){var i=t(this).data("ui-resizable"),r=i.options,o=i.originalSize,s=i.originalPosition,a={height:i.size.height-o.height||0,width:i.size.width-o.width||0,top:i.position.top-s.top||0,left:i.position.left-s.left||0},l=function(e,i){t(e).each(function(){var e=t(this),r=t(this).data("ui-resizable-alsoresize"),o={},s=i&&i.length?i:e.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(s,function(t,e){var n=(r[e]||0)+(a[e]||0);n&&n>=0&&(o[e]=n||null)}),e.css(o)})};"object"!=typeof r.alsoResize||r.alsoResize.nodeType?l(r.alsoResize):t.each(r.alsoResize,function(t,e){l(t,e)})},stop:function(){t(this).removeData("resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).data("ui-resizable"),n=e.options,i=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof n.ghost?n.ghost:""),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).data("ui-resizable");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).data("ui-resizable");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e=t(this).data("ui-resizable"),n=e.options,i=e.size,r=e.originalSize,o=e.originalPosition,s=e.axis,a="number"==typeof n.grid?[n.grid,n.grid]:n.grid,l=a[0]||1,u=a[1]||1,c=Math.round((i.width-r.width)/l)*l,h=Math.round((i.height-r.height)/u)*u,d=r.width+c,p=r.height+h,f=n.maxWidth&&d>n.maxWidth,g=n.maxHeight&&p>n.maxHeight,m=n.minWidth&&n.minWidth>d,v=n.minHeight&&n.minHeight>p;n.grid=a,m&&(d+=l),v&&(p+=u),f&&(d-=l),g&&(p-=u),/^(se|s|e)$/.test(s)?(e.size.width=d,e.size.height=p):/^(ne)$/.test(s)?(e.size.width=d,e.size.height=p,e.position.top=o.top-h):/^(sw)$/.test(s)?(e.size.width=d,e.size.height=p,e.position.left=o.left-c):(e.size.width=d,e.size.height=p,e.position.top=o.top-h,e.position.left=o.left-c)}})}(jQuery),function(t){var e,n,i,r,o="ui-button ui-widget ui-state-default ui-corner-all",s="ui-state-hover ui-state-active ",a="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",l=function(){var e=t(this);setTimeout(function(){e.find(":ui-button").button("refresh")},1)},u=function(e){var n=e.name,i=e.form,r=t([]);return n&&(n=n.replace(/'/g,"\\'"),r=i?t(i).find("[name='"+n+"']"):t("[name='"+n+"']",e.ownerDocument).filter(function(){return!this.form})),r};t.widget("ui.button",{version:"1.10.3",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,l),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var s=this,a=this.options,c="checkbox"===this.type||"radio"===this.type,h=c?"":"ui-state-active",d="ui-state-focus";null===a.label&&(a.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(o).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){a.disabled||this===e&&t(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){a.disabled||t(this).removeClass(h)}).bind("click"+this.eventNamespace,function(t){a.disabled&&(t.preventDefault(),t.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){s.buttonElement.addClass(d)}).bind("blur"+this.eventNamespace,function(){s.buttonElement.removeClass(d)}),c&&(this.element.bind("change"+this.eventNamespace,function(){r||s.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(t){a.disabled||(r=!1,n=t.pageX,i=t.pageY)}).bind("mouseup"+this.eventNamespace,function(t){a.disabled||(n!==t.pageX||i!==t.pageY)&&(r=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return a.disabled||r?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(a.disabled||r)return!1;t(this).addClass("ui-state-active"),s.buttonElement.attr("aria-pressed","true");var e=s.element[0];u(e).not(e).map(function(){return t(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return a.disabled?!1:(t(this).addClass("ui-state-active"),e=this,s.document.one("mouseup",function(){e=null}),void 0)}).bind("mouseup"+this.eventNamespace,function(){return a.disabled?!1:(t(this).removeClass("ui-state-active"),void 0)}).bind("keydown"+this.eventNamespace,function(e){return a.disabled?!1:((e.keyCode===t.ui.keyCode.SPACE||e.keyCode===t.ui.keyCode.ENTER)&&t(this).addClass("ui-state-active"),void 0)}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){t(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(e){e.keyCode===t.ui.keyCode.SPACE&&t(this).click()})),this._setOption("disabled",a.disabled),this._resetButton()},_determineButtonType:function(){var t,e,n;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(t=this.element.parents().last(),e="label[for='"+this.element.attr("id")+"']",this.buttonElement=t.find(e),this.buttonElement.length||(t=t.length?t.siblings():this.element.siblings(),this.buttonElement=t.filter(e),this.buttonElement.length||(this.buttonElement=t.find(e))),this.element.addClass("ui-helper-hidden-accessible"),n=this.element.is(":checked"),n&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",n)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(o+" "+s+" "+a).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(t,e){return this._super(t,e),"disabled"===t?(e?this.element.prop("disabled",!0):this.element.prop("disabled",!1),void 0):(this._resetButton(),void 0)},refresh:function(){var e=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOption("disabled",e),"radio"===this.type?u(this.element[0]).each(function(){t(this).is(":checked")?t(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):t(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return this.options.label&&this.element.val(this.options.label),void 0;var e=this.buttonElement.removeClass(a),n=t("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(e.empty()).text(),i=this.options.icons,r=i.primary&&i.secondary,o=[];i.primary||i.secondary?(this.options.text&&o.push("ui-button-text-icon"+(r?"s":i.primary?"-primary":"-secondary")),i.primary&&e.prepend("<span class='ui-button-icon-primary ui-icon "+i.primary+"'></span>"),i.secondary&&e.append("<span class='ui-button-icon-secondary ui-icon "+i.secondary+"'></span>"),this.options.text||(o.push(r?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||e.attr("title",t.trim(n)))):o.push("ui-button-text-only"),e.addClass(o.join(" "))}}),t.widget("ui.buttonset",{version:"1.10.3",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(t,e){"disabled"===t&&this.buttons.button("option",t,e),this._super(t,e)},refresh:function(){var e="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(e?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(e?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function(t){var e={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},n={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};t.widget("ui.dialog",{version:"1.10.3",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var n=t(this).css(e).offset().top;0>n&&t(this).css("top",e.top-n)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&t.fn.draggable&&this._makeDraggable(),this.options.resizable&&t.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var e=this.options.appendTo;return e&&(e.jquery||e.nodeType)?t(e):this.document.find(e||"body").eq(0)},_destroy:function(){var t,e=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),t=e.parent.children().eq(e.index),t.length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},disable:t.noop,enable:t.noop,close:function(e){var n=this;this._isOpen&&this._trigger("beforeClose",e)!==!1&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||t(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){n._trigger("close",e)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,e){var n=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return n&&!e&&this._trigger("focus",t),n},open:function(){var e=this;return this._isOpen?(this._moveToTop()&&this._focusTabbable(),void 0):(this._isOpen=!0,this.opener=t(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){e._focusTabbable(),e._trigger("focus")
}),this._trigger("open"),void 0)},_focusTabbable:function(){var t=this.element.find("[autofocus]");t.length||(t=this.element.find(":tabbable")),t.length||(t=this.uiDialogButtonPane.find(":tabbable")),t.length||(t=this.uiDialogTitlebarClose.filter(":tabbable")),t.length||(t=this.uiDialog),t.eq(0).focus()},_keepFocus:function(e){function n(){var e=this.document[0].activeElement,n=this.uiDialog[0]===e||t.contains(this.uiDialog[0],e);n||this._focusTabbable()}e.preventDefault(),n.call(this),this._delay(n)},_createWrapper:function(){this.uiDialog=t("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(e){if(this.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===t.ui.keyCode.ESCAPE)return e.preventDefault(),this.close(e),void 0;if(e.keyCode===t.ui.keyCode.TAB){var n=this.uiDialog.find(":tabbable"),i=n.filter(":first"),r=n.filter(":last");e.target!==r[0]&&e.target!==this.uiDialog[0]||e.shiftKey?e.target!==i[0]&&e.target!==this.uiDialog[0]||!e.shiftKey||(r.focus(1),e.preventDefault()):(i.focus(1),e.preventDefault())}},mousedown:function(t){this._moveToTop(t)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var e;this.uiDialogTitlebar=t("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(e){t(e.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=t("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(t){t.preventDefault(),this.close(t)}}),e=t("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(e),this.uiDialog.attr({"aria-labelledby":e.attr("id")})},_title:function(t){this.options.title||t.html("&#160;"),t.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=t("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=t("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var e=this,n=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),t.isEmptyObject(n)||t.isArray(n)&&!n.length?(this.uiDialog.removeClass("ui-dialog-buttons"),void 0):(t.each(n,function(n,i){var r,o;i=t.isFunction(i)?{click:i,text:n}:i,i=t.extend({type:"button"},i),r=i.click,i.click=function(){r.apply(e.element[0],arguments)},o={icons:i.icons,text:i.showText},delete i.icons,delete i.showText,t("<button></button>",i).button(o).appendTo(e.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),void 0)},_makeDraggable:function(){function e(t){return{position:t.position,offset:t.offset}}var n=this,i=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(i,r){t(this).addClass("ui-dialog-dragging"),n._blockFrames(),n._trigger("dragStart",i,e(r))},drag:function(t,i){n._trigger("drag",t,e(i))},stop:function(r,o){i.position=[o.position.left-n.document.scrollLeft(),o.position.top-n.document.scrollTop()],t(this).removeClass("ui-dialog-dragging"),n._unblockFrames(),n._trigger("dragStop",r,e(o))}})},_makeResizable:function(){function e(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}var n=this,i=this.options,r=i.resizable,o=this.uiDialog.css("position"),s="string"==typeof r?r:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:i.maxWidth,maxHeight:i.maxHeight,minWidth:i.minWidth,minHeight:this._minHeight(),handles:s,start:function(i,r){t(this).addClass("ui-dialog-resizing"),n._blockFrames(),n._trigger("resizeStart",i,e(r))},resize:function(t,i){n._trigger("resize",t,e(i))},stop:function(r,o){i.height=t(this).height(),i.width=t(this).width(),t(this).removeClass("ui-dialog-resizing"),n._unblockFrames(),n._trigger("resizeStop",r,e(o))}}).css("position",o)},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(){var t=this.uiDialog.is(":visible");t||this.uiDialog.show(),this.uiDialog.position(this.options.position),t||this.uiDialog.hide()},_setOptions:function(i){var r=this,o=!1,s={};t.each(i,function(t,i){r._setOption(t,i),t in e&&(o=!0),t in n&&(s[t]=i)}),o&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",s)},_setOption:function(t,e){var n,i,r=this.uiDialog;"dialogClass"===t&&r.removeClass(this.options.dialogClass).addClass(e),"disabled"!==t&&(this._super(t,e),"appendTo"===t&&this.uiDialog.appendTo(this._appendTo()),"buttons"===t&&this._createButtons(),"closeText"===t&&this.uiDialogTitlebarClose.button({label:""+e}),"draggable"===t&&(n=r.is(":data(ui-draggable)"),n&&!e&&r.draggable("destroy"),!n&&e&&this._makeDraggable()),"position"===t&&this._position(),"resizable"===t&&(i=r.is(":data(ui-resizable)"),i&&!e&&r.resizable("destroy"),i&&"string"==typeof e&&r.resizable("option","handles",e),i||e===!1||this._makeResizable()),"title"===t&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var t,e,n,i=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),i.minWidth>i.width&&(i.width=i.minWidth),t=this.uiDialog.css({height:"auto",width:i.width}).outerHeight(),e=Math.max(0,i.minHeight-t),n="number"==typeof i.maxHeight?Math.max(0,i.maxHeight-t):"none","auto"===i.height?this.element.css({minHeight:e,maxHeight:n,height:"auto"}):this.element.height(Math.max(0,i.height-t)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var e=t(this);return t("<div>").css({position:"absolute",width:e.outerWidth(),height:e.outerHeight()}).appendTo(e.parent()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(e){return t(e.target).closest(".ui-dialog").length?!0:!!t(e.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var e=this,n=this.widgetFullName;t.ui.dialog.overlayInstances||this._delay(function(){t.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(i){e._allowInteraction(i)||(i.preventDefault(),t(".ui-dialog:visible:last .ui-dialog-content").data(n)._focusTabbable())})}),this.overlay=t("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),t.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(t.ui.dialog.overlayInstances--,t.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),t.ui.dialog.overlayInstances=0,t.uiBackCompat!==!1&&t.widget("ui.dialog",t.ui.dialog,{_position:function(){var e,n=this.options.position,i=[],r=[0,0];n?(("string"==typeof n||"object"==typeof n&&"0"in n)&&(i=n.split?n.split(" "):[n[0],n[1]],1===i.length&&(i[1]=i[0]),t.each(["left","top"],function(t,e){+i[t]===i[t]&&(r[t]=i[t],i[t]=e)}),n={my:i[0]+(0>r[0]?r[0]:"+"+r[0])+" "+i[1]+(0>r[1]?r[1]:"+"+r[1]),at:i.join(" ")}),n=t.extend({},t.ui.dialog.prototype.options.position,n)):n=t.ui.dialog.prototype.options.position,e=this.uiDialog.is(":visible"),e||this.uiDialog.show(),this.uiDialog.position(n),e||this.uiDialog.hide()}})}(jQuery),function(t){t.widget("ui.menu",{version:"1.10.3",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,t.proxy(function(t){this.options.disabled&&t.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(t){t.preventDefault()},"click .ui-state-disabled > a":function(t){t.preventDefault()},"click .ui-menu-item:has(a)":function(e){var n=t(e.target).closest(".ui-menu-item");!this.mouseHandled&&n.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(e),n.has(".ui-menu").length?this.expand(e):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(e){var n=t(e.currentTarget);n.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(e,n)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var n=this.active||this.element.children(".ui-menu-item").eq(0);e||this.focus(t,n)},blur:function(e){this._delay(function(){t.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(e)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){t(e.target).closest(".ui-menu").length||this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var e=t(this);e.data("ui-menu-submenu-carat")&&e.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(e){function n(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var i,r,o,s,a,l=!0;switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move("first","first",e);break;case t.ui.keyCode.END:this._move("last","last",e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:l=!1,r=this.previousFilter||"",o=String.fromCharCode(e.keyCode),s=!1,clearTimeout(this.filterTimer),o===r?s=!0:o=r+o,a=RegExp("^"+n(o),"i"),i=this.activeMenu.children(".ui-menu-item").filter(function(){return a.test(t(this).children("a").text())}),i=s&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i,i.length||(o=String.fromCharCode(e.keyCode),a=RegExp("^"+n(o),"i"),i=this.activeMenu.children(".ui-menu-item").filter(function(){return a.test(t(this).children("a").text())})),i.length?(this.focus(e,i),i.length>1?(this.previousFilter=o,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}l&&e.preventDefault()},_activate:function(t){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var e,n=this.options.icons.submenu,i=this.element.find(this.options.menus);i.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var e=t(this),i=e.prev("a"),r=t("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",!0);i.attr("aria-haspopup","true").prepend(r),e.attr("aria-labelledby",i.attr("id"))}),e=i.add(this.element),e.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),e.children(":not(.ui-menu-item)").each(function(){var e=t(this);/[^\-\u2014\u2013\s]/.test(e.text())||e.addClass("ui-widget-content ui-menu-divider")}),e.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!t.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){"icons"===t&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(e.submenu),this._super(t,e)},focus:function(t,e){var n,i;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),i=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),n=e.children(".ui-menu"),n.length&&/^mouse/.test(t.type)&&this._startOpening(n),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(e){var n,i,r,o,s,a;this._hasScroll()&&(n=parseFloat(t.css(this.activeMenu[0],"borderTopWidth"))||0,i=parseFloat(t.css(this.activeMenu[0],"paddingTop"))||0,r=e.offset().top-this.activeMenu.offset().top-n-i,o=this.activeMenu.scrollTop(),s=this.activeMenu.height(),a=e.height(),0>r?this.activeMenu.scrollTop(o+r):r+a>s&&this.activeMenu.scrollTop(o+r-s+a))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",t,{item:this.active}))},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(e){var n=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(e,n){clearTimeout(this.timer),this.timer=this._delay(function(){var i=n?this.element:t(e&&e.target).closest(this.element.find(".ui-menu"));i.length||(i=this.element),this._close(i),this.blur(e),this.activeMenu=i},this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,n){var i;this.active&&(i="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),i&&i.length&&this.active||(i=this.activeMenu.children(".ui-menu-item")[e]()),this.focus(n,i)},nextPage:function(e){var n,i,r;return this.active?(this.isLastItem()||(this._hasScroll()?(i=this.active.offset().top,r=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return n=t(this),0>n.offset().top-i-r}),this.focus(e,n)):this.focus(e,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())),void 0):(this.next(e),void 0)},previousPage:function(e){var n,i,r;return this.active?(this.isFirstItem()||(this._hasScroll()?(i=this.active.offset().top,r=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return n=t(this),n.offset().top-i+r>0}),this.focus(e,n)):this.focus(e,this.activeMenu.children(".ui-menu-item").first())),void 0):(this.next(e),void 0)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||t(e.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,n)}})}(jQuery),function(t){var e=5;t.widget("ui.slider",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,n,i=this.options,r=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),o="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",s=[];for(n=i.values&&i.values.length||1,r.length>n&&(r.slice(n).remove(),r=r.slice(0,n)),e=r.length;n>e;e++)s.push(o);this.handles=r.add(t(s.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(e){t(this).data("ui-slider-handle-index",e)})},_createRange:function(){var e=this.options,n="";e.range?(e.range===!0&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=t("<div></div>").appendTo(this.element),n="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(n+("min"===e.range||"max"===e.range?" ui-slider-range-"+e.range:""))):this.range=t([])},_setupEvents:function(){var t=this.handles.add(this.range).filter("a");this._off(t),this._on(t,this._handleEvents),this._hoverable(t),this._focusable(t)},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(e){var n,i,r,o,s,a,l,u,c=this,h=this.options;return h.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(n),r=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var n=Math.abs(i-c.values(e));(r>n||r===n&&(e===c._lastChangedValue||c.values(e)===h.min))&&(r=n,o=t(this),s=e)}),a=this._start(e,s),a===!1?!1:(this._mouseSliding=!0,this._handleIndex=s,o.addClass("ui-state-active").focus(),l=o.offset(),u=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=u?{left:0,top:0}:{left:e.pageX-l.left-o.width()/2,top:e.pageY-l.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,s,i),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,n),!1},_mouseStop:function(t){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,n,i,r,o;return"horizontal"===this.orientation?(e=this.elementSize.width,n=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,n=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),i=n/e,i>1&&(i=1),0>i&&(i=0),"vertical"===this.orientation&&(i=1-i),r=this._valueMax()-this._valueMin(),o=this._valueMin()+i*r,this._trimAlignValue(o)},_start:function(t,e){var n={handle:this.handles[e],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(e),n.values=this.values()),this._trigger("start",t,n)},_slide:function(t,e,n){var i,r,o;this.options.values&&this.options.values.length?(i=this.values(e?0:1),2===this.options.values.length&&this.options.range===!0&&(0===e&&n>i||1===e&&i>n)&&(n=i),n!==this.values(e)&&(r=this.values(),r[e]=n,o=this._trigger("slide",t,{handle:this.handles[e],value:n,values:r}),i=this.values(e?0:1),o!==!1&&this.values(e,n,!0))):n!==this.value()&&(o=this._trigger("slide",t,{handle:this.handles[e],value:n}),o!==!1&&this.value(n))},_stop:function(t,e){var n={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(e),n.values=this.values()),this._trigger("stop",t,n)},_change:function(t,e){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(e),n.values=this.values()),this._lastChangedValue=e,this._trigger("change",t,n)}},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(e,n){var i,r,o;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(n),this._refreshValue(),this._change(null,e),void 0;if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(e):this.value();for(i=this.options.values,r=arguments[0],o=0;i.length>o;o+=1)i[o]=this._trimAlignValue(r[o]),this._change(null,o);this._refreshValue()},_setOption:function(e,n){var i,r=0;switch("range"===e&&this.options.range===!0&&("min"===n?(this.options.value=this._values(0),this.options.values=null):"max"===n&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(r=this.options.values.length),t.Widget.prototype._setOption.apply(this,arguments),e){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=0;r>i;i+=1)this._change(null,i);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,n,i;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this.options.values&&this.options.values.length){for(n=this.options.values.slice(),i=0;n.length>i;i+=1)n[i]=this._trimAlignValue(n[i]);return n}return[]},_trimAlignValue:function(t){if(this._valueMin()>=t)return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,n=(t-this._valueMin())%e,i=t-n;return 2*Math.abs(n)>=e&&(i+=n>0?e:-e),parseFloat(i.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var e,n,i,r,o,s=this.options.range,a=this.options,l=this,u=this._animateOff?!1:a.animate,c={};this.options.values&&this.options.values.length?this.handles.each(function(i){n=100*((l.values(i)-l._valueMin())/(l._valueMax()-l._valueMin())),c["horizontal"===l.orientation?"left":"bottom"]=n+"%",t(this).stop(1,1)[u?"animate":"css"](c,a.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===i&&l.range.stop(1,1)[u?"animate":"css"]({left:n+"%"},a.animate),1===i&&l.range[u?"animate":"css"]({width:n-e+"%"},{queue:!1,duration:a.animate})):(0===i&&l.range.stop(1,1)[u?"animate":"css"]({bottom:n+"%"},a.animate),1===i&&l.range[u?"animate":"css"]({height:n-e+"%"},{queue:!1,duration:a.animate}))),e=n}):(i=this.value(),r=this._valueMin(),o=this._valueMax(),n=o!==r?100*((i-r)/(o-r)):0,c["horizontal"===this.orientation?"left":"bottom"]=n+"%",this.handle.stop(1,1)[u?"animate":"css"](c,a.animate),"min"===s&&"horizontal"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({width:n+"%"},a.animate),"max"===s&&"horizontal"===this.orientation&&this.range[u?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:a.animate}),"min"===s&&"vertical"===this.orientation&&this.range.stop(1,1)[u?"animate":"css"]({height:n+"%"},a.animate),"max"===s&&"vertical"===this.orientation&&this.range[u?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:a.animate}))},_handleEvents:{keydown:function(n){var i,r,o,s,a=t(n.target).data("ui-slider-handle-index");switch(n.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(n.preventDefault(),!this._keySliding&&(this._keySliding=!0,t(n.target).addClass("ui-state-active"),i=this._start(n,a),i===!1))return}switch(s=this.options.step,r=o=this.options.values&&this.options.values.length?this.values(a):this.value(),n.keyCode){case t.ui.keyCode.HOME:o=this._valueMin();break;case t.ui.keyCode.END:o=this._valueMax();break;case t.ui.keyCode.PAGE_UP:o=this._trimAlignValue(r+(this._valueMax()-this._valueMin())/e);break;case t.ui.keyCode.PAGE_DOWN:o=this._trimAlignValue(r-(this._valueMax()-this._valueMin())/e);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(r===this._valueMax())return;o=this._trimAlignValue(r+s);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(r===this._valueMin())return;o=this._trimAlignValue(r-s)}this._slide(n,a,o)},click:function(t){t.preventDefault()},keyup:function(e){var n=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,n),this._change(e,n),t(e.target).removeClass("ui-state-active"))}}})}(jQuery),function(t){function e(t,e){if(!(t.originalEvent.touches.length>1)){t.preventDefault();var n=t.originalEvent.changedTouches[0],i=document.createEvent("MouseEvents");i.initMouseEvent(e,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(i)}}if(t.support.touch="ontouchend"in document,t.support.touch){var n,i=t.ui.mouse.prototype,r=i._mouseInit;i._touchStart=function(t){var i=this;!n&&i._mouseCapture(t.originalEvent.changedTouches[0])&&(n=!0,i._touchMoved=!1,e(t,"mouseover"),e(t,"mousemove"),e(t,"mousedown"))},i._touchMove=function(t){n&&(this._touchMoved=!0,e(t,"mousemove"))},i._touchEnd=function(t){n&&(e(t,"mouseup"),e(t,"mouseout"),this._touchMoved||e(t,"click"),n=!1)},i._mouseInit=function(){var e=this;e.element.bind("touchstart",t.proxy(e,"_touchStart")).bind("touchmove",t.proxy(e,"_touchMove")).bind("touchend",t.proxy(e,"_touchEnd")),r.call(e)}}}(jQuery),/*! jquery-dialogextend 2.0.2 2013-08-06 */
function(){var t;t=jQuery,t.widget("ui.dialogExtend",{version:"2.0.0",modes:{},options:{closable:!0,dblclick:!1,titlebar:!1,icons:{close:"ui-icon-closethick",restore:"ui-icon-newwin"},load:null,beforeRestore:null,restore:null},_create:function(){return this._state="normal",t(this.element[0]).data("ui-dialog")||t.error("jQuery.dialogExtend Error : Only jQuery UI Dialog element is accepted"),this._verifyOptions(),this._initStyles(),this._initButtons(),this._initTitleBar(),this._setState("normal"),this._on("load",function(t){return console.log("test",t)}),this._trigger("load")},_setState:function(e){return t(this.element[0]).removeClass("ui-dialog-"+this._state).addClass("ui-dialog-"+e),this._state=e},_verifyOptions:function(){var e,n,i;!this.options.dblclick||this.options.dblclick in this.modes||(t.error("jQuery.dialogExtend Error : Invalid <dblclick> value '"+this.options.dblclick+"'"),this.options.dblclick=!1),this.options.titlebar&&"none"!==(n=this.options.titlebar)&&"transparent"!==n&&(t.error("jQuery.dialogExtend Error : Invalid <titlebar> value '"+this.options.titlebar+"'"),this.options.titlebar=!1),i=[];for(e in this.modes)this["_verifyOptions_"+e]?i.push(this["_verifyOptions_"+e]()):i.push(void 0);return i},_initStyles:function(){var e,n,i;t(".dialog-extend-css").length||(n="",n+='<style class="dialog-extend-css" type="text/css">',n+=".ui-dialog .ui-dialog-titlebar-buttonpane>a { float: right; }",n+=".ui-dialog .ui-dialog-titlebar-restore { width: 19px; height: 18px; }",n+=".ui-dialog .ui-dialog-titlebar-restore span { display: block; margin: 1px; }",n+=".ui-dialog .ui-dialog-titlebar-restore:hover,",n+=".ui-dialog .ui-dialog-titlebar-restore:focus { padding: 0; }",n+=".ui-dialog .ui-dialog-titlebar ::selection { background-color: transparent; }",n+="</style>",t(n).appendTo("body")),i=[];for(e in this.modes)i.push(this["_initStyles_"+e]());return i},_initButtons:function(){var e,n,i,r,o,s=this;r=t(this.element[0]).dialog("widget").find(".ui-dialog-titlebar"),e=t('<div class="ui-dialog-titlebar-buttonpane"></div>').appendTo(r),e.css({position:"absolute",top:"50%",right:"0.3em","margin-top":"-10px",height:"18px"}),r.find(".ui-dialog-titlebar-close").css({position:"relative","float":"right",top:"auto",right:"auto",margin:0}).find(".ui-icon").removeClass("ui-icon-closethick").addClass(this.options.icons.close).end().appendTo(e).end(),e.append('<a class="ui-dialog-titlebar-restore ui-corner-all ui-state-default" href="#"><span class="ui-icon '+this.options.icons.restore+'">restore</span></a>').find(".ui-dialog-titlebar-restore").attr("role","button").mouseover(function(){return t(this).addClass("ui-state-hover")}).mouseout(function(){return t(this).removeClass("ui-state-hover")}).focus(function(){return t(this).addClass("ui-state-focus")}).blur(function(){return t(this).removeClass("ui-state-focus")}).end().find(".ui-dialog-titlebar-close").toggle(this.options.closable).end().find(".ui-dialog-titlebar-restore").hide().click(function(t){return t.preventDefault(),s.restore()}).end(),o=this.modes;for(i in o)n=o[i],this._initModuleButton(i,n);return r.dblclick(function(){return s.options.dblclick?"normal"!==s._state?s.restore():s[s.options.dblclick]():void 0}).select(function(){return!1})},_initModuleButton:function(e,n){var i,r=this;return i=t(this.element[0]).dialog("widget").find(".ui-dialog-titlebar-buttonpane"),i.append('<a class="ui-dialog-titlebar-'+e+' ui-corner-all ui-state-default" href="#"><span class="ui-icon '+this.options.icons[e]+'">'+e+"</span></a>").find(".ui-dialog-titlebar-"+e).attr("role","button").mouseover(function(){return t(this).addClass("ui-state-hover")}).mouseout(function(){return t(this).removeClass("ui-state-hover")}).focus(function(){return t(this).addClass("ui-state-focus")}).blur(function(){return t(this).removeClass("ui-state-focus")}).end().find(".ui-dialog-titlebar-"+e).toggle(this.options[n.option]).click(function(t){return t.preventDefault(),r[e]()}).end()},_initTitleBar:function(){var e;switch(this.options.titlebar){case!1:return 0;case"none":return t(this.element[0]).dialog("option","draggable")&&(e=t("<div />").addClass("ui-dialog-draggable-handle").css("cursor","move").height(5),t(this.element[0]).dialog("widget").prepend(e).draggable("option","handle",e)),t(this.element[0]).dialog("widget").find(".ui-dialog-titlebar").find(".ui-dialog-title").html("&nbsp;").end().css({"background-color":"transparent","background-image":"none",border:0,position:"absolute",right:0,top:0,"z-index":9999}).end();case"transparent":return t(this.element[0]).dialog("widget").find(".ui-dialog-titlebar").css({"background-color":"transparent","background-image":"none",border:0});default:return t.error("jQuery.dialogExtend Error : Invalid <titlebar> value '"+this.options.titlebar+"'")}},state:function(){return this._state},restore:function(){return this._trigger("beforeRestore"),this._restore(),this._setState("normal"),this._toggleButtons(),this._trigger("restore")},_restore:function(){return"normal"!==this._state?this["_restore_"+this._state]():void 0},_saveSnapshot:function(){return"normal"===this._state?(null==this.options.containerCls&&(this.options.containerCls="body"),this.original_config_resizable=t(this.element[0]).dialog("option","resizable"),this.original_config_draggable=t(this.element[0]).dialog("option","draggable"),this.original_size_height=t(this.element[0]).dialog("widget").outerHeight(),this.original_size_width=t(this.element[0]).dialog("option","width"),this.original_size_maxHeight=t(this.element[0]).dialog("option","maxHeight"),this.original_position_mode=t(this.element[0]).dialog("widget").css("position"),this.original_position_left=t(this.element[0]).dialog("widget").offset().left-t(this.options.containerCls).scrollLeft(),this.original_position_top=t(this.element[0]).dialog("widget").offset().top-t(this.options.containerCls).scrollTop(),this.original_titlebar_wrap=t(this.element[0]).dialog("widget").find(".ui-dialog-titlebar").css("white-space")):void 0},_loadSnapshot:function(){return{config:{resizable:this.original_config_resizable,draggable:this.original_config_draggable},size:{height:this.original_size_height,width:this.original_size_width,maxHeight:this.original_size_maxHeight},position:{mode:this.original_position_mode,left:this.original_position_left,top:this.original_position_top},titlebar:{wrap:this.original_titlebar_wrap}}},_toggleButtons:function(){var e,n,i,r;t(this.element[0]).dialog("widget").find(".ui-dialog-titlebar-restore").toggle("normal"!==this._state).css({right:"1.4em"}).end(),i=this.modes,r=[];for(n in i)e=i[n],r.push(t(this.element[0]).dialog("widget").find(".ui-dialog-titlebar-"+n).toggle(this._state!==e.state&&this.options[e.option]));return r}})}.call(this),function(){var t;t=jQuery,t.extend(!0,t.ui.dialogExtend.prototype,{modes:{collapse:{option:"collapsable",state:"collapsed"}},options:{collapsable:!1,icons:{collapse:"ui-icon-triangle-1-s"},beforeCollapse:null,collapse:null},collapse:function(){var e;return e=t(this.element[0]).dialog("widget").find(".ui-dialog-titlebar").height()+15,this._trigger("beforeCollapse"),"normal"!==this._state&&this._restore(),this._saveSnapshot(),t(this.element[0]).dialog("option",{resizable:!1,height:e,maxHeight:e}).on("dialogclose",this._collapse_restore).hide().dialog("widget").find(".ui-dialog-buttonpane:visible").hide().end().find(".ui-dialog-titlebar").css("white-space","nowrap").end().find(".ui-dialog-content"),this._setState("collapsed"),this._toggleButtons(),this._trigger("collapse")},_restore_collapsed:function(){var e;return e=this._loadSnapshot(),t(this.element[0]).show().dialog("widget").find(".ui-dialog-buttonpane:hidden").show().end().find(".ui-dialog-titlebar").css("white-space",e.titlebar.wrap).end().find(".ui-dialog-content").dialog("option",{resizable:e.config.resizable,height:e.size.height,maxHeight:e.size.maxHeight}).off("dialogclose",this._collapse_restore)},_initStyles_collapse:function(){var e;return t(".dialog-extend-collapse-css").length?void 0:(e="",e+='<style class="dialog-extend-collapse-css" type="text/css">',e+=".ui-dialog .ui-dialog-titlebar-collapse { width: 19px; height: 18px; }",e+=".ui-dialog .ui-dialog-titlebar-collapse span { display: block; margin: 1px; }",e+=".ui-dialog .ui-dialog-titlebar-collapse:hover,",e+=".ui-dialog .ui-dialog-titlebar-collapse:focus { padding: 0; }",e+="</style>",t(e).appendTo("body"))},_collapse_restore:function(){return t(this).dialogExtend("restore")}})}.call(this),function(){var t;t=jQuery,t.extend(!0,t.ui.dialogExtend.prototype,{modes:{maximize:{option:"maximizable",state:"maximized"}},options:{maximizable:!1,icons:{maximize:"ui-icon-extlink"},beforeMaximize:null,maximize:null},maximize:function(){var e,n;return null==this.options.mainMenuHeight&&(this.options.mainMenuHeight=0),null==this.options.statusBarHeight&&(this.options.statusBarHeight=0),e=t(window).height()-(this.options.mainMenuHeight+this.options.statusBarHeight),n=t(window).width(),this._trigger("beforeMaximize"),"normal"!==this._state&&this._restore(),this._saveSnapshot(),t(this.element[0]).dialog("option","draggable")&&t(this.element[0]).dialog("widget").draggable("option","handle",null).find(".ui-dialog-draggable-handle").css("cursor","text").end(),t(this.element[0]).dialog("widget").css("position","fixed").find(".ui-dialog-content").show().dialog("widget").find(".ui-dialog-buttonpane").show().end().find(".ui-dialog-content").dialog("option",{resizable:!1,draggable:!1,height:e,width:n,position:{my:"left top",at:"left top+"+this.options.mainMenuHeight}}),this._setState("maximized"),this._toggleButtons(),this._trigger("maximize")},_restore_maximized:function(){var e;return e=this._loadSnapshot(),t(this.element[0]).dialog("widget").css("position",e.position.mode).find(".ui-dialog-titlebar").css("white-space",e.titlebar.wrap).end().find(".ui-dialog-content").dialog("option",{resizable:e.config.resizable,draggable:e.config.draggable,height:e.size.height,width:e.size.width,maxHeight:e.size.maxHeight,position:{my:"left top",at:"left+"+e.position.left+" top+"+e.position.top}}),t(this.element[0]).dialog("option","draggable")?t(this.element[0]).dialog("widget").draggable("option","handle",t(this.element[0]).dialog("widget").find(".ui-dialog-draggable-handle").length?t(this.element[0]).dialog("widget").find(".ui-dialog-draggable-handle"):".ui-dialog-titlebar").find(".ui-dialog-draggable-handle").css("cursor","move"):void 0},_initStyles_maximize:function(){var e;return t(".dialog-extend-maximize-css").length?void 0:(e="",e+='<style class="dialog-extend-maximize-css" type="text/css">',e+=".ui-dialog .ui-dialog-titlebar-maximize { width: 19px; height: 18px; }",e+=".ui-dialog .ui-dialog-titlebar-maximize span { display: block; margin: 1px; }",e+=".ui-dialog .ui-dialog-titlebar-maximize:hover,",e+=".ui-dialog .ui-dialog-titlebar-maximize:focus { padding: 0; }",e+="</style>",t(e).appendTo("body"))}})}.call(this),function(){var t;t=jQuery,t.extend(!0,t.ui.dialogExtend.prototype,{modes:{minimize:{option:"minimizable",state:"minimized"}},options:{minimizable:!1,minimizeLocation:"left",icons:{minimize:"ui-icon-minus"},beforeMinimize:null,minimize:null},minimize:function(){var e,n,i,r;return n=t(this.element[0]).dialog("widget").find(".ui-dialog-titlebar").height()+15,i=200,e=t("#dialog-extend-fixed-container").length?t("#dialog-extend-fixed-container"):t('<div id="dialog-extend-fixed-container"></div>').appendTo("body"),e.css({position:"fixed",bottom:1,left:1,right:1,"z-index":9999}),r=t("<div/>").css({"float":this.options.minimizeLocation,margin:1}),e.append(r),t(this.element[0]).data("dialog-extend-minimize-overlay",r),this._trigger("beforeMinimize"),this._saveSnapshot(),t(this.element[0]).dialog("option","draggable")&&t(this.element[0]).dialog("widget").draggable("option","handle",null).find(".ui-dialog-draggable-handle").css("cursor","text").end(),t(this.element[0]).dialog("option",{resizable:!1,draggable:!1,height:n,width:i}).on("dialogclose",this._minimize_removeOverlay).dialog("widget").css("position","static").appendTo(r).find(".ui-dialog-content").dialog("widget").find(".ui-dialog-titlebar").each(function(){var e,n,i;return i=t(this),e=i.find(".ui-dialog-titlebar-buttonpane"),n=i.find(".ui-dialog-title"),n.css({overflow:"hidden",width:i.width()-e.width()+10})}).end().find(".ui-dialog-content").hide().dialog("widget").find(".ui-dialog-buttonpane:visible").hide().end().find(".ui-dialog-titlebar").css("white-space","nowrap").end().find(".ui-dialog-content"),this._setState("minimized"),this._toggleButtons(),this._trigger("minimize")},_restore_minimized:function(){var e;return e=this._loadSnapshot(),t(this.element[0]).dialog("widget").appendTo("body").css({"float":"none",margin:0,position:e.position.mode}).find(".ui-dialog-content").dialog("widget").find(".ui-dialog-title").css("width","auto").end().find(".ui-dialog-content").show().dialog("widget").find(".ui-dialog-buttonpane:hidden").show().end().find(".ui-dialog-titlebar").css("white-space",e.titlebar.wrap).end().find(".ui-dialog-content").dialog("option",{resizable:e.config.resizable,draggable:e.config.draggable,height:e.size.height,width:e.size.width,maxHeight:e.size.maxHeight,position:{my:"left top",at:"left+"+e.position.left+" top+"+e.position.top}}).off("dialogclose",this._minimize_removeOverlay),t(this.element[0]).dialog("option","draggable")&&t(this.element[0]).dialog("widget").draggable("option","handle",t(this.element[0]).dialog("widget").find(".ui-dialog-draggable-handle").length?t(this.element[0]).dialog("widget").find(".ui-dialog-draggable-handle"):".ui-dialog-titlebar").find(".ui-dialog-draggable-handle").css("cursor","move"),t(this.element[0]).data("dialog-extend-minimize-overlay").remove(),t(this.element[0]).removeData("dialog-extend-overlay")},_initStyles_minimize:function(){var e;return t(".dialog-extend-minimize-css").length?void 0:(e="",e+='<style class="dialog-extend-minimize-css" type="text/css">',e+=".ui-dialog .ui-dialog-titlebar-minimize { width: 19px; height: 18px; }",e+=".ui-dialog .ui-dialog-titlebar-minimize span { display: block; margin: 1px; }",e+=".ui-dialog .ui-dialog-titlebar-minimize:hover,",e+=".ui-dialog .ui-dialog-titlebar-minimize:focus { padding: 0; }",e+="</style>",t(e).appendTo("body"))},_verifyOptions_minimize:function(){var e;return!this.options.minimizeLocation||"left"!==(e=this.options.minimizeLocation)&&"right"!==e?(t.error("jQuery.dialogExtend Error : Invalid <minimizeLocation> value '"+this.options.minimizeLocation+"'"),this.options.minimizeLocation="left"):void 0},_minimize_removeOverlay:function(){return t(this).dialogExtend("restore"),t(this).dialog("widget").appendTo(t("body")),t(this).data("dialog-extend-minimize-overlay").remove(),t(this).removeData("dialog-extend-overlay")}})}.call(this),function(t){function e(t){return"object"==typeof t?t:{top:t,left:t}}var n=t.scrollTo=function(e,n,i){t(window).scrollTo(e,n,i)};n.defaults={axis:"xy",duration:parseFloat(t.fn.jquery)>=1.3?0:1,limit:!0},n.window=function(){return t(window)._scrollable()},t.fn._scrollable=function(){return this.map(function(){var e=this,n=!e.nodeName||-1!=t.inArray(e.nodeName.toLowerCase(),["iframe","#document","html","body"]);if(!n)return e;var i=(e.contentWindow||e).document||e.ownerDocument||e;return/webkit/i.test(navigator.userAgent)||"BackCompat"==i.compatMode?i.body:i.documentElement})},t.fn.scrollTo=function(i,r,o){return"object"==typeof r&&(o=r,r=0),"function"==typeof o&&(o={onAfter:o}),"max"==i&&(i=9e9),o=t.extend({},n.defaults,o),r=r||o.duration,o.queue=o.queue&&o.axis.length>1,o.queue&&(r/=2),o.offset=e(o.offset),o.over=e(o.over),this._scrollable().each(function(){function s(t){u.animate(h,r,o.easing,t&&function(){t.call(this,c,o)})}if(null!=i){var a,l=this,u=t(l),c=i,h={},d=u.is("html,body");switch(typeof c){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(c)){c=e(c);break}if(c=t(c,this),!c.length)return;case"object":(c.is||c.style)&&(a=(c=t(c)).offset())}t.each(o.axis.split(""),function(t,e){var i="x"==e?"Left":"Top",r=i.toLowerCase(),p="scroll"+i,f=l[p],g=n.max(l,e);if(a)h[p]=a[r]+(d?0:f-u.offset()[r]),o.margin&&(h[p]-=parseInt(c.css("margin"+i))||0,h[p]-=parseInt(c.css("border"+i+"Width"))||0),h[p]+=o.offset[r]||0,o.over[r]&&(h[p]+=c["x"==e?"width":"height"]()*o.over[r]);else{var m=c[r];h[p]=m.slice&&"%"==m.slice(-1)?parseFloat(m)/100*g:m}o.limit&&/^\d+$/.test(h[p])&&(h[p]=0>=h[p]?0:Math.min(h[p],g)),!t&&o.queue&&(f!=h[p]&&s(o.onAfterFirst),delete h[p])}),s(o.onAfter)}}).end()},n.max=function(e,n){var i="x"==n?"Width":"Height",r="scroll"+i;if(!t(e).is("html,body"))return e[r]-t(e)[i.toLowerCase()]();var o="client"+i,s=e.ownerDocument.documentElement,a=e.ownerDocument.body;return Math.max(s[r],a[r])-Math.min(s[o],a[o])}}(jQuery);var Handlebars=function(){var t=function(){"use strict";function t(t){this.string=t}var e;return t.prototype.toString=function(){return""+this.string},e=t}(),e=function(t){"use strict";function e(t){return l[t]||"&amp;"}function n(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}function i(t){return t instanceof s?""+t:t||0===t?(t=""+t,c.test(t)?t.replace(u,e):t):""}function r(t){return t||0===t?a(t)&&0===t.length?!0:!1:!0}var o={},s=t,a=Array.isArray,l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},u=/[&<>"'`]/g,c=/[&<>"'`]/;return o.extend=n,o.escapeExpression=i,o.isEmpty=r,o}(t),n=function(){"use strict";function t(){for(var t=Error.prototype.constructor.apply(this,arguments),e=0;n.length>e;e++)this[n[e]]=t[n[e]]}var e,n=["description","fileName","lineNumber","message","name","number","stack"];return t.prototype=Error(),e=t}(),i=function(t,e){"use strict";function n(t){return t&&"object"==typeof t?"[object Array]"===d.call(t):!1}function i(t,e){this.helpers=t||{},this.partials=e||{},r(this)}function r(t){t.registerHelper("helperMissing",function(t){if(2===arguments.length)return void 0;throw Error("Missing helper: '"+t+"'")}),t.registerHelper("blockHelperMissing",function(e,i){var r=i.inverse||function(){},o=i.fn;return f(e)&&(e=e.call(this)),e===!0?o(this):e===!1||null==e?r(this):n(e)?e.length>0?t.helpers.each(e,i):r(this):o(e)}),t.registerHelper("each",function(t,e){var i,r=e.fn,o=e.inverse,s=0,a="";if(f(t)&&(t=t.call(this)),e.data&&(i=m(e.data)),t&&"object"==typeof t)if(n(t))for(var l=t.length;l>s;s++)i&&(i.index=s,i.first=0===s,i.last=s===t.length-1),a+=r(t[s],{data:i});else for(var u in t)t.hasOwnProperty(u)&&(i&&(i.key=u),a+=r(t[u],{data:i}),s++);return 0===s&&(a=o(this)),a}),t.registerHelper("if",function(t,e){return f(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||a.isEmpty(t)?e.inverse(this):e.fn(this)}),t.registerHelper("unless",function(e,n){return t.helpers["if"].call(this,e,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),t.registerHelper("with",function(t,e){return f(t)&&(t=t.call(this)),a.isEmpty(t)?void 0:e.fn(t)}),t.registerHelper("log",function(e,n){var i=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;t.log(i,e)})}function o(t,e){g.log(t,e)}var s={},a=t,l=e,u="1.1.0";s.VERSION=u;var c=4;s.COMPILER_REVISION=c;var h={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};s.REVISION_CHANGES=h;var d=Object.prototype.toString,p="[object Object]",f=function(t){return"function"==typeof t};f(/x/)&&(f=function(t){return"function"==typeof t&&"[object Function]"===d.call(t)}),s.HandlebarsEnvironment=i,i.prototype={constructor:i,logger:g,log:o,registerHelper:function(t,e,n){if(d.call(t)===p){if(n||e)throw new l("Arg not supported with multiple helpers");a.extend(this.helpers,t)}else n&&(e.not=n),this.helpers[t]=e},registerPartial:function(t,e){d.call(t)===p?a.extend(this.partials,t):this.partials[t]=e}};var g={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(t,e){if(t>=g.level){var n=g.methodMap[t];"undefined"!=typeof console&&console[n]&&console[n].call(console,e)}}};s.logger=g,s.log=o;var m=function(t){var e={};return a.extend(e,t),e};return s.createFrame=m,s}(e,n),r=function(t,e,n){"use strict";function i(t){var e=t&&t[0]||1,n=d;if(e!==n){if(n>e){var i=p[n],r=p[e];throw Error("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+r+").")}throw Error("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}}function r(t,e){if(!e)throw Error("No environment passed to template");var n;n=e.compile?function(t,n,i,r,o,s){var l=a.apply(this,arguments);if(l)return l;var u={helpers:r,partials:o,data:s};return o[n]=e.compile(t,{data:void 0!==s},e),o[n](i,u)}:function(t,e){var n=a.apply(this,arguments);if(n)return n;throw new h("The partial "+e+" could not be compiled when running in runtime-only mode")};var r={escapeExpression:c.escapeExpression,invokePartial:n,programs:[],program:function(t,e,n){var i=this.programs[t];return n?i=s(t,e,n):i||(i=this.programs[t]=s(t,e)),i},merge:function(t,e){var n=t||e;return t&&e&&t!==e&&(n={},c.extend(n,e),c.extend(n,t)),n},programWithDepth:o,noop:l,compilerInfo:null};return function(n,o){o=o||{};var s,a,l=o.partial?o:e;o.partial||(s=o.helpers,a=o.partials);var u=t.call(r,l,n,s,a,o.data);return o.partial||i(r.compilerInfo),u}}function o(t,e,n){var i=Array.prototype.slice.call(arguments,3),r=function(t,r){return r=r||{},e.apply(this,[t,r.data||n].concat(i))};return r.program=t,r.depth=i.length,r}function s(t,e,n){var i=function(t,i){return i=i||{},e(t,i.data||n)};return i.program=t,i.depth=0,i}function a(t,e,n,i,r,o){var s={partial:!0,helpers:i,partials:r,data:o};if(void 0===t)throw new h("The partial "+e+" could not be found");return t instanceof Function?t(n,s):void 0}function l(){return""}var u={},c=t,h=e,d=n.COMPILER_REVISION,p=n.REVISION_CHANGES;return u.template=r,u.programWithDepth=o,u.program=s,u.invokePartial=a,u.noop=l,u}(e,n,i),o=function(t,e,n,i,r){"use strict";var o,s=t,a=e,l=n,u=i,c=r,h=function(){var t=new s.HandlebarsEnvironment;return u.extend(t,s),t.SafeString=a,t.Exception=l,t.Utils=u,t.VM=c,t.template=function(e){return c.template(e,t)},t},d=h();return d.create=h,o=d}(i,t,n,e,r),s=function(t){"use strict";function e(t,n,i){this.type="program",this.statements=t,this.strip={},i?(this.inverse=new e(i,n),this.strip.right=n.left):n&&(this.strip.left=n.right)}function n(t,e,n,i){this.type="mustache",this.hash=e,this.strip=i;var r=n[3]||n[2];this.escaped="{"!==r&&"&"!==r;var o=this.id=t[0],s=this.params=t.slice(1),a=this.eligibleHelper=o.isSimple;this.isHelper=a&&(s.length||e)}function i(t,e,n){this.type="partial",this.partialName=t,this.context=e,this.strip=n}function r(t,e,n,i){if(t.id.original!==i.path.original)throw new g(t.id.original+" doesn't match "+i.path.original);this.type="block",this.mustache=t,this.program=e,this.inverse=n,this.strip={left:t.strip.left,right:i.strip.right},(e||n).strip.left=t.strip.right,(n||e).strip.right=i.strip.left,n&&!e&&(this.isInverse=!0)}function o(t){this.type="content",this.string=t}function s(t){this.type="hash",this.pairs=t}function a(t){this.type="ID";for(var e="",n=[],i=0,r=0,o=t.length;o>r;r++){var s=t[r].part;if(e+=(t[r].separator||"")+s,".."===s||"."===s||"this"===s){if(n.length>0)throw new g("Invalid path: "+e);".."===s?i++:this.isScoped=!0}else n.push(s)}this.original=e,this.parts=n,this.string=n.join("."),this.depth=i,this.isSimple=1===t.length&&!this.isScoped&&0===i,this.stringModeValue=this.string}function l(t){this.type="PARTIAL_NAME",this.name=t.original}function u(t){this.type="DATA",this.id=t}function c(t){this.type="STRING",this.original=this.string=this.stringModeValue=t}function h(t){this.type="INTEGER",this.original=this.integer=t,this.stringModeValue=Number(t)}function d(t){this.type="BOOLEAN",this.bool=t,this.stringModeValue="true"===t}function p(t){this.type="comment",this.comment=t}var f={},g=t;return f.ProgramNode=e,f.MustacheNode=n,f.PartialNode=i,f.BlockNode=r,f.ContentNode=o,f.HashNode=s,f.IdNode=a,f.PartialNameNode=l,f.DataNode=u,f.StringNode=c,f.IntegerNode=h,f.BooleanNode=d,f.CommentNode=p,f}(n),a=function(){"use strict";var t,e=function(){function t(t,e){return{left:"~"===t[2],right:"~"===e[0]||"~"===e[1]}}function e(){this.yy={}}var n={trace:function(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,inMustache_repetition0:28,inMustache_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,hash:35,hash_repetition_plus0:36,hashSegment:37,ID:38,EQUALS:39,DATA:40,pathSegments:41,SEP:42,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",38:"ID",39:"EQUALS",40:"DATA",42:"SEP"},productions_:[0,[3,2],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[35,1],[37,3],[26,1],[26,1],[26,1],[30,2],[21,1],[41,3],[41,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[36,1],[36,2]],performAction:function(e,n,i,r,o,s){var a=s.length-1;switch(o){case 1:return new r.ProgramNode(s[a-1]);case 2:this.$=new r.ProgramNode([],s[a-1],s[a]);break;case 3:this.$=new r.ProgramNode(s[a-2],s[a-1],s[a]);break;case 4:this.$=new r.ProgramNode(s[a-1],s[a],[]);break;case 5:this.$=new r.ProgramNode(s[a]);break;case 6:this.$=new r.ProgramNode([]);break;case 7:this.$=new r.ProgramNode([]);break;case 8:this.$=[s[a]];break;case 9:s[a-1].push(s[a]),this.$=s[a-1];break;case 10:this.$=new r.BlockNode(s[a-2],s[a-1].inverse,s[a-1],s[a]);break;case 11:this.$=new r.BlockNode(s[a-2],s[a-1],s[a-1].inverse,s[a]);break;case 12:this.$=s[a];break;case 13:this.$=s[a];break;case 14:this.$=new r.ContentNode(s[a]);break;case 15:this.$=new r.CommentNode(s[a]);break;case 16:this.$=new r.MustacheNode(s[a-1][0],s[a-1][1],s[a-2],t(s[a-2],s[a]));break;case 17:this.$=new r.MustacheNode(s[a-1][0],s[a-1][1],s[a-2],t(s[a-2],s[a]));break;case 18:this.$={path:s[a-1],strip:t(s[a-2],s[a])};break;case 19:this.$=new r.MustacheNode(s[a-1][0],s[a-1][1],s[a-2],t(s[a-2],s[a]));break;case 20:this.$=new r.MustacheNode(s[a-1][0],s[a-1][1],s[a-2],t(s[a-2],s[a]));break;case 21:this.$=new r.PartialNode(s[a-2],s[a-1],t(s[a-3],s[a]));break;case 22:this.$=t(s[a-1],s[a]);break;case 23:this.$=[[s[a-2]].concat(s[a-1]),s[a]];break;case 24:this.$=[[s[a]],null];break;case 25:this.$=s[a];break;case 26:this.$=new r.StringNode(s[a]);break;case 27:this.$=new r.IntegerNode(s[a]);break;case 28:this.$=new r.BooleanNode(s[a]);break;case 29:this.$=s[a];break;case 30:this.$=new r.HashNode(s[a]);break;case 31:this.$=[s[a-2],s[a]];break;case 32:this.$=new r.PartialNameNode(s[a]);break;case 33:this.$=new r.PartialNameNode(new r.StringNode(s[a]));break;case 34:this.$=new r.PartialNameNode(new r.IntegerNode(s[a]));break;case 35:this.$=new r.DataNode(s[a]);break;case 36:this.$=new r.IdNode(s[a]);break;case 37:s[a-2].push({part:s[a],separator:s[a-1]}),this.$=s[a-2];break;case 38:this.$=[{part:s[a]}];break;case 41:this.$=[];break;case 42:s[a-1].push(s[a]);break;case 45:this.$=[s[a]];break;case 46:s[a-1].push(s[a])}},table:[{3:1,4:2,8:3,9:4,11:5,12:6,13:7,14:[1,8],15:[1,9],16:[1,11],19:[1,10],22:[1,12],23:[1,13],25:[1,14]},{1:[3]},{5:[1,15],8:16,9:4,11:5,12:6,13:7,14:[1,8],15:[1,9],16:[1,11],19:[1,10],22:[1,12],23:[1,13],25:[1,14]},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],25:[2,8]},{4:19,6:17,7:18,8:3,9:4,11:5,12:6,13:7,14:[1,8],15:[1,9],16:[1,11],19:[1,20],20:[2,7],22:[1,12],23:[1,13],25:[1,14]},{4:19,6:21,7:18,8:3,9:4,11:5,12:6,13:7,14:[1,8],15:[1,9],16:[1,11],19:[1,20],20:[2,7],22:[1,12],23:[1,13],25:[1,14]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{17:22,21:23,30:24,38:[1,27],40:[1,26],41:25},{17:28,21:23,30:24,38:[1,27],40:[1,26],41:25},{17:29,21:23,30:24,38:[1,27],40:[1,26],41:25},{17:30,21:23,30:24,38:[1,27],40:[1,26],41:25},{21:32,26:31,32:[1,33],33:[1,34],38:[1,27],41:25},{1:[2,1]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{10:35,20:[1,36]},{4:37,8:3,9:4,11:5,12:6,13:7,14:[1,8],15:[1,9],16:[1,11],19:[1,10],20:[2,6],22:[1,12],23:[1,13],25:[1,14]},{7:38,8:16,9:4,11:5,12:6,13:7,14:[1,8],15:[1,9],16:[1,11],19:[1,20],20:[2,5],22:[1,12],23:[1,13],25:[1,14]},{17:22,18:[1,39],21:23,30:24,38:[1,27],40:[1,26],41:25},{10:40,20:[1,36]},{18:[1,41]},{18:[2,41],24:[2,41],28:42,32:[2,41],33:[2,41],34:[2,41],38:[2,41],40:[2,41]},{18:[2,24],24:[2,24]},{18:[2,36],24:[2,36],32:[2,36],33:[2,36],34:[2,36],38:[2,36],40:[2,36],42:[1,43]},{21:44,38:[1,27],41:25},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],38:[2,38],40:[2,38],42:[2,38]},{18:[1,45]},{18:[1,46]},{24:[1,47]},{18:[2,39],21:49,27:48,38:[1,27],41:25},{18:[2,32],38:[2,32]},{18:[2,33],38:[2,33]},{18:[2,34],38:[2,34]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{21:50,38:[1,27],41:25},{8:16,9:4,11:5,12:6,13:7,14:[1,8],15:[1,9],16:[1,11],19:[1,10],20:[2,2],22:[1,12],23:[1,13],25:[1,14]},{4:51,8:3,9:4,11:5,12:6,13:7,14:[1,8],15:[1,9],16:[1,11],19:[1,10],20:[2,4],22:[1,12],23:[1,13],25:[1,14]},{14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{18:[2,43],21:55,24:[2,43],29:52,30:59,31:53,32:[1,56],33:[1,57],34:[1,58],35:54,36:60,37:61,38:[1,62],40:[1,26],41:25},{38:[1,63]},{18:[2,35],24:[2,35],32:[2,35],33:[2,35],34:[2,35],38:[2,35],40:[2,35]},{14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{18:[1,64]},{18:[2,40]},{18:[1,65]},{8:16,9:4,11:5,12:6,13:7,14:[1,8],15:[1,9],16:[1,11],19:[1,10],20:[2,3],22:[1,12],23:[1,13],25:[1,14]},{18:[2,23],24:[2,23]},{18:[2,42],24:[2,42],32:[2,42],33:[2,42],34:[2,42],38:[2,42],40:[2,42]},{18:[2,44],24:[2,44]},{18:[2,25],24:[2,25],32:[2,25],33:[2,25],34:[2,25],38:[2,25],40:[2,25]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],38:[2,26],40:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],38:[2,27],40:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],38:[2,28],40:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],38:[2,29],40:[2,29]},{18:[2,30],24:[2,30],37:66,38:[1,67]},{18:[2,45],24:[2,45],38:[2,45]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],38:[2,38],39:[1,68],40:[2,38],42:[2,38]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],38:[2,37],40:[2,37],42:[2,37]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,46],24:[2,46],38:[2,46]},{39:[1,68]},{21:55,30:59,31:69,32:[1,56],33:[1,57],34:[1,58],38:[1,27],40:[1,26],41:25},{18:[2,31],24:[2,31],38:[2,31]}],defaultActions:{15:[2,1],49:[2,40]},parseError:function(t){throw Error(t)},parse:function(t){function e(){var t;return t=n.lexer.lex()||1,"number"!=typeof t&&(t=n.symbols_[t]||t),t}var n=this,i=[0],r=[null],o=[],s=this.table,a="",l=0,u=0,c=0;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,this.lexer.yylloc===void 0&&(this.lexer.yylloc={});
var h=this.lexer.yylloc;o.push(h);var d=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,f,g,m,v,y,b,w,x,T={};;){if(g=i[i.length-1],this.defaultActions[g]?m=this.defaultActions[g]:((null===p||p===void 0)&&(p=e()),m=s[g]&&s[g][p]),m===void 0||!m.length||!m[0]){var S="";if(!c){x=[];for(y in s[g])this.terminals_[y]&&y>2&&x.push("'"+this.terminals_[y]+"'");S=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+x.join(", ")+", got '"+(this.terminals_[p]||p)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(S,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:h,expected:x})}}if(m[0]instanceof Array&&m.length>1)throw Error("Parse Error: multiple actions possible at state: "+g+", token: "+p);switch(m[0]){case 1:i.push(p),r.push(this.lexer.yytext),o.push(this.lexer.yylloc),i.push(m[1]),p=null,f?(p=f,f=null):(u=this.lexer.yyleng,a=this.lexer.yytext,l=this.lexer.yylineno,h=this.lexer.yylloc,c>0&&c--);break;case 2:if(b=this.productions_[m[1]][1],T.$=r[r.length-b],T._$={first_line:o[o.length-(b||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(b||1)].first_column,last_column:o[o.length-1].last_column},d&&(T._$.range=[o[o.length-(b||1)].range[0],o[o.length-1].range[1]]),v=this.performAction.call(T,a,u,l,this.yy,m[1],r,o),v!==void 0)return v;b&&(i=i.slice(0,2*-1*b),r=r.slice(0,-1*b),o=o.slice(0,-1*b)),i.push(this.productions_[m[1]][0]),r.push(T.$),o.push(T._$),w=s[i[i.length-2]][i[i.length-1]],i.push(w);break;case 3:return!0}}return!0}},i=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw Error(t);this.yy.parser.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t;var e=t.match(/(?:\r\n?|\n).*/g);return e?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===i.length?this.yylloc.first_column:0)+i[i.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-e]),this},more:function(){return this._more=!0,this},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return 20>t.length&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var t,e,n,i,r;this._more||(this.yytext="",this.match="");for(var o=this._currentRules(),s=0;o.length>s&&(n=this._input.match(this.rules[o[s]]),!n||e&&!(n[0].length>e[0].length)||(e=n,i=s,this.options.flex));s++);return e?(r=e[0].match(/(?:\r\n?|\n).*/g),r&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,o[i],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t?t:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t!==void 0?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return t.options={},t.performAction=function(t,e,n,i){function r(t,n){return e.yytext=e.yytext.substr(t,e.yyleng-n)}switch(n){case 0:if("\\\\"===e.yytext.slice(-2)?(r(0,1),this.begin("mu")):"\\"===e.yytext.slice(-1)?(r(0,1),this.begin("emu")):this.begin("mu"),e.yytext)return 14;break;case 1:return 14;case 2:return"\\"!==e.yytext.slice(-1)&&this.popState(),"\\"===e.yytext.slice(-1)&&r(0,1),14;case 3:return r(0,4),this.popState(),15;case 4:return 25;case 5:return 16;case 6:return 20;case 7:return 19;case 8:return 19;case 9:return 23;case 10:return 22;case 11:this.popState(),this.begin("com");break;case 12:return r(3,5),this.popState(),15;case 13:return 22;case 14:return 39;case 15:return 38;case 16:return 38;case 17:return 42;case 18:break;case 19:return this.popState(),24;case 20:return this.popState(),18;case 21:return e.yytext=r(1,2).replace(/\\"/g,'"'),32;case 22:return e.yytext=r(1,2).replace(/\\'/g,"'"),32;case 23:return 40;case 24:return 34;case 25:return 34;case 26:return 33;case 27:return 38;case 28:return e.yytext=r(1,2),38;case 29:return"INVALID";case 30:return 5}},t.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s])))/,/^(?:false(?=([~}\s])))/,/^(?:-?[0-9]+(?=([~}\s])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],t.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},INITIAL:{rules:[0,1,30],inclusive:!0}},t}();return n.lexer=i,e.prototype=n,n.Parser=e,new e}();return t=e}(),l=function(t,e){"use strict";function n(t){return t.constructor===o.ProgramNode?t:(r.yy=o,r.parse(t))}var i={},r=t,o=e;return i.parser=r,i.parse=n,i}(a,s),u=function(t){"use strict";function e(t){this.value=t}function n(){}var i,r=t.COMPILER_REVISION,o=t.REVISION_CHANGES,s=t.log;n.prototype={nameLookup:function(t,e){var i,r;return 0===t.indexOf("depth")&&(i=!0),r=/^[0-9]+$/.test(e)?t+"["+e+"]":n.isValidJavaScriptVariableName(e)?t+"."+e:t+"['"+e+"']",i?"("+t+" && "+r+")":r},appendToBuffer:function(t){return this.environment.isSimple?"return "+t+";":{appendToBuffer:!0,content:t,toString:function(){return"buffer += "+t+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(t,e,n,i){this.environment=t,this.options=e||{},s("debug",this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!n,this.context=n||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.compileStack=[],this.inlineStack=[],this.compileChildren(t,e);var r,o=t.opcodes;this.i=0;for(var a=o.length;a>this.i;this.i++)r=o[this.i],"DECLARE"===r.opcode?this[r.name]=r.value:this[r.opcode].apply(this,r.args),r.opcode!==this.stripNext&&(this.stripNext=!1);return this.pushSource(""),this.createFunctionContext(i)},preamble:function(){var t=[];if(this.isChild)t.push("");else{var e=this.namespace,n="helpers = this.merge(helpers, "+e+".helpers);";this.environment.usePartial&&(n=n+" partials = this.merge(partials, "+e+".partials);"),this.options.data&&(n+=" data = data || {};"),t.push(n)}this.environment.isSimple?t.push(""):t.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=t},createFunctionContext:function(t){var e=this.stackVars.concat(this.registers.list);if(e.length>0&&(this.source[1]=this.source[1]+", "+e.join(", ")),!this.isChild)for(var n in this.context.aliases)this.context.aliases.hasOwnProperty(n)&&(this.source[1]=this.source[1]+", "+n+"="+this.context.aliases[n]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.pushSource("return buffer;");for(var i=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],a=0,l=this.environment.depths.list.length;l>a;a++)i.push("depth"+this.environment.depths.list[a]);var u=this.mergeSource();if(!this.isChild){var c=r,h=o[c];u="this.compilerInfo = ["+c+",'"+h+"'];\n"+u}if(t)return i.push(u),Function.apply(this,i);var d="function "+(this.name||"")+"("+i.join(",")+") {\n  "+u+"}";return s("debug",d+"\n\n"),d},mergeSource:function(){for(var t,e="",n=0,i=this.source.length;i>n;n++){var r=this.source[n];r.appendToBuffer?t=t?t+"\n    + "+r.content:r.content:(t&&(e+="buffer += "+t+";\n  ",t=void 0),e+=r+"\n  ")}return e},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=["depth0"];this.setupParams(0,t),this.replaceStack(function(e){return t.splice(1,0,e),"blockHelperMissing.call("+t.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=["depth0"];this.setupParams(0,t);var e=this.topStack();t.splice(1,0,e),t[t.length-1]="options",this.pushSource("if (!"+this.lastHelper+") { "+e+" = blockHelperMissing.call("+t.join(", ")+"); }")},appendContent:function(t){this.pendingContent&&(t=this.pendingContent+t),this.stripNext&&(t=t.replace(/^\s+/,"")),this.pendingContent=t},strip:function(){this.pendingContent&&(this.pendingContent=this.pendingContent.replace(/\s+$/,"")),this.stripNext="strip"},append:function(){this.flushInline();var t=this.popStack();this.pushSource("if("+t+" || "+t+" === 0) { "+this.appendToBuffer(t)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(t){this.lastContext!==t&&(this.lastContext=t)},lookupOnContext:function(t){this.push(this.nameLookup("depth"+this.lastContext,t,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(t){return"typeof "+t+" === functionType ? "+t+".apply(depth0) : "+t})},lookup:function(t){this.replaceStack(function(e){return e+" == null || "+e+" === false ? "+e+" : "+this.nameLookup(e,t,"context")})},lookupData:function(){this.push("data")},pushStringParam:function(t,e){this.pushStackLiteral("depth"+this.lastContext),this.pushString(e),"string"==typeof t?this.pushString(t):this.pushStackLiteral(t)},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.register("hashTypes","{}"),this.register("hashContexts","{}"))},pushHash:function(){this.hash={values:[],types:[],contexts:[]}},popHash:function(){var t=this.hash;this.hash=void 0,this.options.stringParams&&(this.register("hashContexts","{"+t.contexts.join(",")+"}"),this.register("hashTypes","{"+t.types.join(",")+"}")),this.push("{\n    "+t.values.join(",\n    ")+"\n  }")},pushString:function(t){this.pushStackLiteral(this.quotedString(t))},push:function(t){return this.inlineStack.push(t),t},pushLiteral:function(t){this.pushStackLiteral(t)},pushProgram:function(t){null!=t?this.pushStackLiteral(this.programExpression(t)):this.pushStackLiteral(null)},invokeHelper:function(t,e){this.context.aliases.helperMissing="helpers.helperMissing";var n=this.lastHelper=this.setupHelper(t,e,!0),i=this.nameLookup("depth"+this.lastContext,e,"context");this.push(n.name+" || "+i),this.replaceStack(function(t){return t+" ? "+t+".call("+n.callParams+") "+": helperMissing.call("+n.helperMissingParams+")"})},invokeKnownHelper:function(t,e){var n=this.setupHelper(t,e);this.push(n.name+".call("+n.callParams+")")},invokeAmbiguous:function(t,e){this.context.aliases.functionType='"function"',this.pushStackLiteral("{}");var n=this.setupHelper(0,t,e),i=this.lastHelper=this.nameLookup("helpers",t,"helper"),r=this.nameLookup("depth"+this.lastContext,t,"context"),o=this.nextStack();this.pushSource("if ("+o+" = "+i+") { "+o+" = "+o+".call("+n.callParams+"); }"),this.pushSource("else { "+o+" = "+r+"; "+o+" = typeof "+o+" === functionType ? "+o+".call("+n.callParams+") : "+o+"; }")},invokePartial:function(t){var e=[this.nameLookup("partials",t,"partial"),"'"+t+"'",this.popStack(),"helpers","partials"];this.options.data&&e.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+e.join(", ")+")")},assignToHash:function(t){var e,n,i=this.popStack();this.options.stringParams&&(n=this.popStack(),e=this.popStack());var r=this.hash;e&&r.contexts.push("'"+t+"': "+e),n&&r.types.push("'"+t+"': "+n),r.values.push("'"+t+"': ("+i+")")},compiler:n,compileChildren:function(t,e){for(var n,i,r=t.children,o=0,s=r.length;s>o;o++){n=r[o],i=new this.compiler;var a=this.matchExistingProgram(n);null==a?(this.context.programs.push(""),a=this.context.programs.length,n.index=a,n.name="program"+a,this.context.programs[a]=i.compile(n,e,this.context),this.context.environments[a]=n):(n.index=a,n.name="program"+a)}},matchExistingProgram:function(t){for(var e=0,n=this.context.environments.length;n>e;e++){var i=this.context.environments[e];if(i&&i.equals(t))return e}},programExpression:function(t){if(this.context.aliases.self="this",null==t)return"self.noop";for(var e,n=this.environment.children[t],i=n.depths.list,r=[n.index,n.name,"data"],o=0,s=i.length;s>o;o++)e=i[o],1===e?r.push("depth0"):r.push("depth"+(e-1));return(0===i.length?"self.program(":"self.programWithDepth(")+r.join(", ")+")"},register:function(t,e){this.useRegister(t),this.pushSource(t+" = "+e+";")},useRegister:function(t){this.registers[t]||(this.registers[t]=!0,this.registers.list.push(t))},pushStackLiteral:function(t){return this.push(new e(t))},pushSource:function(t){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),t&&this.source.push(t)},pushStack:function(t){this.flushInline();var e=this.incrStack();return t&&this.pushSource(e+" = "+t+";"),this.compileStack.push(e),e},replaceStack:function(t){var n,i="",r=this.isInline();if(r){var o=this.popStack(!0);if(o instanceof e)n=o.value;else{var s=this.stackSlot?this.topStackName():this.incrStack();i="("+this.push(s)+" = "+o+"),",n=this.topStack()}}else n=this.topStack();var a=t.call(this,n);return r?((this.inlineStack.length||this.compileStack.length)&&this.popStack(),this.push("("+i+a+")")):(/^stack/.test(n)||(n=this.nextStack()),this.pushSource(n+" = ("+i+a+");")),n},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var t=this.inlineStack;if(t.length){this.inlineStack=[];for(var n=0,i=t.length;i>n;n++){var r=t[n];r instanceof e?this.compileStack.push(r):this.pushStack(r)}}},isInline:function(){return this.inlineStack.length},popStack:function(t){var n=this.isInline(),i=(n?this.inlineStack:this.compileStack).pop();return!t&&i instanceof e?i.value:(n||this.stackSlot--,i)},topStack:function(t){var n=this.isInline()?this.inlineStack:this.compileStack,i=n[n.length-1];return!t&&i instanceof e?i.value:i},quotedString:function(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(t,e,n){var i=[];this.setupParams(t,i,n);var r=this.nameLookup("helpers",e,"helper");return{params:i,name:r,callParams:["depth0"].concat(i).join(", "),helperMissingParams:n&&["depth0",this.quotedString(e)].concat(i).join(", ")}},setupParams:function(t,e,n){var i,r,o,s=[],a=[],l=[];s.push("hash:"+this.popStack()),r=this.popStack(),o=this.popStack(),(o||r)&&(o||(this.context.aliases.self="this",o="self.noop"),r||(this.context.aliases.self="this",r="self.noop"),s.push("inverse:"+r),s.push("fn:"+o));for(var u=0;t>u;u++)i=this.popStack(),e.push(i),this.options.stringParams&&(l.push(this.popStack()),a.push(this.popStack()));return this.options.stringParams&&(s.push("contexts:["+a.join(",")+"]"),s.push("types:["+l.join(",")+"]"),s.push("hashContexts:hashContexts"),s.push("hashTypes:hashTypes")),this.options.data&&s.push("data:data"),s="{"+s.join(",")+"}",n?(this.register("options",s),e.push("options")):e.push(s),e.join(", ")}};for(var a="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),l=n.RESERVED_WORDS={},u=0,c=a.length;c>u;u++)l[a[u]]=!0;return n.isValidJavaScriptVariableName=function(t){return!n.RESERVED_WORDS[t]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(t)?!0:!1},i=n}(i),c=function(t,e,n,i){"use strict";function r(){}function o(t,e){if(null==t||"string"!=typeof t&&t.constructor!==h.ProgramNode)throw new l("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+t);e=e||{},"data"in e||(e.data=!0);var n=u(t),i=(new r).compile(n,e);return(new c).compile(i,e)}function s(t,e,n){function i(){var i=u(t),o=(new r).compile(i,e),s=(new c).compile(o,e,void 0,!0);return n.template(s)}if(null==t||"string"!=typeof t&&t.constructor!==h.ProgramNode)throw new l("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+t);e=e||{},"data"in e||(e.data=!0);var o;return function(t,e){return o||(o=i()),o.call(this,t,e)}}var a={},l=t,u=e.parse,c=n,h=i;return a.Compiler=r,r.prototype={compiler:r,disassemble:function(){for(var t,e,n,i=this.opcodes,r=[],o=0,s=i.length;s>o;o++)if(t=i[o],"DECLARE"===t.opcode)r.push("DECLARE "+t.name+"="+t.value);else{e=[];for(var a=0;t.args.length>a;a++)n=t.args[a],"string"==typeof n&&(n='"'+n.replace("\n","\\n")+'"'),e.push(n);r.push(t.opcode+" "+e.join(" "))}return r.join("\n")},equals:function(t){var e=this.opcodes.length;if(t.opcodes.length!==e)return!1;for(var n=0;e>n;n++){var i=this.opcodes[n],r=t.opcodes[n];if(i.opcode!==r.opcode||i.args.length!==r.args.length)return!1;for(var o=0;i.args.length>o;o++)if(i.args[o]!==r.args[o])return!1}if(e=this.children.length,t.children.length!==e)return!1;for(n=0;e>n;n++)if(!this.children[n].equals(t.children[n]))return!1;return!0},guid:0,compile:function(t,e){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=e;var n=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},n)for(var i in n)this.options.knownHelpers[i]=n[i];return this.accept(t)},accept:function(t){var e,n=t.strip||{};return n.left&&this.opcode("strip"),e=this[t.type](t),n.right&&this.opcode("strip"),e},program:function(t){for(var e=t.statements,n=0,i=e.length;i>n;n++)this.accept(e[n]);return this.isSimple=1===i,this.depths.list=this.depths.list.sort(function(t,e){return t-e}),this},compileProgram:function(t){var e,n=(new this.compiler).compile(t,this.options),i=this.guid++;this.usePartial=this.usePartial||n.usePartial,this.children[i]=n;for(var r=0,o=n.depths.list.length;o>r;r++)e=n.depths.list[r],2>e||this.addDepth(e-1);return i},block:function(t){var e=t.mustache,n=t.program,i=t.inverse;n&&(n=this.compileProgram(n)),i&&(i=this.compileProgram(i));var r=this.classifyMustache(e);"helper"===r?this.helperMustache(e,n,i):"simple"===r?(this.simpleMustache(e),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousMustache(e,n,i),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(t){var e,n,i=t.pairs;this.opcode("pushHash");for(var r=0,o=i.length;o>r;r++)e=i[r],n=e[1],this.options.stringParams?(n.depth&&this.addDepth(n.depth),this.opcode("getContext",n.depth||0),this.opcode("pushStringParam",n.stringModeValue,n.type)):this.accept(n),this.opcode("assignToHash",e[0]);this.opcode("popHash")},partial:function(t){var e=t.partialName;this.usePartial=!0,t.context?this.ID(t.context):this.opcode("push","depth0"),this.opcode("invokePartial",e.name),this.opcode("append")},content:function(t){this.opcode("appendContent",t.string)},mustache:function(t){var e=this.options,n=this.classifyMustache(t);"simple"===n?this.simpleMustache(t):"helper"===n?this.helperMustache(t):this.ambiguousMustache(t),t.escaped&&!e.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousMustache:function(t,e,n){var i=t.id,r=i.parts[0],o=null!=e||null!=n;this.opcode("getContext",i.depth),this.opcode("pushProgram",e),this.opcode("pushProgram",n),this.opcode("invokeAmbiguous",r,o)},simpleMustache:function(t){var e=t.id;"DATA"===e.type?this.DATA(e):e.parts.length?this.ID(e):(this.addDepth(e.depth),this.opcode("getContext",e.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperMustache:function(t,e,n){var i=this.setupFullMustacheParams(t,e,n),r=t.id.parts[0];if(this.options.knownHelpers[r])this.opcode("invokeKnownHelper",i.length,r);else{if(this.options.knownHelpersOnly)throw Error("You specified knownHelpersOnly, but used the unknown helper "+r);this.opcode("invokeHelper",i.length,r)}},ID:function(t){this.addDepth(t.depth),this.opcode("getContext",t.depth);var e=t.parts[0];e?this.opcode("lookupOnContext",t.parts[0]):this.opcode("pushContext");for(var n=1,i=t.parts.length;i>n;n++)this.opcode("lookup",t.parts[n])},DATA:function(t){if(this.options.data=!0,t.id.isScoped||t.id.depth)throw new l("Scoped data references are not supported: "+t.original);this.opcode("lookupData");for(var e=t.id.parts,n=0,i=e.length;i>n;n++)this.opcode("lookup",e[n])},STRING:function(t){this.opcode("pushString",t.string)},INTEGER:function(t){this.opcode("pushLiteral",t.integer)},BOOLEAN:function(t){this.opcode("pushLiteral",t.bool)},comment:function(){},opcode:function(t){this.opcodes.push({opcode:t,args:[].slice.call(arguments,1)})},declare:function(t,e){this.opcodes.push({opcode:"DECLARE",name:t,value:e})},addDepth:function(t){if(isNaN(t))throw Error("EWOT");0!==t&&(this.depths[t]||(this.depths[t]=!0,this.depths.list.push(t)))},classifyMustache:function(t){var e=t.isHelper,n=t.eligibleHelper,i=this.options;if(n&&!e){var r=t.id.parts[0];i.knownHelpers[r]?e=!0:i.knownHelpersOnly&&(n=!1)}return e?"helper":n?"ambiguous":"simple"},pushParams:function(t){for(var e,n=t.length;n--;)e=t[n],this.options.stringParams?(e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",e.stringModeValue,e.type)):this[e.type](e)},setupMustacheParams:function(t){var e=t.params;return this.pushParams(e),t.hash?this.hash(t.hash):this.opcode("emptyHash"),e},setupFullMustacheParams:function(t,e,n){var i=t.params;return this.pushParams(i),this.opcode("pushProgram",e),this.opcode("pushProgram",n),t.hash?this.hash(t.hash):this.opcode("emptyHash"),i}},a.precompile=o,a.compile=s,a}(n,l,u,s),h=function(t,e,n,i,r){"use strict";var o,s=t,a=e,l=n.parser,u=n.parse,c=i.Compiler,h=i.compile,d=i.precompile,p=r,f=s.create,g=function(){var t=f();return t.compile=function(e,n){return h(e,n,t)},t.precompile=d,t.AST=a,t.Compiler=c,t.JavaScriptCompiler=p,t.Parser=l,t.parse=u,t};return s=g(),s.create=g,o=s}(o,s,l,c,u);return h}();//! OpenSeadragon 1.1.1
//! Built on 2014-10-16
//! Git commit: v1.1.1-135-63996a7
//! http://openseadragon.github.io
//! License: http://openseadragon.github.io/license/
window.OpenSeadragon=window.OpenSeadragon||function(t){return new OpenSeadragon.Viewer(t)},function(t){t.version={versionStr:"1.1.1",major:parseInt("1",10),minor:parseInt("1",10),revision:parseInt("1",10)};var e={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},n=Object.prototype.toString,i=Object.prototype.hasOwnProperty;t.isFunction=function(e){return"function"===t.type(e)},t.isArray=Array.isArray||function(e){return"array"===t.type(e)},t.isWindow=function(t){return t&&"object"==typeof t&&"setInterval"in t},t.type=function(t){return null===t||void 0===t?t+"":e[n.call(t)]||"object"},t.isPlainObject=function(e){if(!e||"object"!==OpenSeadragon.type(e)||e.nodeType||t.isWindow(e))return!1;if(e.constructor&&!i.call(e,"constructor")&&!i.call(e.constructor.prototype,"isPrototypeOf"))return!1;var n;for(n in e);return void 0===n||i.call(e,n)},t.isEmptyObject=function(t){for(var e in t)return!1;return!0},t.supportsCanvas=function(){var e=document.createElement("canvas");return!(!t.isFunction(e.getContext)||!e.getContext("2d"))}()}(OpenSeadragon),function(t){function e(t,e){return e&&t!=document.body?document.body:t.offsetParent}t.extend=function(){var t,e,n,i,r,o,s=arguments[0]||{},a=arguments.length,l=!1,u=1;for("boolean"==typeof s&&(l=s,s=arguments[1]||{},u=2),"object"==typeof s||OpenSeadragon.isFunction(s)||(s={}),a===u&&(s=this,--u);a>u;u++)if(t=arguments[u],null!==t||void 0!==t)for(e in t)n=s[e],i=t[e],s!==i&&(l&&i&&(OpenSeadragon.isPlainObject(i)||(r=OpenSeadragon.isArray(i)))?(r?(r=!1,o=n&&OpenSeadragon.isArray(n)?n:[]):o=n&&OpenSeadragon.isPlainObject(n)?n:{},s[e]=OpenSeadragon.extend(l,o,i)):void 0!==i&&(s[e]=i));return s},t.extend(t,{DEFAULT_SETTINGS:{xmlPath:null,tileSources:null,tileHost:null,initialPage:0,crossOriginPolicy:!1,panHorizontal:!0,panVertical:!0,constrainDuringPan:!1,wrapHorizontal:!1,wrapVertical:!1,visibilityRatio:.5,minPixelRatio:.5,defaultZoomLevel:0,minZoomLevel:null,maxZoomLevel:null,homeFillsViewer:!1,clickTimeThreshold:300,clickDistThreshold:5,dblClickTimeThreshold:300,dblClickDistThreshold:20,springStiffness:6.5,animationTime:1.2,gestureSettingsMouse:{scrollToZoom:!0,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsTouch:{scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsPen:{scrollToZoom:!1,clickToZoom:!0,dblClickToZoom:!1,pinchToZoom:!1,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsUnknown:{scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,pinchToZoom:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},zoomPerClick:2,zoomPerScroll:1.2,zoomPerSecond:1,blendTime:0,alwaysBlend:!1,autoHideControls:!0,immediateRender:!1,minZoomImageRatio:.9,maxZoomPixelRatio:1.1,pixelsPerWheelLine:40,autoResize:!0,showSequenceControl:!0,sequenceControlAnchor:null,preserveViewport:!1,navPrevNextWrap:!1,showNavigationControl:!0,navigationControlAnchor:null,showZoomControl:!0,showHomeControl:!0,showFullPageControl:!0,showRotationControl:!1,controlsFadeDelay:2e3,controlsFadeLength:1500,mouseNavEnabled:!0,showNavigator:!1,navigatorId:null,navigatorPosition:null,navigatorSizeRatio:.2,navigatorMaintainSizeRatio:!1,navigatorTop:null,navigatorLeft:null,navigatorHeight:null,navigatorWidth:null,navigatorAutoResize:!0,navigatorRotate:!0,degrees:0,opacity:1,showReferenceStrip:!1,referenceStripScroll:"horizontal",referenceStripElement:null,referenceStripHeight:null,referenceStripWidth:null,referenceStripPosition:"BOTTOM_LEFT",referenceStripSizeRatio:.2,collectionRows:3,collectionLayout:"horizontal",collectionMode:!1,collectionTileSize:800,imageLoaderLimit:0,maxImageCacheCount:200,timeout:3e4,useCanvas:!0,prefixUrl:"/images/",navImages:{zoomIn:{REST:"zoomin_rest.png",GROUP:"zoomin_grouphover.png",HOVER:"zoomin_hover.png",DOWN:"zoomin_pressed.png"},zoomOut:{REST:"zoomout_rest.png",GROUP:"zoomout_grouphover.png",HOVER:"zoomout_hover.png",DOWN:"zoomout_pressed.png"},home:{REST:"home_rest.png",GROUP:"home_grouphover.png",HOVER:"home_hover.png",DOWN:"home_pressed.png"},fullpage:{REST:"fullpage_rest.png",GROUP:"fullpage_grouphover.png",HOVER:"fullpage_hover.png",DOWN:"fullpage_pressed.png"},rotateleft:{REST:"rotateleft_rest.png",GROUP:"rotateleft_grouphover.png",HOVER:"rotateleft_hover.png",DOWN:"rotateleft_pressed.png"},rotateright:{REST:"rotateright_rest.png",GROUP:"rotateright_grouphover.png",HOVER:"rotateright_hover.png",DOWN:"rotateright_pressed.png"},previous:{REST:"previous_rest.png",GROUP:"previous_grouphover.png",HOVER:"previous_hover.png",DOWN:"previous_pressed.png"},next:{REST:"next_rest.png",GROUP:"next_grouphover.png",HOVER:"next_hover.png",DOWN:"next_pressed.png"}},debugMode:!1,debugGridColor:"#437AB2"},SIGNAL:"----seadragon----",delegate:function(t,e){return function(){var n=arguments;return void 0===n&&(n=[]),e.apply(t,n)}},BROWSERS:{UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5},getElement:function(t){return"string"==typeof t&&(t=document.getElementById(t)),t},getElementPosition:function(n){var i,r,o=new t.Point;for(n=t.getElement(n),i="fixed"==t.getElementStyle(n).position,r=e(n,i);r;)o.x+=n.offsetLeft,o.y+=n.offsetTop,i&&(o=o.plus(t.getPageScroll())),n=r,i="fixed"==t.getElementStyle(n).position,r=e(n,i);return o},getElementOffset:function(e){e=t.getElement(e);var n,i,r=e&&e.ownerDocument,o={top:0,left:0};return r?(n=r.documentElement,e.getBoundingClientRect!==void 0&&(o=e.getBoundingClientRect()),i=r==r.window?r:9===r.nodeType?r.defaultView||r.parentWindow:!1,new t.Point(o.left+(i.pageXOffset||n.scrollLeft)-(n.clientLeft||0),o.top+(i.pageYOffset||n.scrollTop)-(n.clientTop||0))):new t.Point},getElementSize:function(e){return e=t.getElement(e),new t.Point(e.clientWidth,e.clientHeight)},getElementStyle:document.documentElement.currentStyle?function(e){return e=t.getElement(e),e.currentStyle}:function(e){return e=t.getElement(e),window.getComputedStyle(e,"")},pointInElement:function(e,n){e=t.getElement(e);var i=t.getElementOffset(e),r=t.getElementSize(e);return n.x>=i.x&&n.x<i.x+r.x&&n.y<i.y+r.y&&n.y>=i.y},getEvent:function(e){return t.getEvent=e?function(t){return t}:function(){return window.event},t.getEvent(e)},getMousePosition:function(e){if("number"==typeof e.pageX)t.getMousePosition=function(e){var n=new t.Point;return e=t.getEvent(e),n.x=e.pageX,n.y=e.pageY,n};else{if("number"!=typeof e.clientX)throw Error("Unknown event mouse position, no known technique.");t.getMousePosition=function(e){var n=new t.Point;return e=t.getEvent(e),n.x=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,n.y=e.clientY+document.body.scrollTop+document.documentElement.scrollTop,n}}return t.getMousePosition(e)},getPageScroll:function(){var e=document.documentElement||{},n=document.body||{};if("number"==typeof window.pageXOffset)t.getPageScroll=function(){return new t.Point(window.pageXOffset,window.pageYOffset)};else if(n.scrollLeft||n.scrollTop)t.getPageScroll=function(){return new t.Point(document.body.scrollLeft,document.body.scrollTop)};else{if(!e.scrollLeft&&!e.scrollTop)return new t.Point(0,0);t.getPageScroll=function(){return new t.Point(document.documentElement.scrollLeft,document.documentElement.scrollTop)}}return t.getPageScroll()},setPageScroll:function(e){if(window.scrollTo!==void 0)t.setPageScroll=function(t){window.scrollTo(t.x,t.y)};else{var n=t.getPageScroll();if(n.x===e.x&&n.y===e.y)return;document.body.scrollLeft=e.x,document.body.scrollTop=e.y;var i=t.getPageScroll();if(i.x!==n.x&&i.y!==n.y)return void(t.setPageScroll=function(t){document.body.scrollLeft=t.x,document.body.scrollTop=t.y});if(document.documentElement.scrollLeft=e.x,document.documentElement.scrollTop=e.y,i=t.getPageScroll(),i.x!==n.x&&i.y!==n.y)return void(t.setPageScroll=function(t){document.documentElement.scrollLeft=t.x,document.documentElement.scrollTop=t.y});t.setPageScroll=function(){}}return t.setPageScroll(e)},getWindowSize:function(){var e=document.documentElement||{},n=document.body||{};if("number"==typeof window.innerWidth)t.getWindowSize=function(){return new t.Point(window.innerWidth,window.innerHeight)};else if(e.clientWidth||e.clientHeight)t.getWindowSize=function(){return new t.Point(document.documentElement.clientWidth,document.documentElement.clientHeight)};else{if(!n.clientWidth&&!n.clientHeight)throw Error("Unknown window size, no known technique.");t.getWindowSize=function(){return new t.Point(document.body.clientWidth,document.body.clientHeight)}}return t.getWindowSize()},makeCenteredNode:function(e){e=t.getElement(e);var n=[t.makeNeutralElement("div"),t.makeNeutralElement("div"),t.makeNeutralElement("div")];return t.extend(n[0].style,{display:"table",height:"100%",width:"100%"}),t.extend(n[1].style,{display:"table-row"}),t.extend(n[2].style,{display:"table-cell",verticalAlign:"middle",textAlign:"center"}),n[0].appendChild(n[1]),n[1].appendChild(n[2]),n[2].appendChild(e),n[0]},makeNeutralElement:function(t){var e=document.createElement(t),n=e.style;return n.background="transparent none",n.border="none",n.margin="0px",n.padding="0px",n.position="static",e},now:function(){return t.now=Date.now?Date.now:function(){return(new Date).getTime()},t.now()},makeTransparentImage:function(e){return t.makeTransparentImage=function(e){var n=t.makeNeutralElement("img");return n.src=e,n},t.Browser.vendor==t.BROWSERS.IE&&7>t.Browser.version&&(t.makeTransparentImage=function(e){var n=t.makeNeutralElement("img"),i=null;return i=t.makeNeutralElement("span"),i.style.display="inline-block",n.onload=function(){i.style.width=i.style.width||n.width+"px",i.style.height=i.style.height||n.height+"px",n.onload=null,n=null},n.src=e,i.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+e+"', sizingMethod='scale')",i}),t.makeTransparentImage(e)},setElementOpacity:function(e,n,i){var r,o;e=t.getElement(e),i&&!t.Browser.alpha&&(n=Math.round(n)),t.Browser.opacity?e.style.opacity=1>n?n:"":1>n?(r=Math.round(100*n),o="alpha(opacity="+r+")",e.style.filter=o):e.style.filter=""},setElementTouchActionNone:function(e){e=t.getElement(e),e.style.touchAction!==void 0?e.style.touchAction="none":e.style.msTouchAction!==void 0&&(e.style.msTouchAction="none")},addClass:function(e,n){e=t.getElement(e),e.className?-1===(" "+e.className+" ").indexOf(" "+n+" ")&&(e.className+=" "+n):e.className=n},indexOf:function(t,e,n){return this.indexOf=Array.prototype.indexOf?function(t,e,n){return t.indexOf(e,n)}:function(t,e,n){var i,r,o=n?n:0;if(!t)throw new TypeError;if(r=t.length,0===r||o>=r)return-1;for(0>o&&(o=r-Math.abs(o)),i=o;r>i;i++)if(t[i]===e)return i;return-1},this.indexOf(t,e,n)},removeClass:function(e,n){var i,r,o=[];for(e=t.getElement(e),i=e.className.split(/\s+/),r=0;i.length>r;r++)i[r]&&i[r]!==n&&o.push(i[r]);e.className=o.join(" ")},addEvent:function(){if(window.addEventListener)return function(e,n,i,r){e=t.getElement(e),e.addEventListener(n,i,r)};if(window.attachEvent)return function(e,n,i){e=t.getElement(e),e.attachEvent("on"+n,i)};throw Error("No known event model.")}(),removeEvent:function(){if(window.removeEventListener)return function(e,n,i,r){e=t.getElement(e),e.removeEventListener(n,i,r)};if(window.detachEvent)return function(e,n,i){e=t.getElement(e),e.detachEvent("on"+n,i)};throw Error("No known event model.")}(),cancelEvent:function(e){e=t.getEvent(e),t.cancelEvent=e.preventDefault?function(t){t.preventDefault()}:function(e){e=t.getEvent(e),e.cancel=!0,e.returnValue=!1},t.cancelEvent(e)},stopEvent:function(e){e=t.getEvent(e),t.stopEvent=e.stopPropagation?function(t){t.stopPropagation()}:function(e){e=t.getEvent(e),e.cancelBubble=!0},t.stopEvent(e)},createCallback:function(t,e){var n,i=[];for(n=2;arguments.length>n;n++)i.push(arguments[n]);return function(){var n,r=i.concat([]);for(n=0;arguments.length>n;n++)r.push(arguments[n]);return e.apply(t,r)}},getUrlParameter:function(t){var e=i[t];return e?e:null},getUrlProtocol:function(t){var e=t.match(/^([a-z]+:)\/\//i);return null===e?window.location.protocol:e[1].toLowerCase()},createAjaxRequest:function(e){var n;try{n=!!new ActiveXObject("Microsoft.XMLHTTP")}catch(i){n=!1}if(n)t.createAjaxRequest=window.XMLHttpRequest?function(t){return t?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest}:function(){return new ActiveXObject("Microsoft.XMLHTTP")};else{if(!window.XMLHttpRequest)throw Error("Browser doesn't support XMLHttpRequest.");t.createAjaxRequest=function(){return new XMLHttpRequest}}return t.createAjaxRequest(e)},makeAjaxRequest:function(e,n,i){var r=t.getUrlProtocol(e),o=t.createAjaxRequest("file:"===r);if(!t.isFunction(n))throw Error("makeAjaxRequest requires a success callback");o.onreadystatechange=function(){if(4==o.readyState){o.onreadystatechange=function(){};var s="http:"===r||"https:"===r?200:0;o.status===s?n(o):(t.console.log("AJAX request returned %d: %s",o.status,e),t.isFunction(i)&&i(o))}};try{o.open("GET",e,!0),o.send(null)}catch(s){var a=s.message,l=t.Browser.vendor==t.BROWSERS.IE&&10>t.Browser.version;l&&s.number!==void 0&&-2147024891==s.number&&(a+="\nSee http://msdn.microsoft.com/en-us/library/ms537505(v=vs.85).aspx#xdomain"),t.console.log("%s while making AJAX request: %s",s.name,a),o.onreadystatechange=function(){},t.isFunction(i)&&i(o,s)}},jsonp:function(e){var n,i=e.url,r=document.head||document.getElementsByTagName("head")[0]||document.documentElement,o=e.callbackName||"openseadragon"+t.now(),s=window[o],a="$1"+o+"$2",l=e.param||"callback",u=e.callback;i=i.replace(/(\=)\?(&|$)|\?\?/i,a),i+=(/\?/.test(i)?"&":"?")+l+"="+o,window[o]=function(e){if(s)window[o]=s;else try{delete window[o]}catch(n){}u&&t.isFunction(u)&&u(e)},n=document.createElement("script"),(void 0!==e.async||!1!==e.async)&&(n.async="async"),e.scriptCharset&&(n.charset=e.scriptCharset),n.src=i,n.onload=n.onreadystatechange=function(t,e){(e||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,r&&n.parentNode&&r.removeChild(n),n=void 0)},r.insertBefore(n,r.firstChild)},createFromDZI:function(){throw"OpenSeadragon.createFromDZI is deprecated, use Viewer.open."},parseXml:function(e){if(window.DOMParser)t.parseXml=function(t){var e,n=null;return e=new DOMParser,n=e.parseFromString(t,"text/xml")};else{if(!window.ActiveXObject)throw Error("Browser doesn't support XML DOM.");t.parseXml=function(t){var e=null;return e=new ActiveXObject("Microsoft.XMLDOM"),e.async=!1,e.loadXML(t),e}}return t.parseXml(e)},imageFormatSupported:function(t){return t=t?t:"",!!n[t.toLowerCase()]}}),t.Browser={vendor:t.BROWSERS.UNKNOWN,version:0,alpha:!0};var n={bmp:!1,jpeg:!0,jpg:!0,png:!0,tif:!1,wdp:!1},i={};!function(){var e,n=(navigator.appName,navigator.appVersion),r=navigator.userAgent;switch(navigator.appName){case"Microsoft Internet Explorer":window.attachEvent&&window.ActiveXObject&&(t.Browser.vendor=t.BROWSERS.IE,t.Browser.version=parseFloat(r.substring(r.indexOf("MSIE")+5,r.indexOf(";",r.indexOf("MSIE")))));break;case"Netscape":window.addEventListener&&(r.indexOf("Firefox")>=0?(t.Browser.vendor=t.BROWSERS.FIREFOX,t.Browser.version=parseFloat(r.substring(r.indexOf("Firefox")+8))):r.indexOf("Safari")>=0?(t.Browser.vendor=r.indexOf("Chrome")>=0?t.BROWSERS.CHROME:t.BROWSERS.SAFARI,t.Browser.version=parseFloat(r.substring(r.substring(0,r.indexOf("Safari")).lastIndexOf("/")+1,r.indexOf("Safari")))):(e=RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),null!==e.exec(r)&&(t.Browser.vendor=t.BROWSERS.IE,t.Browser.version=parseFloat(RegExp.$1))));break;case"Opera":t.Browser.vendor=t.BROWSERS.OPERA,t.Browser.version=parseFloat(n)}var o,s,a,l=window.location.search.substring(1),u=l.split("&");for(a=0;u.length>a;a++)o=u[a],s=o.indexOf("="),s>0&&(i[o.substring(0,s)]=decodeURIComponent(o.substring(s+1)));t.Browser.alpha=!(t.Browser.vendor==t.BROWSERS.IE&&9>t.Browser.version||t.Browser.vendor==t.BROWSERS.CHROME&&2>t.Browser.version),t.Browser.opacity=!(t.Browser.vendor==t.BROWSERS.IE&&9>t.Browser.version)}();var r=function(){};t.console=window.console||{log:r,debug:r,info:r,warn:r,error:r,assert:r},function(e){var n=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||e.msRequestAnimationFrame,i=e.cancelAnimationFrame||e.mozCancelAnimationFrame||e.webkitCancelAnimationFrame||e.msCancelAnimationFrame;if(n&&i)t.requestAnimationFrame=function(){return n.apply(e,arguments)},t.cancelAnimationFrame=function(){return i.apply(e,arguments)};else{var r,o=[],s=[],a=0;t.requestAnimationFrame=function(e){return o.push([++a,e]),r||(r=setInterval(function(){if(o.length){var e=t.now(),n=s;for(s=o,o=n;s.length;)s.shift()[1](e)}else clearInterval(r),r=void 0},20)),a},t.cancelAnimationFrame=function(t){var e,n;for(e=0,n=o.length;n>e;e+=1)if(o[e][0]===t)return void o.splice(e,1);for(e=0,n=s.length;n>e;e+=1)if(s[e][0]===t)return void s.splice(e,1)}}}(window),t._processDZIError=function(t){var e=t.getElementsByTagName("Message")[0],n=e.firstChild.nodeValue;throw Error(n)}}(OpenSeadragon),function(t){var e={supportsFullScreen:!1,isFullScreen:function(){return!1},getFullScreenElement:function(){return null},requestFullScreen:function(){},exitFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",fullScreenErrorEventName:""};document.exitFullscreen?(e.supportsFullScreen=!0,e.getFullScreenElement=function(){return document.fullscreenElement},e.requestFullScreen=function(t){return t.requestFullscreen()},e.exitFullScreen=function(){document.exitFullscreen()},e.fullScreenEventName="fullscreenchange",e.fullScreenErrorEventName="fullscreenerror"):document.msExitFullscreen?(e.supportsFullScreen=!0,e.getFullScreenElement=function(){return document.msFullscreenElement},e.requestFullScreen=function(t){return t.msRequestFullscreen()},e.exitFullScreen=function(){document.msExitFullscreen()},e.fullScreenEventName="MSFullscreenChange",e.fullScreenErrorEventName="MSFullscreenError"):document.webkitExitFullscreen?(e.supportsFullScreen=!0,e.getFullScreenElement=function(){return document.webkitFullscreenElement},e.requestFullScreen=function(t){return t.webkitRequestFullscreen()},e.exitFullScreen=function(){document.webkitExitFullscreen()},e.fullScreenEventName="webkitfullscreenchange",e.fullScreenErrorEventName="webkitfullscreenerror"):document.webkitCancelFullScreen?(e.supportsFullScreen=!0,e.getFullScreenElement=function(){return document.webkitCurrentFullScreenElement},e.requestFullScreen=function(t){return t.webkitRequestFullScreen()},e.exitFullScreen=function(){document.webkitCancelFullScreen()},e.fullScreenEventName="webkitfullscreenchange",e.fullScreenErrorEventName="webkitfullscreenerror"):document.mozCancelFullScreen&&(e.supportsFullScreen=!0,e.getFullScreenElement=function(){return document.mozFullScreenElement},e.requestFullScreen=function(t){return t.mozRequestFullScreen()},e.exitFullScreen=function(){document.mozCancelFullScreen()},e.fullScreenEventName="mozfullscreenchange",e.fullScreenErrorEventName="mozfullscreenerror"),e.isFullScreen=function(){return null!==e.getFullScreenElement()},e.cancelFullScreen=function(){t.console.error("cancelFullScreen is deprecated. Use exitFullScreen instead."),e.exitFullScreen()},t.extend(t,e)}(OpenSeadragon),function(t){t.EventSource=function(){this.events={}},t.EventSource.prototype={addHandler:function(e,n,i){var r=this.events[e];r||(this.events[e]=r=[]),n&&t.isFunction(n)&&(r[r.length]={handler:n,userData:i||null})},removeHandler:function(e,n){var i,r=this.events[e],o=[];if(r&&t.isArray(r)){for(i=0;r.length>i;i++)r[i].handler!==n&&o.push(r[i]);this.events[e]=o}},removeAllHandlers:function(t){if(t)this.events[t]=[];else for(var e in this.events)this.events[e]=[]},getHandler:function(t){var e=this.events[t];return e&&e.length?(e=1===e.length?[e[0]]:Array.apply(null,e),function(t,n){var i,r=e.length;for(i=0;r>i;i++)e[i]&&(n.eventSource=t,n.userData=e[i].userData,e[i].handler(n))}):null},raiseEvent:function(t,e){var n=this.getHandler(t);n&&(e||(e={}),n(this,e))}}}(OpenSeadragon),function(t){function e(e){var n,i,r=ee[e.hash];if(!r.tracking){for(i=0;t.MouseTracker.subscribeEvents.length>i;i++)n=t.MouseTracker.subscribeEvents[i],t.addEvent(e.element,n,r[n],!1);r.tracking=!0}}function n(e){var n,i,r=ee[e.hash];if(r.tracking){for(i=0;t.MouseTracker.subscribeEvents.length>i;i++)n=t.MouseTracker.subscribeEvents[i],t.removeEvent(e.element,n,r[n],!1);r.tracking=!1}}function i(e,n){var i=ee[e.hash];i.pointerCaptureCount++,1===i.pointerCaptureCount&&(t.addEvent(window,n?"mouseup":t.MouseTracker.unprefixedPointerEvents?"pointerup":"MSPointerUp",n?i.mouseupcaptured:i.pointerupcaptured,!0),t.addEvent(window,n?"mousemove":t.MouseTracker.unprefixedPointerEvents?"pointermove":"MSPointerMove",n?i.mousemovecaptured:i.pointermovecaptured,!0))}function r(e,n){var i=ee[e.hash];i.pointerCaptureCount--,0===i.pointerCaptureCount&&(t.removeEvent(window,n?"mousemove":t.MouseTracker.unprefixedPointerEvents?"pointermove":"MSPointerMove",n?i.mousemovecaptured:i.pointermovecaptured,!0),t.removeEvent(window,n?"mouseup":t.MouseTracker.unprefixedPointerEvents?"pointerup":"MSPointerUp",n?i.mouseupcaptured:i.pointerupcaptured,!0))}function o(e){var n;if(t.MouseTracker.unprefixedPointerEvents)n=e.pointerType;else switch(e.pointerType){case 2:n="touch";break;case 3:n="pen";break;case 4:n="mouse";break;default:n=""}return n}function s(e){return t.getMousePosition(e)}function a(t,e){return l(s(t),e)}function l(e,n){var i=t.getElementOffset(n);return e.minus(i)}function u(e,n){return new t.Point((e.x+n.x)/2,(e.y+n.y)/2)}function c(e,n){e.clickHandler&&t.cancelEvent(n)}function h(e,n){e.dblClickHandler&&t.cancelEvent(n)}function d(e,n){var i;e.keyHandler&&(n=t.getEvent(n),i=e.keyHandler({eventSource:e,position:a(n,e.element),keyCode:n.keyCode?n.keyCode:n.charCode,shift:n.shiftKey,originalEvent:n,preventDefaultAction:!1,userData:e.userData}),i||t.cancelEvent(n))}function p(e,n){var i;e.focusHandler&&(n=t.getEvent(n),i=e.focusHandler({eventSource:e,originalEvent:n,preventDefaultAction:!1,userData:e.userData}),i===!1&&t.cancelEvent(n))}function f(e,n){var i;e.blurHandler&&(n=t.getEvent(n),i=e.blurHandler({eventSource:e,originalEvent:n,preventDefaultAction:!1,userData:e.userData}),i===!1&&t.cancelEvent(n))}function g(t,e){v(t,e,e)}function m(e,n){n=t.getEvent(n);var i={target:n.target||n.srcElement,type:"wheel",shiftKey:n.shiftKey||!1,clientX:n.clientX,clientY:n.clientY,pageX:n.pageX?n.pageX:n.clientX,pageY:n.pageY?n.pageY:n.clientY,deltaMode:"MozMousePixelScroll"==n.type?0:1,deltaX:0,deltaZ:0};i.deltaY="mousewheel"==t.MouseTracker.wheelEventName?-1/t.DEFAULT_SETTINGS.pixelsPerWheelLine*n.wheelDelta:n.detail,v(e,i,n)}function v(e,n,i){var r,o=0;o=0>n.deltaY?1:-1,e.scrollHandler&&(r=e.scrollHandler({eventSource:e,pointerType:"mouse",position:a(n,e.element),scroll:o,shift:n.shiftKey,isTouchEvent:!1,originalEvent:i,preventDefaultAction:!1,userData:e.userData}),r===!1&&t.cancelEvent(i))}function y(t,e){if(t===e)return!1;for(;e&&e!==t;)e=e.parentNode;return e===t}function b(e,n){var i;n=t.getEvent(n),this===n.relatedTarget||y(n.currentTarget,n.relatedTarget)||(i={id:t.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:s(n),currentTime:t.now()},G(e,n,[i]))}function w(e,n){var i;n=t.getEvent(n),this===n.relatedTarget||y(n.currentTarget,n.relatedTarget)||(i={id:t.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:s(n),currentTime:t.now()},Z(e,n,[i]))}function x(e,n){var r;n=t.getEvent(n),r={id:t.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:s(n),currentTime:t.now()},X(e,n,[r],n.button)&&(t.stopEvent(n),i(e,!0)),(e.clickHandler||e.dblClickHandler||e.pressHandler||e.dragHandler||e.dragEndHandler)&&t.cancelEvent(n)}function T(t,e){_(t,e)}function S(e,n){_(e,n),t.stopEvent(n)}function _(e,n){var i;n=t.getEvent(n),i={id:t.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:s(n),currentTime:t.now()},Y(e,n,[i],n.button)&&r(e,!0)}function E(t,e){k(t,e)}function C(e,n){k(e,n),t.stopEvent(n)}function k(e,n){var i;n=t.getEvent(n),i={id:t.MouseTracker.mousePointerId,type:"mouse",isPrimary:!0,currentPos:s(n),currentTime:t.now()},K(e,n,[i])}function M(e,n){var i,r=n.changedTouches.length,o=[];for(i=0;r>i;i++)o.push({id:n.changedTouches[i].identifier,type:"touch",currentPos:s(n.changedTouches[i]),currentTime:t.now()});G(e,n,o)}function P(e,n){var i,r=n.changedTouches.length,o=[];for(i=0;r>i;i++)o.push({id:n.changedTouches[i].identifier,type:"touch",currentPos:s(n.changedTouches[i]),currentTime:t.now()});Z(e,n,o)}function I(e,n){var i,r,o=n.changedTouches.length,a=[];for(i=t.now(),r=0;o>r;r++)a.push({id:n.changedTouches[r].identifier,type:"touch",currentPos:s(n.changedTouches[r]),currentTime:i});t.MouseTracker.haveTouchEnter||G(e,n,a),X(e,n,a,0),t.cancelEvent(n)}function z(e,n){var i,r,o=n.changedTouches.length,a=[];for(i=t.now(),r=0;o>r;r++)a.push({id:n.changedTouches[r].identifier,type:"touch",currentPos:s(n.changedTouches[r]),currentTime:i});Y(e,n,a,0),!t.MouseTracker.haveTouchEnter&&o>0&&Z(e,n,a),t.cancelEvent(n)}function A(e,n){var i,r=n.changedTouches.length,o=[];for(i=0;r>i;i++)o.push({id:n.changedTouches[i].identifier,type:"touch",currentPos:s(n.changedTouches[i]),currentTime:t.now()});K(e,n,o),t.cancelEvent(n)}function H(t,e){var n,i=e.changedTouches.length,r=[];for(n=0;i>n;n++)r.push({id:e.changedTouches[n].identifier,type:"touch"});J(t,e,r)}function O(t,e){return e.stopPropagation(),e.preventDefault(),!1}function N(t,e){return e.stopPropagation(),e.preventDefault(),!1}function L(e,n){var i;this===n.relatedTarget||y(n.currentTarget,n.relatedTarget)||(i={id:n.pointerId,type:o(n),isPrimary:n.isPrimary,currentPos:s(n),currentTime:t.now()},G(e,n,[i]))}function D(e,n){var i;this===n.relatedTarget||y(n.currentTarget,n.relatedTarget)||(i={id:n.pointerId,type:o(n),isPrimary:n.isPrimary,currentPos:s(n),currentTime:t.now()},Z(e,n,[i]))}function R(e,n){var r;r={id:n.pointerId,type:o(n),isPrimary:n.isPrimary,currentPos:s(n),currentTime:t.now()},X(e,n,[r],n.button)&&(i(e,!1),t.stopEvent(n)),(e.clickHandler||e.dblClickHandler||e.pressHandler||e.dragHandler||e.dragEndHandler||e.pinchHandler)&&t.cancelEvent(n)}function j(t,e){F(t,e)}function B(e,n){var i=e.getActivePointersListByType(o(n));i.getById(n.pointerId)&&F(e,n),t.stopEvent(n)}function F(e,n){var i;i={id:n.pointerId,type:o(n),isPrimary:n.isPrimary,currentPos:s(n),currentTime:t.now()},Y(e,n,[i],n.button)&&r(e,!1)}function W(t,e){q(t,e)}function U(e,n){var i=e.getActivePointersListByType(o(n));i.getById(n.pointerId)&&q(e,n),t.stopEvent(n)}function q(e,n){var i;i={id:n.pointerId,type:o(n),isPrimary:n.isPrimary,currentPos:s(n),currentTime:t.now()},K(e,n,[i])}function V(t,e){var n;n={id:e.pointerId,type:o(e)},J(t,e,[n])}function $(t,e){return e.hasOwnProperty("isPrimary")||(e.isPrimary=0===t.getLength()?!0:!1),e.speed=0,e.direction=0,e.contactPos=e.currentPos,e.contactTime=e.currentTime,e.lastPos=e.currentPos,e.lastTime=e.currentTime,t.add(e)}function Q(t,e){var n,i;return t.getById(e.id)?(n=t.removeById(e.id),e.hasOwnProperty("isPrimary")||(i=t.getPrimary(),i||(i=t.getByIndex(0),i&&(i.isPrimary=!0)))):n=t.getLength(),n}function G(e,n,i){var r,o,s,a,u=e.getActivePointersListByType(i[0].type),c=i.length;for(r=0;c>r;r++)o=i[r],s=u.getById(o.id),s?(s.insideElement=!0,s.lastPos=s.currentPos,s.lastTime=s.currentTime,s.currentPos=o.currentPos,s.currentTime=o.currentTime,o=s):(o.captured=!1,o.insideElementPressed=!1,o.insideElement=!0,$(u,o)),e.enterHandler&&(a=e.enterHandler({eventSource:e,pointerType:o.type,position:l(o.currentPos,e.element),buttons:u.buttons,insideElementPressed:o.insideElementPressed,buttonDownAny:0!==u.buttons,isTouchEvent:"touch"===o.type,originalEvent:n,preventDefaultAction:!1,userData:e.userData}),a===!1&&t.cancelEvent(n))}function Z(e,n,i){var r,o,s,a,u=(ee[e.hash],e.getActivePointersListByType(i[0].type)),c=i.length;for(r=0;c>r;r++)o=i[r],s=u.getById(o.id),s&&(s.captured?(s.insideElement=!1,s.lastPos=s.currentPos,s.lastTime=s.currentTime,s.currentPos=o.currentPos,s.currentTime=o.currentTime):Q(u,s),o=s),e.exitHandler&&(a=e.exitHandler({eventSource:e,pointerType:o.type,position:l(o.currentPos,e.element),buttons:u.buttons,insideElementPressed:s?s.insideElementPressed:!1,buttonDownAny:0!==u.buttons,isTouchEvent:"touch"===o.type,originalEvent:n,preventDefaultAction:!1,userData:e.userData}),a===!1&&t.cancelEvent(n))}function X(e,n,i,r){var o,s,a,c,h=ee[e.hash],d=e.getActivePointersListByType(i[0].type),p=i.length;if(n.buttons!==void 0?d.buttons=n.buttons:0===r?d.buttons|=1:1===r?d.buttons|=4:2===r?d.buttons|=2:3===r?d.buttons|=8:4===r?d.buttons|=16:5===r&&(d.buttons|=32),0!==r&&1!==r)return!1;for(s=0;p>s;s++)a=i[s],c=d.getById(a.id),c?(c.captured=!0,c.insideElementPressed=!0,c.insideElement=!0,c.contactPos=a.currentPos,c.contactTime=a.currentTime,c.lastPos=c.currentPos,c.lastTime=c.currentTime,c.currentPos=a.currentPos,c.currentTime=a.currentTime,a=c):(a.captured=!0,a.insideElementPressed=!0,a.insideElement=!0,$(d,a)),d.contacts++,(e.dragHandler||e.dragEndHandler||e.pinchHandler)&&t.MouseTracker.gesturePointVelocityTracker.addPoint(e,a),1===d.contacts?e.pressHandler&&(o=e.pressHandler({eventSource:e,pointerType:a.type,position:l(a.contactPos,e.element),buttons:d.buttons,isTouchEvent:"touch"===a.type,originalEvent:n,preventDefaultAction:!1,userData:e.userData}),o===!1&&t.cancelEvent(n)):2===d.contacts&&e.pinchHandler&&"touch"===a.type&&(h.pinchGPoints=d.asArray(),h.lastPinchDist=h.currentPinchDist=h.pinchGPoints[0].currentPos.distanceTo(h.pinchGPoints[1].currentPos),h.lastPinchCenter=h.currentPinchCenter=u(h.pinchGPoints[0].currentPos,h.pinchGPoints[1].currentPos));return!0}function Y(e,n,i,r){var o,s,a,c,h,d,p,f=ee[e.hash],g=e.getActivePointersListByType(i[0].type),m=i.length,v=!1,y=!1;if(n.buttons!==void 0?g.buttons=n.buttons:0===r?g.buttons^=-2:1===r?g.buttons^=-5:2===r?g.buttons^=-3:3===r?g.buttons^=-9:4===r?g.buttons^=-17:5===r&&(g.buttons^=-33),0!==r&&1!==r)return!1;for(c=0;m>c;c++)h=i[c],d=g.getById(h.id),d&&(d.captured&&(d.captured=!1,v=!0,y=!0),d.lastPos=d.currentPos,d.lastTime=d.currentTime,d.currentPos=h.currentPos,d.currentTime=h.currentTime,d.insideElement||Q(g,d),s=d.currentPos,a=d.currentTime,y?(g.contacts--,(e.dragHandler||e.dragEndHandler||e.pinchHandler)&&t.MouseTracker.gesturePointVelocityTracker.removePoint(e,d),0===g.contacts?(e.releaseHandler&&(o=e.releaseHandler({eventSource:e,pointerType:d.type,position:l(s,e.element),buttons:g.buttons,insideElementPressed:d.insideElementPressed,insideElementReleased:d.insideElement,isTouchEvent:"touch"===d.type,originalEvent:n,preventDefaultAction:!1,userData:e.userData}),o===!1&&t.cancelEvent(n)),e.dragEndHandler&&!d.currentPos.equals(d.contactPos)&&(o=e.dragEndHandler({eventSource:e,pointerType:d.type,position:l(d.currentPos,e.element),speed:d.speed,direction:d.direction,shift:n.shiftKey,isTouchEvent:"touch"===d.type,originalEvent:n,preventDefaultAction:!1,userData:e.userData}),o===!1&&t.cancelEvent(n)),(e.clickHandler||e.dblClickHandler)&&d.insideElement&&(p=a-d.contactTime<=e.clickTimeThreshold&&d.contactPos.distanceTo(s)<=e.clickDistThreshold,e.clickHandler&&(o=e.clickHandler({eventSource:e,pointerType:d.type,position:l(d.currentPos,e.element),quick:p,shift:n.shiftKey,isTouchEvent:"touch"===d.type,originalEvent:n,preventDefaultAction:!1,userData:e.userData}),o===!1&&t.cancelEvent(n)),e.dblClickHandler&&p&&(g.clicks++,1===g.clicks?(f.lastClickPos=s,f.dblClickTimeOut=setTimeout(function(){g.clicks=0},e.dblClickTimeThreshold)):2===g.clicks&&(clearTimeout(f.dblClickTimeOut),g.clicks=0,f.lastClickPos.distanceTo(s)<=e.dblClickDistThreshold&&(o=e.dblClickHandler({eventSource:e,pointerType:d.type,position:l(d.currentPos,e.element),shift:n.shiftKey,isTouchEvent:"touch"===d.type,originalEvent:n,preventDefaultAction:!1,userData:e.userData}),o===!1&&t.cancelEvent(n)),f.lastClickPos=null)))):2===g.contacts&&e.pinchHandler&&"touch"===d.type&&(f.pinchGPoints=g.asArray(),f.lastPinchDist=f.currentPinchDist=f.pinchGPoints[0].currentPos.distanceTo(f.pinchGPoints[1].currentPos),f.lastPinchCenter=f.currentPinchCenter=u(f.pinchGPoints[0].currentPos,f.pinchGPoints[1].currentPos))):e.releaseHandler&&(o=e.releaseHandler({eventSource:e,pointerType:d.type,position:l(s,e.element),buttons:g.buttons,insideElementPressed:d.insideElementPressed,insideElementReleased:d.insideElement,isTouchEvent:"touch"===d.type,originalEvent:n,preventDefaultAction:!1,userData:e.userData}),o===!1&&t.cancelEvent(n)));
return v}function K(e,n,i){var r,o,s,a,c,h,d=ee[e.hash],p=e.getActivePointersListByType(i[0].type),f=i.length;for(n.buttons!==void 0&&(p.buttons=n.buttons),r=0;f>r;r++)o=i[r],s=p.getById(o.id),s?(o.hasOwnProperty("isPrimary")&&(s.isPrimary=o.isPrimary),s.lastPos=s.currentPos,s.lastTime=s.currentTime,s.currentPos=o.currentPos,s.currentTime=o.currentTime):(o.captured=!1,o.insideElementPressed=!1,o.insideElement=!0,$(p,o));e.stopHandler&&"mouse"===i[0].type&&(clearTimeout(e.stopTimeOut),e.stopTimeOut=setTimeout(function(){te(e,n,i[0].type)},e.stopDelay)),0===p.contacts?e.moveHandler&&(h=e.moveHandler({eventSource:e,pointerType:i[0].type,position:l(i[0].currentPos,e.element),buttons:p.buttons,isTouchEvent:"touch"===i[0].type,originalEvent:n,preventDefaultAction:!1,userData:e.userData}),h===!1&&t.cancelEvent(n)):1===p.contacts?(e.moveHandler&&(s=p.asArray()[0],h=e.moveHandler({eventSource:e,pointerType:s.type,position:l(s.currentPos,e.element),buttons:p.buttons,isTouchEvent:"touch"===s.type,originalEvent:n,preventDefaultAction:!1,userData:e.userData}),h===!1&&t.cancelEvent(n)),e.dragHandler&&(s=p.asArray()[0],c=s.currentPos.minus(s.lastPos),h=e.dragHandler({eventSource:e,pointerType:s.type,position:l(s.currentPos,e.element),buttons:p.buttons,delta:c,speed:s.speed,direction:s.direction,shift:n.shiftKey,isTouchEvent:"touch"===s.type,originalEvent:n,preventDefaultAction:!1,userData:e.userData}),h===!1&&t.cancelEvent(n))):2===p.contacts&&(e.moveHandler&&(a=p.asArray(),h=e.moveHandler({eventSource:e,pointerType:a[0].type,position:l(u(a[0].currentPos,a[1].currentPos),e.element),buttons:p.buttons,isTouchEvent:"touch"===a[0].type,originalEvent:n,preventDefaultAction:!1,userData:e.userData}),h===!1&&t.cancelEvent(n)),e.pinchHandler&&"touch"===i[0].type&&(c=d.pinchGPoints[0].currentPos.distanceTo(d.pinchGPoints[1].currentPos),c!=d.currentPinchDist&&(d.lastPinchDist=d.currentPinchDist,d.currentPinchDist=c,d.lastPinchCenter=d.currentPinchCenter,d.currentPinchCenter=u(d.pinchGPoints[0].currentPos,d.pinchGPoints[1].currentPos),h=e.pinchHandler({eventSource:e,pointerType:"touch",gesturePoints:d.pinchGPoints,lastCenter:l(d.lastPinchCenter,e.element),center:l(d.currentPinchCenter,e.element),lastDistance:d.lastPinchDist,distance:d.currentPinchDist,shift:n.shiftKey,originalEvent:n,preventDefaultAction:!1,userData:e.userData}),h===!1&&t.cancelEvent(n))))}function J(t,e,n){Y(t,e,n,0),Z(t,e,n)}function te(t,e,n){t.stopHandler&&t.stopHandler({eventSource:t,pointerType:n,position:a(e,t.element),buttons:t.getActivePointersListByType(n).buttons,isTouchEvent:"touch"===n,originalEvent:e,preventDefaultAction:!1,userData:t.userData})}var ee={};t.MouseTracker=function(e){var n=arguments;t.isPlainObject(e)||(e={element:n[0],clickTimeThreshold:n[1],clickDistThreshold:n[2]}),this.hash=Math.random(),this.element=t.getElement(e.element),this.clickTimeThreshold=e.clickTimeThreshold||t.DEFAULT_SETTINGS.clickTimeThreshold,this.clickDistThreshold=e.clickDistThreshold||t.DEFAULT_SETTINGS.clickDistThreshold,this.dblClickTimeThreshold=e.dblClickTimeThreshold||t.DEFAULT_SETTINGS.dblClickTimeThreshold,this.dblClickDistThreshold=e.dblClickDistThreshold||t.DEFAULT_SETTINGS.dblClickDistThreshold,this.userData=e.userData||null,this.stopDelay=e.stopDelay||50,this.enterHandler=e.enterHandler||null,this.exitHandler=e.exitHandler||null,this.pressHandler=e.pressHandler||null,this.releaseHandler=e.releaseHandler||null,this.moveHandler=e.moveHandler||null,this.scrollHandler=e.scrollHandler||null,this.clickHandler=e.clickHandler||null,this.dblClickHandler=e.dblClickHandler||null,this.dragHandler=e.dragHandler||null,this.dragEndHandler=e.dragEndHandler||null,this.pinchHandler=e.pinchHandler||null,this.stopHandler=e.stopHandler||null,this.keyHandler=e.keyHandler||null,this.focusHandler=e.focusHandler||null,this.blurHandler=e.blurHandler||null;var i=this;ee[this.hash]={click:function(t){c(i,t)},dblclick:function(t){h(i,t)},keypress:function(t){d(i,t)},focus:function(t){p(i,t)},blur:function(t){f(i,t)},wheel:function(t){g(i,t)},mousewheel:function(t){m(i,t)},DOMMouseScroll:function(t){m(i,t)},MozMousePixelScroll:function(t){m(i,t)},mouseover:function(t){b(i,t)},mouseout:function(t){w(i,t)},mousedown:function(t){x(i,t)},mouseup:function(t){T(i,t)},mouseupcaptured:function(t){S(i,t)},mousemove:function(t){E(i,t)},mousemovecaptured:function(t){C(i,t)},touchenter:function(t){M(i,t)},touchleave:function(t){P(i,t)},touchstart:function(t){I(i,t)},touchend:function(t){z(i,t)},touchmove:function(t){A(i,t)},touchcancel:function(t){H(i,t)},gesturestart:function(t){O(i,t)},gesturechange:function(t){N(i,t)},pointerover:function(t){L(i,t)},MSPointerOver:function(t){L(i,t)},pointerout:function(t){D(i,t)},MSPointerOut:function(t){D(i,t)},pointerdown:function(t){R(i,t)},MSPointerDown:function(t){R(i,t)},pointerup:function(t){j(i,t)},MSPointerUp:function(t){j(i,t)},pointermove:function(t){W(i,t)},MSPointerMove:function(t){W(i,t)},pointercancel:function(t){V(i,t)},MSPointerCancel:function(t){V(i,t)},pointerupcaptured:function(t){B(i,t)},pointermovecaptured:function(t){U(i,t)},tracking:!1,activePointersLists:[],capturing:!1,pointerCaptureCount:0,lastClickPos:null,dblClickTimeOut:null,pinchGPoints:[],lastPinchDist:0,currentPinchDist:0,lastPinchCenter:null,currentPinchCenter:null}},t.MouseTracker.prototype={destroy:function(){n(this),this.element=null,ee[this.hash]=null,delete ee[this.hash]},isTracking:function(){return ee[this.hash].tracking},setTracking:function(t){return t?e(this):n(this),this},getActivePointersListByType:function(e){var n,i,r=ee[this.hash],o=r.activePointersLists.length;for(n=0;o>n;n++)if(r.activePointersLists[n].type===e)return r.activePointersLists[n];return i=new t.MouseTracker.GesturePointList(e),r.activePointersLists.push(i),i},enterHandler:function(){},exitHandler:function(){},pressHandler:function(){},releaseHandler:function(){},moveHandler:function(){},scrollHandler:function(){},clickHandler:function(){},dblClickHandler:function(){},dragHandler:function(){},dragEndHandler:function(){},pinchHandler:function(){},stopHandler:function(){},keyHandler:function(){},focusHandler:function(){},blurHandler:function(){}},t.MouseTracker.gesturePointVelocityTracker=function(){var e=[],n=0,i=0,r=function(t,e){return""+t.hash+e.type+(""+e.id)},o=function(){var n,r,o,s,a,l,u=e.length,c=t.now();for(s=c-i,i=c,n=0;u>n;n++)r=e[n],o=r.gPoint,o.direction=Math.atan2(o.currentPos.y-r.lastPos.y,o.currentPos.x-r.lastPos.x),a=r.lastPos.distanceTo(o.currentPos),r.lastPos=o.currentPos,l=1e3*a/(s+1),o.speed=.75*l+.25*o.speed},s=function(s,a){var l=r(s,a);e.push({guid:l,gPoint:a,lastPos:a.currentPos}),1===e.length&&(i=t.now(),n=window.setInterval(o,50))},a=function(t,i){var o,s=r(t,i),a=e.length;for(o=0;a>o;o++)if(e[o].guid===s){e.splice(o,1),a--,0===a&&window.clearInterval(n);break}};return{addPoint:s,removePoint:a}}(),t.MouseTracker.wheelEventName=t.Browser.vendor==t.BROWSERS.IE&&t.Browser.version>8||"onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",t.MouseTracker.supportsMouseCapture=function(){var e=document.createElement("div");return t.isFunction(e.setCapture)&&t.isFunction(e.releaseCapture)}(),t.MouseTracker.subscribeEvents=["click","dblclick","keypress","focus","blur",t.MouseTracker.wheelEventName],"DOMMouseScroll"==t.MouseTracker.wheelEventName&&t.MouseTracker.subscribeEvents.push("MozMousePixelScroll"),window.PointerEvent?(t.MouseTracker.subscribeEvents.push("pointerover","pointerout","pointerdown","pointerup","pointermove","pointercancel"),t.MouseTracker.unprefixedPointerEvents=!0,t.MouseTracker.maxTouchPoints=navigator.maxTouchPoints?navigator.maxTouchPoints:0,t.MouseTracker.haveTouchEnter=!1,t.MouseTracker.haveMouseEnter=!1):window.MSPointerEvent?(t.MouseTracker.subscribeEvents.push("MSPointerOver","MSPointerOut","MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"),t.MouseTracker.unprefixedPointerEvents=!1,t.MouseTracker.maxTouchPoints=navigator.msMaxTouchPoints?navigator.msMaxTouchPoints:0,t.MouseTracker.haveTouchEnter=!1,t.MouseTracker.haveMouseEnter=!1):(t.MouseTracker.subscribeEvents.push("mouseover","mouseout","mousedown","mouseup","mousemove"),t.MouseTracker.haveMouseEnter=!1,"ontouchstart"in window?(t.MouseTracker.subscribeEvents.push("touchstart","touchend","touchmove","touchcancel"),"ontouchenter"in window?(t.MouseTracker.subscribeEvents.push("touchenter","touchleave"),t.MouseTracker.haveTouchEnter=!0):t.MouseTracker.haveTouchEnter=!1):t.MouseTracker.haveTouchEnter=!1,"ongesturestart"in window&&t.MouseTracker.subscribeEvents.push("gesturestart","gesturechange"),t.MouseTracker.mousePointerId="legacy-mouse",t.MouseTracker.maxTouchPoints=10),t.MouseTracker.GesturePointList=function(t){this._gPoints=[],this.type=t,this.buttons=0,this.contacts=0,this.clicks=0},t.MouseTracker.GesturePointList.prototype={getLength:function(){return this._gPoints.length},asArray:function(){return this._gPoints},add:function(t){return this._gPoints.push(t)},removeById:function(t){var e,n=this._gPoints.length;for(e=0;n>e;e++)if(this._gPoints[e].id===t){this._gPoints.splice(e,1);break}return this._gPoints.length},getByIndex:function(t){return this._gPoints.length>t?this._gPoints[t]:null},getById:function(t){var e,n=this._gPoints.length;for(e=0;n>e;e++)if(this._gPoints[e].id===t)return this._gPoints[e];return null},getPrimary:function(){var t,e=this._gPoints.length;for(t=0;e>t;t++)if(this._gPoints[t].isPrimary)return this._gPoints[t];return null}}}(OpenSeadragon),function(t){t.ControlAnchor={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4,ABSOLUTE:5},t.Control=function(e,n,i){var r=e.parentNode;"number"==typeof n&&(t.console.error("Passing an anchor directly into the OpenSeadragon.Control constructor is deprecated; please use an options object instead.  Support for this deprecated variant is scheduled for removal in December 2013"),n={anchor:n}),n.attachToViewer=n.attachToViewer===void 0?!0:n.attachToViewer,this.autoFade=n.autoFade===void 0?!0:n.autoFade,this.element=e,this.anchor=n.anchor,this.container=i,this.anchor==t.ControlAnchor.ABSOLUTE?(this.wrapper=t.makeNeutralElement("div"),this.wrapper.style.position="absolute",this.wrapper.style.top="number"==typeof n.top?n.top+"px":n.top,this.wrapper.style.left="number"==typeof n.left?n.left+"px":n.left,this.wrapper.style.height="number"==typeof n.height?n.height+"px":n.height,this.wrapper.style.width="number"==typeof n.width?n.width+"px":n.width,this.wrapper.style.margin="0px",this.wrapper.style.padding="0px",this.element.style.position="relative",this.element.style.top="0px",this.element.style.left="0px",this.element.style.height="100%",this.element.style.width="100%"):(this.wrapper=t.makeNeutralElement("div"),this.wrapper.style.display="inline-block",this.anchor==t.ControlAnchor.NONE&&(this.wrapper.style.width=this.wrapper.style.height="100%")),this.wrapper.appendChild(this.element),n.attachToViewer?this.anchor==t.ControlAnchor.TOP_RIGHT||this.anchor==t.ControlAnchor.BOTTOM_RIGHT?this.container.insertBefore(this.wrapper,this.container.firstChild):this.container.appendChild(this.wrapper):r.appendChild(this.wrapper)},t.Control.prototype={destroy:function(){this.wrapper.removeChild(this.element),this.container.removeChild(this.wrapper)},isVisible:function(){return"none"!=this.wrapper.style.display},setVisible:function(e){this.wrapper.style.display=e?this.anchor==t.ControlAnchor.ABSOLUTE?"block":"inline-block":"none"},setOpacity:function(e){this.element[t.SIGNAL]&&t.Browser.vendor==t.BROWSERS.IE?t.setElementOpacity(this.element,e,!0):t.setElementOpacity(this.wrapper,e,!0)}}}(OpenSeadragon),function(t){function e(t,e){var n,i=t.controls;for(n=i.length-1;n>=0;n--)if(i[n].element==e)return n;return-1}t.ControlDock=function(e){var n,i,r=["topleft","topright","bottomright","bottomleft"];for(t.extend(!0,this,{id:"controldock-"+t.now()+"-"+Math.floor(1e6*Math.random()),container:t.makeNeutralElement("div"),controls:[]},e),this.container.onsubmit=function(){return!1},this.element&&(this.element=t.getElement(this.element),this.element.appendChild(this.container),this.element.style.position="relative",this.container.style.width="100%",this.container.style.height="100%"),i=0;r.length>i;i++)n=r[i],this.controls[n]=t.makeNeutralElement("div"),this.controls[n].style.position="absolute",n.match("left")&&(this.controls[n].style.left="0px"),n.match("right")&&(this.controls[n].style.right="0px"),n.match("top")&&(this.controls[n].style.top="0px"),n.match("bottom")&&(this.controls[n].style.bottom="0px");this.container.appendChild(this.controls.topleft),this.container.appendChild(this.controls.topright),this.container.appendChild(this.controls.bottomright),this.container.appendChild(this.controls.bottomleft)},t.ControlDock.prototype={addControl:function(n,i){n=t.getElement(n);var r=null;if(!(e(this,n)>=0)){switch(i.anchor){case t.ControlAnchor.TOP_RIGHT:r=this.controls.topright,n.style.position="relative",n.style.paddingRight="0px",n.style.paddingTop="0px";break;case t.ControlAnchor.BOTTOM_RIGHT:r=this.controls.bottomright,n.style.position="relative",n.style.paddingRight="0px",n.style.paddingBottom="0px";break;case t.ControlAnchor.BOTTOM_LEFT:r=this.controls.bottomleft,n.style.position="relative",n.style.paddingLeft="0px",n.style.paddingBottom="0px";break;case t.ControlAnchor.TOP_LEFT:r=this.controls.topleft,n.style.position="relative",n.style.paddingLeft="0px",n.style.paddingTop="0px";break;case t.ControlAnchor.ABSOLUTE:r=this.container,n.style.margin="0px",n.style.padding="0px";break;default:case t.ControlAnchor.NONE:r=this.container,n.style.margin="0px",n.style.padding="0px"}this.controls.push(new t.Control(n,i,r)),n.style.display="inline-block"}},removeControl:function(n){n=t.getElement(n);var i=e(this,n);return i>=0&&(this.controls[i].destroy(),this.controls.splice(i,1)),this},clearControls:function(){for(;this.controls.length>0;)this.controls.pop().destroy();return this},areControlsEnabled:function(){var t;for(t=this.controls.length-1;t>=0;t--)if(this.controls[t].isVisible())return!0;return!1},setControlsEnabled:function(t){var e;for(e=this.controls.length-1;e>=0;e--)this.controls[e].setVisible(t);return this}}}(OpenSeadragon),function($){function _getSafeElemSize(t){return t=$.getElement(t),new $.Point(0===t.clientWidth?1:t.clientWidth,0===t.clientHeight?1:t.clientHeight)}function getTileSourceImplementation(viewer,tileSource,successCallback,failCallback){var _this=viewer;"string"==$.type(tileSource)&&(tileSource.match(/\s*<.*/)?tileSource=$.parseXml(tileSource):tileSource.match(/\s*[\{\[].*/)&&(tileSource=eval("("+tileSource+")"))),setTimeout(function(){if("string"==$.type(tileSource))tileSource=new $.TileSource(tileSource,function(t){successCallback(t.tileSource)}),tileSource.addHandler("open-failed",function(t){failCallback(t)});else if($.isPlainObject(tileSource)||tileSource.nodeType)if($.isFunction(tileSource.getTileUrl)){var t=new $.TileSource(tileSource);t.getTileUrl=tileSource.getTileUrl,successCallback(t)}else{var e=$.TileSource.determineType(_this,tileSource);if(!e)return void failCallback({message:"Unable to load TileSource",source:tileSource});var n=e.prototype.configure.apply(_this,[tileSource]),i=new e(n);successCallback(i)}else successCallback(tileSource)},1)}function openTileSource(t,e,n){var i,r=t;n=n||{},r.source&&r.close(),THIS[r.hash].prevContainerSize=_getSafeElemSize(r.container),r.collectionMode?(r.source=new $.TileSourceCollection({rows:r.collectionRows,layout:r.collectionLayout,tileSize:r.collectionTileSize,tileSources:r.tileSources,tileMargin:r.collectionTileMargin}),r.viewport=r.viewport?r.viewport:new $.Viewport({collectionMode:!0,collectionTileSource:r.source,containerSize:THIS[r.hash].prevContainerSize,springStiffness:r.springStiffness,animationTime:r.animationTime,showNavigator:!1,minZoomImageRatio:1,maxZoomPixelRatio:1,viewer:r,degrees:r.degrees})):(e&&(r.source=e),r.viewport=r.viewport?r.viewport:new $.Viewport({containerSize:THIS[r.hash].prevContainerSize,springStiffness:r.springStiffness,animationTime:r.animationTime,minZoomImageRatio:r.minZoomImageRatio,maxZoomPixelRatio:r.maxZoomPixelRatio,visibilityRatio:r.visibilityRatio,wrapHorizontal:r.wrapHorizontal,wrapVertical:r.wrapVertical,defaultZoomLevel:r.defaultZoomLevel,minZoomLevel:r.minZoomLevel,maxZoomLevel:r.maxZoomLevel,viewer:r,degrees:r.degrees,navigatorRotate:r.navigatorRotate,homeFillsViewer:r.homeFillsViewer})),r.source.overlays=r.source.overlays||[],r.imageLoader=new $.ImageLoader,r.tileCache=new $.TileCache({maxImageCacheCount:r.maxImageCacheCount}),r.world=new $.World({viewer:r}),r.world.addHandler("add-item",function(){r.viewport.setHomeBounds(r.world.getHomeBounds(),r.world.getContentFactor()),THIS[r.hash].forceRedraw=!0}),r.world.addHandler("remove-item",function(){r.viewport.setHomeBounds(r.world.getHomeBounds(),r.world.getContentFactor()),THIS[r.hash].forceRedraw=!0}),r.drawer=new $.Drawer({viewer:r,viewport:r.viewport,element:r.canvas,opacity:r.opacity,debugGridColor:r.debugGridColor});var o=new $.TiledImage({viewer:r,source:r.source,viewport:r.viewport,drawer:r.drawer,tileCache:r.tileCache,imageLoader:r.imageLoader,x:n.x,y:n.y,width:n.width,height:n.height,imageLoaderLimit:r.imageLoaderLimit,minZoomImageRatio:r.minZoomImageRatio,wrapHorizontal:r.wrapHorizontal,wrapVertical:r.wrapVertical,immediateRender:r.immediateRender,blendTime:r.blendTime,alwaysBlend:r.alwaysBlend,minPixelRatio:r.collectionMode?0:r.minPixelRatio,debugMode:r.debugMode,debugGridColor:r.debugGridColor,crossOriginPolicy:r.crossOriginPolicy});return r.world.addItem(o),r.viewport.goHome(!0),r.drawer.canRotate()||(r.rotateLeft&&(i=r.buttons.buttons.indexOf(r.rotateLeft),r.buttons.buttons.splice(i,1),r.buttons.element.removeChild(r.rotateLeft.element)),r.rotateRight&&(i=r.buttons.buttons.indexOf(r.rotateRight),r.buttons.buttons.splice(i,1),r.buttons.element.removeChild(r.rotateRight.element))),r.showNavigator&&!r.collectionMode&&(r.navigator?r.navigator.open(e):r.navigator=new $.Navigator({id:r.navigatorId,position:r.navigatorPosition,sizeRatio:r.navigatorSizeRatio,maintainSizeRatio:r.navigatorMaintainSizeRatio,top:r.navigatorTop,left:r.navigatorLeft,width:r.navigatorWidth,height:r.navigatorHeight,autoResize:r.navigatorAutoResize,tileSources:e,tileHost:r.tileHost,prefixUrl:r.prefixUrl,viewer:r,navigatorRotate:r.navigatorRotate})),r.showReferenceStrip&&!r.referenceStrip&&(r.referenceStrip=new $.ReferenceStrip({id:r.referenceStripElement,position:r.referenceStripPosition,sizeRatio:r.referenceStripSizeRatio,scroll:r.referenceStripScroll,height:r.referenceStripHeight,width:r.referenceStripWidth,tileSources:r.tileSources,tileHost:r.tileHost,prefixUrl:r.prefixUrl,viewer:r})),THIS[r.hash].animating=!1,THIS[r.hash].forceRedraw=!0,r._updateRequestId=scheduleUpdate(r,updateMulti),VIEWERS[r.hash]=r,loadOverlays(r),r.raiseEvent("open",{source:e}),r}function loadOverlays(t){t.currentOverlays=[];for(var e=0;t.overlays.length>e;e++)t.currentOverlays[e]=getOverlayObject(t,t.overlays[e]);for(var n=0;t.source.overlays.length>n;n++)t.currentOverlays[e+n]=getOverlayObject(t,t.source.overlays[n])}function getOverlayObject(t,e){if(e instanceof $.Overlay)return e;var n=null;if(e.element)n=$.getElement(e.element);else{var i=e.id?e.id:"openseadragon-overlay-"+Math.floor(1e7*Math.random());n=$.getElement(e.id),n||(n=document.createElement("a"),n.href="#/overlay/"+i),n.id=i,$.addClass(n,e.className?e.className:"openseadragon-overlay")}var r=e.location;r||(r=e.width&&e.height?void 0!==e.px?t.viewport.imageToViewportRectangle(new $.Rect(e.px,e.py,e.width,e.height)):new $.Rect(e.x,e.y,e.width,e.height):void 0!==e.px?t.viewport.imageToViewportCoordinates(new $.Point(e.px,e.py)):new $.Point(e.x,e.y));var o=e.placement;return o&&"string"===$.type(o)&&(o=$.OverlayPlacement[e.placement.toUpperCase()]),new $.Overlay({element:n,location:r,placement:o,onDraw:e.onDraw,checkResize:e.checkResize})}function getOverlayIndex(t,e){var n;for(n=t.length-1;n>=0;n--)if(t[n].element===e)return n;return-1}function drawOverlays(t,e,n){var i,r=e.length;for(i=0;r>i;i++)e[i].drawHTML(n,t)}function scheduleUpdate(t,e){return $.requestAnimationFrame(function(){e(t)})}function scheduleControlsFade(t){$.requestAnimationFrame(function(){updateControlsFade(t)})}function beginControlsAutoHide(t){t.autoHideControls&&(t.controlsShouldFade=!0,t.controlsFadeBeginTime=$.now()+t.controlsFadeDelay,window.setTimeout(function(){scheduleControlsFade(t)},t.controlsFadeDelay))}function updateControlsFade(t){var e,n,i,r;if(t.controlsShouldFade){for(e=$.now(),n=e-t.controlsFadeBeginTime,i=1-n/t.controlsFadeLength,i=Math.min(1,i),i=Math.max(0,i),r=t.controls.length-1;r>=0;r--)t.controls[r].autoFade&&t.controls[r].setOpacity(i);i>0&&scheduleControlsFade(t)}}function abortControlsAutoHide(t){var e;for(t.controlsShouldFade=!1,e=t.controls.length-1;e>=0;e--)t.controls[e].setOpacity(1)}function onFocus(){abortControlsAutoHide(this)}function onBlur(){beginControlsAutoHide(this)}function onCanvasClick(t){var e;!t.preventDefaultAction&&this.viewport&&t.quick&&(e=this.gestureSettingsByDeviceType(t.pointerType),e.clickToZoom&&(this.viewport.zoomBy(t.shift?1/this.zoomPerClick:this.zoomPerClick,this.viewport.pointFromPixel(t.position,!0)),this.viewport.applyConstraints())),this.raiseEvent("canvas-click",{tracker:t.eventSource,position:t.position,quick:t.quick,shift:t.shift,originalEvent:t.originalEvent})}function onCanvasDblClick(t){var e;!t.preventDefaultAction&&this.viewport&&(e=this.gestureSettingsByDeviceType(t.pointerType),e.dblClickToZoom&&(this.viewport.zoomBy(t.shift?1/this.zoomPerClick:this.zoomPerClick,this.viewport.pointFromPixel(t.position,!0)),this.viewport.applyConstraints())),this.raiseEvent("canvas-double-click",{tracker:t.eventSource,position:t.position,shift:t.shift,originalEvent:t.originalEvent})}function onCanvasDrag(t){var e;!t.preventDefaultAction&&this.viewport&&(e=this.gestureSettingsByDeviceType(t.pointerType),this.panHorizontal||(t.delta.x=0),this.panVertical||(t.delta.y=0),this.viewport.panBy(this.viewport.deltaPointsFromPixels(t.delta.negate()),e.flickEnabled),this.constrainDuringPan&&this.viewport.applyConstraints()),this.raiseEvent("canvas-drag",{tracker:t.eventSource,position:t.position,delta:t.delta,speed:t.speed,direction:t.direction,shift:t.shift,originalEvent:t.originalEvent})}function onCanvasDragEnd(t){var e;if(!t.preventDefaultAction&&this.viewport){if(e=this.gestureSettingsByDeviceType(t.pointerType),e.flickEnabled&&t.speed>=e.flickMinSpeed){var n=e.flickMomentum*t.speed*Math.cos(t.direction-Math.PI/180*this.viewport.degrees),i=e.flickMomentum*t.speed*Math.sin(t.direction-Math.PI/180*this.viewport.degrees),r=this.viewport.pixelFromPoint(this.viewport.getCenter(!0)),o=this.viewport.pointFromPixel(new $.Point(r.x-n,r.y-i));this.panHorizontal||(o.x=r.x),this.panVertical||(o.y=r.y),this.viewport.panTo(o,!1)}this.viewport.applyConstraints()}this.raiseEvent("canvas-drag-end",{tracker:t.eventSource,position:t.position,speed:t.speed,direction:t.direction,shift:t.shift,originalEvent:t.originalEvent})}function onCanvasRelease(t){this.raiseEvent("canvas-release",{tracker:t.eventSource,position:t.position,insideElementPressed:t.insideElementPressed,insideElementReleased:t.insideElementReleased,originalEvent:t.originalEvent})}function onCanvasPinch(t){var e,n,i,r;if(!t.preventDefaultAction&&this.viewport&&(e=this.gestureSettingsByDeviceType(t.pointerType),e.pinchToZoom&&(n=this.viewport.pointFromPixel(t.center,!0),i=this.viewport.pointFromPixel(t.lastCenter,!0),r=i.minus(n),this.panHorizontal||(r.x=0),this.panVertical||(r.y=0),this.viewport.zoomBy(t.distance/t.lastDistance,n,!0),this.viewport.panBy(r,!0),this.viewport.applyConstraints()),e.pinchRotate)){var o=Math.atan2(t.gesturePoints[0].currentPos.y-t.gesturePoints[1].currentPos.y,t.gesturePoints[0].currentPos.x-t.gesturePoints[1].currentPos.x),s=Math.atan2(t.gesturePoints[0].lastPos.y-t.gesturePoints[1].lastPos.y,t.gesturePoints[0].lastPos.x-t.gesturePoints[1].lastPos.x);this.viewport.setRotation(this.viewport.getRotation()+(o-s)*(180/Math.PI))}return this.raiseEvent("canvas-pinch",{tracker:t.eventSource,gesturePoints:t.gesturePoints,lastCenter:t.lastCenter,center:t.center,lastDistance:t.lastDistance,distance:t.distance,shift:t.shift,originalEvent:t.originalEvent}),!1}function onCanvasScroll(t){var e,n;return!t.preventDefaultAction&&this.viewport&&(e=this.gestureSettingsByDeviceType(t.pointerType),e.scrollToZoom&&(n=Math.pow(this.zoomPerScroll,t.scroll),this.viewport.zoomBy(n,this.viewport.pointFromPixel(t.position,!0)),this.viewport.applyConstraints())),this.raiseEvent("canvas-scroll",{tracker:t.eventSource,position:t.position,scroll:t.scroll,shift:t.shift,originalEvent:t.originalEvent}),!1}function onContainerExit(t){t.insideElementPressed||(THIS[this.hash].mouseInside=!1,THIS[this.hash].animating||beginControlsAutoHide(this)),this.raiseEvent("container-exit",{tracker:t.eventSource,position:t.position,buttons:t.buttons,insideElementPressed:t.insideElementPressed,buttonDownAny:t.buttonDownAny,originalEvent:t.originalEvent})}function onContainerPress(t){"touch"!==t.pointerType||$.MouseTracker.haveTouchEnter||(THIS[this.hash].mouseInside=!0,abortControlsAutoHide(this))}function onContainerRelease(t){(!t.insideElementReleased||"touch"===t.pointerType&&!$.MouseTracker.haveTouchEnter)&&(THIS[this.hash].mouseInside=!1,THIS[this.hash].animating||beginControlsAutoHide(this)),this.raiseEvent("container-release",{tracker:t.eventSource,position:t.position,insideElementPressed:t.insideElementPressed,insideElementReleased:t.insideElementReleased,originalEvent:t.originalEvent})}function onContainerEnter(t){THIS[this.hash].mouseInside=!0,abortControlsAutoHide(this),this.raiseEvent("container-enter",{tracker:t.eventSource,position:t.position,buttons:t.buttons,insideElementPressed:t.insideElementPressed,buttonDownAny:t.buttonDownAny,originalEvent:t.originalEvent})}function updateMulti(t){return t.source?(updateOnce(t),void(t.source&&(t._updateRequestId=scheduleUpdate(t,updateMulti)))):void(t._updateRequestId=null)}function updateOnce(t){var e,n;if(t.source){if(t.autoResize&&(e=_getSafeElemSize(t.container),!e.equals(THIS[t.hash].prevContainerSize))){var i=t.viewport.getBounds(),r=t.viewport.getCenter();resizeViewportAndRecenter(t,e,i,r),THIS[t.hash].prevContainerSize=e,THIS[t.hash].forceRedraw=!0}n=t.viewport.update(),t.referenceStrip&&(n=t.referenceStrip.update(t.viewport)||n),!THIS[t.hash].animating&&n&&(t.raiseEvent("animation-start"),abortControlsAutoHide(t)),n?(updateWorld(t),drawOverlays(t.viewport,t.currentOverlays,t.overlaysContainer),t.navigator&&t.navigator.update(t.viewport),t.raiseEvent("animation")):(THIS[t.hash].forceRedraw||t.world.needsUpdate())&&(updateWorld(t),drawOverlays(t.viewport,t.currentOverlays,t.overlaysContainer),t.navigator&&t.navigator.update(t.viewport),THIS[t.hash].forceRedraw=!1),THIS[t.hash].animating&&!n&&(t.raiseEvent("animation-finish"),THIS[t.hash].mouseInside||beginControlsAutoHide(t)),THIS[t.hash].animating=n}}function resizeViewportAndRecenter(t,e,n,i){var r=t.viewport;r.resize(e,!0);var o=1/t.source.aspectRatio,s=1>=n.width?n.width:1,a=o>=n.height?n.height:o,l=new $.Rect(i.x-s/2,i.y-a/2,s,a);r.fitBounds(l,!0)}function updateWorld(t){t.drawer.clear(),t.world.update(),t.raiseEvent("update-viewport",{})}function resolveUrl(t,e){return t?t+e:e}function beginZoomingIn(){THIS[this.hash].lastZoomTime=$.now(),THIS[this.hash].zoomFactor=this.zoomPerSecond,THIS[this.hash].zooming=!0,scheduleZoom(this)}function beginZoomingOut(){THIS[this.hash].lastZoomTime=$.now(),THIS[this.hash].zoomFactor=1/this.zoomPerSecond,THIS[this.hash].zooming=!0,scheduleZoom(this)}function endZooming(){THIS[this.hash].zooming=!1}function scheduleZoom(t){$.requestAnimationFrame($.delegate(t,doZoom))}function doZoom(){var t,e,n;THIS[this.hash].zooming&&this.viewport&&(t=$.now(),e=t-THIS[this.hash].lastZoomTime,n=Math.pow(THIS[this.hash].zoomFactor,e/1e3),this.viewport.zoomBy(n),this.viewport.applyConstraints(),THIS[this.hash].lastZoomTime=t,scheduleZoom(this))}function doSingleZoomIn(){this.viewport&&(THIS[this.hash].zooming=!1,this.viewport.zoomBy(this.zoomPerClick/1),this.viewport.applyConstraints())}function doSingleZoomOut(){this.viewport&&(THIS[this.hash].zooming=!1,this.viewport.zoomBy(1/this.zoomPerClick),this.viewport.applyConstraints())}function lightUp(){this.buttons.emulateEnter(),this.buttons.emulateExit()}function onHome(){this.viewport&&this.viewport.goHome()}function onFullScreen(){this.isFullPage()&&!$.isFullScreen()?this.setFullPage(!1):this.setFullScreen(!this.isFullPage()),this.buttons&&this.buttons.emulateExit(),this.fullPageButton.element.focus(),this.viewport&&this.viewport.applyConstraints()}function onRotateLeft(){if(this.viewport){var t=this.viewport.getRotation();0===t?t=270:t-=90,this.viewport.setRotation(t)}}function onRotateRight(){if(this.viewport){var t=this.viewport.getRotation();270===t?t=0:t+=90,this.viewport.setRotation(t)}}function onPrevious(){var t=THIS[this.hash].sequence-1;this.navPrevNextWrap&&0>t&&(t+=this.tileSources.length),this.goToPage(t)}function onNext(){var t=THIS[this.hash].sequence+1;this.navPrevNextWrap&&t>=this.tileSources.length&&(t=0),this.goToPage(t)}var THIS={},VIEWERS={};$.Viewer=function(t){var e,n=arguments,i=this;if($.isPlainObject(t)||(t={id:n[0],xmlPath:n.length>1?n[1]:void 0,prefixUrl:n.length>2?n[2]:void 0,controls:n.length>3?n[3]:void 0,overlays:n.length>4?n[4]:void 0}),t.config&&($.extend(!0,t,t.config),delete t.config),$.extend(!0,this,{id:t.id,hash:t.hash||t.id,element:null,container:null,keyboardCommandArea:null,canvas:null,overlays:[],overlaysContainer:null,previousBody:[],customControls:[],source:null,drawer:null,world:null,viewport:null,navigator:null,collectionViewport:null,collectionDrawer:null,navImages:null,buttons:null,profiler:null},$.DEFAULT_SETTINGS,t),this.hash===void 0)throw Error("A hash must be defined, either by specifying options.id or options.hash.");THIS[this.hash]!==void 0&&$.console.warn("Hash "+this.hash+" has already been used."),THIS[this.hash]={fsBoundsDelta:new $.Point(1,1),prevContainerSize:null,animating:!1,forceRedraw:!1,mouseInside:!1,group:null,zooming:!1,zoomFactor:null,lastZoomTime:null,sequenced:!1,sequence:0,fullPage:!1,onfullscreenchange:null},this._updateRequestId=null,this.currentOverlays=[],$.EventSource.call(this),this.addHandler("open-failed",function(t){var e=$.getString("Errors.OpenFailed",t.eventSource,t.message);i._showMessage(e)}),$.ControlDock.call(this,t);var r;for(this.xmlPath&&(this.tileSources=[this.xmlPath]),this.tileSources&&($.isArray(this.tileSources)?(this.tileSources.length>1&&(THIS[this.hash].sequenced=!0),this.initialPage>this.tileSources.length-1&&(this.initialPage=this.tileSources.length-1),r=this.tileSources[this.initialPage],THIS[this.hash].sequence=this.initialPage):r=this.tileSources),this.element=this.element||document.getElementById(this.id),this.canvas=$.makeNeutralElement("div"),this.keyboardCommandArea=$.makeNeutralElement("textarea"),this.overlaysContainer=$.makeNeutralElement("div"),this.canvas.className="openseadragon-canvas",function(t){t.width="100%",t.height="100%",t.overflow="hidden",t.position="absolute",t.top="0px",t.left="0px"}(this.canvas.style),$.setElementTouchActionNone(this.canvas),this.container.className="openseadragon-container",function(t){t.width="100%",t.height="100%",t.position="relative",t.overflow="hidden",t.left="0px",t.top="0px",t.textAlign="left"}(this.container.style),this.keyboardCommandArea.className="keyboard-command-area",function(t){t.width="100%",t.height="100%",t.overflow="hidden",t.position="absolute",t.top="0px",t.left="0px",t.resize="none"}(this.keyboardCommandArea.style),this.container.insertBefore(this.canvas,this.container.firstChild),this.container.insertBefore(this.keyboardCommandArea,this.container.firstChild),this.element.appendChild(this.container),this.canvas.appendChild(this.overlaysContainer),this.bodyWidth=document.body.style.width,this.bodyHeight=document.body.style.height,this.bodyOverflow=document.body.style.overflow,this.docOverflow=document.documentElement.style.overflow,this.keyboardCommandArea.innerTracker=new $.MouseTracker({_this:this,element:this.keyboardCommandArea,focusHandler:function(t){if(!t.preventDefaultAction){var e=$.getElementPosition(this.element);
window.scrollTo(0,e.y)}},keyHandler:function(t){if(!t.preventDefaultAction)switch(t.keyCode){case 61:return i.viewport.zoomBy(1.1),i.viewport.applyConstraints(),!1;case 45:return i.viewport.zoomBy(.9),i.viewport.applyConstraints(),!1;case 48:return i.viewport.goHome(),i.viewport.applyConstraints(),!1;case 119:case 87:case 38:return t.shift?i.viewport.zoomBy(1.1):i.viewport.panBy(new $.Point(0,-.05)),i.viewport.applyConstraints(),!1;case 115:case 83:case 40:return t.shift?i.viewport.zoomBy(.9):i.viewport.panBy(new $.Point(0,.05)),i.viewport.applyConstraints(),!1;case 97:case 37:return i.viewport.panBy(new $.Point(-.05,0)),i.viewport.applyConstraints(),!1;case 100:case 39:return i.viewport.panBy(new $.Point(.05,0)),i.viewport.applyConstraints(),!1;default:return!0}}}).setTracking(!0),this.innerTracker=new $.MouseTracker({element:this.canvas,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,clickHandler:$.delegate(this,onCanvasClick),dblClickHandler:$.delegate(this,onCanvasDblClick),dragHandler:$.delegate(this,onCanvasDrag),dragEndHandler:$.delegate(this,onCanvasDragEnd),releaseHandler:$.delegate(this,onCanvasRelease),scrollHandler:$.delegate(this,onCanvasScroll),pinchHandler:$.delegate(this,onCanvasPinch)}).setTracking(this.mouseNavEnabled?!0:!1),this.outerTracker=new $.MouseTracker({element:this.container,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,enterHandler:$.delegate(this,onContainerEnter),exitHandler:$.delegate(this,onContainerExit),pressHandler:$.delegate(this,onContainerPress),releaseHandler:$.delegate(this,onContainerRelease)}).setTracking(this.mouseNavEnabled?!0:!1),this.toolbar&&(this.toolbar=new $.ControlDock({element:this.toolbar})),this.bindStandardControls(),this.bindSequenceControls(),r&&(this.open(r),this.tileSources.length>1&&this._updateSequenceButtons(this.initialPage)),e=0;this.customControls.length>e;e++)this.addControl(this.customControls[e].id,{anchor:this.customControls[e].anchor});$.requestAnimationFrame(function(){beginControlsAutoHide(i)})},$.extend($.Viewer.prototype,$.EventSource.prototype,$.ControlDock.prototype,{isOpen:function(){return!!this.source},openDzi:function(t){return this.open(t)},openTileSource:function(t){return this.open(t)},open:function(t,e){var n=this;return n._hideMessage(),getTileSourceImplementation(n,t,function(t){openTileSource(n,t,e)},function(t){n.raiseEvent("open-failed",t)}),this},close:function(){return THIS[this.hash]?(null!==this._updateRequestId&&($.cancelAnimationFrame(this._updateRequestId),this._updateRequestId=null),this.navigator&&this.navigator.close(),this.clearOverlays(),this.overlaysContainer.innerHTML="",this.drawer&&this.drawer.destroy(),this.source=null,this.drawer=null,this.world=null,this.viewport=this.preserveViewport?this.viewport:null,VIEWERS[this.hash]=null,delete VIEWERS[this.hash],this.raiseEvent("close"),this):this},destroy:function(){if(this.close(),this.removeAllHandlers(),this.element)for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.keyboardCommandArea&&this.keyboardCommandArea.innerTracker.destroy(),this.innerTracker&&this.innerTracker.destroy(),this.outerTracker&&this.outerTracker.destroy(),THIS[this.hash]=null,delete THIS[this.hash],this.canvas=null,this.keyboardCommandArea=null,this.container=null,this.element=null},isMouseNavEnabled:function(){return this.innerTracker.isTracking()},setMouseNavEnabled:function(t){return this.innerTracker.setTracking(t),this.raiseEvent("mouse-enabled",{enabled:t}),this},areControlsEnabled:function(){var t,e=this.controls.length;for(t=0;this.controls.length>t;t++)e=e&&this.controls[t].isVisibile();return e},setControlsEnabled:function(t){return t?abortControlsAutoHide(this):beginControlsAutoHide(this),this.raiseEvent("controls-enabled",{enabled:t}),this},isFullPage:function(){return THIS[this.hash].fullPage},setFullPage:function(t){var e,n,i=document.body,r=i.style,o=document.documentElement.style,s=this;if(t==this.isFullPage())return this;var a={fullPage:t,preventDefaultAction:!1};if(this.raiseEvent("pre-full-page",a),a.preventDefaultAction)return this;if(t){for(this.elementSize=$.getElementSize(this.element),this.pageScroll=$.getPageScroll(),this.elementMargin=this.element.style.margin,this.element.style.margin="0",this.elementPadding=this.element.style.padding,this.element.style.padding="0",this.bodyMargin=r.margin,this.docMargin=o.margin,r.margin="0",o.margin="0",this.bodyPadding=r.padding,this.docPadding=o.padding,r.padding="0",o.padding="0",this.bodyWidth=r.width,this.bodyHeight=r.height,r.width="100%",r.height="100%",this.previousBody=[],THIS[this.hash].prevElementParent=this.element.parentNode,THIS[this.hash].prevNextSibling=this.element.nextSibling,THIS[this.hash].prevElementWidth=this.element.style.width,THIS[this.hash].prevElementHeight=this.element.style.height,e=i.childNodes.length,n=0;e>n;n++)this.previousBody.push(i.childNodes[0]),i.removeChild(i.childNodes[0]);this.toolbar&&this.toolbar.element&&(this.toolbar.parentNode=this.toolbar.element.parentNode,this.toolbar.nextSibling=this.toolbar.element.nextSibling,i.appendChild(this.toolbar.element),$.addClass(this.toolbar.element,"fullpage")),$.addClass(this.element,"fullpage"),i.appendChild(this.element),this.element.style.height=$.getWindowSize().y+"px",this.element.style.width=$.getWindowSize().x+"px",this.toolbar&&this.toolbar.element&&(this.element.style.height=$.getElementSize(this.element).y-$.getElementSize(this.toolbar.element).y+"px"),THIS[this.hash].fullPage=!0,$.delegate(this,onContainerEnter)({})}else{for(this.element.style.margin=this.elementMargin,this.element.style.padding=this.elementPadding,r.margin=this.bodyMargin,o.margin=this.docMargin,r.padding=this.bodyPadding,o.padding=this.docPadding,r.width=this.bodyWidth,r.height=this.bodyHeight,i.removeChild(this.element),e=this.previousBody.length,n=0;e>n;n++)i.appendChild(this.previousBody.shift());$.removeClass(this.element,"fullpage"),THIS[this.hash].prevElementParent.insertBefore(this.element,THIS[this.hash].prevNextSibling),this.toolbar&&this.toolbar.element&&(i.removeChild(this.toolbar.element),$.removeClass(this.toolbar.element,"fullpage"),this.toolbar.parentNode.insertBefore(this.toolbar.element,this.toolbar.nextSibling),delete this.toolbar.parentNode,delete this.toolbar.nextSibling),this.element.style.width=THIS[this.hash].prevElementWidth,this.element.style.height=THIS[this.hash].prevElementHeight;var l=0,u=function(){$.setPageScroll(s.pageScroll);var t=$.getPageScroll();l++,(10>l&&t.x!==s.pageScroll.x||t.y!==s.pageScroll.y)&&$.requestAnimationFrame(u)};$.requestAnimationFrame(u),THIS[this.hash].fullPage=!1,$.delegate(this,onContainerExit)({})}return this.navigator&&this.viewport&&this.navigator.update(this.viewport),this.raiseEvent("full-page",{fullPage:t}),this},setFullScreen:function(t){var e=this;if(!$.supportsFullScreen)return this.setFullPage(t);if($.isFullScreen()===t)return this;var n={fullScreen:t,preventDefaultAction:!1};if(this.raiseEvent("pre-full-screen",n),n.preventDefaultAction)return this;if(t){if(this.setFullPage(!0),!this.isFullPage())return this;this.fullPageStyleWidth=this.element.style.width,this.fullPageStyleHeight=this.element.style.height,this.element.style.width="100%",this.element.style.height="100%";var i=function(){var t=$.isFullScreen();t||($.removeEvent(document,$.fullScreenEventName,i),$.removeEvent(document,$.fullScreenErrorEventName,i),e.setFullPage(!1),e.isFullPage()&&(e.element.style.width=e.fullPageStyleWidth,e.element.style.height=e.fullPageStyleHeight)),e.navigator&&e.viewport&&e.navigator.update(e.viewport),e.raiseEvent("full-screen",{fullScreen:t})};$.addEvent(document,$.fullScreenEventName,i),$.addEvent(document,$.fullScreenErrorEventName,i),$.requestFullScreen(document.body)}else $.exitFullScreen();return this},isVisible:function(){return"hidden"!=this.container.style.visibility},setVisible:function(t){return this.container.style.visibility=t?"":"hidden",this.raiseEvent("visible",{visible:t}),this},addTiledImage:function(t){function e(t){n.raiseEvent("add-item-failed",t)}$.console.assert(t,"[Viewer.addTiledImage] options is required"),$.console.assert(t.tileSource,"[Viewer.addTiledImage] options.tileSource is required");var n=this,i=t.tileSource;if(!this.isOpen())throw Error("An image must be loaded before adding additional images.");getTileSourceImplementation(this,i,function(i){if(i instanceof Array)return void e({message:"[Viewer.addTiledImage] Sequences can not be added.",source:i,options:t});var r=new $.TiledImage({viewer:n,source:i,viewport:n.viewport,drawer:n.drawer,tileCache:n.tileCache,imageLoader:n.imageLoader,x:t.x,y:t.y,width:t.width,height:t.height,imageLoaderLimit:n.imageLoaderLimit,minZoomImageRatio:n.minZoomImageRatio,wrapHorizontal:n.wrapHorizontal,wrapVertical:n.wrapVertical,immediateRender:n.immediateRender,blendTime:n.blendTime,alwaysBlend:n.alwaysBlend,minPixelRatio:n.minPixelRatio,debugMode:n.debugMode,debugGridColor:n.debugGridColor});n.world.addItem(r,{index:t.index})},function(n){n.options=t,e(n)})},addLayer:function(t){var e=this;$.console.error("[Viewer.addLayer] this function is deprecated; use Viewer.addTiledImage() instead.");var n=function(i){e.world.removeHandler("add-item",n),e.raiseEvent("add-layer",{options:t,drawer:i.item})},i=function(t){e.removeHandler("add-item-failed",i),e.raiseEvent("add-layer-failed",t)};return this.world.addHandler("add-item",n),this.addHandler("add-item-failed",i),this.addTiledImage(t),this},getLayerAtLevel:function(t){return $.console.error("[Viewer.getLayerAtLevel] this function is deprecated; use World.getItemAt() instead."),this.world.getItemAt(t)},getLevelOfLayer:function(t){return $.console.error("[Viewer.getLevelOfLayer] this function is deprecated; use World.getIndexOfItem() instead."),this.world.getIndexOfItem(t)},getLayersCount:function(){return $.console.error("[Viewer.getLayersCount] this function is deprecated; use World.getItemCount() instead."),this.world.getItemCount()},setLayerLevel:function(t,e){return $.console.error("[Viewer.setLayerLevel] this function is deprecated; use World.setItemIndex() instead."),this.world.setItemIndex(t,e)},removeLayer:function(t){return $.console.error("[Viewer.removeLayer] this function is deprecated; use World.removeItem() instead."),this.world.removeItem(t)},forceRedraw:function(){return THIS[this.hash].forceRedraw=!0,this},bindSequenceControls:function(){var t=$.delegate(this,onFocus),e=$.delegate(this,onBlur),n=$.delegate(this,onNext),i=$.delegate(this,onPrevious),r=this.navImages,o=!0;return this.showSequenceControl&&THIS[this.hash].sequenced&&((this.previousButton||this.nextButton)&&(o=!1),this.previousButton=new $.Button({element:this.previousButton?$.getElement(this.previousButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:$.getString("Tooltips.PreviousPage"),srcRest:resolveUrl(this.prefixUrl,r.previous.REST),srcGroup:resolveUrl(this.prefixUrl,r.previous.GROUP),srcHover:resolveUrl(this.prefixUrl,r.previous.HOVER),srcDown:resolveUrl(this.prefixUrl,r.previous.DOWN),onRelease:i,onFocus:t,onBlur:e}),this.nextButton=new $.Button({element:this.nextButton?$.getElement(this.nextButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:$.getString("Tooltips.NextPage"),srcRest:resolveUrl(this.prefixUrl,r.next.REST),srcGroup:resolveUrl(this.prefixUrl,r.next.GROUP),srcHover:resolveUrl(this.prefixUrl,r.next.HOVER),srcDown:resolveUrl(this.prefixUrl,r.next.DOWN),onRelease:n,onFocus:t,onBlur:e}),this.navPrevNextWrap||this.previousButton.disable(),o&&(this.paging=new $.ButtonGroup({buttons:[this.previousButton,this.nextButton],clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.pagingControl=this.paging.element,this.toolbar?this.toolbar.addControl(this.pagingControl,{anchor:$.ControlAnchor.BOTTOM_RIGHT}):this.addControl(this.pagingControl,{anchor:this.sequenceControlAnchor||$.ControlAnchor.TOP_LEFT}))),this},bindStandardControls:function(){var t=$.delegate(this,beginZoomingIn),e=$.delegate(this,endZooming),n=$.delegate(this,doSingleZoomIn),i=$.delegate(this,beginZoomingOut),r=$.delegate(this,doSingleZoomOut),o=$.delegate(this,onHome),s=$.delegate(this,onFullScreen),a=$.delegate(this,onRotateLeft),l=$.delegate(this,onRotateRight),u=$.delegate(this,onFocus),c=$.delegate(this,onBlur),h=this.navImages,d=[],p=!0;return this.showNavigationControl&&((this.zoomInButton||this.zoomOutButton||this.homeButton||this.fullPageButton||this.rotateLeftButton||this.rotateRightButton)&&(p=!1),this.showZoomControl&&(d.push(this.zoomInButton=new $.Button({element:this.zoomInButton?$.getElement(this.zoomInButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:$.getString("Tooltips.ZoomIn"),srcRest:resolveUrl(this.prefixUrl,h.zoomIn.REST),srcGroup:resolveUrl(this.prefixUrl,h.zoomIn.GROUP),srcHover:resolveUrl(this.prefixUrl,h.zoomIn.HOVER),srcDown:resolveUrl(this.prefixUrl,h.zoomIn.DOWN),onPress:t,onRelease:e,onClick:n,onEnter:t,onExit:e,onFocus:u,onBlur:c})),d.push(this.zoomOutButton=new $.Button({element:this.zoomOutButton?$.getElement(this.zoomOutButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:$.getString("Tooltips.ZoomOut"),srcRest:resolveUrl(this.prefixUrl,h.zoomOut.REST),srcGroup:resolveUrl(this.prefixUrl,h.zoomOut.GROUP),srcHover:resolveUrl(this.prefixUrl,h.zoomOut.HOVER),srcDown:resolveUrl(this.prefixUrl,h.zoomOut.DOWN),onPress:i,onRelease:e,onClick:r,onEnter:i,onExit:e,onFocus:u,onBlur:c}))),this.showHomeControl&&d.push(this.homeButton=new $.Button({element:this.homeButton?$.getElement(this.homeButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:$.getString("Tooltips.Home"),srcRest:resolveUrl(this.prefixUrl,h.home.REST),srcGroup:resolveUrl(this.prefixUrl,h.home.GROUP),srcHover:resolveUrl(this.prefixUrl,h.home.HOVER),srcDown:resolveUrl(this.prefixUrl,h.home.DOWN),onRelease:o,onFocus:u,onBlur:c})),this.showFullPageControl&&d.push(this.fullPageButton=new $.Button({element:this.fullPageButton?$.getElement(this.fullPageButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:$.getString("Tooltips.FullPage"),srcRest:resolveUrl(this.prefixUrl,h.fullpage.REST),srcGroup:resolveUrl(this.prefixUrl,h.fullpage.GROUP),srcHover:resolveUrl(this.prefixUrl,h.fullpage.HOVER),srcDown:resolveUrl(this.prefixUrl,h.fullpage.DOWN),onRelease:s,onFocus:u,onBlur:c})),this.showRotationControl&&(d.push(this.rotateLeftButton=new $.Button({element:this.rotateLeftButton?$.getElement(this.rotateLeftButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:$.getString("Tooltips.RotateLeft"),srcRest:resolveUrl(this.prefixUrl,h.rotateleft.REST),srcGroup:resolveUrl(this.prefixUrl,h.rotateleft.GROUP),srcHover:resolveUrl(this.prefixUrl,h.rotateleft.HOVER),srcDown:resolveUrl(this.prefixUrl,h.rotateleft.DOWN),onRelease:a,onFocus:u,onBlur:c})),d.push(this.rotateRightButton=new $.Button({element:this.rotateRightButton?$.getElement(this.rotateRightButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:$.getString("Tooltips.RotateRight"),srcRest:resolveUrl(this.prefixUrl,h.rotateright.REST),srcGroup:resolveUrl(this.prefixUrl,h.rotateright.GROUP),srcHover:resolveUrl(this.prefixUrl,h.rotateright.HOVER),srcDown:resolveUrl(this.prefixUrl,h.rotateright.DOWN),onRelease:l,onFocus:u,onBlur:c}))),p&&(this.buttons=new $.ButtonGroup({buttons:d,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.navControl=this.buttons.element,this.addHandler("open",$.delegate(this,lightUp)),this.toolbar?this.toolbar.addControl(this.navControl,{anchor:$.ControlAnchor.TOP_LEFT}):this.addControl(this.navControl,{anchor:this.navigationControlAnchor||$.ControlAnchor.TOP_LEFT}))),this},currentPage:function(){return THIS[this.hash].sequence},goToPage:function(t){return t>=0&&this.tileSources.length>t&&(this.raiseEvent("page",{page:t}),THIS[this.hash].sequence=t,this._updateSequenceButtons(t),this.open(this.tileSources[t]),this.referenceStrip&&this.referenceStrip.setFocus(t)),this},addOverlay:function(t,e,n,i){var r;return r=$.isPlainObject(t)?t:{element:t,location:e,placement:n,onDraw:i},t=$.getElement(r.element),getOverlayIndex(this.currentOverlays,t)>=0?this:(this.currentOverlays.push(getOverlayObject(this,r)),THIS[this.hash].forceRedraw=!0,this.raiseEvent("add-overlay",{element:t,location:r.location,placement:r.placement}),this)},updateOverlay:function(t,e,n){var i;return t=$.getElement(t),i=getOverlayIndex(this.currentOverlays,t),i>=0&&(this.currentOverlays[i].update(e,n),THIS[this.hash].forceRedraw=!0,this.raiseEvent("update-overlay",{element:t,location:e,placement:n})),this},removeOverlay:function(t){var e;return t=$.getElement(t),e=getOverlayIndex(this.currentOverlays,t),e>=0&&(this.currentOverlays[e].destroy(),this.currentOverlays.splice(e,1),THIS[this.hash].forceRedraw=!0,this.raiseEvent("remove-overlay",{element:t})),this},clearOverlays:function(){for(;this.currentOverlays.length>0;)this.currentOverlays.pop().destroy();return THIS[this.hash].forceRedraw=!0,this.raiseEvent("clear-overlay",{}),this},_updateSequenceButtons:function(t){this.nextButton&&(this.tileSources.length-1===t?this.navPrevNextWrap||this.nextButton.disable():this.nextButton.enable()),this.previousButton&&(t>0?this.previousButton.enable():this.navPrevNextWrap||this.previousButton.disable())},_showMessage:function(t){this._hideMessage();var e=$.makeNeutralElement("div");e.appendChild(document.createTextNode(t)),this.messageDiv=$.makeCenteredNode(e),$.addClass(this.messageDiv,"openseadragon-message"),this.container.appendChild(this.messageDiv)},_hideMessage:function(){var t=this.messageDiv;t&&(t.parentNode.removeChild(t),delete this.messageDiv)},gestureSettingsByDeviceType:function(t){switch(t){case"mouse":return this.gestureSettingsMouse;case"touch":return this.gestureSettingsTouch;case"pen":return this.gestureSettingsPen;default:return this.gestureSettingsUnknown}}})}(OpenSeadragon),function(t){function e(t){t.quick&&this.viewer.viewport&&(this.viewer.viewport.panTo(this.viewport.pointFromPixel(t.position).rotate(-this.viewer.viewport.degrees,this.viewer.viewport.getHomeBounds().getCenter())),this.viewer.viewport.applyConstraints())}function n(t){this.viewer.viewport&&(this.panHorizontal||(t.delta.x=0),this.panVertical||(t.delta.y=0),this.viewer.viewport.panBy(this.viewport.deltaPointsFromPixels(t.delta)))}function i(t){t.insideElementPressed&&this.viewer.viewport&&this.viewer.viewport.applyConstraints()}function r(t){return this.viewer.raiseEvent("navigator-scroll",{tracker:t.eventSource,position:t.position,scroll:t.scroll,shift:t.shift,originalEvent:t.originalEvent}),!1}function o(t,e){t.style.webkitTransform="rotate("+e+"deg)",t.style.mozTransform="rotate("+e+"deg)",t.style.msTransform="rotate("+e+"deg)",t.style.oTransform="rotate("+e+"deg)",t.style.transform="rotate("+e+"deg)"}t.Navigator=function(s){var a,l,u,c=s.viewer,h=this;s.id?(this.element=document.getElementById(s.id),s.controlOptions={anchor:t.ControlAnchor.NONE,attachToViewer:!1,autoFade:!1}):(s.id="navigator-"+t.now(),this.element=t.makeNeutralElement("div"),s.controlOptions={anchor:t.ControlAnchor.TOP_RIGHT,attachToViewer:!0,autoFade:!0},s.position&&("BOTTOM_RIGHT"==s.position?s.controlOptions.anchor=t.ControlAnchor.BOTTOM_RIGHT:"BOTTOM_LEFT"==s.position?s.controlOptions.anchor=t.ControlAnchor.BOTTOM_LEFT:"TOP_RIGHT"==s.position?s.controlOptions.anchor=t.ControlAnchor.TOP_RIGHT:"TOP_LEFT"==s.position?s.controlOptions.anchor=t.ControlAnchor.TOP_LEFT:"ABSOLUTE"==s.position&&(s.controlOptions.anchor=t.ControlAnchor.ABSOLUTE,s.controlOptions.top=s.top,s.controlOptions.left=s.left,s.controlOptions.height=s.height,s.controlOptions.width=s.width))),this.element.id=s.id,this.element.className+=" navigator",s=t.extend(!0,{sizeRatio:t.DEFAULT_SETTINGS.navigatorSizeRatio},s,{element:this.element,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,autoResize:s.autoResize}),s.minPixelRatio=this.minPixelRatio=c.minPixelRatio,t.setElementTouchActionNone(this.element),this.borderWidth=2,this.fudge=new t.Point(1,1),this.totalBorderWidths=new t.Point(2*this.borderWidth,2*this.borderWidth).minus(this.fudge),s.controlOptions.anchor!=t.ControlAnchor.NONE&&!function(t,e){t.margin="0px",t.border=e+"px solid #555",t.padding="0px",t.background="#000",t.opacity=.8,t.overflow="hidden"}(this.element.style,this.borderWidth),this.displayRegion=t.makeNeutralElement("div"),this.displayRegion.id=this.element.id+"-displayregion",this.displayRegion.className="displayregion",function(t,e){t.position="relative",t.top="0px",t.left="0px",t.fontSize="0px",t.overflow="hidden",t.border=e+"px solid #900",t.margin="0px",t.padding="0px",t.background="transparent",t["float"]="left",t.cssFloat="left",t.styleFloat="left",t.zIndex=999999999,t.cursor="default"}(this.displayRegion.style,this.borderWidth),this.displayRegionContainer=t.makeNeutralElement("div"),this.displayRegionContainer.id=this.element.id+"-displayregioncontainer",this.displayRegionContainer.className="displayregioncontainer",this.displayRegionContainer.style.width="100%",this.displayRegionContainer.style.height="100%",this.element.innerTracker=new t.MouseTracker({element:this.element,dragHandler:t.delegate(this,n),clickHandler:t.delegate(this,e),releaseHandler:t.delegate(this,i),scrollHandler:t.delegate(this,r)}).setTracking(!0),c.addControl(this.element,s.controlOptions),s.controlOptions.anchor!=t.ControlAnchor.ABSOLUTE&&s.controlOptions.anchor!=t.ControlAnchor.NONE&&(s.width&&s.height?(this.element.style.height="number"==typeof s.height?s.height+"px":s.height,this.element.style.width="number"==typeof s.width?s.width+"px":s.width):(a=t.getElementSize(c.element),this.element.style.height=Math.round(a.y*s.sizeRatio)+"px",this.element.style.width=Math.round(a.x*s.sizeRatio)+"px",this.oldViewerSize=a),l=t.getElementSize(this.element),this.elementArea=l.x*l.y),this.oldContainerSize=new t.Point(0,0),t.Viewer.apply(this,[s]),this.displayRegionContainer.appendChild(this.displayRegion),this.element.getElementsByTagName("div")[0].appendChild(this.displayRegionContainer),u=this.element.getElementsByTagName("textarea")[0],u&&u.parentNode.removeChild(u),s.navigatorRotate&&s.viewer.addHandler("rotate",function(t){o(h.displayRegionContainer,t.degrees),o(h.displayRegion,-t.degrees),h.viewport.setRotation(t.degrees)})},t.extend(t.Navigator.prototype,t.EventSource.prototype,t.Viewer.prototype,{updateSize:function(){if(this.viewport){var e=new t.Point(0===this.container.clientWidth?1:this.container.clientWidth,0===this.container.clientHeight?1:this.container.clientHeight);if(!e.equals(this.oldContainerSize)){var n=this.viewport.getBounds(),i=this.viewport.getCenter();this.viewport.resize(e,!0);var r=1/this.source.aspectRatio,o=1>=n.width?n.width:1,s=r>=n.height?n.height:r,a=new t.Rect(i.x-o/2,i.y-s/2,o,s);this.viewport.fitBounds(a,!0),this.oldContainerSize=e,this.drawer.update()}}},update:function(e){var n,i,r,o,s,a;n=t.getElementSize(this.viewer.element),n.equals(this.oldViewerSize)||(this.oldViewerSize=n,this.maintainSizeRatio?(i=n.x*this.sizeRatio,r=n.y*this.sizeRatio):(i=Math.sqrt(this.elementArea*(n.x/n.y)),r=this.elementArea/i),this.element.style.width=Math.round(i)+"px",this.element.style.height=Math.round(r)+"px",this.updateSize()),e&&this.viewport&&(o=e.getBounds(!0),s=this.viewport.pixelFromPoint(o.getTopLeft(),!1),a=this.viewport.pixelFromPoint(o.getBottomRight(),!1).minus(this.totalBorderWidths),function(t){t.top=Math.round(s.y)+"px",t.left=Math.round(s.x)+"px";var e=Math.abs(s.x-a.x),n=Math.abs(s.y-a.y);t.width=Math.round(Math.max(e,0))+"px",t.height=Math.round(Math.max(n,0))+"px"}(this.displayRegion.style))},open:function(e){this.updateSize();var n=this.viewer.viewport.containerSize.times(this.sizeRatio),i=e.getTileSize(e.maxLevel);return this.minPixelRatio=i>n.x||i>n.y?Math.min(n.x,n.y)/i:this.viewer.minPixelRatio,t.Viewer.prototype.open.apply(this,[e])}})}(OpenSeadragon),function(t){var e={Errors:{Dzc:"Sorry, we don't support Deep Zoom Collections!",Dzi:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",Xml:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",ImageFormat:"Sorry, we don't support {0}-based Deep Zoom Images.",Security:"It looks like a security restriction stopped us from loading this Deep Zoom Image.",Status:"This space unintentionally left blank ({0} {1}).",OpenFailed:"Unable to open {0}: {1}"},Tooltips:{FullPage:"Toggle full page",Home:"Go home",ZoomIn:"Zoom in",ZoomOut:"Zoom out",NextPage:"Next page",PreviousPage:"Previous page",RotateLeft:"Rotate left",RotateRight:"Rotate right"}};t.extend(t,{getString:function(n){var i,r=n.split("."),o=null,s=arguments,a=e;for(i=0;r.length-1>i;i++)a=a[r[i]]||{};return o=a[r[i]],"string"!=typeof o&&(t.console.debug("Untranslated source string:",n),o=""),o.replace(/\{\d+\}/g,function(t){var e=parseInt(t.match(/\d+/),10)+1;return s.length>e?s[e]:""})},setString:function(t,n){var i,r=t.split("."),o=e;for(i=0;r.length-1>i;i++)o[r[i]]||(o[r[i]]={}),o=o[r[i]];o[r[i]]=n}})}(OpenSeadragon),function(t){t.Point=function(t,e){this.x="number"==typeof t?t:0,this.y="number"==typeof e?e:0},t.Point.prototype={clone:function(){return new t.Point(this.x,this.y)},plus:function(e){return new t.Point(this.x+e.x,this.y+e.y)},minus:function(e){return new t.Point(this.x-e.x,this.y-e.y)},times:function(e){return new t.Point(this.x*e,this.y*e)},divide:function(e){return new t.Point(this.x/e,this.y/e)},negate:function(){return new t.Point(-this.x,-this.y)},distanceTo:function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))},apply:function(e){return new t.Point(e(this.x),e(this.y))},equals:function(e){return e instanceof t.Point&&this.x===e.x&&this.y===e.y},rotate:function(e,n){var i=e*Math.PI/180,r=Math.cos(i)*(this.x-n.x)-Math.sin(i)*(this.y-n.y)+n.x,o=Math.sin(i)*(this.x-n.x)+Math.cos(i)*(this.y-n.y)+n.y;return new t.Point(r,o)},toString:function(){return"("+Math.round(this.x)+","+Math.round(this.y)+")"}}}(OpenSeadragon),function($){function processResponse(xhr){var responseText=xhr.responseText,status=xhr.status,statusText,data;if(!xhr)throw Error($.getString("Errors.Security"));if(200!==xhr.status&&0!==xhr.status)throw status=xhr.status,statusText=404==status?"Not Found":xhr.statusText,Error($.getString("Errors.Status",status,statusText));if(responseText.match(/\s*<.*/))try{data=xhr.responseXML&&xhr.responseXML.documentElement?xhr.responseXML:$.parseXml(responseText)}catch(e){data=xhr.responseText}else data=responseText.match(/\s*[\{\[].*/)?eval("("+responseText+")"):responseText;return data}$.TileSource=function(t){var e,n,i=null,r=arguments;for(e=$.isPlainObject(t)?t:{width:r[0],height:r[1],tileSize:r[2],tileOverlap:r[3],minLevel:r[4],maxLevel:r[5]},$.EventSource.call(this),$.extend(!0,this,e),n=0;arguments.length>n;n++)if($.isFunction(arguments[n])){i=arguments[n],this.addHandler("ready",function(t){i(t)});break}"string"==$.type(arguments[0])?(this.aspectRatio=1,this.dimensions=new $.Point(10,10),this.tileSize=0,this.tileOverlap=0,this.minLevel=0,this.maxLevel=0,this.ready=!1,this.getImageInfo(arguments[0])):(this.ready=!0,this.aspectRatio=e.width&&e.height?e.width/e.height:1,this.dimensions=new $.Point(e.width,e.height),this.tileSize=e.tileSize?e.tileSize:0,this.tileOverlap=e.tileOverlap?e.tileOverlap:0,this.minLevel=e.minLevel?e.minLevel:0,this.maxLevel=void 0!==e.maxLevel&&null!==e.maxLevel?e.maxLevel:e.width&&e.height?Math.ceil(Math.log(Math.max(e.width,e.height))/Math.log(2)):0,i&&$.isFunction(i)&&i(this))},$.TileSource.prototype={getTileSize:function(){return this.tileSize},getLevelScale:function(t){var e,n={};for(e=0;this.maxLevel>=e;e++)n[e]=1/Math.pow(2,this.maxLevel-e);return this.getLevelScale=function(t){return n[t]},this.getLevelScale(t)},getNumTiles:function(t){var e=this.getLevelScale(t),n=Math.ceil(e*this.dimensions.x/this.getTileSize(t)),i=Math.ceil(e*this.dimensions.y/this.getTileSize(t));return new $.Point(n,i)},getPixelRatio:function(t){var e=this.dimensions.times(this.getLevelScale(t)),n=1/e.x,i=1/e.y;return new $.Point(n,i)},getClosestLevel:function(t){var e,n,i;for(e=this.minLevel;this.maxLevel>e&&(i=this.getNumTiles(e),n=Math.floor(Math.max(t.x,t.y)/this.getTileSize(e)),!(Math.max(i.x,i.y)+1>=n));e++);return Math.max(0,e-1)},getTileAtPoint:function(t,e){var n=e.times(this.dimensions.x).times(this.getLevelScale(t)),i=Math.floor(n.x/this.getTileSize(t)),r=Math.floor(n.y/this.getTileSize(t));return new $.Point(i,r)},getTileBounds:function(t,e,n){var i=this.dimensions.times(this.getLevelScale(t)),r=this.getTileSize(t),o=0===e?0:r*e-this.tileOverlap,s=0===n?0:r*n-this.tileOverlap,a=r+(0===e?1:2)*this.tileOverlap,l=r+(0===n?1:2)*this.tileOverlap,u=1/i.x;return a=Math.min(a,i.x-o),l=Math.min(l,i.y-s),new $.Rect(o*u,s*u,a*u,l*u)},getImageInfo:function(t){var e,n,i,r,o,s,a,l=this;t&&(o=t.split("/"),s=o[o.length-1],a=s.lastIndexOf("."),a>-1&&(o[o.length-1]=s.slice(0,a))),n=function(e){"string"==typeof e&&(e=$.parseXml(e));var n=$.TileSource.determineType(l,e,t);return n?(r=n.prototype.configure.apply(l,[e,t]),i=new n(r),l.ready=!0,void l.raiseEvent("ready",{tileSource:i})):void l.raiseEvent("open-failed",{message:"Unable to load TileSource",source:t})},t.match(/\.js$/)?(e=t.split("/").pop().replace(".js",""),$.jsonp({url:t,async:!1,callbackName:e,callback:n})):$.makeAjaxRequest(t,function(t){var e=processResponse(t);n(e)},function(e,n){var i;try{i="HTTP "+e.status+" attempting to load TileSource"}catch(r){var o;o=n!==void 0&&n.toString?""+n:"Unknown error",i=o+" attempting to load TileSource"}l.raiseEvent("open-failed",{message:i,source:t})})},supports:function(){return!1},configure:function(){throw Error("Method not implemented.")},getTileUrl:function(){throw Error("Method not implemented.")},tileExists:function(t,e,n){var i=this.getNumTiles(t);return t>=this.minLevel&&this.maxLevel>=t&&e>=0&&n>=0&&i.x>e&&i.y>n}},$.extend(!0,$.TileSource.prototype,$.EventSource.prototype),$.TileSource.determineType=function(t,e,n){var i;for(i in OpenSeadragon)if(i.match(/.+TileSource$/)&&$.isFunction(OpenSeadragon[i])&&$.isFunction(OpenSeadragon[i].prototype.supports)&&OpenSeadragon[i].prototype.supports.call(t,e,n))return OpenSeadragon[i];$.console.error("No TileSource was able to open %s %s",n,e)}}(OpenSeadragon),function(t){function e(e,i){if(!i||!i.documentElement)throw Error(t.getString("Errors.Xml"));var r,o,s,a,l,u=i.documentElement,c=u.localName,h=i.documentElement.namespaceURI,d=null,p=[];if("Image"==c)try{if(a=u.getElementsByTagNameNS(h,"Size")[0],d={Image:{xmlns:"http://schemas.microsoft.com/deepzoom/2008",Url:u.getAttribute("Url"),Format:u.getAttribute("Format"),DisplayRect:null,Overlap:parseInt(u.getAttribute("Overlap"),10),TileSize:parseInt(u.getAttribute("TileSize"),10),Size:{Height:parseInt(a.getAttribute("Height"),10),Width:parseInt(a.getAttribute("Width"),10)}}},!t.imageFormatSupported(d.Image.Format))throw Error(t.getString("Errors.ImageFormat",d.Image.Format.toUpperCase()));for(r=u.getElementsByTagNameNS(h,"DisplayRect"),l=0;r.length>l;l++)o=r[l],s=o.getElementsByTagNameNS(h,"Rect")[0],p.push({Rect:{X:parseInt(s.getAttribute("X"),10),Y:parseInt(s.getAttribute("Y"),10),Width:parseInt(s.getAttribute("Width"),10),Height:parseInt(s.getAttribute("Height"),10),MinLevel:parseInt(o.getAttribute("MinLevel"),10),MaxLevel:parseInt(o.getAttribute("MaxLevel"),10)}});return p.length&&(d.Image.DisplayRect=p),n(e,d)
}catch(f){throw f instanceof Error?f:Error(t.getString("Errors.Dzi"))}else{if("Collection"==c)throw Error(t.getString("Errors.Dzc"));if("Error"==c)return t._processDZIError(u)}throw Error(t.getString("Errors.Dzi"))}function n(e,n){var i,r,o=n.Image,s=o.Url,a=o.Format,l=o.Size,u=o.DisplayRect||[],c=parseInt(l.Width,10),h=parseInt(l.Height,10),d=parseInt(o.TileSize,10),p=parseInt(o.Overlap,10),f=[];for(r=0;u.length>r;r++)i=u[r].Rect,f.push(new t.DisplayRect(parseInt(i.X,10),parseInt(i.Y,10),parseInt(i.Width,10),parseInt(i.Height,10),parseInt(i.MinLevel,10),parseInt(i.MaxLevel,10)));return t.extend(!0,{width:c,height:h,tileSize:d,tileOverlap:p,minLevel:null,maxLevel:null,tilesUrl:s,fileFormat:a,displayRects:f},n)}t.DziTileSource=function(e){var n,i,r,o;if(o=t.isPlainObject(e)?e:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4],fileFormat:arguments[5],displayRects:arguments[6],minLevel:arguments[7],maxLevel:arguments[8]},this._levelRects={},this.tilesUrl=o.tilesUrl,this.fileFormat=o.fileFormat,this.displayRects=o.displayRects,this.displayRects)for(n=this.displayRects.length-1;n>=0;n--)for(i=this.displayRects[n],r=i.minLevel;i.maxLevel>=r;r++)this._levelRects[r]||(this._levelRects[r]=[]),this._levelRects[r].push(i);t.TileSource.apply(this,[o])},t.extend(t.DziTileSource.prototype,t.TileSource.prototype,{supports:function(t){var e;return t.Image?e=t.Image.xmlns:t.documentElement&&"Image"==t.documentElement.localName&&(e=t.documentElement.namespaceURI),"http://schemas.microsoft.com/deepzoom/2008"==e||"http://schemas.microsoft.com/deepzoom/2009"==e},configure:function(i,r){var o;return o=t.isPlainObject(i)?n(this,i):e(this,i),r&&!o.tilesUrl&&(o.tilesUrl=r.replace(/([^\/]+)\.(dzi|xml|js)(\?.*|$)/,"$1_files/"),o.queryParams=-1!=r.search(/\.(dzi|xml|js)\?/)?r.match(/\?.*/):""),o},getTileUrl:function(t,e,n){return[this.tilesUrl,t,"/",e,"_",n,".",this.fileFormat,this.queryParams].join("")},tileExists:function(t,e,n){var i,r,o,s,a,l,u,c=this._levelRects[t];if(!c||!c.length)return!0;for(u=c.length-1;u>=0;u--)if(i=c[u],!(i.minLevel>t||t>i.maxLevel)&&(r=this.getLevelScale(t),o=i.x*r,s=i.y*r,a=o+i.width*r,l=s+i.height*r,o=Math.floor(o/this.tileSize),s=Math.floor(s/this.tileSize),a=Math.ceil(a/this.tileSize),l=Math.ceil(l/this.tileSize),e>=o&&a>e&&n>=s&&l>n))return!0;return!1}})}(OpenSeadragon),function(t){function e(e){if(!e||!e.documentElement)throw Error(t.getString("Errors.Xml"));var i=e.documentElement,r=i.tagName,o=null;if("info"==r)try{return o={},n(i,o),o}catch(s){throw s instanceof Error?s:Error(t.getString("Errors.IIIF"))}throw Error(t.getString("Errors.IIIF"))}function n(e,i,r){var o,s;if(3==e.nodeType&&r)s=e.nodeValue.trim(),s.match(/^\d*$/)&&(s=Number(s)),i[r]?(t.isArray(i[r])||(i[r]=[i[r]]),i[r].push(s)):i[r]=s;else if(1==e.nodeType)for(o=0;e.childNodes.length>o;o++)n(e.childNodes[o],i,e.nodeName)}t.IIIFTileSource=function(e){if(t.extend(!0,this,e),!(this.height&&this.width&&this["@id"]))throw Error("IIIF required parameters not provided.");if(e.tileSizePerScaleFactor={},this.tile_width)e.tileSize=this.tile_width;else if(this.tile_height)e.tileSize=this.tile_height;else if(this.tiles)if(1==this.tiles.length)e.tileSize=this.tiles[0].width,this.scale_factors=this.tiles[0].scaleFactors;else{this.scale_factors=[];for(var n=0;this.tiles.length>n;n++)for(var i=0;this.tiles[n].scaleFactors.length>i;i++){var r=this.tiles[n].scaleFactors[i];this.scale_factors.push(r),e.tileSizePerScaleFactor[r]=this.tiles[n].width}}else{for(var o=Math.min(this.height,this.width),s=[256,512,1024],a=[],l=0;s.length>l;l++)o>=s[l]&&a.push(s[l]);e.tileSize=a.length>0?Math.max.apply(null,a):o,this.tile_width=e.tileSize,this.tile_height=e.tileSize}e.maxLevel||(e.maxLevel=this.scale_factors?Math.floor(Math.pow(Math.max.apply(null,this.scale_factors),.5)):Number(Math.ceil(Math.log(Math.max(this.width,this.height),2)))),t.TileSource.apply(this,[e])},t.extend(t.IIIFTileSource.prototype,t.TileSource.prototype,{supports:function(t){return t.protocol&&"http://iiif.io/api/image"==t.protocol?!0:!t["@context"]||"http://library.stanford.edu/iiif/image-api/1.1/context.json"!=t["@context"]&&"http://iiif.io/api/image/1/context.json"!=t["@context"]?t.profile&&0===t.profile.indexOf("http://library.stanford.edu/iiif/image-api/compliance.html")?!0:t.identifier&&t.width&&t.height?!0:t.documentElement&&"info"==t.documentElement.tagName&&"http://library.stanford.edu/iiif/image-api/ns/"==t.documentElement.namespaceURI?!0:!1:!0},configure:function(n,i){if(t.isPlainObject(n))return n["@context"]?n:(n["@context"]="http://iiif.io/api/image/1.0/context.json",n["@id"]=i.replace("/info.json",""),n);var r=e(n);return r["@context"]="http://iiif.io/api/image/1.0/context.json",r["@id"]=i.replace("/info.xml",""),r},getTileSize:function(t){var e=Math.pow(2,this.maxLevel-t);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[e]&&(this.tileSize=this.tileSizePerScaleFactor[e]),this.tileSize},getTileUrl:function(t,e,n){var i,r,o,s,a,l,u,c,h,d,p="0",f=Math.pow(.5,this.maxLevel-t),g=Math.ceil(this.width*f),m=Math.ceil(this.height*f);return i=Math.ceil(this.getTileSize(t)/f),r=i,h=this["@context"].indexOf("/1.0/context.json")>-1||this["@context"].indexOf("/1.1/context.json")>-1||this["@context"].indexOf("/1/context.json")>-1?"native.jpg":"default.jpg",this.tile_width>g&&this.tile_height>m?(c=g+",",o="full"):(s=e*i,a=n*r,l=Math.min(i,this.width-s),u=Math.min(r,this.height-a),c=Math.ceil(l*f)+",",o=[s,a,l,u].join(",")),d=[this["@id"],o,c,p,h].join("/")}})}(OpenSeadragon),function(t){t.OsmTileSource=function(e){var n;n=t.isPlainObject(e)?e:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]},n.width&&n.height||(n.width=65572864,n.height=65572864),n.tileSize||(n.tileSize=256,n.tileOverlap=0),n.tilesUrl||(n.tilesUrl="http://tile.openstreetmap.org/"),n.minLevel=8,t.TileSource.apply(this,[n])},t.extend(t.OsmTileSource.prototype,t.TileSource.prototype,{supports:function(t){return t.type&&"openstreetmaps"==t.type},configure:function(t){return t},getTileUrl:function(t,e,n){return this.tilesUrl+(t-8)+"/"+e+"/"+n+".png"}})}(OpenSeadragon),function(t){t.TmsTileSource=function(e){var n;n=t.isPlainObject(e)?e:{width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]};var i,r=256*Math.ceil(n.width/256),o=256*Math.ceil(n.height/256);i=r>o?r/256:o/256,n.maxLevel=Math.ceil(Math.log(i)/Math.log(2))-1,n.tileSize=256,n.width=r,n.height=o,t.TileSource.apply(this,[n])},t.extend(t.TmsTileSource.prototype,t.TileSource.prototype,{supports:function(t){return t.type&&"tiledmapservice"==t.type},configure:function(t){return t},getTileUrl:function(t,e,n){var i=this.getNumTiles(t).y-1;return this.tilesUrl+t+"/"+e+"/"+(i-n)+".png"}})}(OpenSeadragon),function(t){function e(e){var n,i,r=[];for(i=0;e.length>i;i++)n=e[i],n.height&&n.width&&n.url&&(n.url.toLowerCase().match(/^.*\.(png|jpg|jpeg|gif)$/)||n.mimetype&&n.mimetype.toLowerCase().match(/^.*\/(png|jpg|jpeg|gif)$/))?r.push({url:n.url,width:Number(n.width),height:Number(n.height)}):t.console.error("Unsupported image format: %s",n.url?n.url:"<no URL>");return r.sort(function(t,e){return t.height-e.height})}function n(e,n){if(!n||!n.documentElement)throw Error(t.getString("Errors.Xml"));var r,o,s=n.documentElement,a=s.tagName,l=null,u=[];if("image"==a)try{for(l={type:s.getAttribute("type"),levels:[]},u=s.getElementsByTagName("level"),o=0;u.length>o;o++)r=u[o],l.levels.push({url:r.getAttribute("url"),width:parseInt(r.getAttribute("width"),10),height:parseInt(r.getAttribute("height"),10)});return i(e,l)}catch(c){throw c instanceof Error?c:Error("Unknown error parsing Legacy Image Pyramid XML.")}else{if("collection"==a)throw Error("Legacy Image Pyramid Collections not yet supported.");if("error"==a)throw Error("Error: "+n)}throw Error("Unknown element "+a)}function i(t,e){return e.levels}t.LegacyTileSource=function(n){var i,r,o;t.isArray(n)&&(i={type:"legacy-image-pyramid",levels:n}),i.levels=e(i.levels),i.levels.length>0?(r=i.levels[i.levels.length-1].width,o=i.levels[i.levels.length-1].height):(r=0,o=0,t.console.error("No supported image formats found")),t.extend(!0,i,{width:r,height:o,tileSize:Math.max(o,r),tileOverlap:0,minLevel:0,maxLevel:i.levels.length>0?i.levels.length-1:0}),t.TileSource.apply(this,[i]),this.levels=i.levels},t.extend(t.LegacyTileSource.prototype,t.TileSource.prototype,{supports:function(t){return t.type&&"legacy-image-pyramid"==t.type||t.documentElement&&"legacy-image-pyramid"==t.documentElement.getAttribute("type")},configure:function(e){var r;return r=t.isPlainObject(e)?i(this,e):n(this,e)},getLevelScale:function(t){var e=0/0;return this.levels.length>0&&t>=this.minLevel&&this.maxLevel>=t&&(e=this.levels[t].width/this.levels[this.maxLevel].width),e},getNumTiles:function(e){var n=this.getLevelScale(e);return n?new t.Point(1,1):new t.Point(0,0)},getTileAtPoint:function(){return new t.Point(0,0)},getTileUrl:function(t){var e=null;return this.levels.length>0&&t>=this.minLevel&&this.maxLevel>=t&&(e=this.levels[t].url),e}})}(OpenSeadragon),function(t){t.TileSourceCollection=function(e){var n;n=t.isPlainObject(e)?e:{tileSize:arguments[0],tileSources:arguments[1],rows:arguments[2],layout:arguments[3]},n.layout||(n.layout="horizontal");var i=0,r=1,o=Math.ceil(n.tileSources.length/n.rows),s=o>=n.rows?o:n.rows;for("horizontal"==n.layout?(n.width=n.tileSize*o,n.height=n.tileSize*n.rows):(n.height=n.tileSize*o,n.width=n.tileSize*n.rows),n.tileOverlap=-n.tileMargin,n.tilesPerRow=o;n.tileSize*s>r;)r=2*r,i++;n.minLevel=i,t.TileSource.apply(this,[n])},t.extend(t.TileSourceCollection.prototype,t.TileSource.prototype,{getTileBounds:function(e,n,i){var r=this.dimensions.times(this.getLevelScale(e)),o=this.tileSize*n-this.tileOverlap,s=this.tileSize*i-this.tileOverlap,a=this.tileSize+1*this.tileOverlap,l=this.tileSize+1*this.tileOverlap,u=1/r.x;return a=Math.min(a,r.x-o),l=Math.min(l,r.y-s),new t.Rect(o*u,s*u,a*u,l*u)},configure:function(){},getTileUrl:function(){return null}})}(OpenSeadragon),function(t){function e(e){t.requestAnimationFrame(function(){n(e)})}function n(n){var i,r,o;n.shouldFade&&(i=t.now(),r=i-n.fadeBeginTime,o=1-r/n.fadeLength,o=Math.min(1,o),o=Math.max(0,o),n.imgGroup&&t.setElementOpacity(n.imgGroup,o,!0),o>0&&e(n))}function i(n){n.shouldFade=!0,n.fadeBeginTime=t.now()+n.fadeDelay,window.setTimeout(function(){e(n)},n.fadeDelay)}function r(e){e.shouldFade=!1,e.imgGroup&&t.setElementOpacity(e.imgGroup,1,!0)}function o(e,n){e.element.disabled||(n>=t.ButtonState.GROUP&&e.currentState==t.ButtonState.REST&&(r(e),e.currentState=t.ButtonState.GROUP),n>=t.ButtonState.HOVER&&e.currentState==t.ButtonState.GROUP&&(e.imgHover&&(e.imgHover.style.visibility=""),e.currentState=t.ButtonState.HOVER),n>=t.ButtonState.DOWN&&e.currentState==t.ButtonState.HOVER&&(e.imgDown&&(e.imgDown.style.visibility=""),e.currentState=t.ButtonState.DOWN))}function s(e,n){e.element.disabled||(t.ButtonState.HOVER>=n&&e.currentState==t.ButtonState.DOWN&&(e.imgDown&&(e.imgDown.style.visibility="hidden"),e.currentState=t.ButtonState.HOVER),t.ButtonState.GROUP>=n&&e.currentState==t.ButtonState.HOVER&&(e.imgHover&&(e.imgHover.style.visibility="hidden"),e.currentState=t.ButtonState.GROUP),t.ButtonState.REST>=n&&e.currentState==t.ButtonState.GROUP&&(i(e),e.currentState=t.ButtonState.REST))}t.ButtonState={REST:0,GROUP:1,HOVER:2,DOWN:3},t.Button=function(e){var n=this;t.EventSource.call(this),t.extend(!0,this,{tooltip:null,srcRest:null,srcGroup:null,srcHover:null,srcDown:null,clickTimeThreshold:t.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:t.DEFAULT_SETTINGS.clickDistThreshold,fadeDelay:0,fadeLength:2e3,onPress:null,onRelease:null,onClick:null,onEnter:null,onExit:null,onFocus:null,onBlur:null},e),this.element=e.element||t.makeNeutralElement("div"),e.element||(this.imgRest=t.makeTransparentImage(this.srcRest),this.imgGroup=t.makeTransparentImage(this.srcGroup),this.imgHover=t.makeTransparentImage(this.srcHover),this.imgDown=t.makeTransparentImage(this.srcDown),this.imgRest.alt=this.imgGroup.alt=this.imgHover.alt=this.imgDown.alt=this.tooltip,this.element.style.position="relative",t.setElementTouchActionNone(this.element),this.imgGroup.style.position=this.imgHover.style.position=this.imgDown.style.position="absolute",this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top="0px",this.imgGroup.style.left=this.imgHover.style.left=this.imgDown.style.left="0px",this.imgHover.style.visibility=this.imgDown.style.visibility="hidden",t.Browser.vendor==t.BROWSERS.FIREFOX&&3>t.Browser.version&&(this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top=""),this.element.appendChild(this.imgRest),this.element.appendChild(this.imgGroup),this.element.appendChild(this.imgHover),this.element.appendChild(this.imgDown)),this.addHandler("press",this.onPress),this.addHandler("release",this.onRelease),this.addHandler("click",this.onClick),this.addHandler("enter",this.onEnter),this.addHandler("exit",this.onExit),this.addHandler("focus",this.onFocus),this.addHandler("blur",this.onBlur),this.currentState=t.ButtonState.GROUP,this.fadeBeginTime=null,this.shouldFade=!1,this.element.style.display="inline-block",this.element.style.position="relative",this.element.title=this.tooltip,this.tracker=new t.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(e){e.insideElementPressed?(o(n,t.ButtonState.DOWN),n.raiseEvent("enter",{originalEvent:e.originalEvent})):e.buttonDownAny||o(n,t.ButtonState.HOVER)},focusHandler:function(t){this.enterHandler(t),n.raiseEvent("focus",{originalEvent:t.originalEvent})},exitHandler:function(e){s(n,t.ButtonState.GROUP),e.insideElementPressed&&n.raiseEvent("exit",{originalEvent:e.originalEvent})},blurHandler:function(t){this.exitHandler(t),n.raiseEvent("blur",{originalEvent:t.originalEvent})},pressHandler:function(e){o(n,t.ButtonState.DOWN),n.raiseEvent("press",{originalEvent:e.originalEvent})},releaseHandler:function(e){e.insideElementPressed&&e.insideElementReleased?(s(n,t.ButtonState.HOVER),n.raiseEvent("release",{originalEvent:e.originalEvent})):e.insideElementPressed?s(n,t.ButtonState.GROUP):o(n,t.ButtonState.HOVER)},clickHandler:function(t){t.quick&&n.raiseEvent("click",{originalEvent:t.originalEvent})},keyHandler:function(t){return 13===t.keyCode?(n.raiseEvent("click",{originalEvent:t.originalEvent}),n.raiseEvent("release",{originalEvent:t.originalEvent}),!1):!0}}).setTracking(!0),s(this,t.ButtonState.REST)},t.extend(t.Button.prototype,t.EventSource.prototype,{notifyGroupEnter:function(){o(this,t.ButtonState.GROUP)},notifyGroupExit:function(){s(this,t.ButtonState.REST)},disable:function(){this.notifyGroupExit(),this.element.disabled=!0,t.setElementOpacity(this.element,.2,!0)},enable:function(){this.element.disabled=!1,t.setElementOpacity(this.element,1,!0),this.notifyGroupEnter()}})}(OpenSeadragon),function(t){t.ButtonGroup=function(e){t.extend(!0,this,{buttons:[],clickTimeThreshold:t.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:t.DEFAULT_SETTINGS.clickDistThreshold,labelText:""},e);var n,i=this.buttons.concat([]),r=this;if(this.element=e.element||t.makeNeutralElement("div"),!e.group)for(this.label=t.makeNeutralElement("label"),this.element.style.display="inline-block",this.element.appendChild(this.label),n=0;i.length>n;n++)this.element.appendChild(i[n].element);t.setElementTouchActionNone(this.element),this.tracker=new t.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(){var t;for(t=0;r.buttons.length>t;t++)r.buttons[t].notifyGroupEnter()},exitHandler:function(t){var e;if(!t.insideElementPressed)for(e=0;r.buttons.length>e;e++)r.buttons[e].notifyGroupExit()},pressHandler:function(e){if("touch"===e.pointerType&&!t.MouseTracker.haveTouchEnter){var n;for(n=0;r.buttons.length>n;n++)r.buttons[n].notifyGroupEnter()}},releaseHandler:function(e){var n;if(!e.insideElementReleased||"touch"===e.pointerType&&!t.MouseTracker.haveTouchEnter)for(n=0;r.buttons.length>n;n++)r.buttons[n].notifyGroupExit()}}).setTracking(!0)},t.ButtonGroup.prototype={emulateEnter:function(){this.tracker.enterHandler({eventSource:this.tracker})},emulateExit:function(){this.tracker.exitHandler({eventSource:this.tracker})}}}(OpenSeadragon),function(t){t.Rect=function(t,e,n,i){this.x="number"==typeof t?t:0,this.y="number"==typeof e?e:0,this.width="number"==typeof n?n:0,this.height="number"==typeof i?i:0},t.Rect.prototype={clone:function(){return new t.Rect(this.x,this.y,this.width,this.height)},getAspectRatio:function(){return this.width/this.height},getTopLeft:function(){return new t.Point(this.x,this.y)},getBottomRight:function(){return new t.Point(this.x+this.width,this.y+this.height)},getTopRight:function(){return new t.Point(this.x+this.width,this.y)},getBottomLeft:function(){return new t.Point(this.x,this.y+this.height)},getCenter:function(){return new t.Point(this.x+this.width/2,this.y+this.height/2)},getSize:function(){return new t.Point(this.width,this.height)},equals:function(e){return e instanceof t.Rect&&this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height},rotate:function(e,n){var i,r=this.width,o=this.height;if(e=(e+360)%360,0!==e%90)throw Error("Currently only 0, 90, 180, and 270 degrees are supported.");if(0===e)return new t.Rect(this.x,this.y,this.width,this.height);switch(n=n||this.getCenter(),e){case 90:i=this.getBottomLeft(),r=this.height,o=this.width;break;case 180:i=this.getBottomRight();break;case 270:i=this.getTopRight(),r=this.height,o=this.width;break;default:i=this.getTopLeft()}return i=i.rotate(e,n),new t.Rect(i.x,i.y,r,o)},toString:function(){return"["+Math.round(100*this.x)+","+Math.round(100*this.y)+","+Math.round(100*this.width)+"x"+Math.round(100*this.height)+"]"}}}(OpenSeadragon),function(t){function e(e){var n=Number(this.element.style.marginLeft.replace("px","")),r=Number(this.element.style.marginTop.replace("px","")),o=Number(this.element.style.width.replace("px","")),s=Number(this.element.style.height.replace("px","")),a=t.getElementSize(this.viewer.canvas);return this.dragging=!0,this.element&&("horizontal"==this.scroll?-e.delta.x>0?n>-(o-a.x)&&(this.element.style.marginLeft=n+2*e.delta.x+"px",i(this,a.x,n+2*e.delta.x)):0>-e.delta.x&&0>n&&(this.element.style.marginLeft=n+2*e.delta.x+"px",i(this,a.x,n+2*e.delta.x)):-e.delta.y>0?r>-(s-a.y)&&(this.element.style.marginTop=r+2*e.delta.y+"px",i(this,a.y,r+2*e.delta.y)):0>-e.delta.y&&0>r&&(this.element.style.marginTop=r+2*e.delta.y+"px",i(this,a.y,r+2*e.delta.y))),!1}function n(e){var n=Number(this.element.style.marginLeft.replace("px","")),r=Number(this.element.style.marginTop.replace("px","")),o=Number(this.element.style.width.replace("px","")),s=Number(this.element.style.height.replace("px","")),a=t.getElementSize(this.viewer.canvas);return this.element&&("horizontal"==this.scroll?e.scroll>0?n>-(o-a.x)&&(this.element.style.marginLeft=n-60*e.scroll+"px",i(this,a.x,n-60*e.scroll)):0>e.scroll&&0>n&&(this.element.style.marginLeft=n-60*e.scroll+"px",i(this,a.x,n-60*e.scroll)):0>e.scroll?r>a.y-s&&(this.element.style.marginTop=r+60*e.scroll+"px",i(this,a.y,r+60*e.scroll)):e.scroll>0&&0>r&&(this.element.style.marginTop=r+60*e.scroll+"px",i(this,a.y,r+60*e.scroll))),!1}function i(e,n,i){var r,o,s,a,l,u,c;for(r="horizontal"==e.scroll?e.panelWidth:e.panelHeight,o=Math.ceil(n/r)+5,s=Math.ceil((Math.abs(i)+n)/r)+1,o=s-o,o=0>o?0:o,u=o;s>u&&e.panels.length>u;u++)c=e.panels[u],c.activePanel||(a=new t.Viewer({id:c.id,tileSources:[e.viewer.tileSources[u]],element:c,navigatorSizeRatio:e.sizeRatio,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0}),a.displayRegion=t.makeNeutralElement("textarea"),a.displayRegion.id=c.id+"-displayregion",a.displayRegion.className="displayregion",l=a.displayRegion.style,l.position="relative",l.top="0px",l.left="0px",l.fontSize="0px",l.overflow="hidden",l.float="left",l.cssFloat="left",l.styleFloat="left",l.zIndex=999999999,l.cursor="default",l.width=e.panelWidth-4+"px",l.height=e.panelHeight-4+"px",a.displayRegion.innerTracker=new t.MouseTracker({element:a.displayRegion}),c.getElementsByTagName("div")[0].appendChild(a.displayRegion),c.activePanel=!0)}function r(t){var e=t.eventSource.element;return"horizontal"==this.scroll?e.style.marginBottom="0px":e.style.marginLeft="0px",!1}function o(e){var n=e.eventSource.element;return"horizontal"==this.scroll?n.style.marginBottom="-"+t.getElementSize(n).y/2+"px":n.style.marginLeft="-"+t.getElementSize(n).x/2+"px",!1}function s(t){switch(t.keyCode){case 61:return n.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 45:return n.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 48:case 119:case 87:case 38:return n.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;case 115:case 83:case 40:return n.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 97:case 37:return n.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),!1;case 100:case 39:return n.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),!1;default:return!0}}var a={};t.ReferenceStrip=function(l){var u,c,h,d=this,p=l.viewer,f=t.getElementSize(p.element);for(l.id||(l.id="referencestrip-"+t.now(),this.element=t.makeNeutralElement("div"),this.element.id=l.id,this.element.className="referencestrip"),l=t.extend(!0,{sizeRatio:t.DEFAULT_SETTINGS.referenceStripSizeRatio,position:t.DEFAULT_SETTINGS.referenceStripPosition,scroll:t.DEFAULT_SETTINGS.referenceStripScroll,clickTimeThreshold:t.DEFAULT_SETTINGS.clickTimeThreshold},l,{element:this.element,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1}),t.extend(this,l),a[this.id]={animating:!1},this.minPixelRatio=this.viewer.minPixelRatio,c=this.element.style,c.marginTop="0px",c.marginRight="0px",c.marginBottom="0px",c.marginLeft="0px",c.left="0px",c.bottom="0px",c.border="0px",c.background="#000",c.position="relative",t.setElementTouchActionNone(this.element),t.setElementOpacity(this.element,.8),this.viewer=p,this.innerTracker=new t.MouseTracker({element:this.element,dragHandler:t.delegate(this,e),scrollHandler:t.delegate(this,n),enterHandler:t.delegate(this,r),exitHandler:t.delegate(this,o),keyHandler:t.delegate(this,s)}).setTracking(!0),l.width&&l.height?(this.element.style.width=l.width+"px",this.element.style.height=l.height+"px",p.addControl(this.element,{anchor:t.ControlAnchor.BOTTOM_LEFT})):"horizontal"==l.scroll?(this.element.style.width=f.x*l.sizeRatio*p.tileSources.length+12*p.tileSources.length+"px",this.element.style.height=f.y*l.sizeRatio+"px",p.addControl(this.element,{anchor:t.ControlAnchor.BOTTOM_LEFT})):(this.element.style.height=f.y*l.sizeRatio*p.tileSources.length+12*p.tileSources.length+"px",this.element.style.width=f.x*l.sizeRatio+"px",p.addControl(this.element,{anchor:t.ControlAnchor.TOP_LEFT})),this.panelWidth=f.x*this.sizeRatio+8,this.panelHeight=f.y*this.sizeRatio+8,this.panels=[],h=0;p.tileSources.length>h;h++)u=t.makeNeutralElement("div"),u.id=this.element.id+"-"+h,u.style.width=d.panelWidth+"px",u.style.height=d.panelHeight+"px",u.style.display="inline",u.style.float="left",u.style.cssFloat="left",u.style.styleFloat="left",u.style.padding="2px",t.setElementTouchActionNone(u),u.innerTracker=new t.MouseTracker({element:u,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,pressHandler:function(e){e.eventSource.dragging=t.now()},releaseHandler:function(e){var n=e.eventSource,i=n.element.id,r=Number(i.split("-")[2]),o=t.now();e.insideElementPressed&&e.insideElementReleased&&n.dragging&&o-n.dragging<n.clickTimeThreshold&&(n.dragging=null,p.goToPage(r))}}).setTracking(!0),this.element.appendChild(u),u.activePanel=!1,this.panels.push(u);i(this,"vertical"==this.scroll?f.y:f.y,0),this.setFocus(0)},t.extend(t.ReferenceStrip.prototype,t.EventSource.prototype,t.Viewer.prototype,{setFocus:function(e){var n,o=t.getElement(this.element.id+"-"+e),s=t.getElementSize(this.viewer.canvas),a=Number(this.element.style.width.replace("px","")),l=Number(this.element.style.height.replace("px","")),u=-Number(this.element.style.marginLeft.replace("px","")),c=-Number(this.element.style.marginTop.replace("px",""));this.currentSelected!==o&&(this.currentSelected&&(this.currentSelected.style.background="#000"),this.currentSelected=o,this.currentSelected.style.background="#999","horizontal"==this.scroll?(n=Number(e)*(this.panelWidth+3),n>u+s.x-this.panelWidth?(n=Math.min(n,a-s.x),this.element.style.marginLeft=-n+"px",i(this,s.x,-n)):u>n&&(n=Math.max(0,n-s.x/2),this.element.style.marginLeft=-n+"px",i(this,s.x,-n))):(n=Number(e)*(this.panelHeight+3),n>c+s.y-this.panelHeight?(n=Math.min(n,l-s.y),this.element.style.marginTop=-n+"px",i(this,s.y,-n)):c>n&&(n=Math.max(0,n-s.y/2),this.element.style.marginTop=-n+"px",i(this,s.y,-n))),this.currentPage=e,t.getElement(o.id+"-displayregion").focus(),r.call(this,{eventSource:this.innerTracker}))},update:function(){return a[this.id].animating?(t.console.log("image reference strip update"),!0):!1}})}(OpenSeadragon),function(t){t.DisplayRect=function(e,n,i,r,o,s){t.Rect.apply(this,[e,n,i,r]),this.minLevel=o,this.maxLevel=s},t.extend(t.DisplayRect.prototype,t.Rect.prototype)}(OpenSeadragon),function(t){function e(t,e){return(1-Math.exp(t*-e))/(1-Math.exp(-t))}t.Spring=function(e){var n=arguments;"object"!=typeof e&&(e={initial:n.length&&"number"==typeof n[0]?n[0]:0,springStiffness:n.length>1?n[1].springStiffness:5,animationTime:n.length>1?n[1].animationTime:1.5}),t.extend(!0,this,e),this.current={value:"number"==typeof this.initial?this.initial:0,time:t.now()},this.start={value:this.current.value,time:this.current.time},this.target={value:this.current.value,time:this.current.time}},t.Spring.prototype={resetTo:function(t){this.target.value=t,this.target.time=this.current.time,this.start.value=this.target.value,this.start.time=this.target.time},springTo:function(t){this.start.value=this.current.value,this.start.time=this.current.time,this.target.value=t,this.target.time=this.start.time+1e3*this.animationTime},shiftBy:function(t){this.start.value+=t,this.target.value+=t},update:function(){this.current.time=t.now(),this.current.value=this.current.time>=this.target.time?this.target.value:this.start.value+(this.target.value-this.start.value)*e(this.springStiffness,(this.current.time-this.start.time)/(this.target.time-this.start.time))}}}(OpenSeadragon),function(t){function e(e){t.extend(!0,this,{timeout:t.DEFAULT_SETTINGS.timeout,jobId:null},e),this.image=null}function n(t,e,n){var i;t.jobsInProgress--,(!t.jobLimit||t.jobsInProgress<t.jobLimit)&&t.jobQueue.length>0&&(i=t.jobQueue.shift(),i.start()),n(e.image)}e.prototype={start:function(){var t=this;this.image=new Image,this.crossOriginPolicy!==!1&&(this.image.crossOrigin=this.crossOriginPolicy),this.image.onload=function(){t.finish(!0)},this.image.onabort=this.image.onerror=function(){t.finish(!1)},this.jobId=window.setTimeout(function(){t.finish(!1)},this.timeout),this.image.src=this.src},finish:function(t){this.image.onload=this.image.onerror=this.image.onabort=null,t||(this.image=null),this.jobId&&window.clearTimeout(this.jobId),this.callback(this)}},t.ImageLoader=function(){t.extend(!0,this,{jobLimit:t.DEFAULT_SETTINGS.imageLoaderLimit,jobQueue:[],jobsInProgress:0})},t.ImageLoader.prototype={addJob:function(t){var i=this,r=function(e){n(i,e,t.callback)},o={src:t.src,crossOriginPolicy:t.crossOriginPolicy,callback:r},s=new e(o);!this.jobLimit||this.jobsInProgress<this.jobLimit?(s.start(),this.jobsInProgress++):this.jobQueue.push(s)}}}(OpenSeadragon),function(t){var e={};t.Tile=function(t,e,n,i,r,o){this.level=t,this.x=e,this.y=n,this.bounds=i,this.exists=r,this.url=o,this.loaded=!1,this.loading=!1,this.element=null,this.imgElement=null,this.image=null,this.style=null,this.position=null,this.size=null,this.blendStart=null,this.opacity=null,this.distance=null,this.visibility=null,this.beingDrawn=!1,this.lastTouchTime=0},t.Tile.prototype={toString:function(){return this.level+"/"+this.x+"_"+this.y},drawHTML:function(e){return this.loaded&&this.image?(this.element||(this.element=t.makeNeutralElement("div"),this.imgElement=t.makeNeutralElement("img"),this.imgElement.src=this.url,this.imgElement.style.msInterpolationMode="nearest-neighbor",this.imgElement.style.width="100%",this.imgElement.style.height="100%",this.style=this.element.style,this.style.position="absolute"),this.element.parentNode!=e&&e.appendChild(this.element),this.imgElement.parentNode!=this.element&&this.element.appendChild(this.imgElement),this.style.top=this.position.y+"px",this.style.left=this.position.x+"px",this.style.height=this.size.y+"px",this.style.width=this.size.x+"px",void t.setElementOpacity(this.element,this.opacity)):void t.console.warn("Attempting to draw tile %s when it's not yet loaded.",""+this)},drawCanvas:function(n,i){var r,o,s=this.position,a=this.size;return this.loaded&&(this.image||e[this.url])?(n.globalAlpha=this.opacity,1==n.globalAlpha&&this.url.match(".png")&&n.clearRect(s.x+1,s.y+1,a.x-2,a.y-2),e[this.url]||(o=document.createElement("canvas"),o.width=this.image.width,o.height=this.image.height,r=o.getContext("2d"),r.drawImage(this.image,0,0),e[this.url]=r,this.image=null),r=e[this.url],i({context:n,tile:this,rendered:r}),void n.drawImage(r.canvas,0,0,r.canvas.width,r.canvas.height,s.x,s.y,a.x,a.y)):void t.console.warn("Attempting to draw tile %s when it's not yet loaded.",""+this)},unload:function(){this.imgElement&&this.imgElement.parentNode&&this.imgElement.parentNode.removeChild(this.imgElement),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),e[this.url]&&delete e[this.url],this.element=null,this.imgElement=null,this.image=null,this.loaded=!1,this.loading=!1}}}(OpenSeadragon),function(t){t.OverlayPlacement={CENTER:0,TOP_LEFT:1,TOP:2,TOP_RIGHT:3,RIGHT:4,BOTTOM_RIGHT:5,BOTTOM:6,BOTTOM_LEFT:7,LEFT:8},t.Overlay=function(e,n,i){var r;r=t.isPlainObject(e)?e:{element:e,location:n,placement:i},this.element=r.element,this.scales=r.location instanceof t.Rect,this.bounds=new t.Rect(r.location.x,r.location.y,r.location.width,r.location.height),this.position=new t.Point(r.location.x,r.location.y),this.size=new t.Point(r.location.width,r.location.height),this.style=r.element.style,this.placement=r.location instanceof t.Point?r.placement:t.OverlayPlacement.TOP_LEFT,this.onDraw=r.onDraw,this.checkResize=void 0===r.checkResize?!0:r.checkResize},t.Overlay.prototype={adjust:function(e,n){switch(this.placement){case t.OverlayPlacement.TOP_LEFT:break;case t.OverlayPlacement.TOP:e.x-=n.x/2;break;case t.OverlayPlacement.TOP_RIGHT:e.x-=n.x;break;case t.OverlayPlacement.RIGHT:e.x-=n.x,e.y-=n.y/2;break;case t.OverlayPlacement.BOTTOM_RIGHT:e.x-=n.x,e.y-=n.y;break;case t.OverlayPlacement.BOTTOM:e.x-=n.x/2,e.y-=n.y;break;case t.OverlayPlacement.BOTTOM_LEFT:e.y-=n.y;break;case t.OverlayPlacement.LEFT:e.y-=n.y/2;break;default:case t.OverlayPlacement.CENTER:e.x-=n.x/2,e.y-=n.y/2}},destroy:function(){var t=this.element,e=this.style;t.parentNode&&(t.parentNode.removeChild(t),t.prevElementParent&&(e.display="none",document.body.appendChild(t))),this.onDraw=null,e.top="",e.left="",e.position="",this.scales&&(e.width="",e.height="")},drawHTML:function(e,n){var i,r,o=this.element,s=this.style,a=this.scales,l=n.degrees,u=n.pixelFromPoint(this.bounds.getTopLeft(),!0);if(o.parentNode!=e&&(o.prevElementParent=o.parentNode,o.prevNextSibling=o.nextSibling,e.appendChild(o),this.size=t.getElementSize(o)),i=a?n.deltaPixelsFromPoints(this.bounds.getSize(),!0):this.checkResize?t.getElementSize(o):this.size,this.position=u,this.size=i,this.adjust(u,i),u=u.apply(Math.floor),i=i.apply(Math.ceil),0!==l&&this.scales){r=new t.Point(i.x/2,i.y/2);
var c=new t.Point(n.viewer.drawer.canvas.width/2,n.viewer.drawer.canvas.height/2);u=u.plus(r).rotate(l,c).minus(r),i=i.rotate(l,new t.Point(0,0)),i=new t.Point(Math.abs(i.x),Math.abs(i.y))}this.onDraw?this.onDraw(u,i,o):(s.left=u.x+"px",s.top=u.y+"px",s.position="absolute",s.display="block",a&&(s.width=i.x+"px",s.height=i.y+"px"))},update:function(e,n){this.scales=e instanceof t.Rect,this.bounds=new t.Rect(e.x,e.y,e.width,e.height),this.placement=e instanceof t.Point?n:t.OverlayPlacement.TOP_LEFT}}}(OpenSeadragon),function(t){t.Drawer=function(e){var n=this;t.console.assert(e.viewer,"[Drawer] options.viewer is required");var i=arguments;t.isPlainObject(e)||(e={source:i[0],viewport:i[1],element:i[2]}),t.console.assert(e.viewport,"[Drawer] options.viewport is required"),t.console.assert(e.element,"[Drawer] options.element is required"),e.source&&t.console.error("[Drawer] options.source is no longer accepted; use TiledImage instead"),this.viewer=e.viewer,this.viewport=e.viewport,this.debugGridColor=e.debugGridColor||t.DEFAULT_SETTINGS.debugGridColor,this.opacity=void 0===e.opacity?t.DEFAULT_SETTINGS.opacity:e.opacity,this.useCanvas=t.supportsCanvas&&(this.viewer?this.viewer.useCanvas:!0),this.container=t.getElement(e.element),this.canvas=t.makeNeutralElement(this.useCanvas?"canvas":"div"),this.context=this.useCanvas?this.canvas.getContext("2d"):null,this.element=this.container,this.container.dir="ltr",this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.position="absolute",t.setElementOpacity(this.canvas,this.opacity,!0),this.container.style.textAlign="left",this.container.appendChild(this.canvas),this._drawingHandler=function(t){n.viewer&&n.viewer.raiseEvent("tile-drawing",t)}},t.Drawer.prototype={addOverlay:function(e,n,i,r){return t.console.error("drawer.addOverlay is deprecated. Use viewer.addOverlay instead."),this.viewer.addOverlay(e,n,i,r),this},updateOverlay:function(e,n,i){return t.console.error("drawer.updateOverlay is deprecated. Use viewer.updateOverlay instead."),this.viewer.updateOverlay(e,n,i),this},removeOverlay:function(e){return t.console.error("drawer.removeOverlay is deprecated. Use viewer.removeOverlay instead."),this.viewer.removeOverlay(e),this},clearOverlays:function(){return t.console.error("drawer.clearOverlays is deprecated. Use viewer.clearOverlays instead."),this.viewer.clearOverlays(),this},setOpacity:function(e){return this.opacity=e,t.setElementOpacity(this.canvas,this.opacity,!0),this},getOpacity:function(){return this.opacity},needsUpdate:function(){return t.console.error("[Drawer.needsUpdate] this function is deprecated."),!1},numTilesLoaded:function(){return t.console.error("[Drawer.numTilesLoaded] this function is deprecated."),0},reset:function(){return t.console.error("[Drawer.reset] this function is deprecated."),this},update:function(){return t.console.error("[Drawer.update] this function is deprecated."),this},canRotate:function(){return this.useCanvas},destroy:function(){this.canvas.width=1,this.canvas.height=1},clear:function(){if(this.canvas.innerHTML="",this.useCanvas){var t=this.viewport.getContainerSize();(this.canvas.width!=t.x||this.canvas.height!=t.y)&&(this.canvas.width=t.x,this.canvas.height=t.y),this.context.clearRect(0,0,t.x,t.y)}},drawTile:function(t){this.useCanvas?0!==this.viewport.degrees?(this._offsetForRotation(t,this.viewport.degrees),t.drawCanvas(this.context,this._drawingHandler),this._restoreRotationChanges(t)):t.drawCanvas(this.context,this._drawingHandler):t.drawHTML(this.canvas)},drawDebugInfo:function(t,e,n){if(this.useCanvas){this.context.save(),this.context.lineWidth=2,this.context.font="small-caps bold 13px ariel",this.context.strokeStyle=this.debugGridColor,this.context.fillStyle=this.debugGridColor,this._offsetForRotation(t,this.canvas,this.context,this.viewport.degrees),this.context.strokeRect(t.position.x,t.position.y,t.size.x,t.size.y);var i=t.position.x+t.size.x/2,r=t.position.y+t.size.y/2;this.context.translate(i,r),this.context.rotate(Math.PI/180*-this.viewport.degrees),this.context.translate(-i,-r),0===t.x&&0===t.y&&(this.context.fillText("Zoom: "+this.viewport.getZoom(),t.position.x,t.position.y-30),this.context.fillText("Pan: "+(""+this.viewport.getBounds()),t.position.x,t.position.y-20)),this.context.fillText("Level: "+t.level,t.position.x+10,t.position.y+20),this.context.fillText("Column: "+t.x,t.position.x+10,t.position.y+30),this.context.fillText("Row: "+t.y,t.position.x+10,t.position.y+40),this.context.fillText("Order: "+n+" of "+e,t.position.x+10,t.position.y+50),this.context.fillText("Size: "+(""+t.size),t.position.x+10,t.position.y+60),this.context.fillText("Position: "+(""+t.position),t.position.x+10,t.position.y+70),this._restoreRotationChanges(t,this.canvas,this.context),this.context.restore()}},_offsetForRotation:function(t,e){var n=this.canvas.width/2,i=this.canvas.height/2,r=t.position.x-n,o=t.position.y-i;this.context.save(),this.context.translate(n,i),this.context.rotate(Math.PI/180*e),t.position.x=r,t.position.y=o},_restoreRotationChanges:function(t){var e=this.canvas.width/2,n=this.canvas.height/2,i=t.position.x+e,r=t.position.y+n;t.position.x=i,t.position.y=r,this.context.restore()}}}(OpenSeadragon),function(t){t.Viewport=function(e){var n=arguments;n.length&&n[0]instanceof t.Point&&(e={containerSize:n[0],contentSize:n[1],config:n[2]}),e.config&&(t.extend(!0,e,e.config),delete e.config),t.extend(!0,this,{containerSize:null,contentSize:null,zoomPoint:null,viewer:null,springStiffness:t.DEFAULT_SETTINGS.springStiffness,animationTime:t.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:t.DEFAULT_SETTINGS.minZoomImageRatio,maxZoomPixelRatio:t.DEFAULT_SETTINGS.maxZoomPixelRatio,visibilityRatio:t.DEFAULT_SETTINGS.visibilityRatio,wrapHorizontal:t.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:t.DEFAULT_SETTINGS.wrapVertical,defaultZoomLevel:t.DEFAULT_SETTINGS.defaultZoomLevel,minZoomLevel:t.DEFAULT_SETTINGS.minZoomLevel,maxZoomLevel:t.DEFAULT_SETTINGS.maxZoomLevel,degrees:t.DEFAULT_SETTINGS.degrees,homeFillsViewer:t.DEFAULT_SETTINGS.homeFillsViewer},e),this.centerSpringX=new t.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.centerSpringY=new t.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.zoomSpring=new t.Spring({initial:1,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.contentSize?this.resetContentSize(this.contentSize):this.setHomeBounds(new t.Rect(0,0,1,1),1),this.goHome(!0),this.update()},t.Viewport.prototype={resetContentSize:function(e){return t.console.assert(e,"[Viewport.resetContentSize] contentSize is required"),t.console.assert(e instanceof t.Point,"[Viewport.resetContentSize] contentSize must be an OpenSeadragon.Point"),t.console.assert(e.x>0,"[Viewport.resetContentSize] contentSize.x must be greater than 0"),t.console.assert(e.y>0,"[Viewport.resetContentSize] contentSize.y must be greater than 0"),this.setHomeBounds(new t.Rect(0,0,1,e.y/e.x),e.x),this},setHomeBounds:function(e,n){t.console.assert(e,"[Viewport.setHomeBounds] bounds is required"),t.console.assert(e instanceof t.Rect,"[Viewport.setHomeBounds] bounds must be an OpenSeadragon.Rect"),t.console.assert(e.width>0,"[Viewport.setHomeBounds] bounds.width must be greater than 0"),t.console.assert(e.height>0,"[Viewport.setHomeBounds] bounds.height must be greater than 0"),this.homeBounds=e.clone(),this.contentSize=this.homeBounds.getSize().times(n),this.contentAspectX=this.contentSize.x/this.contentSize.y,this.contentAspectY=this.contentSize.y/this.contentSize.x,this.fitWidthBounds=new t.Rect(this.homeBounds.x,this.homeBounds.y,this.homeBounds.width,this.homeBounds.width),this.fitHeightBounds=new t.Rect(this.homeBounds.x,this.homeBounds.y,this.homeBounds.height,this.homeBounds.height),this.viewer&&this.viewer.raiseEvent("reset-size",{contentSize:this.contentSize.clone(),contentFactor:n,homeBounds:this.homeBounds.clone()})},getHomeZoom:function(){if(this.defaultZoomLevel)return this.defaultZoomLevel;var t,e=this.contentAspectX/this.getAspectRatio();return t=this.homeFillsViewer?e>=1?e:1:e>=1?1:e,t/this.homeBounds.width},getHomeBounds:function(){return this.homeBounds.clone()},goHome:function(t){return this.viewer&&this.viewer.raiseEvent("home",{immediately:t}),this.fitBounds(this.getHomeBounds(),t)},getMinZoom:function(){var t=this.getHomeZoom(),e=this.minZoomLevel?this.minZoomLevel:this.minZoomImageRatio*t;return Math.min(e,t)},getMaxZoom:function(){var t=this.maxZoomLevel;return t||(t=this.contentSize.x*this.maxZoomPixelRatio/this.containerSize.x,t/=this.homeBounds.width),Math.max(t,this.getHomeZoom())},getAspectRatio:function(){return this.containerSize.x/this.containerSize.y},getContainerSize:function(){return new t.Point(this.containerSize.x,this.containerSize.y)},getBounds:function(e){var n=this.getCenter(e),i=1/this.getZoom(e),r=i/this.getAspectRatio();return new t.Rect(n.x-i/2,n.y-r/2,i,r)},getCenter:function(e){var n,i,r,o,s,a,l,u,c=new t.Point(this.centerSpringX.current.value,this.centerSpringY.current.value),h=new t.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return e?c:this.zoomPoint?(n=this.pixelFromPoint(this.zoomPoint,!0),i=this.getZoom(),r=1/i,o=r/this.getAspectRatio(),s=new t.Rect(c.x-r/2,c.y-o/2,r,o),a=this.zoomPoint.minus(s.getTopLeft()).times(this.containerSize.x/s.width),l=a.minus(n),u=l.divide(this.containerSize.x*i),h.plus(u)):h},getZoom:function(t){return t?this.zoomSpring.current.value:this.zoomSpring.target.value},_applyBoundaryConstraints:function(e,n){var i=0,r=0,o=new t.Rect(e.x,e.y,e.width,e.height),s=this.visibilityRatio*o.width,a=this.visibilityRatio*o.height;if(this.wrapHorizontal);else{var l=o.x+(o.width-s);this.homeBounds.x>l&&(i=this.homeBounds.x-l);var u=this.homeBounds.x+this.homeBounds.width,c=o.x+s;if(c>u){var h=u-c;i=i?(i+h)/2:h}}if(this.wrapVertical);else{var d=o.y+(o.height-a);this.homeBounds.y>d&&(r=this.homeBounds.y-d);var p=this.homeBounds.y+this.homeBounds.height,f=o.y+a;if(f>p){var g=p-f;r=r?(r+g)/2:g}}return(i||r)&&(o.x+=i,o.y+=r),this.viewer&&this.viewer.raiseEvent("constrain",{immediately:n}),o},applyConstraints:function(t){var e,n,i=this.getZoom(),r=Math.max(Math.min(i,this.getMaxZoom()),this.getMinZoom());return i!=r&&this.zoomTo(r,this.zoomPoint,t),e=this.getBounds(),n=this._applyBoundaryConstraints(e,t),(e.x!==n.x||e.y!==n.y||t)&&this.fitBounds(n,t),this},ensureVisible:function(t){return this.applyConstraints(t)},_fitBounds:function(e,n){n=n||{};var i,r,o,s,a,l,u=n.immediately||!1,c=n.constraints||!1,h=this.getAspectRatio(),d=e.getCenter(),p=new t.Rect(e.x,e.y,e.width,e.height);return p.getAspectRatio()>=h?(p.height=e.width/h,p.y=d.y-p.height/2):(p.width=e.height*h,p.x=d.x-p.width/2),c&&(a=p.getAspectRatio()),this.panTo(this.getCenter(!0),!0),this.zoomTo(this.getZoom(!0),null,!0),i=this.getBounds(),r=this.getZoom(),o=1/p.width,c&&(l=Math.max(Math.min(o,this.getMaxZoom()),this.getMinZoom()),o!==l&&(o=l,p.width=1/o,p.x=d.x-p.width/2,p.height=p.width/a,p.y=d.y-p.height/2),p=this._applyBoundaryConstraints(p,u)),o==r||p.width==i.width?this.panTo(c?p.getCenter():d,u):(s=i.getTopLeft().times(this.containerSize.x/i.width).minus(p.getTopLeft().times(this.containerSize.x/p.width)).divide(this.containerSize.x/i.width-this.containerSize.x/p.width),this.zoomTo(o,s,u))},fitBounds:function(t,e){return this._fitBounds(t,{immediately:e,constraints:!1})},fitBoundsWithConstraints:function(t,e){return this._fitBounds(t,{immediately:e,constraints:!0})},fitVertically:function(t){var e=this.getCenter();return this.wrapHorizontal&&(e.x=(1+e.x%1)%1,this.centerSpringX.resetTo(e.x),this.centerSpringX.update()),this.wrapVertical&&(e.y=(this.contentAspectY+e.y%this.contentAspectY)%this.contentAspectY,this.centerSpringY.resetTo(e.y),this.centerSpringY.update()),this.fitBounds(this.fitHeightBounds,t)},fitHorizontally:function(t){var e=this.getCenter();return this.wrapHorizontal&&(e.x=(this.contentAspectX+e.x%this.contentAspectX)%this.contentAspectX,this.centerSpringX.resetTo(e.x),this.centerSpringX.update()),this.wrapVertical&&(e.y=(1+e.y%1)%1,this.centerSpringY.resetTo(e.y),this.centerSpringY.update()),this.fitBounds(this.fitWidthBounds,t)},panBy:function(e,n){var i=new t.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return e=e.rotate(-this.degrees,new t.Point(0,0)),this.panTo(i.plus(e),n)},panTo:function(t,e){return e?(this.centerSpringX.resetTo(t.x),this.centerSpringY.resetTo(t.y)):(this.centerSpringX.springTo(t.x),this.centerSpringY.springTo(t.y)),this.viewer&&this.viewer.raiseEvent("pan",{center:t,immediately:e}),this},zoomBy:function(e,n,i){return n instanceof t.Point&&!isNaN(n.x)&&!isNaN(n.y)&&(n=n.rotate(-this.degrees,new t.Point(this.centerSpringX.target.value,this.centerSpringY.target.value))),this.zoomTo(this.zoomSpring.target.value*e,n,i)},zoomTo:function(e,n,i){return this.zoomPoint=n instanceof t.Point&&!isNaN(n.x)&&!isNaN(n.y)?n:null,i?this.zoomSpring.resetTo(e):this.zoomSpring.springTo(e),this.viewer&&this.viewer.raiseEvent("zoom",{zoom:e,refPoint:n,immediately:i}),this},setRotation:function(t){return this.viewer&&this.viewer.drawer.canRotate()?(t=(t+360)%360,this.degrees=t,this.viewer.forceRedraw(),null!==this.viewer&&this.viewer.raiseEvent("rotate",{degrees:t}),this):this},getRotation:function(){return this.degrees},resize:function(e,n){var i,r=this.getBounds(),o=r;return this.containerSize=new t.Point(e.x,e.y),n&&(i=e.x/this.containerSize.x,o.width=r.width*i,o.height=o.width/this.getAspectRatio()),this.viewer&&this.viewer.raiseEvent("resize",{newContainerSize:e,maintain:n}),this.fitBounds(o,!0)},update:function(){var t,e,n,i,r=this.centerSpringX.current.value,o=this.centerSpringY.current.value,s=this.zoomSpring.current.value;return this.zoomPoint&&(t=this.pixelFromPoint(this.zoomPoint,!0)),this.zoomSpring.update(),this.zoomPoint&&this.zoomSpring.current.value!=s?(e=this.pixelFromPoint(this.zoomPoint,!0),n=e.minus(t),i=this.deltaPointsFromPixels(n,!0),this.centerSpringX.shiftBy(i.x),this.centerSpringY.shiftBy(i.y)):this.zoomPoint=null,this.centerSpringX.update(),this.centerSpringY.update(),this.centerSpringX.current.value!=r||this.centerSpringY.current.value!=o||this.zoomSpring.current.value!=s},deltaPixelsFromPoints:function(t,e){return t.times(this.containerSize.x*this.getZoom(e))},deltaPointsFromPixels:function(t,e){return t.divide(this.containerSize.x*this.getZoom(e))},pixelFromPoint:function(t,e){var n=this.getBounds(e);return t.minus(n.getTopLeft()).times(this.containerSize.x/n.width)},pointFromPixel:function(t,e){var n=this.getBounds(e);return t.divide(this.containerSize.x/n.width).plus(n.getTopLeft())},viewportToImageCoordinates:function(e,n){return 1==arguments.length?this.viewportToImageCoordinates(e.x,e.y):new t.Point(e*this.contentSize.x,n*this.contentSize.y*this.contentAspectX)},imageToViewportCoordinates:function(e,n){return 1==arguments.length?this.imageToViewportCoordinates(e.x,e.y):new t.Point(e/this.contentSize.x,n/this.contentSize.y/this.contentAspectX)},imageToViewportRectangle:function(e,n,i,r){var o,s,a;return 1==arguments.length?(a=e,this.imageToViewportRectangle(a.x,a.y,a.width,a.height)):(o=this.imageToViewportCoordinates(e,n),s=this.imageToViewportCoordinates(i,r),new t.Rect(o.x,o.y,s.x,s.y))},viewportToImageRectangle:function(e,n,i,r){var o,s,a;return 1==arguments.length?(a=e,this.viewportToImageRectangle(a.x,a.y,a.width,a.height)):(o=this.viewportToImageCoordinates(e,n),s=this.viewportToImageCoordinates(i,r),new t.Rect(o.x,o.y,s.x,s.y))},viewerElementToImageCoordinates:function(t){var e=this.pointFromPixel(t,!0);return this.viewportToImageCoordinates(e)},imageToViewerElementCoordinates:function(t){var e=this.imageToViewportCoordinates(t);return this.pixelFromPoint(e,!0)},windowToImageCoordinates:function(t){var e=t.minus(OpenSeadragon.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(e)},imageToWindowCoordinates:function(t){var e=this.imageToViewerElementCoordinates(t);return e.plus(OpenSeadragon.getElementPosition(this.viewer.element))},viewerElementToViewportCoordinates:function(t){return this.pointFromPixel(t,!0)},viewportToViewerElementCoordinates:function(t){return this.pixelFromPoint(t,!0)},windowToViewportCoordinates:function(t){var e=t.minus(OpenSeadragon.getElementPosition(this.viewer.element));return this.viewerElementToViewportCoordinates(e)},viewportToWindowCoordinates:function(t){var e=this.viewportToViewerElementCoordinates(t);return e.plus(OpenSeadragon.getElementPosition(this.viewer.element))},viewportToImageZoom:function(t){var e=this.viewer.source.dimensions.x,n=this.getContainerSize().x,i=n/e;return t*i},imageToViewportZoom:function(t){var e=this.viewer.source.dimensions.x,n=this.getContainerSize().x,i=e/n;return t*i}}}(OpenSeadragon),function(t){function e(e){e.updateAgain=!1;var i,r,s,a,l,c,h,d,p=null,g=!1,m=t.now(),v=(e.viewport.getContainerSize(),e.viewport.getBounds(!0)),y=v.getTopLeft(),b=v.getBottomRight(),w=e.viewport.deltaPixelsFromPoints(e.source.getPixelRatio(0),!0).x*e._scale,x=Math.max(e.source.minLevel,Math.floor(Math.log(e.minZoomImageRatio)/Math.log(2))),T=Math.min(Math.abs(e.source.maxLevel),Math.abs(Math.floor(Math.log(w/e.minPixelRatio)/Math.log(2)))),S=e.viewport.degrees;for(y.x-=e._worldX,y.y-=e._worldY,b.x-=e._worldX,b.y-=e._worldY;e.lastDrawn.length>0;)i=e.lastDrawn.pop(),i.beingDrawn=!1;if(90===S||270===S){var _=v.rotate(S);y=_.getTopLeft(),b=_.getBottomRight()}else if(0!==S){var E=v.rotate(90);v.x-=E.width/2,v.y-=E.height/2,v.width+=E.width,v.height+=E.height,y=v.getTopLeft(),b=v.getBottomRight()}if(!(!e.wrapHorizontal&&(0>b.x||y.x>e._worldWidth)||!e.wrapVertical&&(0>b.y||y.y>e._worldHeight))){e.wrapHorizontal||(y.x=Math.max(y.x,0),b.x=Math.min(b.x,e._worldWidth)),e.wrapVertical||(y.y=Math.max(y.y,0),b.y=Math.min(b.y,e._worldHeight)),x=Math.min(x,T);var C;for(r=T;r>=x;r--){if(C=!1,s=e.viewport.deltaPixelsFromPoints(e.source.getPixelRatio(r),!0).x*e._scale,!g&&s>=e.minPixelRatio||r==x)C=!0,g=!0;else if(!g)continue;if(a=e.viewport.deltaPixelsFromPoints(e.source.getPixelRatio(r),!1).x*e._scale,l=e.viewport.deltaPixelsFromPoints(e.source.getPixelRatio(Math.max(e.source.getClosestLevel(e.viewport.containerSize)-1,0)),!1).x*e._scale,c=e.immediateRender?1:l,h=Math.min(1,(s-.5)/.5),d=c/Math.abs(c-a),p=n(e,g,C,r,h,d,y,b,m,p),u(e.coverage,r))break}f(e,e.lastDrawn),p&&(o(e,p,m),e.updateAgain=!0)}}function n(t,e,n,r,o,s,a,l,u,c){var h,p,f,g,m,v=t.viewport.pixelFromPoint(t.viewport.getCenter());for(t.viewer&&t.viewer.raiseEvent("update-level",{havedrawn:e,level:r,opacity:o,visibility:s,topleft:a,bottomright:l,currenttime:u,best:c}),f=t.source.getTileAtPoint(r,a.divide(t._scale)),g=t.source.getTileAtPoint(r,l.divide(t._scale)),m=t.source.getNumTiles(r),d(t.coverage,r),t.wrapHorizontal||(g.x=Math.min(g.x,m.x-1)),t.wrapVertical||(g.y=Math.min(g.y,m.y-1)),h=f.x;g.x>=h;h++)for(p=f.y;g.y>=p;p++)c=i(t,n,e,h,p,r,o,s,v,m,u,c);return c}function i(t,e,n,i,o,s,u,d,f,g,m,v){var y=r(i,o,s,t.source,t.tilesMatrix,m,g,t._worldWidth,t._worldHeight),b=e;if(t.viewer&&t.viewer.raiseEvent("update-tile",{tile:y}),h(t.coverage,s,i,o,!1),!y.exists)return v;if(n&&!b&&(c(t.coverage,s,i,o)?h(t.coverage,s,i,o,!0):b=!0),!b)return v;if(a(y,t.source.tileOverlap,t.viewport,f,d,t),y.loaded){var w=l(t,y,i,o,s,u,m);w&&(t.updateAgain=!0)}else y.loading||(v=p(v,y));return v}function r(e,n,i,r,o,s,a,l,u){var c,h,d,p,f,g;return o[i]||(o[i]={}),o[i][e]||(o[i][e]={}),o[i][e][n]||(c=(a.x+e%a.x)%a.x,h=(a.y+n%a.y)%a.y,d=r.getTileBounds(i,c,h),p=r.tileExists(i,c,h),f=r.getTileUrl(i,c,h),d.x+=l*(e-c)/a.x,d.y+=u*(n-h)/a.y,o[i][e][n]=new t.Tile(i,e,n,d,p,f)),g=o[i][e][n],g.lastTouchTime=s,g}function o(t,e,n){e.loading=!0,t._imageLoader.addJob({src:e.url,crossOriginPolicy:t.crossOriginPolicy,callback:function(i){s(t,e,n,i)}})}function s(e,n,i,r){if(n.loading=!1,e.midUpdate)return void t.console.warn("Tile load callback in middle of drawing routine.");if(r){if(e.lastResetTime>i)return void t.console.log("Ignoring tile %s loaded before reset: %s",n,n.url)}else if(t.console.log("Tile %s failed to load: %s",n,n.url),!e.debugMode)return void(n.exists=!1);n.loaded=!0,n.image=r;var o=Math.ceil(Math.log(e.source.getTileSize(n.level))/Math.log(2));e._tileCache.cacheTile({tile:n,cutoff:o,tiledImage:e}),e.updateAgain=!0}function a(e,n,i,r,o,s){var a=e.bounds.getTopLeft();a.x*=s._scale,a.y*=s._scale,a.x+=s._worldX,a.y+=s._worldY;var l=e.bounds.getSize();l.x*=s._scale,l.y*=s._scale;var u=i.pixelFromPoint(a,!0),c=i.pixelFromPoint(a,!1),h=i.deltaPixelsFromPoints(l,!0),d=i.deltaPixelsFromPoints(l,!1),p=c.plus(d.divide(2)),f=r.distanceTo(p);n||(h=h.plus(new t.Point(1,1))),e.position=u,e.size=h,e.distance=f,e.visibility=o}function l(t,e,n,i,r,o,s){var a,l,u=1e3*t.blendTime;if(e.blendStart||(e.blendStart=s),a=s-e.blendStart,l=u?Math.min(1,a/u):1,t.alwaysBlend&&(l*=o),e.opacity=l,t.lastDrawn.push(e),1==l)h(t.coverage,r,n,i,!0);else if(u>a)return!0;return!1}function u(t,e,n,i){var r,o,s,a;if(!t[e])return!1;if(void 0===n||void 0===i){r=t[e];for(s in r)if(r.hasOwnProperty(s)){o=r[s];for(a in o)if(o.hasOwnProperty(a)&&!o[a])return!1}return!0}return void 0===t[e][n]||void 0===t[e][n][i]||t[e][n][i]===!0}function c(t,e,n,i){return void 0===n||void 0===i?u(t,e+1):u(t,e+1,2*n,2*i)&&u(t,e+1,2*n,2*i+1)&&u(t,e+1,2*n+1,2*i)&&u(t,e+1,2*n+1,2*i+1)}function h(e,n,i,r,o){return e[n]?(e[n][i]||(e[n][i]={}),void(e[n][i][r]=o)):void t.console.warn("Setting coverage for a tile before its level's coverage has been reset: %s",n)}function d(t,e){t[e]={}}function p(t,e){return t?e.visibility>t.visibility?e:e.visibility==t.visibility&&e.distance<t.distance?e:t:e}function f(e,n){var i,r;for(i=n.length-1;i>=0;i--){if(r=n[i],e._drawer.drawTile(r),r.beingDrawn=!0,e.debugMode)try{e._drawer.drawDebugInfo(r,n.length,i)}catch(o){t.console.error(o)}e.viewer&&e.viewer.raiseEvent("tile-drawn",{tile:r})}}t.TiledImage=function(e){t.console.assert(e.tileCache,"[TiledImage] options.tileCache is required"),t.console.assert(e.drawer,"[TiledImage] options.drawer is required"),t.console.assert(e.viewer,"[TiledImage] options.viewer is required"),t.console.assert(e.imageLoader,"[TiledImage] options.imageLoader is required"),this._tileCache=e.tileCache,delete e.tileCache,this._drawer=e.drawer,delete e.drawer,this._imageLoader=e.imageLoader,delete e.imageLoader,this._worldX=e.x||0,delete e.x,this._worldY=e.y||0,delete e.y,this.normHeight=e.source.dimensions.y/e.source.dimensions.x,e.width?(this._scale=e.width,delete e.width,e.height&&(t.console.error("specifying both width and height to a tiledImage is not supported"),delete e.height)):e.height?(this._scale=e.height/this.normHeight,delete e.height):this._scale=1,this._worldWidth=this._scale,this._worldHeight=this.normHeight*this._scale,t.extend(!0,this,{viewer:null,tilesMatrix:{},coverage:{},lastDrawn:[],lastResetTime:0,midUpdate:!1,updateAgain:!0,minZoomImageRatio:t.DEFAULT_SETTINGS.minZoomImageRatio,wrapHorizontal:t.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:t.DEFAULT_SETTINGS.wrapVertical,immediateRender:t.DEFAULT_SETTINGS.immediateRender,blendTime:t.DEFAULT_SETTINGS.blendTime,alwaysBlend:t.DEFAULT_SETTINGS.alwaysBlend,minPixelRatio:t.DEFAULT_SETTINGS.minPixelRatio,debugMode:t.DEFAULT_SETTINGS.debugMode,crossOriginPolicy:t.DEFAULT_SETTINGS.crossOriginPolicy},e)},t.TiledImage.prototype={needsUpdate:function(){return this.updateAgain},reset:function(){return this._tileCache.clearTilesFor(this),this.lastResetTime=t.now(),this.updateAgain=!0,this},update:function(){return this.midUpdate=!0,e(this),this.midUpdate=!1,this},destroy:function(){this.reset()},getWorldBounds:function(){return new t.Rect(this._worldX,this._worldY,this._worldWidth,this._worldHeight)},getContentSize:function(){return new t.Point(this.source.dimensions.x,this.source.dimensions.y)}}}(OpenSeadragon),function(t){var e=function(e){t.console.assert(e,"[TileCache.cacheTile] params is required"),t.console.assert(e.tile,"[TileCache.cacheTile] params.tile is required"),t.console.assert(e.tiledImage,"[TileCache.cacheTile] params.tiledImage is required"),this.tile=e.tile,this.tiledImage=e.tiledImage};t.TileCache=function(e){e=e||{},this._tilesLoaded=[],this._maxImageCacheCount=e.maxImageCacheCount||t.DEFAULT_SETTINGS.maxImageCacheCount},t.TileCache.prototype={numTilesLoaded:function(){return this._tilesLoaded.length},cacheTile:function(n){t.console.assert(n,"[TileCache.cacheTile] params is required"),t.console.assert(n.tile,"[TileCache.cacheTile] params.tile is required"),t.console.assert(n.tiledImage,"[TileCache.cacheTile] params.tiledImage is required");var i=n.cutoff||0,r=this._tilesLoaded.length;if(this._tilesLoaded.length>=this._maxImageCacheCount){for(var o,s,a,l,u,c,h=null,d=-1,p=this._tilesLoaded.length-1;p>=0;p--)c=this._tilesLoaded[p],o=c.tile,i>=o.level||o.beingDrawn||(h?(l=o.lastTouchTime,s=h.lastTouchTime,u=o.level,a=h.level,(s>l||l==s&&u>a)&&(h=o,d=p)):(h=o,d=p));h&&d>=0&&(h.unload(),r=d)}this._tilesLoaded[r]=new e({tile:n.tile,tiledImage:n.tiledImage})},clearTilesFor:function(t){for(var e,n=0;this._tilesLoaded.length>n;++n)e=this._tilesLoaded[n],e.tiledImage===t&&(e.tile.unload(),this._tilesLoaded.splice(n,1),n--)}}}(OpenSeadragon),function(t){t.World=function(e){t.console.assert(e.viewer,"[World] options.viewer is required"),t.EventSource.call(this),this.viewer=e.viewer,this._items=[],this._figureSizes()},t.extend(t.World.prototype,t.EventSource.prototype,{addItem:function(e,n){if(t.console.assert(e,"[World.addItem] item is required"),t.console.assert(e instanceof t.TiledImage,"[World.addItem] only TiledImages supported at this time"),n=n||{},void 0!==n.index){var i=Math.max(0,Math.min(this._items.length,n.index));this._items.splice(i,0,e)}else this._items.push(e);this._figureSizes(),this.raiseEvent("add-item",{item:e})},getItemAt:function(e){return t.console.assert("undefined"!==e,"[World.getItemAt] index is required"),this._items[e]},getIndexOfItem:function(e){return t.console.assert(e,"[World.getIndexOfItem] item is required"),t.indexOf(this._items,e)},getItemCount:function(){return this._items.length},setItemIndex:function(e,n){t.console.assert(e,"[World.setItemIndex] item is required"),t.console.assert("undefined"!==n,"[World.setItemIndex] index is required");var i=this.getIndexOfItem(e);if(n>=this._items.length)throw Error("Index bigger than number of layers.");n!==i&&-1!==i&&(this._items.splice(i,1),this._items.splice(n,0,e),this.raiseEvent("item-index-changed",{item:e,previousIndex:i,newIndex:n}))},removeItem:function(e){t.console.assert(e,"[World.removeItem] item is required");var n=this._items.indexOf(e);-1!==n&&(this._items.splice(n,1),this._figureSizes(),this.raiseEvent("remove-item",{item:e}))},resetItems:function(){for(var t=0;this._items.length>t;t++)this._items[t].reset()},update:function(){for(var t=0;this._items.length>t;t++)this._items[t].update()},needsUpdate:function(){for(var t=0;this._items.length>t;t++)if(this._items[t].needsUpdate())return!0;return!1},getHomeBounds:function(){return this._homeBounds.clone()},getContentFactor:function(){return this._contentFactor},_figureSizes:function(){if(!this._items.length)return this._homeBounds=new t.Rect(0,0,1,1),void(this._contentSize=new t.Point(1,1));var e=this._items[0].getWorldBounds();this._contentFactor=this._items[0].getContentSize().x/e.width;for(var n,i=e.x,r=e.y,o=e.x+e.width,s=e.y+e.height,a=1;this._items.length>a;a++)n=this._items[a].getWorldBounds(),this._contentFactor=Math.max(this._contentFactor,this._items[a].getContentSize().x/e.width),i=Math.min(i,n.x),r=Math.min(r,n.y),o=Math.max(o,n.x+n.width),s=Math.max(s,n.y+n.height);this._homeBounds=new t.Rect(i,r,o-i,s-r),this._contentSize=new t.Point(this._homeBounds.width*this._contentFactor,this._homeBounds.height*this._contentFactor)}})}(OpenSeadragon),function(t,e,n,r){function o(e,n){this.element=e,this.options=t.extend({},u,n),this._defaults=u,this._name=l,this.init()}function s(){return!!("ontouchstart"in e)}function a(){var t=n.body||n.documentElement,e=t.style,i="transition";if("string"==typeof e[i])return!0;v=["Moz","Webkit","Khtml","O","ms"],i=i.charAt(0).toUpperCase()+i.substr(1);for(var r=0;v.length>r;r++)if("string"==typeof e[v[r]+i])return!0;return!1}var l="tooltipster",u={animation:"fade",arrow:!0,arrowColor:"",content:"",delay:200,fixedWidth:0,maxWidth:0,functionBefore:function(t,e){e()},functionReady:function(){},functionAfter:function(){},icon:"(?)",iconDesktop:!1,iconTouch:!1,iconTheme:".tooltipster-icon",interactive:!1,interactiveTolerance:350,offsetX:0,offsetY:0,onlyOne:!0,position:"top",speed:350,timer:0,theme:".tooltipster-default",touchDevices:!0,trigger:"hover",updateAnimation:!0},c=!0;a()||(c=!1);var h=s();t(e).on("mousemove.tooltipster",function(){h=!1,t(e).off("mousemove.tooltipster")}),o.prototype={init:function(){var e=t(this.element),i=this,o=!0;if(0==i.options.touchDevices&&h&&(o=!1),n.all&&!n.querySelector&&(o=!1),1==o){if(1==this.options.iconDesktop&&!h||1==this.options.iconTouch&&h){var s=e.attr("title");e.removeAttr("title");var a=i.options.iconTheme,l=t('<span class="'+a.replace(".","")+'" title="'+s+'">'+this.options.icon+"</span>");l.insertAfter(e),e.data("tooltipsterIcon",l),e=l}var u=t.trim(i.options.content).length>0?i.options.content:e.attr("title");e.data("tooltipsterContent",u),e.removeAttr("title"),1!=this.options.touchDevices||!h||"click"!=this.options.trigger&&"hover"!=this.options.trigger?("hover"==this.options.trigger&&(e.on("mouseenter.tooltipster",function(){i.showTooltip()}),1==this.options.interactive?e.on("mouseleave.tooltipster",function(){var t=e.data("tooltipster"),n=!1;t!==r&&""!==t?(t.mouseenter(function(){n=!0}),t.mouseleave(function(){n=!1}),setTimeout(function(){1==n?t.mouseleave(function(t){"SELECT"!=t.target.tagName&&"OPTION"!=t.target.tagName&&i.hideTooltip()}):i.hideTooltip()},i.options.interactiveTolerance)):i.hideTooltip()}):e.on("mouseleave.tooltipster",function(){i.hideTooltip()})),"click"==this.options.trigger&&e.on("click.tooltipster",function(){""==e.data("tooltipster")||e.data("tooltipster")==r?i.showTooltip():i.hideTooltip()})):e.bind("touchstart",function(){i.showTooltip()})}},showTooltip:function(){var e=t(this.element),n=this;e.data("tooltipsterIcon")!==r&&(e=e.data("tooltipsterIcon")),e.hasClass("tooltipster-disable")||(t(".tooltipster-base").not(".tooltipster-dying").length>0&&1==n.options.onlyOne&&t(".tooltipster-base").not(".tooltipster-dying").not(e.data("tooltipster")).each(function(){t(this).addClass("tooltipster-kill");var e=t(this).data("origin");e.data("plugin_tooltipster").hideTooltip()}),e.clearQueue().delay(n.options.delay).queue(function(){n.options.functionBefore(e,function(){if(e.data("tooltipster")!==r&&""!==e.data("tooltipster")){var i=e.data("tooltipster");if(!i.hasClass("tooltipster-kill")){var o="tooltipster-"+n.options.animation;if(i.removeClass("tooltipster-dying"),1==c&&i.clearQueue().addClass(o+"-show"),n.options.timer>0){var s=i.data("tooltipsterTimer");clearTimeout(s),s=setTimeout(function(){i.data("tooltipsterTimer",r),n.hideTooltip()},n.options.timer),i.data("tooltipsterTimer",s)}1==n.options.touchDevices&&h&&t("body").bind("touchstart",function(e){if(1==n.options.interactive){var i=t(e.target),r=!0;i.parents().each(function(){t(this).hasClass("tooltipster-base")&&(r=!1)}),1==r&&(n.hideTooltip(),t("body").unbind("touchstart"))}else n.hideTooltip(),t("body").unbind("touchstart")})}}else{t("body").css("overflow-x","hidden");var l=e.data("tooltipsterContent"),u=n.options.theme,d=u.replace(".",""),o="tooltipster-"+n.options.animation,p="-webkit-transition-duration: "+n.options.speed+"ms; -webkit-animation-duration: "+n.options.speed+"ms; -moz-transition-duration: "+n.options.speed+"ms; -moz-animation-duration: "+n.options.speed+"ms; -o-transition-duration: "+n.options.speed+"ms; -o-animation-duration: "+n.options.speed+"ms; -ms-transition-duration: "+n.options.speed+"ms; -ms-animation-duration: "+n.options.speed+"ms; transition-duration: "+n.options.speed+"ms; animation-duration: "+n.options.speed+"ms;",f=n.options.fixedWidth>0?"width:"+n.options.fixedWidth+"px;":"",g=n.options.maxWidth>0?"max-width:"+n.options.maxWidth+"px;":"",m=1==n.options.interactive?"pointer-events: auto;":"",i=t('<div class="tooltipster-base '+d+" "+o+'" style="'+f+" "+g+" "+m+" "+p+'"></div>'),v=t('<div class="tooltipster-content"></div>');
v.html(l),i.append(v),i.appendTo("body"),e.data("tooltipster",i),i.data("origin",e),n.positionTooltip(),n.options.functionReady(e,i),1==c?i.addClass(o+"-show"):i.css("display","none").removeClass(o).fadeIn(n.options.speed);var y=l,b=setInterval(function(){var r=e.data("tooltipsterContent");0==t("body").find(e).length?(i.addClass("tooltipster-dying"),n.hideTooltip()):y!==r&&""!==r&&(y=r,i.find(".tooltipster-content").html(r),1==n.options.updateAnimation&&(a()?(i.css({width:"","-webkit-transition":"all "+n.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-moz-transition":"all "+n.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-o-transition":"all "+n.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-ms-transition":"all "+n.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms",transition:"all "+n.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms"}).addClass("tooltipster-content-changing"),setTimeout(function(){i.removeClass("tooltipster-content-changing"),setTimeout(function(){i.css({"-webkit-transition":n.options.speed+"ms","-moz-transition":n.options.speed+"ms","-o-transition":n.options.speed+"ms","-ms-transition":n.options.speed+"ms",transition:n.options.speed+"ms"})},n.options.speed)},n.options.speed)):i.fadeTo(n.options.speed,.5,function(){i.fadeTo(n.options.speed,1)})),n.positionTooltip()),(0==t("body").find(i).length||0==t("body").find(e).length)&&clearInterval(b)},200);if(n.options.timer>0){var s=setTimeout(function(){i.data("tooltipsterTimer",r),n.hideTooltip()},n.options.timer+n.options.speed);i.data("tooltipsterTimer",s)}1==n.options.touchDevices&&h&&t("body").bind("touchstart",function(e){if(1==n.options.interactive){var i=t(e.target),r=!0;i.parents().each(function(){t(this).hasClass("tooltipster-base")&&(r=!1)}),1==r&&(n.hideTooltip(),t("body").unbind("touchstart"))}else n.hideTooltip(),t("body").unbind("touchstart")}),i.mouseleave(function(t){"SELECT"!=t.target.tagName&&"OPTION"!=t.target.tagName&&n.hideTooltip()})}}),e.dequeue()}))},hideTooltip:function(){var e=t(this.element),n=this;e.data("tooltipsterIcon")!==r&&(e=e.data("tooltipsterIcon"));var i=e.data("tooltipster");if(i==r&&(i=t(".tooltipster-dying")),e.clearQueue(),i!==r&&""!==i){var o=i.data("tooltipsterTimer");o!==r&&clearTimeout(o);var s="tooltipster-"+n.options.animation;1==c?i.clearQueue().removeClass(s+"-show").addClass("tooltipster-dying").delay(n.options.speed).queue(function(){i.remove(),e.data("tooltipster",""),t("body").css("verflow-x",""),n.options.functionAfter(e)}):i.clearQueue().addClass("tooltipster-dying").fadeOut(n.options.speed,function(){i.remove(),e.data("tooltipster",""),t("body").css("verflow-x",""),n.options.functionAfter(e)})}},positionTooltip:function(){function n(){var n=t(e).scrollLeft();if(0>L-n){var i=L-n;L=n,l.data("arrow-reposition",i)}if(L+d-n>u){var i=L-(u+n-d);L=u+n-d,l.data("arrow-reposition",i)}}function o(n,i){0>m-t(e).scrollTop()-f-R-12&&i.indexOf("top")>-1&&(a.options.position=n,y=i),m+h+f+12+R>t(e).scrollTop()+t(e).height()&&i.indexOf("bottom")>-1&&(a.options.position=n,y=i,D=m-f-R-12)}var s=t(this.element),a=this;if(s.data("tooltipsterIcon")!==r&&(s=s.data("tooltipsterIcon")),s.data("tooltipster")!==r&&""!==s.data("tooltipster")){var l=s.data("tooltipster");l.css("width","");var u=t(e).width(),c=s.outerWidth(!1),h=s.outerHeight(!1),d=l.outerWidth(!1),p=l.innerWidth()+1,f=l.outerHeight(!1),g=s.offset(),m=g.top,v=g.left,y=r;if(s.is("area")){var b=s.attr("shape"),w=s.parent().attr("name"),x=t('img[usemap="#'+w+'"]'),T=x.offset().left,S=x.offset().top,_=s.attr("coords")!==r?s.attr("coords").split(","):r;if("circle"==b){var E=parseInt(_[0]),C=parseInt(_[1]),k=parseInt(_[2]);h=2*k,c=2*k,m=S+C-k,v=T+E-k}else if("rect"==b){var E=parseInt(_[0]),C=parseInt(_[1]),M=parseInt(_[2]),P=parseInt(_[3]);h=P-C,c=M-E,m=S+C,v=T+E}else if("poly"==b){var I=0,z=0,A=0,H=0,O="even";for(i=0;_.length>i;i++){var N=parseInt(_[i]);"even"==O?(N>A&&(A=N,0==i&&(I=A)),I>N&&(I=N),O="odd"):(N>H&&(H=N,1==i&&(z=H)),z>N&&(z=N),O="even")}h=H-z,c=A-I,m=S+z,v=T+I}else h=x.outerHeight(!1),c=x.outerWidth(!1),m=S,v=T}0==a.options.fixedWidth&&l.css({width:p+"px","padding-left":"0px","padding-right":"0px"});var L=0,D=0,R=parseInt(a.options.offsetY),j=parseInt(a.options.offsetX),B="";if("top"==a.options.position){var F=v+d-(v+c);L=v+j-F/2,D=m-f-R-12,n(),o("bottom","top")}if("top-left"==a.options.position&&(L=v+j,D=m-f-R-12,n(),o("bottom-left","top-left")),"top-right"==a.options.position&&(L=v+c+j-d,D=m-f-R-12,n(),o("bottom-right","top-right")),"bottom"==a.options.position){var F=v+d-(v+c);L=v-F/2+j,D=m+h+R+12,n(),o("top","bottom")}if("bottom-left"==a.options.position&&(L=v+j,D=m+h+R+12,n(),o("top-left","bottom-left")),"bottom-right"==a.options.position&&(L=v+c+j-d,D=m+h+R+12,n(),o("top-right","bottom-right")),"left"==a.options.position){L=v-j-d-12,myLeftMirror=v+j+c+12;var W=m+f-(m+s.outerHeight(!1));if(D=m-W/2-R,0>L&&myLeftMirror+d>u){var U=2*parseFloat(l.css("border-width")),q=d+L-U;l.css("width",q+"px"),f=l.outerHeight(!1),L=v-j-q-12-U,W=m+f-(m+s.outerHeight(!1)),D=m-W/2-R}else 0>L&&(L=v+j+c+12,l.data("arrow-reposition","left"))}if("right"==a.options.position){L=v+j+c+12,myLeftMirror=v-j-d-12;var W=m+f-(m+s.outerHeight(!1));if(D=m-W/2-R,L+d>u&&0>myLeftMirror){var U=2*parseFloat(l.css("border-width")),q=u-L-U;l.css("width",q+"px"),f=l.outerHeight(!1),W=m+f-(m+s.outerHeight(!1)),D=m-W/2-R}else L+d>u&&(L=v-j-d-12,l.data("arrow-reposition","right"))}if(1==a.options.arrow){var V="tooltipster-arrow-"+a.options.position;if(1>a.options.arrowColor.length)var $=l.css("background-color");else var $=a.options.arrowColor;var Q=l.data("arrow-reposition");if(Q?"left"==Q?(V="tooltipster-arrow-right",Q=""):"right"==Q?(V="tooltipster-arrow-left",Q=""):Q="left:"+Q+"px;":Q="","top"==a.options.position||"top-left"==a.options.position||"top-right"==a.options.position)var G=parseFloat(l.css("border-bottom-width")),Z=l.css("border-bottom-color");else if("bottom"==a.options.position||"bottom-left"==a.options.position||"bottom-right"==a.options.position)var G=parseFloat(l.css("border-top-width")),Z=l.css("border-top-color");else if("left"==a.options.position)var G=parseFloat(l.css("border-right-width")),Z=l.css("border-right-color");else if("right"==a.options.position)var G=parseFloat(l.css("border-left-width")),Z=l.css("border-left-color");else var G=parseFloat(l.css("border-bottom-width")),Z=l.css("border-bottom-color");G>1&&G++;var X="";if(0!==G){var Y="",K="border-color: "+Z+";";-1!==V.indexOf("bottom")?Y="margin-top: -"+G+"px;":-1!==V.indexOf("top")?Y="margin-bottom: -"+G+"px;":-1!==V.indexOf("left")?Y="margin-right: -"+G+"px;":-1!==V.indexOf("right")&&(Y="margin-left: -"+G+"px;"),X='<span class="tooltipster-arrow-border" style="'+Y+" "+K+';"></span>'}l.find(".tooltipster-arrow").remove(),B='<div class="'+V+' tooltipster-arrow" style="'+Q+'">'+X+'<span style="border-color:'+$+';"></span></div>',l.append(B)}l.css({top:D+"px",left:L+"px"}),y!==r&&(a.options.position=y)}}},t.fn[l]=function(e){if("string"==typeof e){var n=this,i=arguments[1];if(n.data("plugin_tooltipster")==r){var s=n.find("*");n=t(),s.each(function(){t(this).data("plugin_tooltipster")!==r&&n.push(t(this))})}return n.each(function(){switch(e.toLowerCase()){case"show":t(this).data("plugin_tooltipster").showTooltip();break;case"hide":t(this).data("plugin_tooltipster").hideTooltip();break;case"disable":t(this).addClass("tooltipster-disable");break;case"enable":t(this).removeClass("tooltipster-disable");break;case"destroy":t(this).data("plugin_tooltipster").hideTooltip(),t(this).data("plugin_tooltipster","").attr("title",n.data("tooltipsterContent")).data("tooltipsterContent","").data("plugin_tooltipster","").off("mouseenter.tooltipster mouseleave.tooltipster click.tooltipster");break;case"update":if(t(this).data("tooltipsterIcon")==r)t(this).data("tooltipsterContent",i);else{var o=t(this).data("tooltipsterIcon");o.data("tooltipsterContent",i)}break;case"reposition":t(this).data("plugin_tooltipster").positionTooltip()}}),this}return this.each(function(){t.data(this,"plugin_"+l)||t.data(this,"plugin_"+l,new o(this,e));var n=t(this).data("plugin_tooltipster").options;if(1==n.iconDesktop&&!h||1==n.iconTouch&&h){var i=t(this).data("plugin_tooltipster");t(this).next().data("plugin_tooltipster",i)}})},h&&e.addEventListener("orientationchange",function(){t(".tooltipster-base").length>0&&t(".tooltipster-base").each(function(){var e=t(this).data("origin");e.data("plugin_tooltipster").hideTooltip()})},!1),t(e).on("resize.tooltipster",function(){var e=t(".tooltipster-base").data("origin");null!==e&&e!==r&&e.tooltipster("reposition")})}(jQuery,window,document),d3=function(){function t(t){return null!=t&&!isNaN(t)}function e(t){return t.length}function n(t){for(var e=1;t*e%1;)e*=10;return e}function i(t,e){try{for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}catch(i){t.prototype=e}}function r(){}function o(){}function s(t,e,n){return function(){var i=n.apply(e,arguments);return i===e?t:i}}function a(){}function l(t){function e(){for(var e,i=n,r=-1,o=i.length;o>++r;)(e=i[r].on)&&e.apply(this,arguments);return t}var n=[],i=new r;return e.on=function(e,r){var o,s=i.get(e);return 2>arguments.length?s&&s.on:(s&&(s.on=null,n=n.slice(0,o=n.indexOf(s)).concat(n.slice(o+1)),i.remove(e)),r&&n.push(i.set(e,{on:r})),t)},e}function u(){as.event.stopPropagation(),as.event.preventDefault()}function c(){for(var t,e=as.event;t=e.sourceEvent;)e=t;return e}function h(t,e){function n(){t.on(e,null)}t.on(e,function(){u(),n()},!0),setTimeout(n,0)}function d(t){for(var e=new a,n=0,i=arguments.length;i>++n;)e[arguments[n]]=l(e);return e.of=function(n,i){return function(r){try{var o=r.sourceEvent=as.event;r.target=t,as.event=r,e[r.type].apply(n,i)}finally{as.event=o}}},e}function p(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();if(0>ms&&(us.scrollX||us.scrollY)){n=as.select(ls.body).append("svg").style("position","absolute").style("top",0).style("left",0);var r=n[0][0].getScreenCTM();ms=!(r.f||r.e),n.remove()}return ms?(i.x=e.pageX,i.y=e.pageY):(i.x=e.clientX,i.y=e.clientY),i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}function f(t){for(var e=-1,n=t.length,i=[];n>++e;)i.push(t[e]);return i}function g(t){return Array.prototype.slice.call(t)}function m(t){return bs(t,Es),t}function v(t){return function(){return ws(t,this)}}function y(t){return function(){return xs(t,this)}}function b(t,e){function n(){this.removeAttribute(t)}function i(){this.removeAttributeNS(t.space,t.local)}function r(){this.setAttribute(t,e)}function o(){this.setAttributeNS(t.space,t.local,e)}function s(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}function a(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}return t=as.ns.qualify(t),null==e?t.local?i:n:"function"==typeof e?t.local?a:s:t.local?o:r}function w(t){return t.trim().replace(/\s+/g," ")}function x(t){return RegExp("(?:^|\\s+)"+as.requote(t)+"(?:\\s+|$)","g")}function T(t,e){function n(){for(var n=-1;r>++n;)t[n](this,e)}function i(){for(var n=-1,i=e.apply(this,arguments);r>++n;)t[n](this,i)}t=t.trim().split(/\s+/).map(S);var r=t.length;return"function"==typeof e?i:n}function S(t){var e=x(t);return function(n,i){if(r=n.classList)return i?r.add(t):r.remove(t);var r=n.getAttribute("class")||"";i?(e.lastIndex=0,e.test(r)||n.setAttribute("class",w(r+" "+t))):n.setAttribute("class",w(r.replace(e," ")))}}function _(t,e,n){function i(){this.style.removeProperty(t)}function r(){this.style.setProperty(t,e,n)}function o(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}return null==e?i:"function"==typeof e?o:r}function E(t,e){function n(){delete this[t]}function i(){this[t]=e}function r(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}return null==e?n:"function"==typeof e?r:i}function C(t){return{__data__:t}}function k(t){return function(){return _s(this,t)}}function M(t){return arguments.length||(t=as.ascending),function(e,n){return!e-!n||t(e.__data__,n.__data__)}}function P(){}function I(t,e,n){function i(){var e=this[s];e&&(this.removeEventListener(t,e,e.$),delete this[s])}function r(){var r=l(e,vs(arguments));i.call(this),this.addEventListener(t,this[s]=r,r.$=n),r._=e}function o(){var e,n=RegExp("^__on([^.]+)"+as.requote(t)+"$");for(var i in this)if(e=i.match(n)){var r=this[i];this.removeEventListener(e[1],r,r.$),delete this[i]}}var s="__on"+t,a=t.indexOf("."),l=z;a>0&&(t=t.substring(0,a));var u=Ms.get(t);return u&&(t=u,l=A),a?e?r:i:e?P:o}function z(t,e){return function(n){var i=as.event;as.event=n,e[0]=this.__data__;try{t.apply(this,e)}finally{as.event=i}}}function A(t,e){var n=z(t,e);return function(t){var e=this,i=t.relatedTarget;i&&(i===e||8&i.compareDocumentPosition(e))||n.call(e,t)}}function H(t,e){for(var n=0,i=t.length;i>n;n++)for(var r,o=t[n],s=0,a=o.length;a>s;s++)(r=o[s])&&e(r,s,n);return t}function O(t){return bs(t,Ps),t}function N(){}function L(t,e,n){return new D(t,e,n)}function D(t,e,n){this.h=t,this.s=e,this.l=n}function R(t,e,n){function i(t){return t>360?t-=360:0>t&&(t+=360),60>t?o+(s-o)*t/60:180>t?s:240>t?o+(s-o)*(240-t)/60:o}function r(t){return Math.round(255*i(t))}var o,s;return t=isNaN(t)?0:0>(t%=360)?t+360:t,e=isNaN(e)?0:0>e?0:e>1?1:e,n=0>n?0:n>1?1:n,s=.5>=n?n*(1+e):n+e-n*e,o=2*n-s,ee(r(t+120),r(t),r(t-120))}function j(t){return t>0?1:0>t?-1:0}function B(t){return Math.acos(Math.max(-1,Math.min(1,t)))}function F(t){return t>1?Ns/2:-1>t?-Ns/2:Math.asin(t)}function W(t){return(Math.exp(t)-Math.exp(-t))/2}function U(t){return(Math.exp(t)+Math.exp(-t))/2}function q(t){return(t=Math.sin(t/2))*t}function V(t,e,n){return new $(t,e,n)}function $(t,e,n){this.h=t,this.c=e,this.l=n}function Q(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),G(n,Math.cos(t*=Ds)*e,Math.sin(t)*e)}function G(t,e,n){return new Z(t,e,n)}function Z(t,e,n){this.l=t,this.a=e,this.b=n}function X(t,e,n){var i=(t+16)/116,r=i+e/500,o=i-n/200;return r=K(r)*Fs,i=K(i)*Ws,o=K(o)*Us,ee(te(3.2404542*r-1.5371385*i-.4985314*o),te(-.969266*r+1.8760108*i+.041556*o),te(.0556434*r-.2040259*i+1.0572252*o))}function Y(t,e,n){return t>0?V(Math.atan2(n,e)*Rs,Math.sqrt(e*e+n*n),t):V(0/0,0/0,t)}function K(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function J(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function te(t){return Math.round(255*(.00304>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function ee(t,e,n){return new ne(t,e,n)}function ne(t,e,n){this.r=t,this.g=e,this.b=n}function ie(t){return 16>t?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function re(t,e,n){var i,r,o,s=0,a=0,l=0;if(i=/([a-z]+)\((.*)\)/i.exec(t))switch(r=i[2].split(","),i[1]){case"hsl":return n(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100);case"rgb":return e(le(r[0]),le(r[1]),le(r[2]))}return(o=$s.get(t))?e(o.r,o.g,o.b):(null!=t&&"#"===t.charAt(0)&&(4===t.length?(s=t.charAt(1),s+=s,a=t.charAt(2),a+=a,l=t.charAt(3),l+=l):7===t.length&&(s=t.substring(1,3),a=t.substring(3,5),l=t.substring(5,7)),s=parseInt(s,16),a=parseInt(a,16),l=parseInt(l,16)),e(s,a,l))}function oe(t,e,n){var i,r,o=Math.min(t/=255,e/=255,n/=255),s=Math.max(t,e,n),a=s-o,l=(s+o)/2;return a?(r=.5>l?a/(s+o):a/(2-s-o),i=t==s?(e-n)/a+(n>e?6:0):e==s?(n-t)/a+2:(t-e)/a+4,i*=60):(i=0/0,r=l>0&&1>l?0:i),L(i,r,l)}function se(t,e,n){t=ae(t),e=ae(e),n=ae(n);var i=J((.4124564*t+.3575761*e+.1804375*n)/Fs),r=J((.2126729*t+.7151522*e+.072175*n)/Ws),o=J((.0193339*t+.119192*e+.9503041*n)/Us);return G(116*r-16,500*(i-r),200*(r-o))}function ae(t){return.04045>=(t/=255)?t/12.92:Math.pow((t+.055)/1.055,2.4)}function le(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function ue(t){return"function"==typeof t?t:function(){return t}}function ce(t){return t}function he(t){return function(e,n,i){return 2===arguments.length&&"function"==typeof n&&(i=n,n=null),de(e,n,t,i)}}function de(t,e,n,i){function r(){var t,e=l.status;if(!e&&l.responseText||e>=200&&300>e||304===e){try{t=n.call(o,l)}catch(i){return s.error.call(o,i),void 0}s.load.call(o,t)}else s.error.call(o,l)}var o={},s=as.dispatch("progress","load","error"),a={},l=new(us.XDomainRequest&&/^(http(s)?:)?\/\//.test(t)?XDomainRequest:XMLHttpRequest);return"onload"in l?l.onload=l.onerror=r:l.onreadystatechange=function(){l.readyState>3&&r()},l.onprogress=function(t){var e=as.event;as.event=t;try{s.progress.call(o,l)}finally{as.event=e}},o.header=function(t,e){return t=(t+"").toLowerCase(),2>arguments.length?a[t]:(null==e?delete a[t]:a[t]=e+"",o)},o.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",o):e},o.response=function(t){return n=t,o},["get","post"].forEach(function(t){o[t]=function(){return o.send.apply(o,[t].concat(vs(arguments)))}}),o.send=function(n,i,r){if(2===arguments.length&&"function"==typeof i&&(r=i,i=null),l.open(n,t,!0),null==e||"accept"in a||(a.accept=e+",*/*"),l.setRequestHeader)for(var s in a)l.setRequestHeader(s,a[s]);return null!=e&&l.overrideMimeType&&l.overrideMimeType(e),null!=r&&o.on("error",r).on("load",function(t){r(null,t)}),l.send(null==i?null:i),o},o.abort=function(){return l.abort(),o},as.rebind(o,s,"on"),null==i?o:o.get(pe(i))}function pe(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}function fe(t,e){function n(t,n,o){3>arguments.length&&(o=n,n=null);var s=as.xhr(t,e,o);return s.row=function(t){return arguments.length?s.response(null==(n=t)?i:r(t)):n},s.row(n)}function i(t){return n.parse(t.responseText)}function r(t){return function(e){return n.parse(e.responseText,t)}}function s(e){return e.map(a).join(t)}function a(t){return l.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var l=RegExp('["'+t+"\n]"),u=t.charCodeAt(0);return n.parse=function(t,e){var i;return n.parseRows(t,function(t,n){if(i)return i(t,n-1);var r=Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");i=e?function(t,n){return e(r(t),n)}:r})},n.parseRows=function(t,e){function n(){if(c>=l)return s;if(r)return r=!1,o;var e=c;if(34===t.charCodeAt(e)){for(var n=e;l>n++;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}c=n+2;var i=t.charCodeAt(n+1);return 13===i?(r=!0,10===t.charCodeAt(n+2)&&++c):10===i&&(r=!0),t.substring(e+1,n).replace(/""/g,'"')}for(;l>c;){var i=t.charCodeAt(c++),a=1;if(10===i)r=!0;else if(13===i)r=!0,10===t.charCodeAt(c)&&(++c,++a);else if(i!==u)continue;return t.substring(e,c-a)}return t.substring(e)}for(var i,r,o={},s={},a=[],l=t.length,c=0,h=0;(i=n())!==s;){for(var d=[];i!==o&&i!==s;)d.push(i),i=n();(!e||(d=e(d,h++)))&&a.push(d)}return a},n.format=function(e){if(Array.isArray(e[0]))return n.formatRows(e);var i=new o,r=[];return e.forEach(function(t){for(var e in t)i.has(e)||r.push(i.add(e))}),[r.map(a).join(t)].concat(e.map(function(e){return r.map(function(t){return a(e[t])}).join(t)})).join("\n")},n.formatRows=function(t){return t.map(s).join("\n")},n}function ge(){var t=me(),e=ve()-t;e>24?(isFinite(e)&&(clearTimeout(Xs),Xs=setTimeout(ge,e)),Zs=0):(Zs=1,Ys(ge))}function me(){for(var t=Date.now(),e=Qs;e;)t>=e.time&&(e.flush=e.callback(t-e.time)),e=e.next;return t}function ve(){for(var t,e=Qs,n=1/0;e;)e.flush?e=t?t.next=e.next:Qs=e.next:(n>e.time&&(n=e.time),e=(t=e).next);return Gs=t,n}function ye(t,e){var n=Math.pow(10,3*Math.abs(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}}function be(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function we(t){return t+""}function xe(t,e){t&&aa.hasOwnProperty(t.type)&&aa[t.type](t,e)}function Te(t,e,n){var i,r=-1,o=t.length-n;for(e.lineStart();o>++r;)i=t[r],e.point(i[0],i[1]);e.lineEnd()}function Se(t,e){var n=-1,i=t.length;for(e.polygonStart();i>++n;)Te(t[n],e,1);e.polygonEnd()}function _e(){function t(t,e){t*=Ds,e=e*Ds/2+Ns/4;var n=t-i,s=Math.cos(e),a=Math.sin(e),l=o*a,u=r*s+l*Math.cos(n),c=l*Math.sin(n);ua+=Math.atan2(c,u),i=t,r=s,o=a}var e,n,i,r,o;ca.point=function(s,a){ca.point=t,i=(e=s)*Ds,r=Math.cos(a=(n=a)*Ds/2+Ns/4),o=Math.sin(a)},ca.lineEnd=function(){t(e,n)}}function Ee(t){var e=t[0],n=t[1],i=Math.cos(n);return[i*Math.cos(e),i*Math.sin(e),Math.sin(n)]}function Ce(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function ke(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Me(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Pe(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Ie(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function ze(t){return[Math.atan2(t[1],t[0]),Math.asin(Math.max(-1,Math.min(1,t[2])))]}function Ae(t,e){return Ls>Math.abs(t[0]-e[0])&&Ls>Math.abs(t[1]-e[1])}function He(t,e){if(!ha){++da,t*=Ds;var n=Math.cos(e*=Ds);pa+=(n*Math.cos(t)-pa)/da,fa+=(n*Math.sin(t)-fa)/da,ga+=(Math.sin(e)-ga)/da}}function Oe(){var t,e;ha=1,Ne(),ha=2;var n=ma.point;ma.point=function(i,r){n(t=i,e=r)},ma.lineEnd=function(){ma.point(t,e),Le(),ma.lineEnd=Le}}function Ne(){function t(t,r){t*=Ds;var o=Math.cos(r*=Ds),s=o*Math.cos(t),a=o*Math.sin(t),l=Math.sin(r),u=Math.atan2(Math.sqrt((u=n*l-i*a)*u+(u=i*s-e*l)*u+(u=e*a-n*s)*u),e*s+n*a+i*l);da+=u,pa+=u*(e+(e=s)),fa+=u*(n+(n=a)),ga+=u*(i+(i=l))}var e,n,i;ha>1||(1>ha&&(ha=1,da=pa=fa=ga=0),ma.point=function(r,o){r*=Ds;var s=Math.cos(o*=Ds);e=s*Math.cos(r),n=s*Math.sin(r),i=Math.sin(o),ma.point=t})}function Le(){ma.point=He}function De(){return!0}function Re(t,e,n,i,r){var o=[],s=[];if(t.forEach(function(t){if(!(0>=(e=t.length-1))){var e,n=t[0],i=t[e];if(Ae(n,i)){r.lineStart();for(var a=0;e>a;++a)r.point((n=t[a])[0],n[1]);return r.lineEnd(),void 0}var l={point:n,points:t,other:null,visited:!1,entry:!0,subject:!0},u={point:n,points:[n],other:l,visited:!1,entry:!1,subject:!1};l.other=u,o.push(l),s.push(u),l={point:i,points:[i],other:null,visited:!1,entry:!1,subject:!0},u={point:i,points:[i],other:l,visited:!1,entry:!0,subject:!1},l.other=u,o.push(l),s.push(u)}}),s.sort(e),je(o),je(s),o.length){if(n)for(var a=1,l=!n(s[0].point),u=s.length;u>a;++a)s[a].entry=l=!l;for(var c,h,d,p=o[0];;){for(c=p;c.visited;)if((c=c.next)===p)return;h=c.points,r.lineStart();do{if(c.visited=c.other.visited=!0,c.entry){if(c.subject)for(var a=0;h.length>a;a++)r.point((d=h[a])[0],d[1]);else i(c.point,c.next.point,1,r);c=c.next}else{if(c.subject){h=c.prev.points;for(var a=h.length;--a>=0;)r.point((d=h[a])[0],d[1])}else i(c.point,c.prev.point,-1,r);c=c.prev}c=c.other,h=c.points}while(!c.visited);r.lineEnd()}}}function je(t){if(e=t.length){for(var e,n,i=0,r=t[0];e>++i;)r.next=n=t[i],n.prev=r,r=n;r.next=n=t[0],n.prev=r}}function Be(t,e,n){return function(i){function r(e,n){t(e,n)&&i.point(e,n)}function o(t,e){m.point(t,e)}function s(){v.point=o,m.lineStart()}function a(){v.point=r,m.lineEnd()}function l(t,e){b.point(t,e),g.push([t,e])}function u(){b.lineStart(),g=[]}function c(){l(g[0][0],g[0][1]),b.lineEnd();var t,e=b.clean(),n=y.buffer(),r=n.length;if(!r)return f=!0,p+=Ue(g,-1),g=null,void 0;if(g=null,1&e){t=n[0],d+=Ue(t,1);var o,r=t.length-1,s=-1;for(i.lineStart();r>++s;)i.point((o=t[s])[0],o[1]);return i.lineEnd(),void 0}r>1&&2&e&&n.push(n.pop().concat(n.shift())),h.push(n.filter(Fe))}var h,d,p,f,g,m=e(i),v={point:r,lineStart:s,lineEnd:a,polygonStart:function(){v.point=l,v.lineStart=u,v.lineEnd=c,f=!1,p=d=0,h=[],i.polygonStart()},polygonEnd:function(){v.point=r,v.lineStart=s,v.lineEnd=a,h=as.merge(h),h.length?Re(h,qe,null,n,i):(-Ls>d||f&&-Ls>p)&&(i.lineStart(),n(null,null,1,i),i.lineEnd()),i.polygonEnd(),h=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}},y=We(),b=e(y);return v}}function Fe(t){return t.length>1}function We(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:P,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function Ue(t,e){if(!(n=t.length))return 0;for(var n,i,r,o=0,s=0,a=t[0],l=a[0],u=a[1],c=Math.cos(u),h=Math.atan2(e*Math.sin(l)*c,Math.sin(u)),d=1-e*Math.cos(l)*c,p=h;n>++o;)a=t[o],c=Math.cos(u=a[1]),i=Math.atan2(e*Math.sin(l=a[0])*c,Math.sin(u)),r=1-e*Math.cos(l)*c,Ls>Math.abs(d-2)&&Ls>Math.abs(r-2)||(Ls>Math.abs(r)||Ls>Math.abs(d)||(Ls>Math.abs(Math.abs(i-h)-Ns)?r+d>2&&(s+=4*(i-h)):s+=Ls>Math.abs(d-2)?4*(i-p):((3*Ns+i-h)%(2*Ns)-Ns)*(d+r)),p=h,h=i,d=r);return s}function qe(t,e){return(0>(t=t.point)[0]?t[1]-Ns/2-Ls:Ns/2-t[1])-(0>(e=e.point)[0]?e[1]-Ns/2-Ls:Ns/2-e[1])}function Ve(t){var e,n=0/0,i=0/0,r=0/0;return{lineStart:function(){t.lineStart(),e=1},point:function(o,s){var a=o>0?Ns:-Ns,l=Math.abs(o-n);Ls>Math.abs(l-Ns)?(t.point(n,i=(i+s)/2>0?Ns/2:-Ns/2),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(a,i),t.point(o,i),e=0):r!==a&&l>=Ns&&(Ls>Math.abs(n-r)&&(n-=r*Ls),Ls>Math.abs(o-a)&&(o-=a*Ls),i=$e(n,i,o,s),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(a,i),e=0),t.point(n=o,i=s),r=a},lineEnd:function(){t.lineEnd(),n=i=0/0},clean:function(){return 2-e}}}function $e(t,e,n,i){var r,o,s=Math.sin(t-n);return Math.abs(s)>Ls?Math.atan((Math.sin(e)*(o=Math.cos(i))*Math.sin(n)-Math.sin(i)*(r=Math.cos(e))*Math.sin(t))/(r*o*s)):(e+i)/2}function Qe(t,e,n,i){var r;if(null==t)r=n*Ns/2,i.point(-Ns,r),i.point(0,r),i.point(Ns,r),i.point(Ns,0),i.point(Ns,-r),i.point(0,-r),i.point(-Ns,-r),i.point(-Ns,0),i.point(-Ns,r);else if(Math.abs(t[0]-e[0])>Ls){var o=(t[0]<e[0]?1:-1)*Ns;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(e[0],e[1])}function Ge(t){function e(t,e){return Math.cos(t)*Math.cos(e)>o}function n(t){var n,o,l,u,c;return{lineStart:function(){u=l=!1,c=1},point:function(h,d){var p,f=[h,d],g=e(h,d),m=s?g?0:r(h,d):g?r(h+(0>h?Ns:-Ns),d):0;if(!n&&(u=l=g)&&t.lineStart(),g!==l&&(p=i(n,f),(Ae(n,p)||Ae(f,p))&&(f[0]+=Ls,f[1]+=Ls,g=e(f[0],f[1]))),g!==l)c=0,g?(t.lineStart(),p=i(f,n),t.point(p[0],p[1])):(p=i(n,f),t.point(p[0],p[1]),t.lineEnd()),n=p;else if(a&&n&&s^g){var v;m&o||!(v=i(f,n,!0))||(c=0,s?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!g||n&&Ae(n,f)||t.point(f[0],f[1]),n=f,l=g,o=m},lineEnd:function(){l&&t.lineEnd(),n=null},clean:function(){return c|(u&&l)<<1}}}function i(t,e,n){var i=Ee(t),r=Ee(e),s=[1,0,0],a=ke(i,r),l=Ce(a,a),u=a[0],c=l-u*u;if(!c)return!n&&t;var h=o*l/c,d=-o*u/c,p=ke(s,a),f=Pe(s,h),g=Pe(a,d);Me(f,g);var m=p,v=Ce(f,m),y=Ce(m,m),b=v*v-y*(Ce(f,f)-1);if(!(0>b)){var w=Math.sqrt(b),x=Pe(m,(-v-w)/y);if(Me(x,f),x=ze(x),!n)return x;var T,S=t[0],_=e[0],E=t[1],C=e[1];S>_&&(T=S,S=_,_=T);var k=_-S,M=Ls>Math.abs(k-Ns),P=M||Ls>k;if(!M&&E>C&&(T=E,E=C,C=T),P?M?E+C>0^x[1]<(Ls>Math.abs(x[0]-S)?E:C):x[1]>=E&&C>=x[1]:k>Ns^(x[0]>=S&&_>=x[0])){var I=Pe(m,(-v+w)/y);return Me(I,f),[x,ze(I)]}}}function r(e,n){var i=s?t:Ns-t,r=0;return-i>e?r|=1:e>i&&(r|=2),-i>n?r|=4:n>i&&(r|=8),r}var o=Math.cos(t),s=o>0,a=Math.abs(o)>Ls,l=ln(t,6*Ds);return Be(e,n,l)}function Ze(t,e,n,i){function r(i,r){return Ls>Math.abs(i[0]-t)?r>0?0:3:Ls>Math.abs(i[0]-n)?r>0?2:1:Ls>Math.abs(i[1]-e)?r>0?1:0:r>0?3:2}function o(t,e){return s(t.point,e.point)}function s(t,e){var n=r(t,1),i=r(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}function a(r,o){var s=o[0]-r[0],a=o[1]-r[1],l=[0,1];return Ls>Math.abs(s)&&Ls>Math.abs(a)?r[0]>=t&&n>=r[0]&&r[1]>=e&&i>=r[1]:Xe(t-r[0],s,l)&&Xe(r[0]-n,-s,l)&&Xe(e-r[1],a,l)&&Xe(r[1]-i,-a,l)?(1>l[1]&&(o[0]=r[0]+l[1]*s,o[1]=r[1]+l[1]*a),l[0]>0&&(r[0]+=l[0]*s,r[1]+=l[0]*a),!0):!1}return function(l){function u(o){var s=r(o,-1),a=c([0===s||3===s?t:n,s>1?i:e]);return a}function c(t){for(var e=0,n=b.length,i=t[1],r=0;n>r;++r)for(var o,s=1,a=b[r],l=a.length,u=a[0];l>s;++s)o=a[s],i>=u[1]?o[1]>i&&h(u,o,t)>0&&++e:i>=o[1]&&0>h(u,o,t)&&--e,u=o;return 0!==e}function h(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])}function d(o,a,l,u){var c=0,h=0;if(null==o||(c=r(o,l))!==(h=r(a,l))||0>s(o,a)^l>0){do u.point(0===c||3===c?t:n,c>1?i:e);while((c=(c+l+4)%4)!==h)}else u.point(a[0],a[1])}function p(r,o){return r>=t&&n>=r&&o>=e&&i>=o}function f(t,e){p(t,e)&&l.point(t,e)}function g(){I.point=v,b&&b.push(w=[]),k=!0,C=!1,_=E=0/0}function m(){y&&(v(x,T),S&&C&&P.rejoin(),y.push(P.buffer())),I.point=f,C&&l.lineEnd()}function v(t,e){t=Math.max(-ya,Math.min(ya,t)),e=Math.max(-ya,Math.min(ya,e));var n=p(t,e);if(b&&w.push([t,e]),k)x=t,T=e,S=n,k=!1,n&&(l.lineStart(),l.point(t,e));else if(n&&C)l.point(t,e);else{var i=[_,E],r=[t,e];a(i,r)?(C||(l.lineStart(),l.point(i[0],i[1])),l.point(r[0],r[1]),n||l.lineEnd()):n&&(l.lineStart(),l.point(t,e))}_=t,E=e,C=n}var y,b,w,x,T,S,_,E,C,k,M=l,P=We(),I={point:f,lineStart:g,lineEnd:m,polygonStart:function(){l=P,y=[],b=[]},polygonEnd:function(){l=M,(y=as.merge(y)).length?(l.polygonStart(),Re(y,o,u,d,l),l.polygonEnd()):c([t,e])&&(l.polygonStart(),l.lineStart(),d(null,null,1,l),l.lineEnd(),l.polygonEnd()),y=b=w=null}};return I}}function Xe(t,e,n){if(Ls>Math.abs(e))return 0>=t;var i=t/e;if(e>0){if(i>n[1])return!1;i>n[0]&&(n[0]=i)}else{if(n[0]>i)return!1;n[1]>i&&(n[1]=i)}return!0}function Ye(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return n=e.invert(n,i),n&&t.invert(n[0],n[1])}),n}function Ke(t){function e(e){function i(n,i){n=t(n,i),e.point(n[0],n[1])}function o(){c=0/0,g.point=s,e.lineStart()}function s(i,o){var s=Ee([i,o]),a=t(i,o);n(c,h,u,d,p,f,c=a[0],h=a[1],u=i,d=s[0],p=s[1],f=s[2],r,e),e.point(c,h)}function a(){g.point=i,e.lineEnd()}function l(){var t,i,l,m,v,y,b;o(),g.point=function(e,n){s(t=e,i=n),l=c,m=h,v=d,y=p,b=f,g.point=s},g.lineEnd=function(){n(c,h,u,d,p,f,l,m,t,v,y,b,r,e),g.lineEnd=a,a()}}var u,c,h,d,p,f,g={point:i,lineStart:o,lineEnd:a,polygonStart:function(){e.polygonStart(),g.lineStart=l},polygonEnd:function(){e.polygonEnd(),g.lineStart=o}};return g}function n(e,r,o,s,a,l,u,c,h,d,p,f,g,m){var v=u-e,y=c-r,b=v*v+y*y;if(b>4*i&&g--){var w=s+d,x=a+p,T=l+f,S=Math.sqrt(w*w+x*x+T*T),_=Math.asin(T/=S),E=Ls>Math.abs(Math.abs(T)-1)?(o+h)/2:Math.atan2(x,w),C=t(E,_),k=C[0],M=C[1],P=k-e,I=M-r,z=y*P-v*I;(z*z/b>i||Math.abs((v*P+y*I)/b-.5)>.3)&&(n(e,r,o,s,a,l,k,M,E,w/=S,x/=S,T,g,m),m.point(k,M),n(k,M,E,w,x,T,u,c,h,d,p,f,g,m))}}var i=.5,r=16;return e.precision=function(t){return arguments.length?(r=(i=t*t)>0&&16,e):Math.sqrt(i)},e}function Je(t){return tn(function(){return t})()}function tn(t){function e(t){return t=s(t[0]*Ds,t[1]*Ds),[t[0]*c+a,l-t[1]*c]}function n(t){return t=s.invert((t[0]-a)/c,(l-t[1])/c),t&&[t[0]*Rs,t[1]*Rs]}function i(){s=Ye(o=rn(g,m,v),r);var t=r(p,f);return a=h-t[0]*c,l=d+t[1]*c,e}var r,o,s,a,l,u=Ke(function(t,e){return t=r(t,e),[t[0]*c+a,l-t[1]*c]}),c=150,h=480,d=250,p=0,f=0,g=0,m=0,v=0,y=va,b=ce,w=null,x=null;return e.stream=function(t){return en(o,y(u(b(t))))},e.clipAngle=function(t){return arguments.length?(y=null==t?(w=t,va):Ge((w=+t)*Ds),e):w},e.clipExtent=function(t){return arguments.length?(x=t,b=null==t?ce:Ze(t[0][0],t[0][1],t[1][0],t[1][1]),e):x},e.scale=function(t){return arguments.length?(c=+t,i()):c},e.translate=function(t){return arguments.length?(h=+t[0],d=+t[1],i()):[h,d]},e.center=function(t){return arguments.length?(p=t[0]%360*Ds,f=t[1]%360*Ds,i()):[p*Rs,f*Rs]},e.rotate=function(t){return arguments.length?(g=t[0]%360*Ds,m=t[1]%360*Ds,v=t.length>2?t[2]%360*Ds:0,i()):[g*Rs,m*Rs,v*Rs]},as.rebind(e,u,"precision"),function(){return r=t.apply(this,arguments),e.invert=r.invert&&n,i()}}function en(t,e){return{point:function(n,i){i=t(n*Ds,i*Ds),n=i[0],e.point(n>Ns?n-2*Ns:-Ns>n?n+2*Ns:n,i[1])},sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function nn(t,e){return[t,e]}function rn(t,e,n){return t?e||n?Ye(sn(t),an(e,n)):sn(t):e||n?an(e,n):nn}function on(t){return function(e,n){return e+=t,[e>Ns?e-2*Ns:-Ns>e?e+2*Ns:e,n]}}function sn(t){var e=on(t);return e.invert=on(-t),e}function an(t,e){function n(t,e){var n=Math.cos(e),a=Math.cos(t)*n,l=Math.sin(t)*n,u=Math.sin(e),c=u*i+a*r;
return[Math.atan2(l*o-c*s,a*i-u*r),Math.asin(Math.max(-1,Math.min(1,c*o+l*s)))]}var i=Math.cos(t),r=Math.sin(t),o=Math.cos(e),s=Math.sin(e);return n.invert=function(t,e){var n=Math.cos(e),a=Math.cos(t)*n,l=Math.sin(t)*n,u=Math.sin(e),c=u*o-l*s;return[Math.atan2(l*o+u*s,a*i+c*r),Math.asin(Math.max(-1,Math.min(1,c*i-a*r)))]},n}function ln(t,e){var n=Math.cos(t),i=Math.sin(t);return function(r,o,s,a){null!=r?(r=un(n,r),o=un(n,o),(s>0?o>r:r>o)&&(r+=2*s*Ns)):(r=t+2*s*Ns,o=t);for(var l,u=s*e,c=r;s>0?c>o:o>c;c-=u)a.point((l=ze([n,-i*Math.cos(c),-i*Math.sin(c)]))[0],l[1])}}function un(t,e){var n=Ee(e);n[0]-=t,Ie(n);var i=B(-n[1]);return((0>-n[2]?-i:i)+2*Math.PI-Ls)%(2*Math.PI)}function cn(t,e,n){var i=as.range(t,e-Ls,n).concat(e);return function(t){return i.map(function(e){return[t,e]})}}function hn(t,e,n){var i=as.range(t,e-Ls,n).concat(e);return function(t){return i.map(function(e){return[e,t]})}}function dn(t){return t.source}function pn(t){return t.target}function fn(t,e,n,i){var r=Math.cos(e),o=Math.sin(e),s=Math.cos(i),a=Math.sin(i),l=r*Math.cos(t),u=r*Math.sin(t),c=s*Math.cos(n),h=s*Math.sin(n),d=2*Math.asin(Math.sqrt(q(i-e)+r*s*q(n-t))),p=1/Math.sin(d),f=d?function(t){var e=Math.sin(t*=d)*p,n=Math.sin(d-t)*p,i=n*l+e*c,r=n*u+e*h,s=n*o+e*a;return[Math.atan2(r,i)*Rs,Math.atan2(s,Math.sqrt(i*i+r*r))*Rs]}:function(){return[t*Rs,e*Rs]};return f.distance=d,f}function gn(){function t(t,r){var o=Math.sin(r*=Ds),s=Math.cos(r),a=Math.abs((t*=Ds)-e),l=Math.cos(a);ba+=Math.atan2(Math.sqrt((a=s*Math.sin(a))*a+(a=i*o-n*s*l)*a),n*o+i*s*l),e=t,n=o,i=s}var e,n,i;wa.point=function(r,o){e=r*Ds,n=Math.sin(o*=Ds),i=Math.cos(o),wa.point=t},wa.lineEnd=function(){wa.point=wa.lineEnd=P}}function mn(t){var e=0,n=Ns/3,i=tn(t),r=i(e,n);return r.parallels=function(t){return arguments.length?i(e=t[0]*Ns/180,n=t[1]*Ns/180):[180*(e/Ns),180*(n/Ns)]},r}function vn(t,e){function n(t,e){var n=Math.sqrt(o-2*r*Math.sin(e))/r;return[n*Math.sin(t*=r),s-n*Math.cos(t)]}var i=Math.sin(t),r=(i+Math.sin(e))/2,o=1+i*(2*r-i),s=Math.sqrt(o)/r;return n.invert=function(t,e){var n=s-e;return[Math.atan2(t,n)/r,F((o-(t*t+n*n)*r*r)/(2*r))]},n}function yn(){function t(t,e){Ta+=r*t-i*e,i=t,r=e}var e,n,i,r;ka.point=function(o,s){ka.point=t,e=i=o,n=r=s},ka.lineEnd=function(){t(e,n)}}function bn(t,e){Sa>t&&(Sa=t),t>Ea&&(Ea=t),_a>e&&(_a=e),e>Ca&&(Ca=e)}function wn(){function t(t,e){s.push("M",t,",",e,o)}function e(t,e){s.push("M",t,",",e),a.point=n}function n(t,e){s.push("L",t,",",e)}function i(){a.point=t}function r(){s.push("Z")}var o=xn(4.5),s=[],a={point:t,lineStart:function(){a.point=e},lineEnd:i,polygonStart:function(){a.lineEnd=r},polygonEnd:function(){a.lineEnd=i,a.point=t},pointRadius:function(t){return o=xn(t),a},result:function(){if(s.length){var t=s.join("");return s=[],t}}};return a}function xn(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Tn(t,e){ha||(pa+=t,fa+=e,++ga)}function Sn(){function t(t,i){var r=t-e,o=i-n,s=Math.sqrt(r*r+o*o);pa+=s*(e+t)/2,fa+=s*(n+i)/2,ga+=s,e=t,n=i}var e,n;if(1!==ha){if(!(1>ha))return;ha=1,pa=fa=ga=0}Pa.point=function(i,r){Pa.point=t,e=i,n=r}}function _n(){Pa.point=Tn}function En(){function t(t,e){var n=r*t-i*e;pa+=n*(i+t),fa+=n*(r+e),ga+=3*n,i=t,r=e}var e,n,i,r;2>ha&&(ha=2,pa=fa=ga=0),Pa.point=function(o,s){Pa.point=t,e=i=o,n=r=s},Pa.lineEnd=function(){t(e,n)}}function Cn(t){function e(e,n){t.moveTo(e,n),t.arc(e,n,s,0,2*Ns)}function n(e,n){t.moveTo(e,n),a.point=i}function i(e,n){t.lineTo(e,n)}function r(){a.point=e}function o(){t.closePath()}var s=4.5,a={point:e,lineStart:function(){a.point=n},lineEnd:r,polygonStart:function(){a.lineEnd=o},polygonEnd:function(){a.lineEnd=r,a.point=e},pointRadius:function(t){return s=t,a},result:P};return a}function kn(t){var e=Ke(function(e,n){return t([e*Rs,n*Rs])});return function(t){return t=e(t),{point:function(e,n){t.point(e*Ds,n*Ds)},sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}}function Mn(t,e){function n(e,n){var i=Math.cos(e),r=Math.cos(n),o=t(i*r);return[o*r*Math.sin(e),o*Math.sin(n)]}return n.invert=function(t,n){var i=Math.sqrt(t*t+n*n),r=e(i),o=Math.sin(r),s=Math.cos(r);return[Math.atan2(t*o,i*s),Math.asin(i&&n*o/i)]},n}function Pn(t,e){function n(t,e){var n=Ls>Math.abs(Math.abs(e)-Ns/2)?0:s/Math.pow(r(e),o);return[n*Math.sin(o*t),s-n*Math.cos(o*t)]}var i=Math.cos(t),r=function(t){return Math.tan(Ns/4+t/2)},o=t===e?Math.sin(t):Math.log(i/Math.cos(e))/Math.log(r(e)/r(t)),s=i*Math.pow(r(t),o)/o;return o?(n.invert=function(t,e){var n=s-e,i=j(o)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/o,2*Math.atan(Math.pow(s/i,1/o))-Ns/2]},n):zn}function In(t,e){function n(t,e){var n=o-e;return[n*Math.sin(r*t),o-n*Math.cos(r*t)]}var i=Math.cos(t),r=t===e?Math.sin(t):(i-Math.cos(e))/(e-t),o=i/r+t;return Ls>Math.abs(r)?nn:(n.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/r,o-j(r)*Math.sqrt(t*t+n*n)]},n)}function zn(t,e){return[t,Math.log(Math.tan(Ns/4+e/2))]}function An(t){var e,n=Je(t),i=n.scale,r=n.translate,o=n.clipExtent;return n.scale=function(){var t=i.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.translate=function(){var t=r.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.clipExtent=function(t){var s=o.apply(n,arguments);if(s===n){if(e=null==t){var a=Ns*i(),l=r();o([[l[0]-a,l[1]-a],[l[0]+a,l[1]+a]])}}else e&&(s=null);return s},n.clipExtent(null)}function Hn(t,e){var n=Math.cos(e)*Math.sin(t);return[Math.log((1+n)/(1-n))/2,Math.atan2(Math.tan(e),Math.cos(t))]}function On(t){function e(e){function s(){u.push("M",o(t(c),a))}for(var l,u=[],c=[],h=-1,d=e.length,p=ue(n),f=ue(i);d>++h;)r.call(this,l=e[h],h)?c.push([+p.call(this,l,h),+f.call(this,l,h)]):c.length&&(s(),c=[]);return c.length&&s(),u.length?u.join(""):null}var n=Nn,i=Ln,r=De,o=Dn,s=o.key,a=.7;return e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(i=t,e):i},e.defined=function(t){return arguments.length?(r=t,e):r},e.interpolate=function(t){return arguments.length?(s="function"==typeof t?o=t:(o=Na.get(t)||Dn).key,e):s},e.tension=function(t){return arguments.length?(a=t,e):a},e}function Nn(t){return t[0]}function Ln(t){return t[1]}function Dn(t){return t.join("L")}function Rn(t){return Dn(t)+"Z"}function jn(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];n>++e;)r.push("V",(i=t[e])[1],"H",i[0]);return r.join("")}function Bn(t){for(var e=0,n=t.length,i=t[0],r=[i[0],",",i[1]];n>++e;)r.push("H",(i=t[e])[0],"V",i[1]);return r.join("")}function Fn(t,e){return 4>t.length?Dn(t):t[1]+qn(t.slice(1,t.length-1),Vn(t,e))}function Wn(t,e){return 3>t.length?Dn(t):t[0]+qn((t.push(t[0]),t),Vn([t[t.length-2]].concat(t,[t[1]]),e))}function Un(t,e){return 3>t.length?Dn(t):t[0]+qn(t,Vn(t,e))}function qn(t,e){if(1>e.length||t.length!=e.length&&t.length!=e.length+2)return Dn(t);var n=t.length!=e.length,i="",r=t[0],o=t[1],s=e[0],a=s,l=1;if(n&&(i+="Q"+(o[0]-2*s[0]/3)+","+(o[1]-2*s[1]/3)+","+o[0]+","+o[1],r=t[1],l=2),e.length>1){a=e[1],o=t[l],l++,i+="C"+(r[0]+s[0])+","+(r[1]+s[1])+","+(o[0]-a[0])+","+(o[1]-a[1])+","+o[0]+","+o[1];for(var u=2;e.length>u;u++,l++)o=t[l],a=e[u],i+="S"+(o[0]-a[0])+","+(o[1]-a[1])+","+o[0]+","+o[1]}if(n){var c=t[l];i+="Q"+(o[0]+2*a[0]/3)+","+(o[1]+2*a[1]/3)+","+c[0]+","+c[1]}return i}function Vn(t,e){for(var n,i=[],r=(1-e)/2,o=t[0],s=t[1],a=1,l=t.length;l>++a;)n=o,o=s,s=t[a],i.push([r*(s[0]-n[0]),r*(s[1]-n[1])]);return i}function $n(t){if(3>t.length)return Dn(t);var e=1,n=t.length,i=t[0],r=i[0],o=i[1],s=[r,r,r,(i=t[1])[0]],a=[o,o,o,i[1]],l=[r,",",o];for(Yn(l,s,a);n>++e;)i=t[e],s.shift(),s.push(i[0]),a.shift(),a.push(i[1]),Yn(l,s,a);for(e=-1;2>++e;)s.shift(),s.push(i[0]),a.shift(),a.push(i[1]),Yn(l,s,a);return l.join("")}function Qn(t){if(4>t.length)return Dn(t);for(var e,n=[],i=-1,r=t.length,o=[0],s=[0];3>++i;)e=t[i],o.push(e[0]),s.push(e[1]);for(n.push(Xn(Ra,o)+","+Xn(Ra,s)),--i;r>++i;)e=t[i],o.shift(),o.push(e[0]),s.shift(),s.push(e[1]),Yn(n,o,s);return n.join("")}function Gn(t){for(var e,n,i=-1,r=t.length,o=r+4,s=[],a=[];4>++i;)n=t[i%r],s.push(n[0]),a.push(n[1]);for(e=[Xn(Ra,s),",",Xn(Ra,a)],--i;o>++i;)n=t[i%r],s.shift(),s.push(n[0]),a.shift(),a.push(n[1]),Yn(e,s,a);return e.join("")}function Zn(t,e){var n=t.length-1;if(n)for(var i,r,o=t[0][0],s=t[0][1],a=t[n][0]-o,l=t[n][1]-s,u=-1;n>=++u;)i=t[u],r=u/n,i[0]=e*i[0]+(1-e)*(o+r*a),i[1]=e*i[1]+(1-e)*(s+r*l);return $n(t)}function Xn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function Yn(t,e,n){t.push("C",Xn(La,e),",",Xn(La,n),",",Xn(Da,e),",",Xn(Da,n),",",Xn(Ra,e),",",Xn(Ra,n))}function Kn(t,e){return(e[1]-t[1])/(e[0]-t[0])}function Jn(t){for(var e=0,n=t.length-1,i=[],r=t[0],o=t[1],s=i[0]=Kn(r,o);n>++e;)i[e]=(s+(s=Kn(r=o,o=t[e+1])))/2;return i[e]=s,i}function ti(t){for(var e,n,i,r,o=[],s=Jn(t),a=-1,l=t.length-1;l>++a;)e=Kn(t[a],t[a+1]),1e-6>Math.abs(e)?s[a]=s[a+1]=0:(n=s[a]/e,i=s[a+1]/e,r=n*n+i*i,r>9&&(r=3*e/Math.sqrt(r),s[a]=r*n,s[a+1]=r*i));for(a=-1;l>=++a;)r=(t[Math.min(l,a+1)][0]-t[Math.max(0,a-1)][0])/(6*(1+s[a]*s[a])),o.push([r||0,s[a]*r||0]);return o}function ei(t){return 3>t.length?Dn(t):t[0]+qn(t,ti(t))}function ni(t,e,n,i){var r,o,s,a,l,u,c;return r=i[t],o=r[0],s=r[1],r=i[e],a=r[0],l=r[1],r=i[n],u=r[0],c=r[1],(c-s)*(a-o)-(l-s)*(u-o)>0}function ii(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function ri(t,e,n,i){var r=t[0],o=n[0],s=e[0]-r,a=i[0]-o,l=t[1],u=n[1],c=e[1]-l,h=i[1]-u,d=(a*(l-u)-h*(r-o))/(h*s-a*c);return[r+d*s,l+d*c]}function oi(t,e){var n={list:t.map(function(t,e){return{index:e,x:t[0],y:t[1]}}).sort(function(t,e){return t.y<e.y?-1:t.y>e.y?1:t.x<e.x?-1:t.x>e.x?1:0}),bottomSite:null},i={list:[],leftEnd:null,rightEnd:null,init:function(){i.leftEnd=i.createHalfEdge(null,"l"),i.rightEnd=i.createHalfEdge(null,"l"),i.leftEnd.r=i.rightEnd,i.rightEnd.l=i.leftEnd,i.list.unshift(i.leftEnd,i.rightEnd)},createHalfEdge:function(t,e){return{edge:t,side:e,vertex:null,l:null,r:null}},insert:function(t,e){e.l=t,e.r=t.r,t.r.l=e,t.r=e},leftBound:function(t){var e=i.leftEnd;do e=e.r;while(e!=i.rightEnd&&r.rightOf(e,t));return e=e.l},del:function(t){t.l.r=t.r,t.r.l=t.l,t.edge=null},right:function(t){return t.r},left:function(t){return t.l},leftRegion:function(t){return null==t.edge?n.bottomSite:t.edge.region[t.side]},rightRegion:function(t){return null==t.edge?n.bottomSite:t.edge.region[ja[t.side]]}},r={bisect:function(t,e){var n={region:{l:t,r:e},ep:{l:null,r:null}},i=e.x-t.x,r=e.y-t.y,o=i>0?i:-i,s=r>0?r:-r;return n.c=t.x*i+t.y*r+.5*(i*i+r*r),o>s?(n.a=1,n.b=r/i,n.c/=i):(n.b=1,n.a=i/r,n.c/=r),n},intersect:function(t,e){var n=t.edge,i=e.edge;if(!n||!i||n.region.r==i.region.r)return null;var r=n.a*i.b-n.b*i.a;if(1e-10>Math.abs(r))return null;var o,s,a=(n.c*i.b-i.c*n.b)/r,l=(i.c*n.a-n.c*i.a)/r,u=n.region.r,c=i.region.r;u.y<c.y||u.y==c.y&&u.x<c.x?(o=t,s=n):(o=e,s=i);var h=a>=s.region.r.x;return h&&"l"===o.side||!h&&"r"===o.side?null:{x:a,y:l}},rightOf:function(t,e){var n=t.edge,i=n.region.r,r=e.x>i.x;if(r&&"l"===t.side)return 1;if(!r&&"r"===t.side)return 0;if(1===n.a){var o=e.y-i.y,s=e.x-i.x,a=0,l=0;if(!r&&0>n.b||r&&n.b>=0?l=a=o>=n.b*s:(l=e.x+e.y*n.b>n.c,0>n.b&&(l=!l),l||(a=1)),!a){var u=i.x-n.region.l.x;l=n.b*(s*s-o*o)<u*o*(1+2*s/u+n.b*n.b),0>n.b&&(l=!l)}}else{var c=n.c-n.a*e.x,h=e.y-c,d=e.x-i.x,p=c-i.y;l=h*h>d*d+p*p}return"l"===t.side?l:!l},endPoint:function(t,n,i){t.ep[n]=i,t.ep[ja[n]]&&e(t)},distance:function(t,e){var n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)}},o={list:[],insert:function(t,e,n){t.vertex=e,t.ystar=e.y+n;for(var i=0,r=o.list,s=r.length;s>i;i++){var a=r[i];if(!(t.ystar>a.ystar||t.ystar==a.ystar&&e.x>a.vertex.x))break}r.splice(i,0,t)},del:function(t){for(var e=0,n=o.list,i=n.length;i>e&&n[e]!=t;++e);n.splice(e,1)},empty:function(){return 0===o.list.length},nextEvent:function(t){for(var e=0,n=o.list,i=n.length;i>e;++e)if(n[e]==t)return n[e+1];return null},min:function(){var t=o.list[0];return{x:t.vertex.x,y:t.ystar}},extractMin:function(){return o.list.shift()}};i.init(),n.bottomSite=n.list.shift();for(var s,a,l,u,c,h,d,p,f,g,m,v,y,b=n.list.shift();;)if(o.empty()||(s=o.min()),b&&(o.empty()||b.y<s.y||b.y==s.y&&b.x<s.x))a=i.leftBound(b),l=i.right(a),d=i.rightRegion(a),v=r.bisect(d,b),h=i.createHalfEdge(v,"l"),i.insert(a,h),g=r.intersect(a,h),g&&(o.del(a),o.insert(a,g,r.distance(g,b))),a=h,h=i.createHalfEdge(v,"r"),i.insert(a,h),g=r.intersect(h,l),g&&o.insert(h,g,r.distance(g,b)),b=n.list.shift();else{if(o.empty())break;a=o.extractMin(),u=i.left(a),l=i.right(a),c=i.right(l),d=i.leftRegion(a),p=i.rightRegion(l),m=a.vertex,r.endPoint(a.edge,a.side,m),r.endPoint(l.edge,l.side,m),i.del(a),o.del(l),i.del(l),y="l",d.y>p.y&&(f=d,d=p,p=f,y="r"),v=r.bisect(d,p),h=i.createHalfEdge(v,y),i.insert(u,h),r.endPoint(v,ja[y],m),g=r.intersect(u,h),g&&(o.del(u),o.insert(u,g,r.distance(g,d))),g=r.intersect(h,c),g&&o.insert(h,g,r.distance(g,d))}for(a=i.right(i.leftEnd);a!=i.rightEnd;a=i.right(a))e(a.edge)}function si(t){return t.x}function ai(t){return t.y}function li(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function ui(t,e,n,i,r,o){if(!t(e,n,i,r,o)){var s=.5*(n+r),a=.5*(i+o),l=e.nodes;l[0]&&ui(t,l[0],n,i,s,a),l[1]&&ui(t,l[1],s,i,r,a),l[2]&&ui(t,l[2],n,a,s,o),l[3]&&ui(t,l[3],s,a,r,o)}}function ci(t,e){t=as.rgb(t),e=as.rgb(e);var n=t.r,i=t.g,r=t.b,o=e.r-n,s=e.g-i,a=e.b-r;return function(t){return"#"+ie(Math.round(n+o*t))+ie(Math.round(i+s*t))+ie(Math.round(r+a*t))}}function hi(t){var e=[t.a,t.b],n=[t.c,t.d],i=pi(e),r=di(e,n),o=pi(fi(n,e,-r))||0;e[0]*n[1]<n[0]*e[1]&&(e[0]*=-1,e[1]*=-1,i*=-1,r*=-1),this.rotate=(i?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*Rs,this.translate=[t.e,t.f],this.scale=[i,o],this.skew=o?Math.atan2(r,o)*Rs:0}function di(t,e){return t[0]*e[0]+t[1]*e[1]}function pi(t){var e=Math.sqrt(di(t,t));return e&&(t[0]/=e,t[1]/=e),e}function fi(t,e,n){return t[0]+=n*e[0],t[1]+=n*e[1],t}function gi(t,e){return e-=t=+t,function(n){return t+e*n}}function mi(t,e){var n,i=[],r=[],o=as.transform(t),s=as.transform(e),a=o.translate,l=s.translate,u=o.rotate,c=s.rotate,h=o.skew,d=s.skew,p=o.scale,f=s.scale;return a[0]!=l[0]||a[1]!=l[1]?(i.push("translate(",null,",",null,")"),r.push({i:1,x:gi(a[0],l[0])},{i:3,x:gi(a[1],l[1])})):l[0]||l[1]?i.push("translate("+l+")"):i.push(""),u!=c?(u-c>180?c+=360:c-u>180&&(u+=360),r.push({i:i.push(i.pop()+"rotate(",null,")")-2,x:gi(u,c)})):c&&i.push(i.pop()+"rotate("+c+")"),h!=d?r.push({i:i.push(i.pop()+"skewX(",null,")")-2,x:gi(h,d)}):d&&i.push(i.pop()+"skewX("+d+")"),p[0]!=f[0]||p[1]!=f[1]?(n=i.push(i.pop()+"scale(",null,",",null,")"),r.push({i:n-4,x:gi(p[0],f[0])},{i:n-2,x:gi(p[1],f[1])})):(1!=f[0]||1!=f[1])&&i.push(i.pop()+"scale("+f+")"),n=r.length,function(t){for(var e,o=-1;n>++o;)i[(e=r[o]).i]=e.x(t);return i.join("")}}function vi(t,e){var n,i={},r={};for(n in t)n in e?i[n]=wi(n)(t[n],e[n]):r[n]=t[n];for(n in e)n in t||(r[n]=e[n]);return function(t){for(n in i)r[n]=i[n](t);return r}}function yi(t,e){var n,i,r,o,s,a=0,l=0,u=[],c=[];for(t+="",e+="",Fa.lastIndex=0,i=0;n=Fa.exec(e);++i)n.index&&u.push(e.substring(a,l=n.index)),c.push({i:u.length,x:n[0]}),u.push(null),a=Fa.lastIndex;for(e.length>a&&u.push(e.substring(a)),i=0,o=c.length;(n=Fa.exec(t))&&o>i;++i)if(s=c[i],s.x==n[0]){if(s.i)if(null==u[s.i+1])for(u[s.i-1]+=s.x,u.splice(s.i,1),r=i+1;o>r;++r)c[r].i--;else for(u[s.i-1]+=s.x+u[s.i+1],u.splice(s.i,2),r=i+1;o>r;++r)c[r].i-=2;else if(null==u[s.i+1])u[s.i]=s.x;else for(u[s.i]=s.x+u[s.i+1],u.splice(s.i+1,1),r=i+1;o>r;++r)c[r].i--;c.splice(i,1),o--,i--}else s.x=gi(parseFloat(n[0]),parseFloat(s.x));for(;o>i;)s=c.pop(),null==u[s.i+1]?u[s.i]=s.x:(u[s.i]=s.x+u[s.i+1],u.splice(s.i+1,1)),o--;return 1===u.length?null==u[0]?(s=c[0].x,function(t){return s(t)+""}):function(){return e}:function(t){for(i=0;o>i;++i)u[(s=c[i]).i]=s.x(t);return u.join("")}}function bi(t,e){for(var n,i=as.interpolators.length;--i>=0&&!(n=as.interpolators[i](t,e)););return n}function wi(t){return"transform"==t?mi:bi}function xi(t,e){var n,i=[],r=[],o=t.length,s=e.length,a=Math.min(t.length,e.length);for(n=0;a>n;++n)i.push(bi(t[n],e[n]));for(;o>n;++n)r[n]=t[n];for(;s>n;++n)r[n]=e[n];return function(t){for(n=0;a>n;++n)r[n]=i[n](t);return r}}function Ti(t){return function(e){return 0>=e?0:e>=1?1:t(e)}}function Si(t){return function(e){return 1-t(1-e)}}function _i(t){return function(e){return.5*(.5>e?t(2*e):2-t(2-2*e))}}function Ei(t){return t*t}function Ci(t){return t*t*t}function ki(t){if(0>=t)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(.5>t?n:3*(t-e)+n-.75)}function Mi(t){return function(e){return Math.pow(e,t)}}function Pi(t){return 1-Math.cos(t*Ns/2)}function Ii(t){return Math.pow(2,10*(t-1))}function zi(t){return 1-Math.sqrt(1-t*t)}function Ai(t,e){var n;return 2>arguments.length&&(e=.45),arguments.length?n=e/(2*Ns)*Math.asin(1/t):(t=1,n=e/4),function(i){return 1+t*Math.pow(2,10*-i)*Math.sin(2*(i-n)*Ns/e)}}function Hi(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}}function Oi(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function Ni(t,e){t=as.hcl(t),e=as.hcl(e);var n=t.h,i=t.c,r=t.l,o=e.h-n,s=e.c-i,a=e.l-r;return isNaN(s)&&(s=0,i=isNaN(i)?e.c:i),isNaN(o)?(o=0,n=isNaN(n)?e.h:n):o>180?o-=360:-180>o&&(o+=360),function(t){return Q(n+o*t,i+s*t,r+a*t)+""}}function Li(t,e){t=as.hsl(t),e=as.hsl(e);var n=t.h,i=t.s,r=t.l,o=e.h-n,s=e.s-i,a=e.l-r;return isNaN(s)&&(s=0,i=isNaN(i)?e.s:i),isNaN(o)?(o=0,n=isNaN(n)?e.h:n):o>180?o-=360:-180>o&&(o+=360),function(t){return R(n+o*t,i+s*t,r+a*t)+""}}function Di(t,e){t=as.lab(t),e=as.lab(e);var n=t.l,i=t.a,r=t.b,o=e.l-n,s=e.a-i,a=e.b-r;return function(t){return X(n+o*t,i+s*t,r+a*t)+""}}function Ri(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function ji(t,e){return e=e-(t=+t)?1/(e-t):0,function(n){return(n-t)*e}}function Bi(t,e){return e=e-(t=+t)?1/(e-t):0,function(n){return Math.max(0,Math.min(1,(n-t)*e))}}function Fi(t){for(var e=t.source,n=t.target,i=Ui(e,n),r=[e];e!==i;)e=e.parent,r.push(e);for(var o=r.length;n!==i;)r.splice(o,0,n),n=n.parent;return r}function Wi(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function Ui(t,e){if(t===e)return t;for(var n=Wi(t),i=Wi(e),r=n.pop(),o=i.pop(),s=null;r===o;)s=r,r=n.pop(),o=i.pop();return s}function qi(t){t.fixed|=2}function Vi(t){t.fixed&=-7}function $i(t){t.fixed|=4,t.px=t.x,t.py=t.y}function Qi(t){t.fixed&=-5}function Gi(t,e,n){var i=0,r=0;if(t.charge=0,!t.leaf)for(var o,s=t.nodes,a=s.length,l=-1;a>++l;)o=s[l],null!=o&&(Gi(o,e,n),t.charge+=o.charge,i+=o.charge*o.cx,r+=o.charge*o.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var u=e*n[t.point.index];t.charge+=t.pointCharge=u,i+=u*t.point.x,r+=u*t.point.y}t.cx=i/t.charge,t.cy=r/t.charge}function Zi(t,e){return as.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=Ji,t}function Xi(t){return t.children}function Yi(t){return t.value}function Ki(t,e){return e.value-t.value}function Ji(t){return as.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}function tr(t){return t.x}function er(t){return t.y}function nr(t,e,n){t.y0=e,t.y=n}function ir(t){return as.range(t.length)}function rr(t){for(var e=-1,n=t[0].length,i=[];n>++e;)i[e]=0;return i}function or(t){for(var e,n=1,i=0,r=t[0][1],o=t.length;o>n;++n)(e=t[n][1])>r&&(i=n,r=e);return i}function sr(t){return t.reduce(ar,0)}function ar(t,e){return t+e[1]}function lr(t,e){return ur(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function ur(t,e){for(var n=-1,i=+t[0],r=(t[1]-i)/e,o=[];e>=++n;)o[n]=r*n+i;return o}function cr(t){return[as.min(t),as.max(t)]}function hr(t,e){return t.parent==e.parent?1:2}function dr(t){var e=t.children;return e&&e.length?e[0]:t._tree.thread}function pr(t){var e,n=t.children;return n&&(e=n.length)?n[e-1]:t._tree.thread}function fr(t,e){var n=t.children;if(n&&(r=n.length))for(var i,r,o=-1;r>++o;)e(i=fr(n[o],e),t)>0&&(t=i);return t}function gr(t,e){return t.x-e.x}function mr(t,e){return e.x-t.x}function vr(t,e){return t.depth-e.depth}function yr(t,e){function n(t,i){var r=t.children;if(r&&(s=r.length))for(var o,s,a=null,l=-1;s>++l;)o=r[l],n(o,a),a=o;e(t,i)}n(t,null)}function br(t){for(var e,n=0,i=0,r=t.children,o=r.length;--o>=0;)e=r[o]._tree,e.prelim+=n,e.mod+=n,n+=e.shift+(i+=e.change)}function wr(t,e,n){t=t._tree,e=e._tree;var i=n/(e.number-t.number);t.change+=i,e.change-=i,e.shift+=n,e.prelim+=n,e.mod+=n}function xr(t,e,n){return t._tree.ancestor.parent==e.parent?t._tree.ancestor:n}function Tr(t,e){return t.value-e.value}function Sr(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function _r(t,e){t._pack_next=e,e._pack_prev=t}function Er(t,e){var n=e.x-t.x,i=e.y-t.y,r=t.r+e.r;return r*r-n*n-i*i>.001}function Cr(t){function e(t){c=Math.min(t.x-t.r,c),h=Math.max(t.x+t.r,h),d=Math.min(t.y-t.r,d),p=Math.max(t.y+t.r,p)}if((n=t.children)&&(u=n.length)){var n,i,r,o,s,a,l,u,c=1/0,h=-1/0,d=1/0,p=-1/0;if(n.forEach(kr),i=n[0],i.x=-i.r,i.y=0,e(i),u>1&&(r=n[1],r.x=r.r,r.y=0,e(r),u>2))for(o=n[2],Ir(i,r,o),e(o),Sr(i,o),i._pack_prev=o,Sr(o,r),r=i._pack_next,s=3;u>s;s++){Ir(i,r,o=n[s]);var f=0,g=1,m=1;for(a=r._pack_next;a!==r;a=a._pack_next,g++)if(Er(a,o)){f=1;break}if(1==f)for(l=i._pack_prev;l!==a._pack_prev&&!Er(l,o);l=l._pack_prev,m++);f?(m>g||g==m&&r.r<i.r?_r(i,r=a):_r(i=l,r),s--):(Sr(i,o),r=o,e(o))}var v=(c+h)/2,y=(d+p)/2,b=0;for(s=0;u>s;s++)o=n[s],o.x-=v,o.y-=y,b=Math.max(b,o.r+Math.sqrt(o.x*o.x+o.y*o.y));t.r=b,n.forEach(Mr)}}function kr(t){t._pack_next=t._pack_prev=t}function Mr(t){delete t._pack_next,delete t._pack_prev}function Pr(t,e,n,i){var r=t.children;if(t.x=e+=i*t.x,t.y=n+=i*t.y,t.r*=i,r)for(var o=-1,s=r.length;s>++o;)Pr(r[o],e,n,i)}function Ir(t,e,n){var i=t.r+n.r,r=e.x-t.x,o=e.y-t.y;if(i&&(r||o)){var s=e.r+n.r,a=r*r+o*o;s*=s,i*=i;var l=.5+(i-s)/(2*a),u=Math.sqrt(Math.max(0,2*s*(i+a)-(i-=a)*i-s*s))/(2*a);n.x=t.x+l*r+u*o,n.y=t.y+l*o-u*r}else n.x=t.x+i,n.y=t.y}function zr(t){return 1+as.max(t,function(t){return t.y})}function Ar(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}function Hr(t){var e=t.children;return e&&e.length?Hr(e[0]):t}function Or(t){var e,n=t.children;return n&&(e=n.length)?Or(n[e-1]):t}function Nr(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Lr(t,e){var n=t.x+e[3],i=t.y+e[0],r=t.dx-e[1]-e[3],o=t.dy-e[0]-e[2];return 0>r&&(n+=r/2,r=0),0>o&&(i+=o/2,o=0),{x:n,y:i,dx:r,dy:o}}function Dr(t){var e=t[0],n=t[t.length-1];return n>e?[e,n]:[n,e]}function Rr(t){return t.rangeExtent?t.rangeExtent():Dr(t.range())}function jr(t,e,n,i){var r=n(t[0],t[1]),o=i(e[0],e[1]);return function(t){return o(r(t))}}function Br(t,e){var n,i=0,r=t.length-1,o=t[i],s=t[r];return o>s&&(n=i,i=r,r=n,n=o,o=s,s=n),(e=e(s-o))&&(t[i]=e.floor(o),t[r]=e.ceil(s)),t}function Fr(t,e,n,i){var r=[],o=[],s=0,a=Math.min(t.length,e.length)-1;for(t[a]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());a>=++s;)r.push(n(t[s-1],t[s])),o.push(i(e[s-1],e[s]));return function(e){var n=as.bisect(t,e,1,a)-1;return o[n](r[n](e))}}function Wr(t,e,n,i){function r(){var r=Math.min(t.length,e.length)>2?Fr:jr,l=i?Bi:ji;return s=r(t,e,l,n),a=r(e,t,l,bi),o}function o(t){return s(t)}var s,a;return o.invert=function(t){return a(t)},o.domain=function(e){return arguments.length?(t=e.map(Number),r()):t},o.range=function(t){return arguments.length?(e=t,r()):e},o.rangeRound=function(t){return o.range(t).interpolate(Ri)},o.clamp=function(t){return arguments.length?(i=t,r()):i},o.interpolate=function(t){return arguments.length?(n=t,r()):n},o.ticks=function(e){return $r(t,e)},o.tickFormat=function(e,n){return Qr(t,e,n)},o.nice=function(){return Br(t,qr),r()},o.copy=function(){return Wr(t,e,n,i)},r()}function Ur(t,e){return as.rebind(t,e,"range","rangeRound","interpolate","clamp")}function qr(t){return t=Math.pow(10,Math.round(Math.log(t)/Math.LN10)-1),t&&{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}}function Vr(t,e){var n=Dr(t),i=n[1]-n[0],r=Math.pow(10,Math.floor(Math.log(i/e)/Math.LN10)),o=e/i*r;return.15>=o?r*=10:.35>=o?r*=5:.75>=o&&(r*=2),n[0]=Math.ceil(n[0]/r)*r,n[1]=Math.floor(n[1]/r)*r+.5*r,n[2]=r,n}function $r(t,e){return as.range.apply(as,Vr(t,e))}function Qr(t,e,n){var i=-Math.floor(Math.log(Vr(t,e)[2])/Math.LN10+.01);return as.format(n?n.replace(na,function(t,e,n,r,o,s,a,l,u,c){return[e,n,r,o,s,a,l,u||"."+(i-2*("%"===c)),c].join("")}):",."+i+"f")}function Gr(t,e,n,i,r){function o(e){return t(n(e))}function s(){return n===Zr?{floor:a,ceil:l}:{floor:function(t){return-l(-t)},ceil:function(t){return-a(-t)}}}function a(t){return Math.pow(e,Math.floor(Math.log(t)/Math.log(e)))}function l(t){return Math.pow(e,Math.ceil(Math.log(t)/Math.log(e)))}return o.invert=function(e){return i(t.invert(e))},o.domain=function(e){return arguments.length?(0>e[0]?(n=Yr,i=Kr):(n=Zr,i=Xr),t.domain((r=e.map(Number)).map(n)),o):r},o.base=function(t){return arguments.length?(e=+t,o):e},o.nice=function(){return t.domain(Br(r,s).map(n)),o},o.ticks=function(){var r=Dr(t.domain()),o=[];if(r.every(isFinite)){var s=Math.log(e),a=Math.floor(r[0]/s),l=Math.ceil(r[1]/s),u=i(r[0]),c=i(r[1]),h=e%1?2:e;if(n===Yr)for(o.push(-Math.pow(e,-a));l>a++;)for(var d=h-1;d>0;d--)o.push(-Math.pow(e,-a)*d);else{for(;l>a;a++)for(var d=1;h>d;d++)o.push(Math.pow(e,a)*d);o.push(Math.pow(e,a))}for(a=0;u>o[a];a++);for(l=o.length;o[l-1]>c;l--);o=o.slice(a,l)}return o},o.tickFormat=function(t,r){if(2>arguments.length&&(r=Xa),!arguments.length)return r;var s,a=Math.log(e),l=Math.max(.1,t/o.ticks().length),u=n===Yr?(s=-1e-12,Math.floor):(s=1e-12,Math.ceil);return function(t){return l>=t/i(a*u(n(t)/a+s))?r(t):""}},o.copy=function(){return Gr(t.copy(),e,n,i,r)},Ur(o,t)}function Zr(t){return Math.log(0>t?0:t)}function Xr(t){return Math.exp(t)}function Yr(t){return-Math.log(t>0?0:-t)}function Kr(t){return-Math.exp(-t)}function Jr(t,e,n){function i(e){return t(r(e))}var r=to(e),o=to(1/e);return i.invert=function(e){return o(t.invert(e))},i.domain=function(e){return arguments.length?(t.domain((n=e.map(Number)).map(r)),i):n},i.ticks=function(t){return $r(n,t)},i.tickFormat=function(t,e){return Qr(n,t,e)},i.nice=function(){return i.domain(Br(n,qr))},i.exponent=function(s){return arguments.length?(r=to(e=s),o=to(1/e),t.domain(n.map(r)),i):e},i.copy=function(){return Jr(t.copy(),e,n)},Ur(i,t)}function to(t){return function(e){return 0>e?-Math.pow(-e,t):Math.pow(e,t)}}function eo(t,e){function n(e){return s[((o.get(e)||o.set(e,t.push(e)))-1)%s.length]}function i(e,n){return as.range(t.length).map(function(t){return e+n*t})}var o,s,a;return n.domain=function(i){if(!arguments.length)return t;t=[],o=new r;for(var s,a=-1,l=i.length;l>++a;)o.has(s=i[a])||o.set(s,t.push(s));return n[e.t].apply(n,e.a)},n.range=function(t){return arguments.length?(s=t,a=0,e={t:"range",a:arguments},n):s},n.rangePoints=function(r,o){2>arguments.length&&(o=0);var l=r[0],u=r[1],c=(u-l)/(Math.max(1,t.length-1)+o);return s=i(2>t.length?(l+u)/2:l+c*o/2,c),a=0,e={t:"rangePoints",a:arguments},n},n.rangeBands=function(r,o,l){2>arguments.length&&(o=0),3>arguments.length&&(l=o);var u=r[1]<r[0],c=r[u-0],h=r[1-u],d=(h-c)/(t.length-o+2*l);return s=i(c+d*l,d),u&&s.reverse(),a=d*(1-o),e={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(r,o,l){2>arguments.length&&(o=0),3>arguments.length&&(l=o);var u=r[1]<r[0],c=r[u-0],h=r[1-u],d=Math.floor((h-c)/(t.length-o+2*l)),p=h-c-(t.length-o)*d;return s=i(c+Math.round(p/2),d),u&&s.reverse(),a=Math.round(d*(1-o)),e={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return a},n.rangeExtent=function(){return Dr(e.a[0])},n.copy=function(){return eo(t,e)},n.domain(t)}function no(t,e){function n(){var n=0,o=e.length;for(r=[];o>++n;)r[n-1]=as.quantile(t,n/o);return i}function i(t){return isNaN(t=+t)?0/0:e[as.bisect(r,t)]}var r;return i.domain=function(e){return arguments.length?(t=e.filter(function(t){return!isNaN(t)}).sort(as.ascending),n()):t},i.range=function(t){return arguments.length?(e=t,n()):e},i.quantiles=function(){return r},i.copy=function(){return no(t,e)},n()}function io(t,e,n){function i(e){return n[Math.max(0,Math.min(s,Math.floor(o*(e-t))))]}function r(){return o=n.length/(e-t),s=n.length-1,i}var o,s;return i.domain=function(n){return arguments.length?(t=+n[0],e=+n[n.length-1],r()):[t,e]},i.range=function(t){return arguments.length?(n=t,r()):n},i.copy=function(){return io(t,e,n)},r()}function ro(t,e){function n(n){return e[as.bisect(t,n)]}return n.domain=function(e){return arguments.length?(t=e,n):t},n.range=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return ro(t,e)},n}function oo(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=n.map(e),e):t},e.ticks=function(e){return $r(t,e)},e.tickFormat=function(e,n){return Qr(t,e,n)},e.copy=function(){return oo(t)},e}function so(t){return t.innerRadius}function ao(t){return t.outerRadius}function lo(t){return t.startAngle}function uo(t){return t.endAngle}function co(t){for(var e,n,i,r=-1,o=t.length;o>++r;)e=t[r],n=e[0],i=e[1]+el,e[0]=n*Math.cos(i),e[1]=n*Math.sin(i);return t}function ho(t){function e(e){function l(){g.push("M",a(t(v),h),c,u(t(m.reverse()),h),"Z")}for(var d,p,f,g=[],m=[],v=[],y=-1,b=e.length,w=ue(n),x=ue(r),T=n===i?function(){return p}:ue(i),S=r===o?function(){return f}:ue(o);b>++y;)s.call(this,d=e[y],y)?(m.push([p=+w.call(this,d,y),f=+x.call(this,d,y)]),v.push([+T.call(this,d,y),+S.call(this,d,y)])):m.length&&(l(),m=[],v=[]);return m.length&&l(),g.length?g.join(""):null}var n=Nn,i=Nn,r=0,o=Ln,s=De,a=Dn,l=a.key,u=a,c="L",h=.7;return e.x=function(t){return arguments.length?(n=i=t,e):i},e.x0=function(t){return arguments.length?(n=t,e):n},e.x1=function(t){return arguments.length?(i=t,e):i},e.y=function(t){return arguments.length?(r=o=t,e):o},e.y0=function(t){return arguments.length?(r=t,e):r},e.y1=function(t){return arguments.length?(o=t,e):o},e.defined=function(t){return arguments.length?(s=t,e):s},e.interpolate=function(t){return arguments.length?(l="function"==typeof t?a=t:(a=Na.get(t)||Dn).key,u=a.reverse||a,c=a.closed?"M":"L",e):l},e.tension=function(t){return arguments.length?(h=t,e):h},e}function po(t){return t.radius}function fo(t){return[t.x,t.y]}function go(t){return function(){var e=t.apply(this,arguments),n=e[0],i=e[1]+el;return[n*Math.cos(i),n*Math.sin(i)]}}function mo(){return 64}function vo(){return"circle"}function yo(t){var e=Math.sqrt(t/Ns);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}function bo(t,e){return bs(t,al),t.id=e,t}function wo(t,e,n,i){var r=t.id;return H(t,"function"==typeof n?function(t,o,s){t.__transition__[r].tween.set(e,i(n.call(t,t.__data__,o,s)))}:(n=i(n),function(t){t.__transition__[r].tween.set(e,n)}))}function xo(t){return null==t&&(t=""),function(){this.textContent=t}}function To(t,e,n,i){var o=t.__transition__||(t.__transition__={active:0,count:0}),s=o[n];if(!s){var a=i.time;return s=o[n]={tween:new r,event:as.dispatch("start","end"),time:a,ease:i.ease,delay:i.delay,duration:i.duration},++o.count,as.timer(function(i){function r(i){return o.active>n?u():(o.active=n,d.start.call(t,c,e),s.tween.forEach(function(n,i){(i=i.call(t,c,e))&&g.push(i)}),l(i)||as.timer(l,0,a),1)}function l(i){if(o.active!==n)return u();for(var r=(i-p)/f,s=h(r),a=g.length;a>0;)g[--a].call(t,s);return r>=1?(u(),d.end.call(t,c,e),1):void 0}function u(){return--o.count?delete o[n]:delete t.__transition__,1}var c=t.__data__,h=s.ease,d=s.event,p=s.delay,f=s.duration,g=[];return i>=p?r(i):as.timer(r,p,a),1},0,a),s}}function So(t,e){t.attr("transform",function(t){return"translate("+e(t)+",0)"})}function _o(t,e){t.attr("transform",function(t){return"translate(0,"+e(t)+")"})}function Eo(t,e,n){if(i=[],n&&e.length>1){for(var i,r,o,s=Dr(t.domain()),a=-1,l=e.length,u=(e[1]-e[0])/++n;l>++a;)for(r=n;--r>0;)(o=+e[a]-r*u)>=s[0]&&i.push(o);for(--a,r=0;n>++r&&(o=+e[a]+r*u)<s[1];)i.push(o)}return i}function Co(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function ko(t,e,n){function i(e){var n=t(e),i=o(n,1);
return i-e>e-n?n:i}function r(n){return e(n=t(new fl(n-1)),1),n}function o(t,n){return e(t=new fl(+t),n),t}function s(t,i,o){var s=r(t),a=[];if(o>1)for(;i>s;)n(s)%o||a.push(new Date(+s)),e(s,1);else for(;i>s;)a.push(new Date(+s)),e(s,1);return a}function a(t,e,n){try{fl=Co;var i=new Co;return i._=t,s(i,e,n)}finally{fl=Date}}t.floor=t,t.round=i,t.ceil=r,t.offset=o,t.range=s;var l=t.utc=Mo(t);return l.floor=l,l.round=Mo(i),l.ceil=Mo(r),l.offset=Mo(o),l.range=a,t}function Mo(t){return function(e,n){try{fl=Co;var i=new Co;return i._=e,t(i,n)._}finally{fl=Date}}}function Po(t,e,n,i){for(var r,o,s=0,a=e.length,l=n.length;a>s;){if(i>=l)return-1;if(r=e.charCodeAt(s++),37===r){if(o=Al[e.charAt(s++)],!o||0>(i=o(t,n,i)))return-1}else if(r!=n.charCodeAt(i++))return-1}return i}function Io(t){return RegExp("^(?:"+t.map(as.requote).join("|")+")","i")}function zo(t){for(var e=new r,n=-1,i=t.length;i>++n;)e.set(t[n].toLowerCase(),n);return e}function Ao(t,e,n){t+="";var i=t.length;return n>i?Array(n-i+1).join(e)+t:t}function Ho(t,e,n){El.lastIndex=0;var i=El.exec(e.substring(n));return i?n+=i[0].length:-1}function Oo(t,e,n){_l.lastIndex=0;var i=_l.exec(e.substring(n));return i?n+=i[0].length:-1}function No(t,e,n){Ml.lastIndex=0;var i=Ml.exec(e.substring(n));return i?(t.m=Pl.get(i[0].toLowerCase()),n+=i[0].length):-1}function Lo(t,e,n){Cl.lastIndex=0;var i=Cl.exec(e.substring(n));return i?(t.m=kl.get(i[0].toLowerCase()),n+=i[0].length):-1}function Do(t,e,n){return Po(t,""+zl.c,e,n)}function Ro(t,e,n){return Po(t,""+zl.x,e,n)}function jo(t,e,n){return Po(t,""+zl.X,e,n)}function Bo(t,e,n){Hl.lastIndex=0;var i=Hl.exec(e.substring(n,n+4));return i?(t.y=+i[0],n+=i[0].length):-1}function Fo(t,e,n){Hl.lastIndex=0;var i=Hl.exec(e.substring(n,n+2));return i?(t.y=Wo(+i[0]),n+=i[0].length):-1}function Wo(t){return t+(t>68?1900:2e3)}function Uo(t,e,n){Hl.lastIndex=0;var i=Hl.exec(e.substring(n,n+2));return i?(t.m=i[0]-1,n+=i[0].length):-1}function qo(t,e,n){Hl.lastIndex=0;var i=Hl.exec(e.substring(n,n+2));return i?(t.d=+i[0],n+=i[0].length):-1}function Vo(t,e,n){Hl.lastIndex=0;var i=Hl.exec(e.substring(n,n+2));return i?(t.H=+i[0],n+=i[0].length):-1}function $o(t,e,n){Hl.lastIndex=0;var i=Hl.exec(e.substring(n,n+2));return i?(t.M=+i[0],n+=i[0].length):-1}function Qo(t,e,n){Hl.lastIndex=0;var i=Hl.exec(e.substring(n,n+2));return i?(t.S=+i[0],n+=i[0].length):-1}function Go(t,e,n){Hl.lastIndex=0;var i=Hl.exec(e.substring(n,n+3));return i?(t.L=+i[0],n+=i[0].length):-1}function Zo(t,e,n){var i=Ol.get(e.substring(n,n+=2).toLowerCase());return null==i?-1:(t.p=i,n)}function Xo(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",i=~~(Math.abs(e)/60),r=Math.abs(e)%60;return n+Ao(i,"0",2)+Ao(r,"0",2)}function Yo(t){return t.toISOString()}function Ko(t,e,n){function i(e){return t(e)}return i.invert=function(e){return Jo(t.invert(e))},i.domain=function(e){return arguments.length?(t.domain(e),i):t.domain().map(Jo)},i.nice=function(t){return i.domain(Br(i.domain(),function(){return t}))},i.ticks=function(n,r){var o=Dr(i.domain());if("function"!=typeof n){var s=o[1]-o[0],a=s/n,l=as.bisect(Ll,a);if(l==Ll.length)return e.year(o,n);if(!l)return t.ticks(n).map(Jo);Math.log(a/Ll[l-1])<Math.log(Ll[l]/a)&&--l,n=e[l],r=n[1],n=n[0].range}return n(o[0],new Date(+o[1]+1),r)},i.tickFormat=function(){return n},i.copy=function(){return Ko(t.copy(),e,n)},Ur(i,t)}function Jo(t){return new Date(t)}function ts(t){return function(e){for(var n=t.length-1,i=t[n];!i[1](e);)i=t[--n];return i[0](e)}}function es(t){var e=new Date(t,0,1);return e.setFullYear(t),e}function ns(t){var e=t.getFullYear(),n=es(e),i=es(e+1);return e+(t-n)/(i-n)}function is(t){var e=new Date(Date.UTC(t,0,1));return e.setUTCFullYear(t),e}function rs(t){var e=t.getUTCFullYear(),n=is(e),i=is(e+1);return e+(t-n)/(i-n)}function os(t){return JSON.parse(t.responseText)}function ss(t){var e=ls.createRange();return e.selectNode(ls.body),e.createContextualFragment(t.responseText)}var as={version:"3.1.10"};Date.now||(Date.now=function(){return+new Date});var ls=document,us=window;try{ls.createElement("div").style.setProperty("opacity",0,"")}catch(cs){var hs=us.CSSStyleDeclaration.prototype,ds=hs.setProperty;hs.setProperty=function(t,e,n){ds.call(this,t,e+"",n)}}as.ascending=function(t,e){return e>t?-1:t>e?1:t>=e?0:0/0},as.descending=function(t,e){return t>e?-1:e>t?1:e>=t?0:0/0},as.min=function(t,e){var n,i,r=-1,o=t.length;if(1===arguments.length){for(;o>++r&&(null==(n=t[r])||n!=n);)n=void 0;for(;o>++r;)null!=(i=t[r])&&n>i&&(n=i)}else{for(;o>++r&&(null==(n=e.call(t,t[r],r))||n!=n);)n=void 0;for(;o>++r;)null!=(i=e.call(t,t[r],r))&&n>i&&(n=i)}return n},as.max=function(t,e){var n,i,r=-1,o=t.length;if(1===arguments.length){for(;o>++r&&(null==(n=t[r])||n!=n);)n=void 0;for(;o>++r;)null!=(i=t[r])&&i>n&&(n=i)}else{for(;o>++r&&(null==(n=e.call(t,t[r],r))||n!=n);)n=void 0;for(;o>++r;)null!=(i=e.call(t,t[r],r))&&i>n&&(n=i)}return n},as.extent=function(t,e){var n,i,r,o=-1,s=t.length;if(1===arguments.length){for(;s>++o&&(null==(n=r=t[o])||n!=n);)n=r=void 0;for(;s>++o;)null!=(i=t[o])&&(n>i&&(n=i),i>r&&(r=i))}else{for(;s>++o&&(null==(n=r=e.call(t,t[o],o))||n!=n);)n=void 0;for(;s>++o;)null!=(i=e.call(t,t[o],o))&&(n>i&&(n=i),i>r&&(r=i))}return[n,r]},as.sum=function(t,e){var n,i=0,r=t.length,o=-1;if(1===arguments.length)for(;r>++o;)isNaN(n=+t[o])||(i+=n);else for(;r>++o;)isNaN(n=+e.call(t,t[o],o))||(i+=n);return i},as.mean=function(e,n){var i,r=e.length,o=0,s=-1,a=0;if(1===arguments.length)for(;r>++s;)t(i=e[s])&&(o+=(i-o)/++a);else for(;r>++s;)t(i=n.call(e,e[s],s))&&(o+=(i-o)/++a);return a?o:void 0},as.quantile=function(t,e){var n=(t.length-1)*e+1,i=Math.floor(n),r=+t[i-1],o=n-i;return o?r+o*(t[i]-r):r},as.median=function(e,n){return arguments.length>1&&(e=e.map(n)),e=e.filter(t),e.length?as.quantile(e.sort(as.ascending),.5):void 0},as.bisector=function(t){return{left:function(e,n,i,r){for(3>arguments.length&&(i=0),4>arguments.length&&(r=e.length);r>i;){var o=i+r>>>1;n>t.call(e,e[o],o)?i=o+1:r=o}return i},right:function(e,n,i,r){for(3>arguments.length&&(i=0),4>arguments.length&&(r=e.length);r>i;){var o=i+r>>>1;t.call(e,e[o],o)>n?r=o:i=o+1}return i}}};var ps=as.bisector(function(t){return t});as.bisectLeft=ps.left,as.bisect=as.bisectRight=ps.right,as.shuffle=function(t){for(var e,n,i=t.length;i;)n=0|Math.random()*i--,e=t[i],t[i]=t[n],t[n]=e;return t},as.permute=function(t,e){for(var n=[],i=-1,r=e.length;r>++i;)n[i]=t[e[i]];return n},as.zip=function(){if(!(r=arguments.length))return[];for(var t=-1,n=as.min(arguments,e),i=Array(n);n>++t;)for(var r,o=-1,s=i[t]=Array(r);r>++o;)s[o]=arguments[o][t];return i},as.transpose=function(t){return as.zip.apply(as,t)},as.keys=function(t){var e=[];for(var n in t)e.push(n);return e},as.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},as.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},as.merge=function(t){return Array.prototype.concat.apply([],t)},as.range=function(t,e,i){if(3>arguments.length&&(i=1,2>arguments.length&&(e=t,t=0)),1/0===(e-t)/i)throw Error("infinite range");var r,o=[],s=n(Math.abs(i)),a=-1;if(t*=s,e*=s,i*=s,0>i)for(;(r=t+i*++a)>e;)o.push(r/s);else for(;e>(r=t+i*++a);)o.push(r/s);return o},as.map=function(t){var e=new r;for(var n in t)e.set(n,t[n]);return e},i(r,{has:function(t){return fs+t in this},get:function(t){return this[fs+t]},set:function(t,e){return this[fs+t]=e},remove:function(t){return t=fs+t,t in this&&delete this[t]},keys:function(){var t=[];return this.forEach(function(e){t.push(e)}),t},values:function(){var t=[];return this.forEach(function(e,n){t.push(n)}),t},entries:function(){var t=[];return this.forEach(function(e,n){t.push({key:e,value:n})}),t},forEach:function(t){for(var e in this)e.charCodeAt(0)===gs&&t.call(this,e.substring(1),this[e])}});var fs="\0",gs=fs.charCodeAt(0);as.nest=function(){function t(e,a,l){if(l>=s.length)return i?i.call(o,a):n?a.sort(n):a;for(var u,c,h,d,p=-1,f=a.length,g=s[l++],m=new r;f>++p;)(d=m.get(u=g(c=a[p])))?d.push(c):m.set(u,[c]);return e?(c=e(),h=function(n,i){c.set(n,t(e,i,l))}):(c={},h=function(n,i){c[n]=t(e,i,l)}),m.forEach(h),c}function e(t,n){if(n>=s.length)return t;var i=[],r=a[n++];return t.forEach(function(t,r){i.push({key:t,values:e(r,n)})}),r?i.sort(function(t,e){return r(t.key,e.key)}):i}var n,i,o={},s=[],a=[];return o.map=function(e,n){return t(n,e,0)},o.entries=function(n){return e(t(as.map,n,0),0)},o.key=function(t){return s.push(t),o},o.sortKeys=function(t){return a[s.length-1]=t,o},o.sortValues=function(t){return n=t,o},o.rollup=function(t){return i=t,o},o},as.set=function(t){var e=new o;if(t)for(var n=0;t.length>n;n++)e.add(t[n]);return e},i(o,{has:function(t){return fs+t in this},add:function(t){return this[fs+t]=!0,t},remove:function(t){return t=fs+t,t in this&&delete this[t]},values:function(){var t=[];return this.forEach(function(e){t.push(e)}),t},forEach:function(t){for(var e in this)e.charCodeAt(0)===gs&&t.call(this,e.substring(1))}}),as.behavior={},as.rebind=function(t,e){for(var n,i=1,r=arguments.length;r>++i;)t[n=arguments[i]]=s(t,e,e[n]);return t},as.dispatch=function(){for(var t=new a,e=-1,n=arguments.length;n>++e;)t[arguments[e]]=l(t);return t},a.prototype.on=function(t,e){var n=t.indexOf("."),i="";if(n>=0&&(i=t.substring(n+1),t=t.substring(0,n)),t)return 2>arguments.length?this[t].on(i):this[t].on(i,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(i,null);return this}},as.event=null,as.mouse=function(t){return p(t,c())};var ms=/WebKit/.test(us.navigator.userAgent)?-1:0,vs=g;try{vs(ls.documentElement.childNodes)[0].nodeType}catch(ys){vs=f}var bs=[].__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]};as.touches=function(t,e){return 2>arguments.length&&(e=c().touches),e?vs(e).map(function(e){var n=p(t,e);return n.identifier=e.identifier,n}):[]},as.behavior.drag=function(){function t(){this.on("mousedown.drag",e).on("touchstart.drag",e)}function e(){function t(){var t=s.parentNode;return null!=c?as.touches(t).filter(function(t){return t.identifier===c})[0]:as.mouse(t)}function e(){if(!s.parentNode)return r();var e=t(),n=e[0]-d[0],i=e[1]-d[1];p|=n|i,d=e,u(),a({type:"drag",x:e[0]+o[0],y:e[1]+o[1],dx:n,dy:i})}function r(){a({type:"dragend"}),p&&(u(),as.event.target===l&&h(f,"click")),f.on(null!=c?"touchmove.drag-"+c:"mousemove.drag",null).on(null!=c?"touchend.drag-"+c:"mouseup.drag",null)}var o,s=this,a=n.of(s,arguments),l=as.event.target,c=as.event.touches?as.event.changedTouches[0].identifier:null,d=t(),p=0,f=as.select(us).on(null!=c?"touchmove.drag-"+c:"mousemove.drag",e).on(null!=c?"touchend.drag-"+c:"mouseup.drag",r,!0);i?(o=i.apply(s,arguments),o=[o.x-d[0],o.y-d[1]]):o=[0,0],null==c&&u(),a({type:"dragstart"})}var n=d(t,"drag","dragstart","dragend"),i=null;return t.origin=function(e){return arguments.length?(i=e,t):i},as.rebind(t,n,"on")};var ws=function(t,e){return e.querySelector(t)},xs=function(t,e){return e.querySelectorAll(t)},Ts=ls.documentElement,Ss=Ts.matchesSelector||Ts.webkitMatchesSelector||Ts.mozMatchesSelector||Ts.msMatchesSelector||Ts.oMatchesSelector,_s=function(t,e){return Ss.call(t,e)};"function"==typeof Sizzle&&(ws=function(t,e){return Sizzle(t,e)[0]||null},xs=function(t,e){return Sizzle.uniqueSort(Sizzle(t,e))},_s=Sizzle.matchesSelector),as.selection=function(){return Is};var Es=as.selection.prototype=[];Es.select=function(t){var e,n,i,r,o=[];"function"!=typeof t&&(t=v(t));for(var s=-1,a=this.length;a>++s;){o.push(e=[]),e.parentNode=(i=this[s]).parentNode;for(var l=-1,u=i.length;u>++l;)(r=i[l])?(e.push(n=t.call(r,r.__data__,l)),n&&"__data__"in r&&(n.__data__=r.__data__)):e.push(null)}return m(o)},Es.selectAll=function(t){var e,n,i=[];"function"!=typeof t&&(t=y(t));for(var r=-1,o=this.length;o>++r;)for(var s=this[r],a=-1,l=s.length;l>++a;)(n=s[a])&&(i.push(e=vs(t.call(n,n.__data__,a))),e.parentNode=n);return m(i)};var Cs={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};as.ns={prefix:Cs,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&(n=t.substring(0,e),t=t.substring(e+1)),Cs.hasOwnProperty(n)?{space:Cs[n],local:t}:t}},Es.attr=function(t,e){if(2>arguments.length){if("string"==typeof t){var n=this.node();return t=as.ns.qualify(t),t.local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(b(e,t[e]));return this}return this.each(b(t,e))},as.requote=function(t){return t.replace(ks,"\\$&")};var ks=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;Es.classed=function(t,e){if(2>arguments.length){if("string"==typeof t){var n=this.node(),i=(t=t.trim().split(/^|\s+/g)).length,r=-1;if(e=n.classList){for(;i>++r;)if(!e.contains(t[r]))return!1}else for(e=n.getAttribute("class");i>++r;)if(!x(t[r]).test(e))return!1;return!0}for(e in t)this.each(T(e,t[e]));return this}return this.each(T(t,e))},Es.style=function(t,e,n){var i=arguments.length;if(3>i){if("string"!=typeof t){2>i&&(e="");for(n in t)this.each(_(n,t[n],e));return this}if(2>i)return us.getComputedStyle(this.node(),null).getPropertyValue(t);n=""}return this.each(_(t,e,n))},Es.property=function(t,e){if(2>arguments.length){if("string"==typeof t)return this.node()[t];for(e in t)this.each(E(e,t[e]));return this}return this.each(E(t,e))},Es.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},Es.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},Es.append=function(t){function e(){return this.appendChild(ls.createElementNS(this.namespaceURI,t))}function n(){return this.appendChild(ls.createElementNS(t.space,t.local))}return t=as.ns.qualify(t),this.select(t.local?n:e)},Es.insert=function(t,e){function n(n,i){return this.insertBefore(ls.createElementNS(this.namespaceURI,t),e.call(this,n,i))}function i(n,i){return this.insertBefore(ls.createElementNS(t.space,t.local),e.call(this,n,i))}return t=as.ns.qualify(t),"function"!=typeof e&&(e=v(e)),this.select(t.local?i:n)},Es.remove=function(){return this.each(function(){var t=this.parentNode;t&&t.removeChild(this)})},Es.data=function(t,e){function n(t,n){var i,o,s,a=t.length,h=n.length,d=Math.min(a,h),p=Array(h),f=Array(h),g=Array(a);if(e){var m,v=new r,y=new r,b=[];for(i=-1;a>++i;)m=e.call(o=t[i],o.__data__,i),v.has(m)?g[i]=o:v.set(m,o),b.push(m);for(i=-1;h>++i;)m=e.call(n,s=n[i],i),(o=v.get(m))?(p[i]=o,o.__data__=s):y.has(m)||(f[i]=C(s)),y.set(m,s),v.remove(m);for(i=-1;a>++i;)v.has(b[i])&&(g[i]=t[i])}else{for(i=-1;d>++i;)o=t[i],s=n[i],o?(o.__data__=s,p[i]=o):f[i]=C(s);for(;h>i;++i)f[i]=C(n[i]);for(;a>i;++i)g[i]=t[i]}f.update=p,f.parentNode=p.parentNode=g.parentNode=t.parentNode,l.push(f),u.push(p),c.push(g)}var i,o,s=-1,a=this.length;if(!arguments.length){for(t=Array(a=(i=this[0]).length);a>++s;)(o=i[s])&&(t[s]=o.__data__);return t}var l=O([]),u=m([]),c=m([]);if("function"==typeof t)for(;a>++s;)n(i=this[s],t.call(i,i.parentNode.__data__,s));else for(;a>++s;)n(i=this[s],t);return u.enter=function(){return l},u.exit=function(){return c},u},Es.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},Es.filter=function(t){var e,n,i,r=[];"function"!=typeof t&&(t=k(t));for(var o=0,s=this.length;s>o;o++){r.push(e=[]),e.parentNode=(n=this[o]).parentNode;for(var a=0,l=n.length;l>a;a++)(i=n[a])&&t.call(i,i.__data__,a)&&e.push(i)}return m(r)},Es.order=function(){for(var t=-1,e=this.length;e>++t;)for(var n,i=this[t],r=i.length-1,o=i[r];--r>=0;)(n=i[r])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},Es.sort=function(t){t=M.apply(this,arguments);for(var e=-1,n=this.length;n>++e;)this[e].sort(t);return this.order()},Es.on=function(t,e,n){var i=arguments.length;if(3>i){if("string"!=typeof t){2>i&&(e=!1);for(n in t)this.each(I(n,t[n],e));return this}if(2>i)return(i=this.node()["__on"+t])&&i._;n=!1}return this.each(I(t,e,n))};var Ms=as.map({mouseenter:"mouseover",mouseleave:"mouseout"});Ms.forEach(function(t){"on"+t in ls&&Ms.remove(t)}),Es.each=function(t){return H(this,function(e,n,i){t.call(e,e.__data__,n,i)})},Es.call=function(t){var e=vs(arguments);return t.apply(e[0]=this,e),this},Es.empty=function(){return!this.node()},Es.node=function(){for(var t=0,e=this.length;e>t;t++)for(var n=this[t],i=0,r=n.length;r>i;i++){var o=n[i];if(o)return o}return null};var Ps=[];as.selection.enter=O,as.selection.enter.prototype=Ps,Ps.append=Es.append,Ps.insert=Es.insert,Ps.empty=Es.empty,Ps.node=Es.node,Ps.select=function(t){for(var e,n,i,r,o,s=[],a=-1,l=this.length;l>++a;){i=(r=this[a]).update,s.push(e=[]),e.parentNode=r.parentNode;for(var u=-1,c=r.length;c>++u;)(o=r[u])?(e.push(i[u]=n=t.call(r.parentNode,o.__data__,u)),n.__data__=o.__data__):e.push(null)}return m(s)},Es.transition=function(){var t,e,n=rl||++ll,i=[],r=Object.create(ul);r.time=Date.now();for(var o=-1,s=this.length;s>++o;){i.push(t=[]);for(var a=this[o],l=-1,u=a.length;u>++l;)(e=a[l])&&To(e,l,n,r),t.push(e)}return bo(i,n)},as.select=function(t){var e=["string"==typeof t?ws(t,ls):t];return e.parentNode=Ts,m([e])},as.selectAll=function(t){var e=vs("string"==typeof t?xs(t,ls):t);return e.parentNode=Ts,m([e])};var Is=as.select(Ts);as.behavior.zoom=function(){function t(){this.on("mousedown.zoom",a).on("mousemove.zoom",c).on(Hs+".zoom",l).on("dblclick.zoom",p).on("touchstart.zoom",f).on("touchmove.zoom",g).on("touchend.zoom",f)}function e(t){return[(t[0]-S[0])/_,(t[1]-S[1])/_]}function n(t){return[t[0]*_+S[0],t[1]*_+S[1]]}function i(t){_=Math.max(E[0],Math.min(E[1],t))}function r(t,e){e=n(e),S[0]+=t[0]-e[0],S[1]+=t[1]-e[1]}function o(){b&&b.domain(y.range().map(function(t){return(t-S[0])/_}).map(y.invert)),x&&x.domain(w.range().map(function(t){return(t-S[1])/_}).map(w.invert))}function s(t){o(),as.event.preventDefault(),t({type:"zoom",scale:_,translate:S})}function a(){function t(){l=1,r(as.mouse(i),d),s(o)}function n(){l&&u(),c.on("mousemove.zoom",null).on("mouseup.zoom",null),l&&as.event.target===a&&h(c,"click.zoom")}var i=this,o=C.of(i,arguments),a=as.event.target,l=0,c=as.select(us).on("mousemove.zoom",t).on("mouseup.zoom",n),d=e(as.mouse(i));us.focus(),u()}function l(){m||(m=e(as.mouse(this))),i(Math.pow(2,.002*zs())*_),r(as.mouse(this),m),s(C.of(this,arguments))}function c(){m=null}function p(){var t=as.mouse(this),n=e(t),o=Math.log(_)/Math.LN2;i(Math.pow(2,as.event.shiftKey?Math.ceil(o)-1:Math.floor(o)+1)),r(t,n),s(C.of(this,arguments))}function f(){var t=as.touches(this),n=Date.now();if(v=_,m={},t.forEach(function(t){m[t.identifier]=e(t)}),u(),1===t.length){if(500>n-T){var o=t[0],a=e(t[0]);i(2*_),r(o,a),s(C.of(this,arguments))}T=n}}function g(){var t=as.touches(this),e=t[0],n=m[e.identifier];if(o=t[1]){var o,a=m[o.identifier];e=[(e[0]+o[0])/2,(e[1]+o[1])/2],n=[(n[0]+a[0])/2,(n[1]+a[1])/2],i(as.event.scale*v)}r(e,n),T=null,s(C.of(this,arguments))}var m,v,y,b,w,x,T,S=[0,0],_=1,E=As,C=d(t,"zoom");return t.translate=function(e){return arguments.length?(S=e.map(Number),o(),t):S},t.scale=function(e){return arguments.length?(_=+e,o(),t):_},t.scaleExtent=function(e){return arguments.length?(E=null==e?As:e.map(Number),t):E},t.x=function(e){return arguments.length?(b=e,y=e.copy(),S=[0,0],_=1,t):b},t.y=function(e){return arguments.length?(x=e,w=e.copy(),S=[0,0],_=1,t):x},as.rebind(t,C,"on")};var zs,As=[0,1/0],Hs="onwheel"in ls?(zs=function(){return-as.event.deltaY*(as.event.deltaMode?120:1)},"wheel"):"onmousewheel"in ls?(zs=function(){return as.event.wheelDelta},"mousewheel"):(zs=function(){return-as.event.detail},"MozMousePixelScroll");N.prototype.toString=function(){return this.rgb()+""},as.hsl=function(t,e,n){return 1===arguments.length?t instanceof D?L(t.h,t.s,t.l):re(""+t,oe,L):L(+t,+e,+n)};var Os=D.prototype=new N;Os.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),L(this.h,this.s,this.l/t)},Os.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),L(this.h,this.s,t*this.l)},Os.rgb=function(){return R(this.h,this.s,this.l)};var Ns=Math.PI,Ls=1e-6,Ds=Ns/180,Rs=180/Ns;as.hcl=function(t,e,n){return 1===arguments.length?t instanceof $?V(t.h,t.c,t.l):t instanceof Z?Y(t.l,t.a,t.b):Y((t=se((t=as.rgb(t)).r,t.g,t.b)).l,t.a,t.b):V(+t,+e,+n)};var js=$.prototype=new N;js.brighter=function(t){return V(this.h,this.c,Math.min(100,this.l+Bs*(arguments.length?t:1)))},js.darker=function(t){return V(this.h,this.c,Math.max(0,this.l-Bs*(arguments.length?t:1)))},js.rgb=function(){return Q(this.h,this.c,this.l).rgb()},as.lab=function(t,e,n){return 1===arguments.length?t instanceof Z?G(t.l,t.a,t.b):t instanceof $?Q(t.l,t.c,t.h):se((t=as.rgb(t)).r,t.g,t.b):G(+t,+e,+n)};var Bs=18,Fs=.95047,Ws=1,Us=1.08883,qs=Z.prototype=new N;qs.brighter=function(t){return G(Math.min(100,this.l+Bs*(arguments.length?t:1)),this.a,this.b)},qs.darker=function(t){return G(Math.max(0,this.l-Bs*(arguments.length?t:1)),this.a,this.b)},qs.rgb=function(){return X(this.l,this.a,this.b)},as.rgb=function(t,e,n){return 1===arguments.length?t instanceof ne?ee(t.r,t.g,t.b):re(""+t,ee,R):ee(~~t,~~e,~~n)};var Vs=ne.prototype=new N;Vs.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,i=this.b,r=30;return e||n||i?(e&&r>e&&(e=r),n&&r>n&&(n=r),i&&r>i&&(i=r),ee(Math.min(255,Math.floor(e/t)),Math.min(255,Math.floor(n/t)),Math.min(255,Math.floor(i/t)))):ee(r,r,r)},Vs.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),ee(Math.floor(t*this.r),Math.floor(t*this.g),Math.floor(t*this.b))},Vs.hsl=function(){return oe(this.r,this.g,this.b)},Vs.toString=function(){return"#"+ie(this.r)+ie(this.g)+ie(this.b)};var $s=as.map({aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"});$s.forEach(function(t,e){$s.set(t,re(e,ee,R))}),as.functor=ue,as.xhr=he(ce),as.csv=fe(",","text/csv"),as.tsv=fe("	","text/tab-separated-values");var Qs,Gs,Zs,Xs;as.timer=function(t,e,n){if(3>arguments.length){if(2>arguments.length)e=0;else if(!isFinite(e))return;n=Date.now()}var i=n+e,r={callback:t,time:i,next:null};Gs?Gs.next=r:Qs=r,Gs=r,Zs||(Xs=clearTimeout(Xs),Zs=1,Ys(ge))},as.timer.flush=function(){me(),ve()};var Ys=us.requestAnimationFrame||us.webkitRequestAnimationFrame||us.mozRequestAnimationFrame||us.oRequestAnimationFrame||us.msRequestAnimationFrame||function(t){setTimeout(t,17)},Ks=".",Js=",",ta=[3,3],ea=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(ye);as.formatPrefix=function(t,e){var n=0;return t&&(0>t&&(t*=-1),e&&(t=as.round(t,be(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((0>=n?n+1:n-1)/3)))),ea[8+n/3]},as.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)},as.format=function(t){var e=na.exec(t),n=e[1]||" ",i=e[2]||">",r=e[3]||"",o=e[4]||"",s=e[5],a=+e[6],l=e[7],u=e[8],c=e[9],h=1,d="",p=!1;switch(u&&(u=+u.substring(1)),(s||"0"===n&&"="===i)&&(s=n="0",i="=",l&&(a-=Math.floor((a-1)/4))),c){case"n":l=!0,c="g";break;case"%":h=100,d="%",c="f";break;case"p":h=100,d="%",c="r";break;case"b":case"o":case"x":case"X":o&&(o="0"+c.toLowerCase());case"c":case"d":p=!0,u=0;break;case"s":h=-1,c="r"}"#"===o&&(o=""),"r"!=c||u||(c="g"),null!=u&&("g"==c?u=Math.max(1,Math.min(21,u)):("e"==c||"f"==c)&&(u=Math.max(0,Math.min(20,u)))),c=ia.get(c)||we;var f=s&&l;return function(t){if(p&&t%1)return"";var e=0>t||0===t&&0>1/t?(t=-t,"-"):r;if(0>h){var g=as.formatPrefix(t,u);t=g.scale(t),d=g.symbol}else t*=h;t=c(t,u),!s&&l&&(t=ra(t));var m=o.length+t.length+(f?0:e.length),v=a>m?Array(m=a-m+1).join(n):"";return f&&(t=ra(v+t)),Ks&&t.replace(".",Ks),e+=o,("<"===i?e+t+v:">"===i?v+e+t:"^"===i?v.substring(0,m>>=1)+e+t+v.substring(m):e+(f?t:v+t))+d}};var na=/(?:([^{])?([<>=^]))?([+\- ])?(#)?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,ia=as.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=as.round(t,be(t,e))).toFixed(Math.max(0,Math.min(20,be(t*(1+1e-15),e))))}}),ra=ce;if(ta){var oa=ta.length;ra=function(t){for(var e=t.lastIndexOf("."),n=e>=0?"."+t.substring(e+1):(e=t.length,""),i=[],r=0,o=ta[0];e>0&&o>0;)i.push(t.substring(e-=o,e+o)),o=ta[r=(r+1)%oa];return i.reverse().join(Js||"")+n}}as.geo={},as.geo.stream=function(t,e){t&&sa.hasOwnProperty(t.type)?sa[t.type](t,e):xe(t,e)};var sa={Feature:function(t,e){xe(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;r>++i;)xe(n[i].geometry,e)}},aa={Sphere:function(t,e){e.sphere()},Point:function(t,e){var n=t.coordinates;e.point(n[0],n[1])},MultiPoint:function(t,e){for(var n,i=t.coordinates,r=-1,o=i.length;o>++r;)n=i[r],e.point(n[0],n[1])},LineString:function(t,e){Te(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;r>++i;)Te(n[i],e,0)},Polygon:function(t,e){Se(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;r>++i;)Se(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;r>++i;)xe(n[i],e)}};as.geo.area=function(t){return la=0,as.geo.stream(t,ca),la};var la,ua,ca={sphere:function(){la+=4*Ns},point:P,lineStart:P,lineEnd:P,polygonStart:function(){ua=0,ca.lineStart=_e},polygonEnd:function(){var t=2*ua;la+=0>t?4*Ns+t:t,ca.lineStart=ca.lineEnd=ca.point=P}};as.geo.bounds=function(){function t(t,e){b.push(w=[c=t,d=t]),h>e&&(h=e),e>p&&(p=e)}function e(e,n){var i=Ee([e*Ds,n*Ds]);if(v){var r=ke(v,i),o=[r[1],-r[0],0],s=ke(o,r);Ie(s),s=ze(s);var l=e-f,u=l>0?1:-1,g=s[0]*Rs*u,m=Math.abs(l)>180;if(m^(g>u*f&&u*e>g)){var y=s[1]*Rs;y>p&&(p=y)}else if(g=(g+360)%360-180,m^(g>u*f&&u*e>g)){var y=-s[1]*Rs;h>y&&(h=y)}else h>n&&(h=n),n>p&&(p=n);m?f>e?a(c,e)>a(c,d)&&(d=e):a(e,d)>a(c,d)&&(c=e):d>=c?(c>e&&(c=e),e>d&&(d=e)):e>f?a(c,e)>a(c,d)&&(d=e):a(e,d)>a(c,d)&&(c=e)}else t(e,n);v=i,f=e}function n(){x.point=e}function i(){w[0]=c,w[1]=d,x.point=t,v=null}function r(t,n){if(v){var i=t-f;y+=Math.abs(i)>180?i+(i>0?360:-360):i}else g=t,m=n;ca.point(t,n),e(t,n)}function o(){ca.lineStart()}function s(){r(g,m),ca.lineEnd(),Math.abs(y)>Ls&&(c=-(d=180)),w[0]=c,w[1]=d,v=null}function a(t,e){return 0>(e-=t)?e+360:e}function l(t,e){return t[0]-e[0]}function u(t,e){return e[0]<=e[1]?t>=e[0]&&e[1]>=t:e[0]>t||t>e[1]}var c,h,d,p,f,g,m,v,y,b,w,x={point:t,lineStart:n,lineEnd:i,polygonStart:function(){x.point=r,x.lineStart=o,x.lineEnd=s,y=0,ca.polygonStart()},polygonEnd:function(){ca.polygonEnd(),x.point=t,x.lineStart=n,x.lineEnd=i,0>ua?(c=-(d=180),h=-(p=90)):y>Ls?p=90:-Ls>y&&(h=-90),w[0]=c,w[1]=d}};return function(t){p=d=-(c=h=1/0),b=[],as.geo.stream(t,x),b.sort(l);for(var e,n=1,i=b.length,r=b[0],o=[r];i>n;++n)e=b[n],u(e[0],r)||u(e[1],r)?(a(r[0],e[1])>a(r[0],r[1])&&(r[1]=e[1]),a(e[0],r[1])>a(r[0],r[1])&&(r[0]=e[0])):o.push(r=e);for(var s,e,f=-1/0,i=o.length-1,n=0,r=o[i];i>=n;r=e,++n)e=o[n],(s=a(r[1],e[0]))>f&&(f=s,c=e[0],d=r[1]);return b=w=null,[[c,h],[d,p]]}}(),as.geo.centroid=function(t){ha=da=pa=fa=ga=0,as.geo.stream(t,ma);var e;return da&&Math.abs(e=Math.sqrt(pa*pa+fa*fa+ga*ga))>Ls?[Math.atan2(fa,pa)*Rs,Math.asin(Math.max(-1,Math.min(1,ga/e)))*Rs]:void 0};var ha,da,pa,fa,ga,ma={sphere:function(){2>ha&&(ha=2,da=pa=fa=ga=0)},point:He,lineStart:Ne,lineEnd:Le,polygonStart:function(){2>ha&&(ha=2,da=pa=fa=ga=0),ma.lineStart=Oe},polygonEnd:function(){ma.lineStart=Ne}},va=Be(De,Ve,Qe),ya=1e9;as.geo.projection=Je,as.geo.projectionMutator=tn,(as.geo.equirectangular=function(){return Je(nn)}).raw=nn.invert=nn,as.geo.rotation=function(t){function e(e){return e=t(e[0]*Ds,e[1]*Ds),e[0]*=Rs,e[1]*=Rs,e}return t=rn(t[0]%360*Ds,t[1]*Ds,t.length>2?t[2]*Ds:0),e.invert=function(e){return e=t.invert(e[0]*Ds,e[1]*Ds),e[0]*=Rs,e[1]*=Rs,e},e},as.geo.circle=function(){function t(){var t="function"==typeof i?i.apply(this,arguments):i,e=rn(-t[0]*Ds,-t[1]*Ds,0).invert,r=[];return n(null,null,1,{point:function(t,n){r.push(t=e(t,n)),t[0]*=Rs,t[1]*=Rs}}),{type:"Polygon",coordinates:[r]}}var e,n,i=[0,0],r=6;return t.origin=function(e){return arguments.length?(i=e,t):i},t.angle=function(i){return arguments.length?(n=ln((e=+i)*Ds,r*Ds),t):e},t.precision=function(i){return arguments.length?(n=ln(e*Ds,(r=+i)*Ds),t):r},t.angle(90)},as.geo.distance=function(t,e){var n,i=(e[0]-t[0])*Ds,r=t[1]*Ds,o=e[1]*Ds,s=Math.sin(i),a=Math.cos(i),l=Math.sin(r),u=Math.cos(r),c=Math.sin(o),h=Math.cos(o);return Math.atan2(Math.sqrt((n=h*s)*n+(n=u*c-l*h*a)*n),l*c+u*h*a)},as.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return as.range(Math.ceil(o/m)*m,r,m).map(d).concat(as.range(Math.ceil(u/v)*v,l,v).map(p)).concat(as.range(Math.ceil(i/f)*f,n,f).filter(function(t){return Math.abs(t%m)>Ls}).map(c)).concat(as.range(Math.ceil(a/g)*g,s,g).filter(function(t){return Math.abs(t%v)>Ls}).map(h))}var n,i,r,o,s,a,l,u,c,h,d,p,f=10,g=f,m=90,v=360,y=2.5;
return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[d(o).concat(p(l).slice(1),d(r).reverse().slice(1),p(u).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.majorExtent(e).minorExtent(e):t.minorExtent()},t.majorExtent=function(e){return arguments.length?(o=+e[0][0],r=+e[1][0],u=+e[0][1],l=+e[1][1],o>r&&(e=o,o=r,r=e),u>l&&(e=u,u=l,l=e),t.precision(y)):[[o,u],[r,l]]},t.minorExtent=function(e){return arguments.length?(i=+e[0][0],n=+e[1][0],a=+e[0][1],s=+e[1][1],i>n&&(e=i,i=n,n=e),a>s&&(e=a,a=s,s=e),t.precision(y)):[[i,a],[n,s]]},t.step=function(e){return arguments.length?t.majorStep(e).minorStep(e):t.minorStep()},t.majorStep=function(e){return arguments.length?(m=+e[0],v=+e[1],t):[m,v]},t.minorStep=function(e){return arguments.length?(f=+e[0],g=+e[1],t):[f,g]},t.precision=function(e){return arguments.length?(y=+e,c=cn(a,s,90),h=hn(i,n,y),d=cn(u,l,90),p=hn(o,r,y),t):y},t.majorExtent([[-180,-90+Ls],[180,90-Ls]]).minorExtent([[-180,-80-Ls],[180,80+Ls]])},as.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[e||i.apply(this,arguments),n||r.apply(this,arguments)]}}var e,n,i=dn,r=pn;return t.distance=function(){return as.geo.distance(e||i.apply(this,arguments),n||r.apply(this,arguments))},t.source=function(n){return arguments.length?(i=n,e="function"==typeof n?null:n,t):i},t.target=function(e){return arguments.length?(r=e,n="function"==typeof e?null:e,t):r},t.precision=function(){return arguments.length?t:0},t},as.geo.interpolate=function(t,e){return fn(t[0]*Ds,t[1]*Ds,e[0]*Ds,e[1]*Ds)},as.geo.length=function(t){return ba=0,as.geo.stream(t,wa),ba};var ba,wa={sphere:P,point:P,lineStart:gn,lineEnd:P,polygonStart:P,polygonEnd:P};(as.geo.conicEqualArea=function(){return mn(vn)}).raw=vn,as.geo.albers=function(){return as.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},as.geo.albersUsa=function(){function t(t){var o=t[0],s=t[1];return e=null,n(o,s),e||(i(o,s),e)||r(o,s),e}var e,n,i,r,o=as.geo.albers(),s=as.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a=as.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,n){e=[t,n]}};return t.invert=function(t){var e=o.scale(),n=o.translate(),i=(t[0]-n[0])/e,r=(t[1]-n[1])/e;return(r>=.12&&.234>r&&i>=-.425&&-.214>i?s:r>=.166&&.234>r&&i>=-.214&&-.115>i?a:o).invert(t)},t.stream=function(t){var e=o.stream(t),n=s.stream(t),i=a.stream(t);return{point:function(t,r){e.point(t,r),n.point(t,r),i.point(t,r)},sphere:function(){e.sphere(),n.sphere(),i.sphere()},lineStart:function(){e.lineStart(),n.lineStart(),i.lineStart()},lineEnd:function(){e.lineEnd(),n.lineEnd(),i.lineEnd()},polygonStart:function(){e.polygonStart(),n.polygonStart(),i.polygonStart()},polygonEnd:function(){e.polygonEnd(),n.polygonEnd(),i.polygonEnd()}}},t.precision=function(e){return arguments.length?(o.precision(e),s.precision(e),a.precision(e),t):o.precision()},t.scale=function(e){return arguments.length?(o.scale(e),s.scale(.35*e),a.scale(e),t.translate(o.translate())):o.scale()},t.translate=function(e){if(!arguments.length)return o.translate();var u=o.scale(),c=+e[0],h=+e[1];return n=o.translate(e).clipExtent([[c-.455*u,h-.238*u],[c+.455*u,h+.238*u]]).stream(l).point,i=s.translate([c-.307*u,h+.201*u]).clipExtent([[c-.425*u+Ls,h+.12*u+Ls],[c-.214*u-Ls,h+.234*u-Ls]]).stream(l).point,r=a.translate([c-.205*u,h+.212*u]).clipExtent([[c-.214*u+Ls,h+.166*u+Ls],[c-.115*u-Ls,h+.234*u-Ls]]).stream(l).point,t},t.scale(1070)};var xa,Ta,Sa,_a,Ea,Ca,ka={point:P,lineStart:P,lineEnd:P,polygonStart:function(){Ta=0,ka.lineStart=yn},polygonEnd:function(){ka.lineStart=ka.lineEnd=ka.point=P,xa+=Math.abs(Ta/2)}},Ma={point:bn,lineStart:P,lineEnd:P,polygonStart:P,polygonEnd:P},Pa={point:Tn,lineStart:Sn,lineEnd:_n,polygonStart:function(){Pa.lineStart=En},polygonEnd:function(){Pa.point=Tn,Pa.lineStart=Sn,Pa.lineEnd=_n}};as.geo.path=function(){function t(t){return t&&as.geo.stream(t,i(r.pointRadius("function"==typeof o?+o.apply(this,arguments):o))),r.result()}var e,n,i,r,o=4.5;return t.area=function(t){return xa=0,as.geo.stream(t,i(ka)),xa},t.centroid=function(t){return ha=pa=fa=ga=0,as.geo.stream(t,i(Pa)),ga?[pa/ga,fa/ga]:void 0},t.bounds=function(t){return Ea=Ca=-(Sa=_a=1/0),as.geo.stream(t,i(Ma)),[[Sa,_a],[Ea,Ca]]},t.projection=function(n){return arguments.length?(i=(e=n)?n.stream||kn(n):ce,t):e},t.context=function(e){return arguments.length?(r=null==(n=e)?new wn:new Cn(e),t):n},t.pointRadius=function(e){return arguments.length?(o="function"==typeof e?e:+e,t):o},t.projection(as.geo.albersUsa()).context(null)};var Ia=Mn(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(as.geo.azimuthalEqualArea=function(){return Je(Ia)}).raw=Ia;var za=Mn(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},ce);(as.geo.azimuthalEquidistant=function(){return Je(za)}).raw=za,(as.geo.conicConformal=function(){return mn(Pn)}).raw=Pn,(as.geo.conicEquidistant=function(){return mn(In)}).raw=In;var Aa=Mn(function(t){return 1/t},Math.atan);(as.geo.gnomonic=function(){return Je(Aa)}).raw=Aa,zn.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Ns/2]},(as.geo.mercator=function(){return An(zn)}).raw=zn;var Ha=Mn(function(){return 1},Math.asin);(as.geo.orthographic=function(){return Je(Ha)}).raw=Ha;var Oa=Mn(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(as.geo.stereographic=function(){return Je(Oa)}).raw=Oa,Hn.invert=function(t,e){return[Math.atan2(W(t),Math.cos(e)),F(Math.sin(e)/U(t))]},(as.geo.transverseMercator=function(){return An(Hn)}).raw=Hn,as.geom={},as.svg={},as.svg.line=function(){return On(ce)};var Na=as.map({linear:Dn,"linear-closed":Rn,"step-before":jn,"step-after":Bn,basis:$n,"basis-open":Qn,"basis-closed":Gn,bundle:Zn,cardinal:Un,"cardinal-open":Fn,"cardinal-closed":Wn,monotone:ei});Na.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var La=[0,2/3,1/3,0],Da=[0,1/3,2/3,0],Ra=[0,1/6,2/3,1/6];as.geom.hull=function(t){function e(t){if(3>t.length)return[];var e,r,o,s,a,l,u,c,h,d,p,f,g=ue(n),m=ue(i),v=t.length,y=v-1,b=[],w=[],x=0;if(g===Nn&&i===Ln)e=t;else for(o=0,e=[];v>o;++o)e.push([+g.call(this,r=t[o],o),+m.call(this,r,o)]);for(o=1;v>o;++o)(e[o][1]<e[x][1]||e[o][1]==e[x][1]&&e[o][0]<e[x][0])&&(x=o);for(o=0;v>o;++o)o!==x&&(l=e[o][1]-e[x][1],a=e[o][0]-e[x][0],b.push({angle:Math.atan2(l,a),index:o}));for(b.sort(function(t,e){return t.angle-e.angle}),p=b[0].angle,d=b[0].index,h=0,o=1;y>o;++o){if(s=b[o].index,p==b[o].angle){if(a=e[d][0]-e[x][0],l=e[d][1]-e[x][1],u=e[s][0]-e[x][0],c=e[s][1]-e[x][1],a*a+l*l>=u*u+c*c){b[o].index=-1;continue}b[h].index=-1}p=b[o].angle,h=o,d=s}for(w.push(x),o=0,s=0;2>o;++s)b[s].index>-1&&(w.push(b[s].index),o++);for(f=w.length;y>s;++s)if(!(0>b[s].index)){for(;!ni(w[f-2],w[f-1],b[s].index,e);)--f;w[f++]=b[s].index}var T=[];for(o=f-1;o>=0;--o)T.push(t[w[o]]);return T}var n=Nn,i=Ln;return arguments.length?e(t):(e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(i=t,e):i},e)},as.geom.polygon=function(t){return t.area=function(){for(var e=0,n=t.length,i=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];n>++e;)i+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return.5*i},t.centroid=function(e){var n,i,r=-1,o=t.length,s=0,a=0,l=t[o-1];for(arguments.length||(e=-1/(6*t.area()));o>++r;)n=l,l=t[r],i=n[0]*l[1]-l[0]*n[1],s+=(n[0]+l[0])*i,a+=(n[1]+l[1])*i;return[s*e,a*e]},t.clip=function(e){for(var n,i,r,o,s,a,l=-1,u=t.length,c=t[u-1];u>++l;){for(n=e.slice(),e.length=0,o=t[l],s=n[(r=n.length)-1],i=-1;r>++i;)a=n[i],ii(a,c,o)?(ii(s,c,o)||e.push(ri(s,a,c,o)),e.push(a)):ii(s,c,o)&&e.push(ri(s,a,c,o)),s=a;c=o}return e},t},as.geom.delaunay=function(t){var e=t.map(function(){return[]}),n=[];return oi(t,function(n){e[n.region.l.index].push(t[n.region.r.index])}),e.forEach(function(e,i){var r=t[i],o=r[0],s=r[1];e.forEach(function(t){t.angle=Math.atan2(t[0]-o,t[1]-s)}),e.sort(function(t,e){return t.angle-e.angle});for(var a=0,l=e.length-1;l>a;a++)n.push([r,e[a],e[a+1]])}),n},as.geom.voronoi=function(t){function e(t){var e,i,s,a=t.map(function(){return[]}),l=ue(r),u=ue(o),c=t.length,h=1e6;if(l===Nn&&u===Ln)e=t;else for(e=[],s=0;c>s;++s)e.push([+l.call(this,i=t[s],s),+u.call(this,i,s)]);if(oi(e,function(t){var e,n,i,r,o,s;1===t.a&&t.b>=0?(e=t.ep.r,n=t.ep.l):(e=t.ep.l,n=t.ep.r),1===t.a?(o=e?e.y:-h,i=t.c-t.b*o,s=n?n.y:h,r=t.c-t.b*s):(i=e?e.x:-h,o=t.c-t.a*i,r=n?n.x:h,s=t.c-t.a*r);var l=[i,o],u=[r,s];a[t.region.l.index].push(l,u),a[t.region.r.index].push(l,u)}),a=a.map(function(t,n){var i=e[n][0],r=e[n][1],o=t.map(function(t){return Math.atan2(t[0]-i,t[1]-r)}),s=as.range(t.length).sort(function(t,e){return o[t]-o[e]});return s.filter(function(t,e){return!e||o[t]-o[s[e-1]]>Ls}).map(function(e){return t[e]})}),a.forEach(function(t,n){var i=t.length;if(!i)return t.push([-h,-h],[-h,h],[h,h],[h,-h]);if(!(i>2)){var r=e[n],o=t[0],s=t[1],a=r[0],l=r[1],u=o[0],c=o[1],d=s[0],p=s[1],f=Math.abs(d-u),g=p-c;if(Ls>Math.abs(g)){var m=c>l?-h:h;t.push([-h,m],[h,m])}else if(Ls>f){var v=u>a?-h:h;t.push([v,-h],[v,h])}else{var m=(u-a)*(p-c)>(d-u)*(c-l)?h:-h,y=Math.abs(g)-f;Ls>Math.abs(y)?t.push([0>g?m:-m,m]):(y>0&&(m*=-1),t.push([-h,m],[h,m]))}}}),n)for(s=0;c>s;++s)n(a[s]);for(s=0;c>s;++s)a[s].point=t[s];return a}var n,i=null,r=Nn,o=Ln;return arguments.length?e(t):(e.x=function(t){return arguments.length?(r=t,e):r},e.y=function(t){return arguments.length?(o=t,e):o},e.size=function(t){return arguments.length?(null==t?n=null:(i=[+t[0],+t[1]],n=as.geom.polygon([[0,0],[0,i[1]],i,[i[0],0]]).clip),e):i},e.links=function(t){var e,n,i,s=t.map(function(){return[]}),a=[],l=ue(r),u=ue(o),c=t.length;if(l===Nn&&u===Ln)e=t;else for(i=0;c>i;++i)e.push([+l.call(this,n=t[i],i),+u.call(this,n,i)]);return oi(e,function(e){var n=e.region.l.index,i=e.region.r.index;s[n][i]||(s[n][i]=s[i][n]=!0,a.push({source:t[n],target:t[i]}))}),a},e.triangles=function(t){if(r===Nn&&o===Ln)return as.geom.delaunay(t);var e,n,i,s,a,l=ue(r),u=ue(o);for(s=0,e=[],a=t.length;a>s;++s)n=[+l.call(this,i=t[s],s),+u.call(this,i,s)],n.data=i,e.push(n);return as.geom.delaunay(e).map(function(t){return t.map(function(t){return t.data})})},e)};var ja={l:"r",r:"l"};as.geom.quadtree=function(t,e,n,i,r){function o(t){function o(t,e,n,i,r,o,s,a){if(!isNaN(n)&&!isNaN(i))if(t.leaf){var l=t.x,c=t.y;if(null!=l)if(.01>Math.abs(l-n)+Math.abs(c-i))u(t,e,n,i,r,o,s,a);else{var h=t.point;t.x=t.y=t.point=null,u(t,h,l,c,r,o,s,a),u(t,e,n,i,r,o,s,a)}else t.x=n,t.y=i,t.point=e}else u(t,e,n,i,r,o,s,a)}function u(t,e,n,i,r,s,a,l){var u=.5*(r+a),c=.5*(s+l),h=n>=u,d=i>=c,p=(d<<1)+h;t.leaf=!1,t=t.nodes[p]||(t.nodes[p]=li()),h?r=u:a=u,d?s=c:l=c,o(t,e,n,i,r,s,a,l)}var c,h,d,p,f,g,m,v,y,b=ue(a),w=ue(l);if(null!=e)g=e,m=n,v=i,y=r;else if(v=y=-(g=m=1/0),h=[],d=[],f=t.length,s)for(p=0;f>p;++p)c=t[p],g>c.x&&(g=c.x),m>c.y&&(m=c.y),c.x>v&&(v=c.x),c.y>y&&(y=c.y),h.push(c.x),d.push(c.y);else for(p=0;f>p;++p){var x=+b(c=t[p],p),T=+w(c,p);g>x&&(g=x),m>T&&(m=T),x>v&&(v=x),T>y&&(y=T),h.push(x),d.push(T)}var S=v-g,_=y-m;S>_?y=m+S:v=g+_;var E=li();if(E.add=function(t){o(E,t,+b(t,++p),+w(t,p),g,m,v,y)},E.visit=function(t){ui(t,E,g,m,v,y)},p=-1,null==e){for(;f>++p;)o(E,t[p],h[p],d[p],g,m,v,y);--p}else t.forEach(E.add);return h=d=t=c=null,E}var s,a=Nn,l=Ln;return(s=arguments.length)?(a=si,l=ai,3===s&&(r=n,i=e,n=e=0),o(t)):(o.x=function(t){return arguments.length?(a=t,o):a},o.y=function(t){return arguments.length?(l=t,o):l},o.size=function(t){return arguments.length?(null==t?e=n=i=r=null:(e=n=0,i=+t[0],r=+t[1]),o):null==e?null:[i,r]},o)},as.interpolateRgb=ci,as.transform=function(t){var e=ls.createElementNS(as.ns.prefix.svg,"g");return(as.transform=function(t){if(null!=t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate()}return new hi(n?n.matrix:Ba)})(t)},hi.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Ba={a:1,b:0,c:0,d:1,e:0,f:0};as.interpolateNumber=gi,as.interpolateTransform=mi,as.interpolateObject=vi,as.interpolateString=yi;var Fa=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;as.interpolate=bi,as.interpolators=[function(t,e){var n=typeof e;return("string"===n?$s.has(e)||/^(#|rgb\(|hsl\()/.test(e)?ci:yi:e instanceof N?ci:"object"===n?Array.isArray(e)?xi:vi:gi)(t,e)}],as.interpolateArray=xi;var Wa=function(){return ce},Ua=as.map({linear:Wa,poly:Mi,quad:function(){return Ei},cubic:function(){return Ci},sin:function(){return Pi},exp:function(){return Ii},circle:function(){return zi},elastic:Ai,back:Hi,bounce:function(){return Oi}}),qa=as.map({"in":ce,out:Si,"in-out":_i,"out-in":function(t){return _i(Si(t))}});as.ease=function(t){var e=t.indexOf("-"),n=e>=0?t.substring(0,e):t,i=e>=0?t.substring(e+1):"in";return n=Ua.get(n)||Wa,i=qa.get(i)||ce,Ti(i(n.apply(null,Array.prototype.slice.call(arguments,1))))},as.interpolateHcl=Ni,as.interpolateHsl=Li,as.interpolateLab=Di,as.interpolateRound=Ri,as.layout={},as.layout.bundle=function(){return function(t){for(var e=[],n=-1,i=t.length;i>++n;)e.push(Fi(t[n]));return e}},as.layout.chord=function(){function t(){var t,u,h,d,p,f={},g=[],m=as.range(o),v=[];for(n=[],i=[],t=0,d=-1;o>++d;){for(u=0,p=-1;o>++p;)u+=r[d][p];g.push(u),v.push(as.range(o)),t+=u}for(s&&m.sort(function(t,e){return s(g[t],g[e])}),a&&v.forEach(function(t,e){t.sort(function(t,n){return a(r[e][t],r[e][n])})}),t=(2*Ns-c*o)/t,u=0,d=-1;o>++d;){for(h=u,p=-1;o>++p;){var y=m[d],b=v[y][p],w=r[y][b],x=u,T=u+=w*t;f[y+"-"+b]={index:y,subindex:b,startAngle:x,endAngle:T,value:w}}i[y]={index:y,startAngle:h,endAngle:u,value:(u-h)/t},u+=c}for(d=-1;o>++d;)for(p=d-1;o>++p;){var S=f[d+"-"+p],_=f[p+"-"+d];(S.value||_.value)&&n.push(S.value<_.value?{source:_,target:S}:{source:S,target:_})}l&&e()}function e(){n.sort(function(t,e){return l((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var n,i,r,o,s,a,l,u={},c=0;return u.matrix=function(t){return arguments.length?(o=(r=t)&&r.length,n=i=null,u):r},u.padding=function(t){return arguments.length?(c=t,n=i=null,u):c},u.sortGroups=function(t){return arguments.length?(s=t,n=i=null,u):s},u.sortSubgroups=function(t){return arguments.length?(a=t,n=null,u):a},u.sortChords=function(t){return arguments.length?(l=t,n&&e(),u):l},u.chords=function(){return n||t(),n},u.groups=function(){return i||t(),i},u},as.layout.force=function(){function t(t){return function(e,n,i,r){if(e.point!==t){var o=e.cx-t.x,s=e.cy-t.y,a=1/Math.sqrt(o*o+s*s);if(g>(r-n)*a){var l=e.charge*a*a;return t.px-=o*l,t.py-=s*l,!0}if(e.point&&isFinite(a)){var l=e.pointCharge*a*a;t.px-=o*l,t.py-=s*l}}return!e.charge}}function e(t){t.px=as.event.x,t.py=as.event.y,a.resume()}var n,i,r,o,s,a={},l=as.dispatch("start","tick","end"),u=[1,1],c=.9,h=Va,d=$a,p=-30,f=.1,g=.8,m=[],v=[];return a.tick=function(){if(.005>(i*=.99))return l.end({type:"end",alpha:i=0}),!0;var e,n,a,h,d,g,y,b,w,x=m.length,T=v.length;for(n=0;T>n;++n)a=v[n],h=a.source,d=a.target,b=d.x-h.x,w=d.y-h.y,(g=b*b+w*w)&&(g=i*o[n]*((g=Math.sqrt(g))-r[n])/g,b*=g,w*=g,d.x-=b*(y=h.weight/(d.weight+h.weight)),d.y-=w*y,h.x+=b*(y=1-y),h.y+=w*y);if((y=i*f)&&(b=u[0]/2,w=u[1]/2,n=-1,y))for(;x>++n;)a=m[n],a.x+=(b-a.x)*y,a.y+=(w-a.y)*y;if(p)for(Gi(e=as.geom.quadtree(m),i,s),n=-1;x>++n;)(a=m[n]).fixed||e.visit(t(a));for(n=-1;x>++n;)a=m[n],a.fixed?(a.x=a.px,a.y=a.py):(a.x-=(a.px-(a.px=a.x))*c,a.y-=(a.py-(a.py=a.y))*c);l.tick({type:"tick",alpha:i})},a.nodes=function(t){return arguments.length?(m=t,a):m},a.links=function(t){return arguments.length?(v=t,a):v},a.size=function(t){return arguments.length?(u=t,a):u},a.linkDistance=function(t){return arguments.length?(h="function"==typeof t?t:+t,a):h},a.distance=a.linkDistance,a.linkStrength=function(t){return arguments.length?(d="function"==typeof t?t:+t,a):d},a.friction=function(t){return arguments.length?(c=+t,a):c},a.charge=function(t){return arguments.length?(p="function"==typeof t?t:+t,a):p},a.gravity=function(t){return arguments.length?(f=+t,a):f},a.theta=function(t){return arguments.length?(g=+t,a):g},a.alpha=function(t){return arguments.length?(t=+t,i?i=t>0?t:0:t>0&&(l.start({type:"start",alpha:i=t}),as.timer(a.tick)),a):i},a.start=function(){function t(t,i){for(var r,o=e(n),s=-1,a=o.length;a>++s;)if(!isNaN(r=o[s][t]))return r;return Math.random()*i}function e(){if(!l){for(l=[],i=0;f>i;++i)l[i]=[];for(i=0;g>i;++i){var t=v[i];l[t.source.index].push(t.target),l[t.target.index].push(t.source)}}return l[n]}var n,i,l,c,f=m.length,g=v.length,y=u[0],b=u[1];for(n=0;f>n;++n)(c=m[n]).index=n,c.weight=0;for(n=0;g>n;++n)c=v[n],"number"==typeof c.source&&(c.source=m[c.source]),"number"==typeof c.target&&(c.target=m[c.target]),++c.source.weight,++c.target.weight;for(n=0;f>n;++n)c=m[n],isNaN(c.x)&&(c.x=t("x",y)),isNaN(c.y)&&(c.y=t("y",b)),isNaN(c.px)&&(c.px=c.x),isNaN(c.py)&&(c.py=c.y);if(r=[],"function"==typeof h)for(n=0;g>n;++n)r[n]=+h.call(this,v[n],n);else for(n=0;g>n;++n)r[n]=h;if(o=[],"function"==typeof d)for(n=0;g>n;++n)o[n]=+d.call(this,v[n],n);else for(n=0;g>n;++n)o[n]=d;if(s=[],"function"==typeof p)for(n=0;f>n;++n)s[n]=+p.call(this,m[n],n);else for(n=0;f>n;++n)s[n]=p;return a.resume()},a.resume=function(){return a.alpha(.1)},a.stop=function(){return a.alpha(0)},a.drag=function(){return n||(n=as.behavior.drag().origin(ce).on("dragstart.force",qi).on("drag.force",e).on("dragend.force",Vi)),arguments.length?(this.on("mouseover.force",$i).on("mouseout.force",Qi).call(n),void 0):n},as.rebind(a,l,"on")};var Va=20,$a=1;as.layout.hierarchy=function(){function t(e,s,a){var l=r.call(n,e,s);if(e.depth=s,a.push(e),l&&(u=l.length)){for(var u,c,h=-1,d=e.children=[],p=0,f=s+1;u>++h;)c=t(l[h],f,a),c.parent=e,d.push(c),p+=c.value;i&&d.sort(i),o&&(e.value=p)}else o&&(e.value=+o.call(n,e,s)||0);return e}function e(t,i){var r=t.children,s=0;if(r&&(a=r.length))for(var a,l=-1,u=i+1;a>++l;)s+=e(r[l],u);else o&&(s=+o.call(n,t,i)||0);return o&&(t.value=s),s}function n(e){var n=[];return t(e,0,n),n}var i=Ki,r=Xi,o=Yi;return n.sort=function(t){return arguments.length?(i=t,n):i},n.children=function(t){return arguments.length?(r=t,n):r},n.value=function(t){return arguments.length?(o=t,n):o},n.revalue=function(t){return e(t,0),t},n},as.layout.partition=function(){function t(e,n,i,r){var o=e.children;if(e.x=n,e.y=e.depth*r,e.dx=i,e.dy=r,o&&(s=o.length)){var s,a,l,u=-1;for(i=e.value?i/e.value:0;s>++u;)t(a=o[u],n,l=a.value*i,r),n+=l}}function e(t){var n=t.children,i=0;if(n&&(r=n.length))for(var r,o=-1;r>++o;)i=Math.max(i,e(n[o]));return 1+i}function n(n,o){var s=i.call(this,n,o);return t(s[0],0,r[0],r[1]/e(s[0])),s}var i=as.layout.hierarchy(),r=[1,1];return n.size=function(t){return arguments.length?(r=t,n):r},Zi(n,i)},as.layout.pie=function(){function t(o){var s=o.map(function(n,i){return+e.call(t,n,i)}),a=+("function"==typeof i?i.apply(this,arguments):i),l=(("function"==typeof r?r.apply(this,arguments):r)-a)/as.sum(s),u=as.range(o.length);null!=n&&u.sort(n===Qa?function(t,e){return s[e]-s[t]}:function(t,e){return n(o[t],o[e])});var c=[];return u.forEach(function(t){var e;c[t]={data:o[t],value:e=s[t],startAngle:a,endAngle:a+=e*l}}),c}var e=Number,n=Qa,i=0,r=2*Ns;return t.value=function(n){return arguments.length?(e=n,t):e},t.sort=function(e){return arguments.length?(n=e,t):n},t.startAngle=function(e){return arguments.length?(i=e,t):i},t.endAngle=function(e){return arguments.length?(r=e,t):r},t};var Qa={};as.layout.stack=function(){function t(a,l){var u=a.map(function(n,i){return e.call(t,n,i)}),c=u.map(function(e){return e.map(function(e,n){return[o.call(t,e,n),s.call(t,e,n)]})}),h=n.call(t,c,l);u=as.permute(u,h),c=as.permute(c,h);var d,p,f,g=i.call(t,c,l),m=u.length,v=u[0].length;for(p=0;v>p;++p)for(r.call(t,u[0][p],f=g[p],c[0][p][1]),d=1;m>d;++d)r.call(t,u[d][p],f+=c[d-1][p][1],c[d][p][1]);return a}var e=ce,n=ir,i=rr,r=nr,o=tr,s=er;return t.values=function(n){return arguments.length?(e=n,t):e},t.order=function(e){return arguments.length?(n="function"==typeof e?e:Ga.get(e)||ir,t):n},t.offset=function(e){return arguments.length?(i="function"==typeof e?e:Za.get(e)||rr,t):i},t.x=function(e){return arguments.length?(o=e,t):o},t.y=function(e){return arguments.length?(s=e,t):s},t.out=function(e){return arguments.length?(r=e,t):r},t};var Ga=as.map({"inside-out":function(t){var e,n,i=t.length,r=t.map(or),o=t.map(sr),s=as.range(i).sort(function(t,e){return r[t]-r[e]}),a=0,l=0,u=[],c=[];for(e=0;i>e;++e)n=s[e],l>a?(a+=o[n],u.push(n)):(l+=o[n],c.push(n));return c.reverse().concat(u)},reverse:function(t){return as.range(t.length).reverse()},"default":ir}),Za=as.map({silhouette:function(t){var e,n,i,r=t.length,o=t[0].length,s=[],a=0,l=[];for(n=0;o>n;++n){for(e=0,i=0;r>e;e++)i+=t[e][n][1];i>a&&(a=i),s.push(i)}for(n=0;o>n;++n)l[n]=(a-s[n])/2;return l},wiggle:function(t){var e,n,i,r,o,s,a,l,u,c=t.length,h=t[0],d=h.length,p=[];for(p[0]=l=u=0,n=1;d>n;++n){for(e=0,r=0;c>e;++e)r+=t[e][n][1];for(e=0,o=0,a=h[n][0]-h[n-1][0];c>e;++e){for(i=0,s=(t[e][n][1]-t[e][n-1][1])/(2*a);e>i;++i)s+=(t[i][n][1]-t[i][n-1][1])/a;o+=s*t[e][n][1]}p[n]=l-=r?o/r*a:0,u>l&&(u=l)}for(n=0;d>n;++n)p[n]-=u;return p},expand:function(t){var e,n,i,r=t.length,o=t[0].length,s=1/r,a=[];for(n=0;o>n;++n){for(e=0,i=0;r>e;e++)i+=t[e][n][1];if(i)for(e=0;r>e;e++)t[e][n][1]/=i;else for(e=0;r>e;e++)t[e][n][1]=s}for(n=0;o>n;++n)a[n]=0;return a},zero:rr});as.layout.histogram=function(){function t(t,o){for(var s,a,l=[],u=t.map(n,this),c=i.call(this,u,o),h=r.call(this,c,u,o),o=-1,d=u.length,p=h.length-1,f=e?1:1/d;p>++o;)s=l[o]=[],s.dx=h[o+1]-(s.x=h[o]),s.y=0;if(p>0)for(o=-1;d>++o;)a=u[o],a>=c[0]&&c[1]>=a&&(s=l[as.bisect(h,a,1,p)-1],s.y+=f,s.push(t[o]));return l}var e=!0,n=Number,i=cr,r=lr;return t.value=function(e){return arguments.length?(n=e,t):n},t.range=function(e){return arguments.length?(i=ue(e),t):i},t.bins=function(e){return arguments.length?(r="number"==typeof e?function(t){return ur(t,e)}:ue(e),t):r},t.frequency=function(n){return arguments.length?(e=!!n,t):e},t},as.layout.tree=function(){function t(t,r){function o(t,e){var i=t.children,r=t._tree;if(i&&(s=i.length)){for(var s,l,u,c=i[0],h=c,d=-1;s>++d;)u=i[d],o(u,l),h=a(u,l,h),l=u;br(t);var p=.5*(c._tree.prelim+u._tree.prelim);e?(r.prelim=e._tree.prelim+n(t,e),r.mod=r.prelim-p):r.prelim=p}else e&&(r.prelim=e._tree.prelim+n(t,e))}function s(t,e){t.x=t._tree.prelim+e;var n=t.children;if(n&&(i=n.length)){var i,r=-1;for(e+=t._tree.mod;i>++r;)s(n[r],e)}}function a(t,e,i){if(e){for(var r,o=t,s=t,a=e,l=t.parent.children[0],u=o._tree.mod,c=s._tree.mod,h=a._tree.mod,d=l._tree.mod;a=pr(a),o=dr(o),a&&o;)l=dr(l),s=pr(s),s._tree.ancestor=t,r=a._tree.prelim+h-o._tree.prelim-u+n(a,o),r>0&&(wr(xr(a,t,i),t,r),u+=r,c+=r),h+=a._tree.mod,u+=o._tree.mod,d+=l._tree.mod,c+=s._tree.mod;a&&!pr(s)&&(s._tree.thread=a,s._tree.mod+=h-c),o&&!dr(l)&&(l._tree.thread=o,l._tree.mod+=u-d,i=t)}return i}var l=e.call(this,t,r),u=l[0];yr(u,function(t,e){t._tree={ancestor:t,prelim:0,mod:0,change:0,shift:0,number:e?e._tree.number+1:0}}),o(u),s(u,-u._tree.prelim);var c=fr(u,mr),h=fr(u,gr),d=fr(u,vr),p=c.x-n(c,h)/2,f=h.x+n(h,c)/2,g=d.depth||1;return yr(u,function(t){t.x=(t.x-p)/(f-p)*i[0],t.y=t.depth/g*i[1],delete t._tree}),l}var e=as.layout.hierarchy().sort(null).value(null),n=hr,i=[1,1];return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(i=e,t):i},Zi(t,e)},as.layout.pack=function(){function t(t,r){var o=e.call(this,t,r),s=o[0];s.x=0,s.y=0,yr(s,function(t){t.r=Math.sqrt(t.value)}),yr(s,Cr);var a=i[0],l=i[1],u=Math.max(2*s.r/a,2*s.r/l);if(n>0){var c=n*u/2;yr(s,function(t){t.r+=c}),yr(s,Cr),yr(s,function(t){t.r-=c}),u=Math.max(2*s.r/a,2*s.r/l)}return Pr(s,a/2,l/2,1/u),o}var e=as.layout.hierarchy().sort(Tr),n=0,i=[1,1];return t.size=function(e){return arguments.length?(i=e,t):i},t.padding=function(e){return arguments.length?(n=+e,t):n},Zi(t,e)},as.layout.cluster=function(){function t(t,r){var o,s=e.call(this,t,r),a=s[0],l=0;yr(a,function(t){var e=t.children;e&&e.length?(t.x=Ar(e),t.y=zr(e)):(t.x=o?l+=n(t,o):0,t.y=0,o=t)});var u=Hr(a),c=Or(a),h=u.x-n(u,c)/2,d=c.x+n(c,u)/2;return yr(a,function(t){t.x=(t.x-h)/(d-h)*i[0],t.y=(1-(a.y?t.y/a.y:1))*i[1]}),s}var e=as.layout.hierarchy().sort(null).value(null),n=hr,i=[1,1];return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(i=e,t):i},Zi(t,e)},as.layout.treemap=function(){function t(t,e){for(var n,i,r=-1,o=t.length;o>++r;)i=(n=t[r]).value*(0>e?0:e),n.area=isNaN(i)||0>=i?0:i}function e(n){var o=n.children;if(o&&o.length){var s,a,l,u=h(n),c=[],d=o.slice(),f=1/0,g="slice"===p?u.dx:"dice"===p?u.dy:"slice-dice"===p?1&n.depth?u.dy:u.dx:Math.min(u.dx,u.dy);for(t(d,u.dx*u.dy/n.value),c.area=0;(l=d.length)>0;)c.push(s=d[l-1]),c.area+=s.area,"squarify"!==p||f>=(a=i(c,g))?(d.pop(),f=a):(c.area-=c.pop().area,r(c,g,u,!1),g=Math.min(u.dx,u.dy),c.length=c.area=0,f=1/0);c.length&&(r(c,g,u,!0),c.length=c.area=0),o.forEach(e)}}function n(e){var i=e.children;if(i&&i.length){var o,s=h(e),a=i.slice(),l=[];for(t(a,s.dx*s.dy/e.value),l.area=0;o=a.pop();)l.push(o),l.area+=o.area,null!=o.z&&(r(l,o.z?s.dx:s.dy,s,!a.length),l.length=l.area=0);i.forEach(n)}}function i(t,e){for(var n,i=t.area,r=0,o=1/0,s=-1,a=t.length;a>++s;)(n=t[s].area)&&(o>n&&(o=n),n>r&&(r=n));return i*=i,e*=e,i?Math.max(e*r*f/i,i/(e*o*f)):1/0}function r(t,e,n,i){var r,o=-1,s=t.length,a=n.x,u=n.y,c=e?l(t.area/e):0;if(e==n.dx){for((i||c>n.dy)&&(c=n.dy);s>++o;)r=t[o],r.x=a,r.y=u,r.dy=c,a+=r.dx=Math.min(n.x+n.dx-a,c?l(r.area/c):0);r.z=!0,r.dx+=n.x+n.dx-a,n.y+=c,n.dy-=c}else{for((i||c>n.dx)&&(c=n.dx);s>++o;)r=t[o],r.x=a,r.y=u,r.dx=c,u+=r.dy=Math.min(n.y+n.dy-u,c?l(r.area/c):0);r.z=!1,r.dy+=n.y+n.dy-u,n.x+=c,n.dx-=c}}function o(i){var r=s||a(i),o=r[0];return o.x=0,o.y=0,o.dx=u[0],o.dy=u[1],s&&a.revalue(o),t([o],o.dx*o.dy/o.value),(s?n:e)(o),d&&(s=r),r}var s,a=as.layout.hierarchy(),l=Math.round,u=[1,1],c=null,h=Nr,d=!1,p="squarify",f=.5*(1+Math.sqrt(5));return o.size=function(t){return arguments.length?(u=t,o):u},o.padding=function(t){function e(e){var n=t.call(o,e,e.depth);return null==n?Nr(e):Lr(e,"number"==typeof n?[n,n,n,n]:n)}function n(e){return Lr(e,t)}if(!arguments.length)return c;var i;return h=null==(c=t)?Nr:"function"==(i=typeof t)?e:"number"===i?(t=[t,t,t,t],n):n,o},o.round=function(t){return arguments.length?(l=t?Math.round:Number,o):l!=Number},o.sticky=function(t){return arguments.length?(d=t,s=null,o):d},o.ratio=function(t){return arguments.length?(f=t,o):f},o.mode=function(t){return arguments.length?(p=t+"",o):p},Zi(o,a)},as.random={normal:function(t,e){var n=arguments.length;return 2>n&&(e=1),1>n&&(t=0),function(){var n,i,r;do n=2*Math.random()-1,i=2*Math.random()-1,r=n*n+i*i;while(!r||r>1);return t+e*n*Math.sqrt(-2*Math.log(r)/r)}},logNormal:function(){var t=as.random.normal.apply(as,arguments);return function(){return Math.exp(t())}},irwinHall:function(t){return function(){for(var e=0,n=0;t>n;n++)e+=Math.random();return e/t}}},as.scale={},as.scale.linear=function(){return Wr([0,1],[0,1],bi,!1)},as.scale.log=function(){return Gr(as.scale.linear().domain([0,Math.LN10]),10,Zr,Xr,[1,10])};var Xa=as.format(".0e");as.scale.pow=function(){return Jr(as.scale.linear(),1,[0,1])},as.scale.sqrt=function(){return as.scale.pow().exponent(.5)},as.scale.ordinal=function(){return eo([],{t:"range",a:[[]]})},as.scale.category10=function(){return as.scale.ordinal().range(Ya)},as.scale.category20=function(){return as.scale.ordinal().range(Ka)},as.scale.category20b=function(){return as.scale.ordinal().range(Ja)},as.scale.category20c=function(){return as.scale.ordinal().range(tl)};var Ya=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],Ka=["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],Ja=["#393b79","#5254a3","#6b6ecf","#9c9ede","#637939","#8ca252","#b5cf6b","#cedb9c","#8c6d31","#bd9e39","#e7ba52","#e7cb94","#843c39","#ad494a","#d6616b","#e7969c","#7b4173","#a55194","#ce6dbd","#de9ed6"],tl=["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"];as.scale.quantile=function(){return no([],[])},as.scale.quantize=function(){return io(0,1,[0,1])},as.scale.threshold=function(){return ro([.5],[0,1])},as.scale.identity=function(){return oo([0,1])},as.svg.arc=function(){function t(){var t=e.apply(this,arguments),o=n.apply(this,arguments),s=i.apply(this,arguments)+el,a=r.apply(this,arguments)+el,l=(s>a&&(l=s,s=a,a=l),a-s),u=Ns>l?"0":"1",c=Math.cos(s),h=Math.sin(s),d=Math.cos(a),p=Math.sin(a);return l>=nl?t?"M0,"+o+"A"+o+","+o+" 0 1,1 0,"+-o+"A"+o+","+o+" 0 1,1 0,"+o+"M0,"+t+"A"+t+","+t+" 0 1,0 0,"+-t+"A"+t+","+t+" 0 1,0 0,"+t+"Z":"M0,"+o+"A"+o+","+o+" 0 1,1 0,"+-o+"A"+o+","+o+" 0 1,1 0,"+o+"Z":t?"M"+o*c+","+o*h+"A"+o+","+o+" 0 "+u+",1 "+o*d+","+o*p+"L"+t*d+","+t*p+"A"+t+","+t+" 0 "+u+",0 "+t*c+","+t*h+"Z":"M"+o*c+","+o*h+"A"+o+","+o+" 0 "+u+",1 "+o*d+","+o*p+"L0,0"+"Z"}var e=so,n=ao,i=lo,r=uo;return t.innerRadius=function(n){return arguments.length?(e=ue(n),t):e},t.outerRadius=function(e){return arguments.length?(n=ue(e),t):n},t.startAngle=function(e){return arguments.length?(i=ue(e),t):i},t.endAngle=function(e){return arguments.length?(r=ue(e),t):r},t.centroid=function(){var t=(e.apply(this,arguments)+n.apply(this,arguments))/2,o=(i.apply(this,arguments)+r.apply(this,arguments))/2+el;return[Math.cos(o)*t,Math.sin(o)*t]},t};var el=-Ns/2,nl=2*Ns-1e-6;as.svg.line.radial=function(){var t=On(co);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},jn.reverse=Bn,Bn.reverse=jn,as.svg.area=function(){return ho(ce)},as.svg.area.radial=function(){var t=ho(co);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},as.svg.chord=function(){function t(t,a){var l=e(this,o,t,a),u=e(this,s,t,a);return"M"+l.p0+i(l.r,l.p1,l.a1-l.a0)+(n(l,u)?r(l.r,l.p1,l.r,l.p0):r(l.r,l.p1,u.r,u.p0)+i(u.r,u.p1,u.a1-u.a0)+r(u.r,u.p1,l.r,l.p0))+"Z"}function e(t,e,n,i){var r=e.call(t,n,i),o=a.call(t,r,i),s=l.call(t,r,i)+el,c=u.call(t,r,i)+el;return{r:o,a0:s,a1:c,p0:[o*Math.cos(s),o*Math.sin(s)],p1:[o*Math.cos(c),o*Math.sin(c)]}}function n(t,e){return t.a0==e.a0&&t.a1==e.a1}function i(t,e,n){return"A"+t+","+t+" 0 "+ +(n>Ns)+",1 "+e}function r(t,e,n,i){return"Q 0,0 "+i}var o=dn,s=pn,a=po,l=lo,u=uo;return t.radius=function(e){return arguments.length?(a=ue(e),t):a},t.source=function(e){return arguments.length?(o=ue(e),t):o},t.target=function(e){return arguments.length?(s=ue(e),t):s},t.startAngle=function(e){return arguments.length?(l=ue(e),t):l},t.endAngle=function(e){return arguments.length?(u=ue(e),t):u},t},as.svg.diagonal=function(){function t(t,r){var o=e.call(this,t,r),s=n.call(this,t,r),a=(o.y+s.y)/2,l=[o,{x:o.x,y:a},{x:s.x,y:a},s];return l=l.map(i),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var e=dn,n=pn,i=fo;return t.source=function(n){return arguments.length?(e=ue(n),t):e},t.target=function(e){return arguments.length?(n=ue(e),t):n},t.projection=function(e){return arguments.length?(i=e,t):i},t},as.svg.diagonal.radial=function(){var t=as.svg.diagonal(),e=fo,n=t.projection;return t.projection=function(t){return arguments.length?n(go(e=t)):e},t},as.svg.symbol=function(){function t(t,i){return(il.get(e.call(this,t,i))||yo)(n.call(this,t,i))}var e=vo,n=mo;return t.type=function(n){return arguments.length?(e=ue(n),t):e},t.size=function(e){return arguments.length?(n=ue(e),t):n},t};var il=as.map({circle:yo,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*sl)),n=e*sl;return"M0,"+-e+"L"+n+",0"+" 0,"+e+" "+-n+",0"+"Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"
},"triangle-down":function(t){var e=Math.sqrt(t/ol),n=e*ol/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/ol),n=e*ol/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});as.svg.symbolTypes=il.keys();var rl,ol=Math.sqrt(3),sl=Math.tan(30*Ds),al=[],ll=0,ul={ease:ki,delay:0,duration:250};al.call=Es.call,al.empty=Es.empty,al.node=Es.node,as.transition=function(t){return arguments.length?rl?t.transition():t:Is.transition()},as.transition.prototype=al,al.select=function(t){var e,n,i,r=this.id,o=[];"function"!=typeof t&&(t=v(t));for(var s=-1,a=this.length;a>++s;){o.push(e=[]);for(var l=this[s],u=-1,c=l.length;c>++u;)(i=l[u])&&(n=t.call(i,i.__data__,u))?("__data__"in i&&(n.__data__=i.__data__),To(n,u,r,i.__transition__[r]),e.push(n)):e.push(null)}return bo(o,r)},al.selectAll=function(t){var e,n,i,r,o,s=this.id,a=[];"function"!=typeof t&&(t=y(t));for(var l=-1,u=this.length;u>++l;)for(var c=this[l],h=-1,d=c.length;d>++h;)if(i=c[h]){o=i.__transition__[s],n=t.call(i,i.__data__,h),a.push(e=[]);for(var p=-1,f=n.length;f>++p;)To(r=n[p],p,s,o),e.push(r)}return bo(a,s)},al.filter=function(t){var e,n,i,r=[];"function"!=typeof t&&(t=k(t));for(var o=0,s=this.length;s>o;o++){r.push(e=[]);for(var n=this[o],a=0,l=n.length;l>a;a++)(i=n[a])&&t.call(i,i.__data__,a)&&e.push(i)}return bo(r,this.id,this.time).ease(this.ease())},al.tween=function(t,e){var n=this.id;return 2>arguments.length?this.node().__transition__[n].tween.get(t):H(this,null==e?function(e){e.__transition__[n].tween.remove(t)}:function(i){i.__transition__[n].tween.set(t,e)})},al.attr=function(t,e){function n(){this.removeAttribute(a)}function i(){this.removeAttributeNS(a.space,a.local)}function r(t){return null==t?n:(t+="",function(){var e,n=this.getAttribute(a);return n!==t&&(e=s(n,t),function(t){this.setAttribute(a,e(t))})})}function o(t){return null==t?i:(t+="",function(){var e,n=this.getAttributeNS(a.space,a.local);return n!==t&&(e=s(n,t),function(t){this.setAttributeNS(a.space,a.local,e(t))})})}if(2>arguments.length){for(e in t)this.attr(e,t[e]);return this}var s=wi(t),a=as.ns.qualify(t);return wo(this,"attr."+t,e,a.local?o:r)},al.attrTween=function(t,e){function n(t,n){var i=e.call(this,t,n,this.getAttribute(r));return i&&function(t){this.setAttribute(r,i(t))}}function i(t,n){var i=e.call(this,t,n,this.getAttributeNS(r.space,r.local));return i&&function(t){this.setAttributeNS(r.space,r.local,i(t))}}var r=as.ns.qualify(t);return this.tween("attr."+t,r.local?i:n)},al.style=function(t,e,n){function i(){this.style.removeProperty(t)}function r(e){return null==e?i:(e+="",function(){var i,r=us.getComputedStyle(this,null).getPropertyValue(t);return r!==e&&(i=s(r,e),function(e){this.style.setProperty(t,i(e),n)})})}var o=arguments.length;if(3>o){if("string"!=typeof t){2>o&&(e="");for(n in t)this.style(n,t[n],e);return this}n=""}var s=wi(t);return wo(this,"style."+t,e,r)},al.styleTween=function(t,e,n){function i(i,r){var o=e.call(this,i,r,us.getComputedStyle(this,null).getPropertyValue(t));return o&&function(e){this.style.setProperty(t,o(e),n)}}return 3>arguments.length&&(n=""),this.tween("style."+t,i)},al.text=function(t){return wo(this,"text",t,xo)},al.remove=function(){return this.each("end.transition",function(){var t;!this.__transition__&&(t=this.parentNode)&&t.removeChild(this)})},al.ease=function(t){var e=this.id;return 1>arguments.length?this.node().__transition__[e].ease:("function"!=typeof t&&(t=as.ease.apply(as,arguments)),H(this,function(n){n.__transition__[e].ease=t}))},al.delay=function(t){var e=this.id;return H(this,"function"==typeof t?function(n,i,r){n.__transition__[e].delay=0|t.call(n,n.__data__,i,r)}:(t|=0,function(n){n.__transition__[e].delay=t}))},al.duration=function(t){var e=this.id;return H(this,"function"==typeof t?function(n,i,r){n.__transition__[e].duration=Math.max(1,0|t.call(n,n.__data__,i,r))}:(t=Math.max(1,0|t),function(n){n.__transition__[e].duration=t}))},al.each=function(t,e){var n=this.id;if(2>arguments.length){var i=ul,r=rl;rl=n,H(this,function(e,i,r){ul=e.__transition__[n],t.call(e,e.__data__,i,r)}),ul=i,rl=r}else H(this,function(i){i.__transition__[n].event.on(t,e)});return this},al.transition=function(){for(var t,e,n,i,r=this.id,o=++ll,s=[],a=0,l=this.length;l>a;a++){s.push(t=[]);for(var e=this[a],u=0,c=e.length;c>u;u++)(n=e[u])&&(i=Object.create(n.__transition__[r]),i.delay+=i.duration,To(n,u,o,i)),t.push(n)}return bo(s,o)},as.svg.axis=function(){function t(t){t.each(function(){var t,h=as.select(this),d=null==u?n.ticks?n.ticks.apply(n,l):n.domain():u,p=null==e?n.tickFormat?n.tickFormat.apply(n,l):String:e,f=Eo(n,d,c),g=h.selectAll(".tick.minor").data(f,String),m=g.enter().insert("line",".tick").attr("class","tick minor").style("opacity",1e-6),v=as.transition(g.exit()).style("opacity",1e-6).remove(),y=as.transition(g).style("opacity",1),b=h.selectAll(".tick.major").data(d,String),w=b.enter().insert("g","path").attr("class","tick major").style("opacity",1e-6),x=as.transition(b.exit()).style("opacity",1e-6).remove(),T=as.transition(b).style("opacity",1),S=Rr(n),_=h.selectAll(".domain").data([0]),E=(_.enter().append("path").attr("class","domain"),as.transition(_)),C=n.copy(),k=this.__chart__||C;this.__chart__=C,w.append("line"),w.append("text");var M=w.select("line"),P=T.select("line"),I=b.select("text").text(p),z=w.select("text"),A=T.select("text");switch(i){case"bottom":t=So,m.attr("y2",o),y.attr("x2",0).attr("y2",o),M.attr("y2",r),z.attr("y",Math.max(r,0)+a),P.attr("x2",0).attr("y2",r),A.attr("x",0).attr("y",Math.max(r,0)+a),I.attr("dy",".71em").style("text-anchor","middle"),E.attr("d","M"+S[0]+","+s+"V0H"+S[1]+"V"+s);break;case"top":t=So,m.attr("y2",-o),y.attr("x2",0).attr("y2",-o),M.attr("y2",-r),z.attr("y",-(Math.max(r,0)+a)),P.attr("x2",0).attr("y2",-r),A.attr("x",0).attr("y",-(Math.max(r,0)+a)),I.attr("dy","0em").style("text-anchor","middle"),E.attr("d","M"+S[0]+","+-s+"V0H"+S[1]+"V"+-s);break;case"left":t=_o,m.attr("x2",-o),y.attr("x2",-o).attr("y2",0),M.attr("x2",-r),z.attr("x",-(Math.max(r,0)+a)),P.attr("x2",-r).attr("y2",0),A.attr("x",-(Math.max(r,0)+a)).attr("y",0),I.attr("dy",".32em").style("text-anchor","end"),E.attr("d","M"+-s+","+S[0]+"H0V"+S[1]+"H"+-s);break;case"right":t=_o,m.attr("x2",o),y.attr("x2",o).attr("y2",0),M.attr("x2",r),z.attr("x",Math.max(r,0)+a),P.attr("x2",r).attr("y2",0),A.attr("x",Math.max(r,0)+a).attr("y",0),I.attr("dy",".32em").style("text-anchor","start"),E.attr("d","M"+s+","+S[0]+"H0V"+S[1]+"H"+s)}if(n.ticks)w.call(t,k),T.call(t,C),x.call(t,C),m.call(t,k),y.call(t,C),v.call(t,C);else{var H=C.rangeBand()/2,O=function(t){return C(t)+H};w.call(t,O),T.call(t,O)}})}var e,n=as.scale.linear(),i=cl,r=6,o=6,s=6,a=3,l=[10],u=null,c=0;return t.scale=function(e){return arguments.length?(n=e,t):n},t.orient=function(e){return arguments.length?(i=e in hl?e+"":cl,t):i},t.ticks=function(){return arguments.length?(l=arguments,t):l},t.tickValues=function(e){return arguments.length?(u=e,t):u},t.tickFormat=function(n){return arguments.length?(e=n,t):e},t.tickSize=function(e,n){if(!arguments.length)return r;var i=arguments.length-1;return r=+e,o=i>1?+n:r,s=i>0?+arguments[i]:r,t},t.tickPadding=function(e){return arguments.length?(a=+e,t):a},t.tickSubdivide=function(e){return arguments.length?(c=+e,t):c},t};var cl="bottom",hl={top:1,right:1,bottom:1,left:1};as.svg.brush=function(){function t(o){o.each(function(){var o,s=as.select(this),u=s.selectAll(".background").data([0]),h=s.selectAll(".extent").data([0]),d=s.selectAll(".resize").data(c,String);s.style("pointer-events","all").on("mousedown.brush",r).on("touchstart.brush",r),u.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),h.enter().append("rect").attr("class","extent").style("cursor","move"),d.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return dl[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),d.style("display",t.empty()?"none":null),d.exit().remove(),a&&(o=Rr(a),u.attr("x",o[0]).attr("width",o[1]-o[0]),n(s)),l&&(o=Rr(l),u.attr("y",o[0]).attr("height",o[1]-o[0]),i(s)),e(s)})}function e(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+h[+/e$/.test(t)][0]+","+h[+/^s/.test(t)][1]+")"})}function n(t){t.select(".extent").attr("x",h[0][0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",h[1][0]-h[0][0])}function i(t){t.select(".extent").attr("y",h[0][1]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",h[1][1]-h[0][1])}function r(){function r(){var t=as.event.changedTouches;return t?as.touches(y,t)[0]:as.mouse(y)}function c(){32==as.event.keyCode&&(E||(m=null,C[0]-=h[1][0],C[1]-=h[1][1],E=2),u())}function d(){32==as.event.keyCode&&2==E&&(C[0]+=h[1][0],C[1]+=h[1][1],E=0,u())}function p(){var t=r(),o=!1;v&&(t[0]+=v[0],t[1]+=v[1]),E||(as.event.altKey?(m||(m=[(h[0][0]+h[1][0])/2,(h[0][1]+h[1][1])/2]),C[0]=h[+(t[0]<m[0])][0],C[1]=h[+(t[1]<m[1])][1]):m=null),S&&f(t,a,0)&&(n(x),o=!0),_&&f(t,l,1)&&(i(x),o=!0),o&&(e(x),w({type:"brush",mode:E?"move":"resize"}))}function f(t,e,n){var i,r,s=Rr(e),a=s[0],l=s[1],u=C[n],c=h[1][n]-h[0][n];return E&&(a-=u,l-=c+u),i=Math.max(a,Math.min(l,t[n])),E?r=(i+=u)+c:(m&&(u=Math.max(a,Math.min(l,2*m[n]-i))),i>u?(r=i,i=u):r=u),h[0][n]!==i||h[1][n]!==r?(o=null,h[0][n]=i,h[1][n]=r,!0):void 0}function g(){p(),x.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),as.select("body").style("cursor",null),k.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),w({type:"brushend"}),u()}var m,v,y=this,b=as.select(as.event.target),w=s.of(y,arguments),x=as.select(y),T=b.datum(),S=!/^(n|s)$/.test(T)&&a,_=!/^(e|w)$/.test(T)&&l,E=b.classed("extent"),C=r(),k=as.select(us).on("mousemove.brush",p).on("mouseup.brush",g).on("touchmove.brush",p).on("touchend.brush",g).on("keydown.brush",c).on("keyup.brush",d);if(E)C[0]=h[0][0]-C[0],C[1]=h[0][1]-C[1];else if(T){var M=+/w$/.test(T),P=+/^n/.test(T);v=[h[1-M][0]-C[0],h[1-P][1]-C[1]],C[0]=h[M][0],C[1]=h[P][1]}else as.event.altKey&&(m=C.slice());x.style("pointer-events","none").selectAll(".resize").style("display",null),as.select("body").style("cursor",b.style("cursor")),w({type:"brushstart"}),p(),u()}var o,s=d(t,"brushstart","brush","brushend"),a=null,l=null,c=pl[0],h=[[0,0],[0,0]];return t.x=function(e){return arguments.length?(a=e,c=pl[!a<<1|!l],t):a},t.y=function(e){return arguments.length?(l=e,c=pl[!a<<1|!l],t):l},t.extent=function(e){var n,i,r,s,u;return arguments.length?(o=[[0,0],[0,0]],a&&(n=e[0],i=e[1],l&&(n=n[0],i=i[0]),o[0][0]=n,o[1][0]=i,a.invert&&(n=a(n),i=a(i)),n>i&&(u=n,n=i,i=u),h[0][0]=0|n,h[1][0]=0|i),l&&(r=e[0],s=e[1],a&&(r=r[1],s=s[1]),o[0][1]=r,o[1][1]=s,l.invert&&(r=l(r),s=l(s)),r>s&&(u=r,r=s,s=u),h[0][1]=0|r,h[1][1]=0|s),t):(e=o||h,a&&(n=e[0][0],i=e[1][0],o||(n=h[0][0],i=h[1][0],a.invert&&(n=a.invert(n),i=a.invert(i)),n>i&&(u=n,n=i,i=u))),l&&(r=e[0][1],s=e[1][1],o||(r=h[0][1],s=h[1][1],l.invert&&(r=l.invert(r),s=l.invert(s)),r>s&&(u=r,r=s,s=u))),a&&l?[[n,r],[i,s]]:a?[n,i]:l&&[r,s])},t.clear=function(){return o=null,h[0][0]=h[0][1]=h[1][0]=h[1][1]=0,t},t.empty=function(){return a&&h[0][0]===h[1][0]||l&&h[0][1]===h[1][1]},as.rebind(t,s,"on")};var dl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},pl=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];as.time={};var fl=Date,gl=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];Co.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){ml.setUTCDate.apply(this._,arguments)},setDay:function(){ml.setUTCDay.apply(this._,arguments)},setFullYear:function(){ml.setUTCFullYear.apply(this._,arguments)},setHours:function(){ml.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){ml.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){ml.setUTCMinutes.apply(this._,arguments)},setMonth:function(){ml.setUTCMonth.apply(this._,arguments)},setSeconds:function(){ml.setUTCSeconds.apply(this._,arguments)},setTime:function(){ml.setTime.apply(this._,arguments)}};var ml=Date.prototype,vl="%a %b %e %X %Y",yl="%m/%d/%Y",bl="%H:%M:%S",wl=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],xl=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Tl=["January","February","March","April","May","June","July","August","September","October","November","December"],Sl=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];as.time.year=ko(function(t){return t=as.time.day(t),t.setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),as.time.years=as.time.year.range,as.time.years.utc=as.time.year.utc.range,as.time.day=ko(function(t){var e=new fl(1970,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),as.time.days=as.time.day.range,as.time.days.utc=as.time.day.utc.range,as.time.dayOfYear=function(t){var e=as.time.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},gl.forEach(function(t,e){t=t.toLowerCase(),e=7-e;var n=as.time[t]=ko(function(t){return(t=as.time.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=as.time.year(t).getDay();return Math.floor((as.time.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});as.time[t+"s"]=n.range,as.time[t+"s"].utc=n.utc.range,as.time[t+"OfYear"]=function(t){var n=as.time.year(t).getDay();return Math.floor((as.time.dayOfYear(t)+(n+e)%7)/7)}}),as.time.week=as.time.sunday,as.time.weeks=as.time.sunday.range,as.time.weeks.utc=as.time.sunday.utc.range,as.time.weekOfYear=as.time.sundayOfYear,as.time.format=function(t){function e(e){for(var i,r,o,s=[],a=-1,l=0;n>++a;)37===t.charCodeAt(a)&&(s.push(t.substring(l,a)),null!=(r=Il[i=t.charAt(++a)])&&(i=t.charAt(++a)),(o=zl[i])&&(i=o(e,null==r?"e"===i?" ":"0":r)),s.push(i),l=a+1);return s.push(t.substring(l,a)),s.join("")}var n=t.length;return e.parse=function(e){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0},i=Po(n,t,e,0);if(i!=e.length)return null;"p"in n&&(n.H=n.H%12+12*n.p);var r=new fl;return r.setFullYear(n.y,n.m,n.d),r.setHours(n.H,n.M,n.S,n.L),r},e.toString=function(){return t},e};var _l=Io(wl),El=Io(xl),Cl=Io(Tl),kl=zo(Tl),Ml=Io(Sl),Pl=zo(Sl),Il={"-":"",_:" ",0:"0"},zl={a:function(t){return xl[t.getDay()]},A:function(t){return wl[t.getDay()]},b:function(t){return Sl[t.getMonth()]},B:function(t){return Tl[t.getMonth()]},c:as.time.format(vl),d:function(t,e){return Ao(t.getDate(),e,2)},e:function(t,e){return Ao(t.getDate(),e,2)},H:function(t,e){return Ao(t.getHours(),e,2)},I:function(t,e){return Ao(t.getHours()%12||12,e,2)},j:function(t,e){return Ao(1+as.time.dayOfYear(t),e,3)},L:function(t,e){return Ao(t.getMilliseconds(),e,3)},m:function(t,e){return Ao(t.getMonth()+1,e,2)},M:function(t,e){return Ao(t.getMinutes(),e,2)},p:function(t){return t.getHours()>=12?"PM":"AM"},S:function(t,e){return Ao(t.getSeconds(),e,2)},U:function(t,e){return Ao(as.time.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return Ao(as.time.mondayOfYear(t),e,2)},x:as.time.format(yl),X:as.time.format(bl),y:function(t,e){return Ao(t.getFullYear()%100,e,2)},Y:function(t,e){return Ao(t.getFullYear()%1e4,e,4)},Z:Xo,"%":function(){return"%"}},Al={a:Ho,A:Oo,b:No,B:Lo,c:Do,d:qo,e:qo,H:Vo,I:Vo,L:Go,m:Uo,M:$o,p:Zo,S:Qo,x:Ro,X:jo,y:Fo,Y:Bo},Hl=/^\s*\d+/,Ol=as.map({am:0,pm:1});as.time.format.utc=function(t){function e(t){try{fl=Co;var e=new fl;return e._=t,n(e)}finally{fl=Date}}var n=as.time.format(t);return e.parse=function(t){try{fl=Co;var e=n.parse(t);return e&&e._}finally{fl=Date}},e.toString=n.toString,e};var Nl=as.time.format.utc("%Y-%m-%dT%H:%M:%S.%LZ");as.time.format.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Yo:Nl,Yo.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},Yo.toString=Nl.toString,as.time.second=ko(function(t){return new fl(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),as.time.seconds=as.time.second.range,as.time.seconds.utc=as.time.second.utc.range,as.time.minute=ko(function(t){return new fl(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),as.time.minutes=as.time.minute.range,as.time.minutes.utc=as.time.minute.utc.range,as.time.hour=ko(function(t){var e=t.getTimezoneOffset()/60;return new fl(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),as.time.hours=as.time.hour.range,as.time.hours.utc=as.time.hour.utc.range,as.time.month=ko(function(t){return t=as.time.day(t),t.setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),as.time.months=as.time.month.range,as.time.months.utc=as.time.month.utc.range;var Ll=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Dl=[[as.time.second,1],[as.time.second,5],[as.time.second,15],[as.time.second,30],[as.time.minute,1],[as.time.minute,5],[as.time.minute,15],[as.time.minute,30],[as.time.hour,1],[as.time.hour,3],[as.time.hour,6],[as.time.hour,12],[as.time.day,1],[as.time.day,2],[as.time.week,1],[as.time.month,1],[as.time.month,3],[as.time.year,1]],Rl=[[as.time.format("%Y"),De],[as.time.format("%B"),function(t){return t.getMonth()}],[as.time.format("%b %d"),function(t){return 1!=t.getDate()}],[as.time.format("%a %d"),function(t){return t.getDay()&&1!=t.getDate()}],[as.time.format("%I %p"),function(t){return t.getHours()}],[as.time.format("%I:%M"),function(t){return t.getMinutes()}],[as.time.format(":%S"),function(t){return t.getSeconds()}],[as.time.format(".%L"),function(t){return t.getMilliseconds()}]],jl=as.scale.linear(),Bl=ts(Rl);Dl.year=function(t,e){return jl.domain(t.map(ns)).ticks(e).map(es)},as.time.scale=function(){return Ko(as.scale.linear(),Dl,Bl)};var Fl=Dl.map(function(t){return[t[0].utc,t[1]]}),Wl=[[as.time.format.utc("%Y"),De],[as.time.format.utc("%B"),function(t){return t.getUTCMonth()}],[as.time.format.utc("%b %d"),function(t){return 1!=t.getUTCDate()}],[as.time.format.utc("%a %d"),function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],[as.time.format.utc("%I %p"),function(t){return t.getUTCHours()}],[as.time.format.utc("%I:%M"),function(t){return t.getUTCMinutes()}],[as.time.format.utc(":%S"),function(t){return t.getUTCSeconds()}],[as.time.format.utc(".%L"),function(t){return t.getUTCMilliseconds()}]],Ul=ts(Wl);return Fl.year=function(t,e){return jl.domain(t.map(rs)).ticks(e).map(is)},as.time.scale.utc=function(){return Ko(as.scale.linear(),Fl,Ul)},as.text=he(function(t){return t.responseText}),as.json=function(t,e){return de(t,"application/json",os,e)},as.html=function(t,e){return de(t,"text/html",ss,e)},as.xml=he(function(t){return t.responseXML}),as}(),/*! URI.js v1.11.2 http://medialize.github.com/URI.js/ */
function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define(e):t.IPv6=e(t)}(this,function(t){var e=t&&t.IPv6;return{best:function(t){t=t.toLowerCase().split(":");var e=t.length,n=8;""===t[0]&&""===t[1]&&""===t[2]?(t.shift(),t.shift()):""===t[0]&&""===t[1]?t.shift():""===t[e-1]&&""===t[e-2]&&t.pop(),e=t.length,-1!==t[e-1].indexOf(".")&&(n=7);var i;for(i=0;e>i&&""!==t[i];i++);if(n>i)for(t.splice(i,1,"0000");n>t.length;)t.splice(i,0,"0000");for(i=0;n>i;i++){for(var e=t[i].split(""),r=0;3>r&&"0"===e[0]&&e.length>1;r++)e.splice(0,1);t[i]=e.join("")}var e=-1,o=r=0,s=-1,a=!1;for(i=0;n>i;i++)a?"0"===t[i]?o+=1:(a=!1,o>r&&(e=s,r=o)):"0"==t[i]&&(a=!0,s=i,o=1);for(o>r&&(e=s,r=o),r>1&&t.splice(e,r,""),e=t.length,n="",""===t[0]&&(beststr=":"),i=0;e>i&&(n+=t[i],i!==e-1);i++)n+=":";return""===t[e-1]&&(n+=":"),n},noConflict:function(){return t.IPv6===this&&(t.IPv6=e),this}}}),function(t){function e(t){throw RangeError(E[t])}function n(t,e){for(var n=t.length;n--;)t[n]=e(t[n]);return t}function i(t){for(var e,n,i=[],r=0,o=t.length;o>r;)e=t.charCodeAt(r++),e>=55296&&56319>=e&&o>r?(n=t.charCodeAt(r++),56320==(64512&n)?i.push(((1023&e)<<10)+(1023&n)+65536):(i.push(e),r--)):i.push(e);return i}function r(t){return n(t,function(t){var e="";return t>65535&&(t-=65536,e+=M(55296|1023&t>>>10),t=56320|1023&t),e+=M(t)}).join("")}function o(t,e,n){var i=0;for(t=n?k(t/y):t>>1,t+=k(t/e);t>C*m>>1;i+=f)t=k(t/C);return k(i+(C+1)*t/(t+v))}function s(t){var n,i,s,a,l,u,c=[],h=t.length,d=0,v=w,y=b;for(i=t.lastIndexOf(x),0>i&&(i=0),s=0;i>s;++s)t.charCodeAt(s)>=128&&e("not-basic"),c.push(t.charCodeAt(s));for(i=i>0?i+1:0;h>i;){for(s=d,n=1,a=f;i>=h&&e("invalid-input"),l=t.charCodeAt(i++),l=10>l-48?l-22:26>l-65?l-65:26>l-97?l-97:f,(l>=f||l>k((p-d)/n))&&e("overflow"),d+=l*n,u=y>=a?g:a>=y+m?m:a-y,!(u>l);a+=f)l=f-u,n>k(p/l)&&e("overflow"),n*=l;n=c.length+1,y=o(d-s,n,0==s),k(d/n)>p-v&&e("overflow"),v+=k(d/n),d%=n,c.splice(d++,0,v)}return r(c)}function a(t){var n,r,s,a,l,u,c,h,d,v,y,T,S=[];for(t=i(t),v=t.length,n=w,r=0,l=b,u=0;v>u;++u)d=t[u],128>d&&S.push(M(d));for((s=a=S.length)&&S.push(x);v>s;){for(c=p,u=0;v>u;++u)d=t[u],d>=n&&c>d&&(c=d);for(y=s+1,c-n>k((p-r)/y)&&e("overflow"),r+=(c-n)*y,n=c,u=0;v>u;++u)if(d=t[u],n>d&&++r>p&&e("overflow"),d==n){for(h=r,c=f;d=l>=c?g:c>=l+m?m:c-l,!(d>h);c+=f)T=h-d,h=f-d,S.push(M(d+T%h+22+75*(26>d+T%h)-0)),h=k(T/h);S.push(M(h+22+75*(26>h)-0)),l=o(r,y,s==a),r=0,++s}++r,++n}return S.join("")}var l="object"==typeof exports&&exports,u="object"==typeof module&&module&&module.exports==l&&module,c="object"==typeof global&&global;(c.global===c||c.window===c)&&(t=c);var h,d,p=2147483647,f=36,g=1,m=26,v=38,y=700,b=72,w=128,x="-",T=/^xn--/,S=/[^ -~]/,_=/\x2E|\u3002|\uFF0E|\uFF61/g,E={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},C=f-g,k=Math.floor,M=String.fromCharCode;if(h={version:"1.2.3",ucs2:{decode:i,encode:r},decode:s,encode:a,toASCII:function(t){return n(t.split(_),function(t){return S.test(t)?"xn--"+a(t):t}).join(".")},toUnicode:function(t){return n(t.split(_),function(t){return T.test(t)?s(t.slice(4).toLowerCase()):t}).join(".")}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return h});else if(l&&!l.nodeType)if(u)u.exports=h;else for(d in h)h.hasOwnProperty(d)&&(l[d]=h[d]);else t.punycode=h}(this),function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define(e):t.SecondLevelDomains=e(t)}(this,function(t){var e=t&&t.SecondLevelDomains,n=Object.prototype.hasOwnProperty,i={list:{ac:"com|gov|mil|net|org",ae:"ac|co|gov|mil|name|net|org|pro|sch",af:"com|edu|gov|net|org",al:"com|edu|gov|mil|net|org",ao:"co|ed|gv|it|og|pb",ar:"com|edu|gob|gov|int|mil|net|org|tur",at:"ac|co|gv|or",au:"asn|com|csiro|edu|gov|id|net|org",ba:"co|com|edu|gov|mil|net|org|rs|unbi|unmo|unsa|untz|unze",bb:"biz|co|com|edu|gov|info|net|org|store|tv",bh:"biz|cc|com|edu|gov|info|net|org",bn:"com|edu|gov|net|org",bo:"com|edu|gob|gov|int|mil|net|org|tv",br:"adm|adv|agr|am|arq|art|ato|b|bio|blog|bmd|cim|cng|cnt|com|coop|ecn|edu|eng|esp|etc|eti|far|flog|fm|fnd|fot|fst|g12|ggf|gov|imb|ind|inf|jor|jus|lel|mat|med|mil|mus|net|nom|not|ntr|odo|org|ppg|pro|psc|psi|qsl|rec|slg|srv|tmp|trd|tur|tv|vet|vlog|wiki|zlg",bs:"com|edu|gov|net|org",bz:"du|et|om|ov|rg",ca:"ab|bc|mb|nb|nf|nl|ns|nt|nu|on|pe|qc|sk|yk",ck:"biz|co|edu|gen|gov|info|net|org",cn:"ac|ah|bj|com|cq|edu|fj|gd|gov|gs|gx|gz|ha|hb|he|hi|hl|hn|jl|js|jx|ln|mil|net|nm|nx|org|qh|sc|sd|sh|sn|sx|tj|tw|xj|xz|yn|zj",co:"com|edu|gov|mil|net|nom|org",cr:"ac|c|co|ed|fi|go|or|sa",cy:"ac|biz|com|ekloges|gov|ltd|name|net|org|parliament|press|pro|tm","do":"art|com|edu|gob|gov|mil|net|org|sld|web",dz:"art|asso|com|edu|gov|net|org|pol",ec:"com|edu|fin|gov|info|med|mil|net|org|pro",eg:"com|edu|eun|gov|mil|name|net|org|sci",er:"com|edu|gov|ind|mil|net|org|rochest|w",es:"com|edu|gob|nom|org",et:"biz|com|edu|gov|info|name|net|org",fj:"ac|biz|com|info|mil|name|net|org|pro",fk:"ac|co|gov|net|nom|org",fr:"asso|com|f|gouv|nom|prd|presse|tm",gg:"co|net|org",gh:"com|edu|gov|mil|org",gn:"ac|com|gov|net|org",gr:"com|edu|gov|mil|net|org",gt:"com|edu|gob|ind|mil|net|org",gu:"com|edu|gov|net|org",hk:"com|edu|gov|idv|net|org",id:"ac|co|go|mil|net|or|sch|web",il:"ac|co|gov|idf|k12|muni|net|org","in":"ac|co|edu|ernet|firm|gen|gov|i|ind|mil|net|nic|org|res",iq:"com|edu|gov|i|mil|net|org",ir:"ac|co|dnssec|gov|i|id|net|org|sch",it:"edu|gov",je:"co|net|org",jo:"com|edu|gov|mil|name|net|org|sch",jp:"ac|ad|co|ed|go|gr|lg|ne|or",ke:"ac|co|go|info|me|mobi|ne|or|sc",kh:"com|edu|gov|mil|net|org|per",ki:"biz|com|de|edu|gov|info|mob|net|org|tel",km:"asso|com|coop|edu|gouv|k|medecin|mil|nom|notaires|pharmaciens|presse|tm|veterinaire",kn:"edu|gov|net|org",kr:"ac|busan|chungbuk|chungnam|co|daegu|daejeon|es|gangwon|go|gwangju|gyeongbuk|gyeonggi|gyeongnam|hs|incheon|jeju|jeonbuk|jeonnam|k|kg|mil|ms|ne|or|pe|re|sc|seoul|ulsan",kw:"com|edu|gov|net|org",ky:"com|edu|gov|net|org",kz:"com|edu|gov|mil|net|org",lb:"com|edu|gov|net|org",lk:"assn|com|edu|gov|grp|hotel|int|ltd|net|ngo|org|sch|soc|web",lr:"com|edu|gov|net|org",lv:"asn|com|conf|edu|gov|id|mil|net|org",ly:"com|edu|gov|id|med|net|org|plc|sch",ma:"ac|co|gov|m|net|org|press",mc:"asso|tm",me:"ac|co|edu|gov|its|net|org|priv",mg:"com|edu|gov|mil|nom|org|prd|tm",mk:"com|edu|gov|inf|name|net|org|pro",ml:"com|edu|gov|net|org|presse",mn:"edu|gov|org",mo:"com|edu|gov|net|org",mt:"com|edu|gov|net|org",mv:"aero|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro",mw:"ac|co|com|coop|edu|gov|int|museum|net|org",mx:"com|edu|gob|net|org",my:"com|edu|gov|mil|name|net|org|sch",nf:"arts|com|firm|info|net|other|per|rec|store|web",ng:"biz|com|edu|gov|mil|mobi|name|net|org|sch",ni:"ac|co|com|edu|gob|mil|net|nom|org",np:"com|edu|gov|mil|net|org",nr:"biz|com|edu|gov|info|net|org",om:"ac|biz|co|com|edu|gov|med|mil|museum|net|org|pro|sch",pe:"com|edu|gob|mil|net|nom|org|sld",ph:"com|edu|gov|i|mil|net|ngo|org",pk:"biz|com|edu|fam|gob|gok|gon|gop|gos|gov|net|org|web",pl:"art|bialystok|biz|com|edu|gda|gdansk|gorzow|gov|info|katowice|krakow|lodz|lublin|mil|net|ngo|olsztyn|org|poznan|pwr|radom|slupsk|szczecin|torun|warszawa|waw|wroc|wroclaw|zgora",pr:"ac|biz|com|edu|est|gov|info|isla|name|net|org|pro|prof",ps:"com|edu|gov|net|org|plo|sec",pw:"belau|co|ed|go|ne|or",ro:"arts|com|firm|info|nom|nt|org|rec|store|tm|www",rs:"ac|co|edu|gov|in|org",sb:"com|edu|gov|net|org",sc:"com|edu|gov|net|org",sh:"co|com|edu|gov|net|nom|org",sl:"com|edu|gov|net|org",st:"co|com|consulado|edu|embaixada|gov|mil|net|org|principe|saotome|store",sv:"com|edu|gob|org|red",sz:"ac|co|org",tr:"av|bbs|bel|biz|com|dr|edu|gen|gov|info|k12|name|net|org|pol|tel|tsk|tv|web",tt:"aero|biz|cat|co|com|coop|edu|gov|info|int|jobs|mil|mobi|museum|name|net|org|pro|tel|travel",tw:"club|com|ebiz|edu|game|gov|idv|mil|net|org",mu:"ac|co|com|gov|net|or|org",mz:"ac|co|edu|gov|org",na:"co|com",nz:"ac|co|cri|geek|gen|govt|health|iwi|maori|mil|net|org|parliament|school",pa:"abo|ac|com|edu|gob|ing|med|net|nom|org|sld",pt:"com|edu|gov|int|net|nome|org|publ",py:"com|edu|gov|mil|net|org",qa:"com|edu|gov|mil|net|org",re:"asso|com|nom",ru:"ac|adygeya|altai|amur|arkhangelsk|astrakhan|bashkiria|belgorod|bir|bryansk|buryatia|cbg|chel|chelyabinsk|chita|chukotka|chuvashia|com|dagestan|e-burg|edu|gov|grozny|int|irkutsk|ivanovo|izhevsk|jar|joshkar-ola|kalmykia|kaluga|kamchatka|karelia|kazan|kchr|kemerovo|khabarovsk|khakassia|khv|kirov|koenig|komi|kostroma|kranoyarsk|kuban|kurgan|kursk|lipetsk|magadan|mari|mari-el|marine|mil|mordovia|mosreg|msk|murmansk|nalchik|net|nnov|nov|novosibirsk|nsk|omsk|orenburg|org|oryol|penza|perm|pp|pskov|ptz|rnd|ryazan|sakhalin|samara|saratov|simbirsk|smolensk|spb|stavropol|stv|surgut|tambov|tatarstan|tom|tomsk|tsaritsyn|tsk|tula|tuva|tver|tyumen|udm|udmurtia|ulan-ude|vladikavkaz|vladimir|vladivostok|volgograd|vologda|voronezh|vrn|vyatka|yakutia|yamal|yekaterinburg|yuzhno-sakhalinsk",rw:"ac|co|com|edu|gouv|gov|int|mil|net",sa:"com|edu|gov|med|net|org|pub|sch",sd:"com|edu|gov|info|med|net|org|tv",se:"a|ac|b|bd|c|d|e|f|g|h|i|k|l|m|n|o|org|p|parti|pp|press|r|s|t|tm|u|w|x|y|z",sg:"com|edu|gov|idn|net|org|per",sn:"art|com|edu|gouv|org|perso|univ",sy:"com|edu|gov|mil|net|news|org",th:"ac|co|go|in|mi|net|or",tj:"ac|biz|co|com|edu|go|gov|info|int|mil|name|net|nic|org|test|web",tn:"agrinet|com|defense|edunet|ens|fin|gov|ind|info|intl|mincom|nat|net|org|perso|rnrt|rns|rnu|tourism",tz:"ac|co|go|ne|or",ua:"biz|cherkassy|chernigov|chernovtsy|ck|cn|co|com|crimea|cv|dn|dnepropetrovsk|donetsk|dp|edu|gov|if|in|ivano-frankivsk|kh|kharkov|kherson|khmelnitskiy|kiev|kirovograd|km|kr|ks|kv|lg|lugansk|lutsk|lviv|me|mk|net|nikolaev|od|odessa|org|pl|poltava|pp|rovno|rv|sebastopol|sumy|te|ternopil|uzhgorod|vinnica|vn|zaporizhzhe|zhitomir|zp|zt",ug:"ac|co|go|ne|or|org|sc",uk:"ac|bl|british-library|co|cym|gov|govt|icnet|jet|lea|ltd|me|mil|mod|national-library-scotland|nel|net|nhs|nic|nls|org|orgn|parliament|plc|police|sch|scot|soc",us:"dni|fed|isa|kids|nsn",uy:"com|edu|gub|mil|net|org",ve:"co|com|edu|gob|info|mil|net|org|web",vi:"co|com|k12|net|org",vn:"ac|biz|com|edu|gov|health|info|int|name|net|org|pro",ye:"co|com|gov|ltd|me|net|org|plc",yu:"ac|co|edu|gov|org",za:"ac|agric|alt|bourse|city|co|cybernet|db|edu|gov|grondar|iaccess|imt|inca|landesign|law|mil|net|ngo|nis|nom|olivetti|org|pix|school|tm|web",zm:"ac|co|com|edu|gov|net|org|sch"},has_expression:null,is_expression:null,has:function(t){return!!t.match(i.has_expression)},is:function(t){return!!t.match(i.is_expression)},get:function(t){return(t=t.match(i.has_expression))&&t[1]||null},noConflict:function(){return t.SecondLevelDomains===this&&(t.SecondLevelDomains=e),this},init:function(){var t,e="";for(t in i.list)n.call(i.list,t)&&(e+="|("+("("+i.list[t]+")."+t)+")");i.has_expression=RegExp("\\.("+e.substr(1)+")$","i"),i.is_expression=RegExp("^("+e.substr(1)+")$","i")}};return i.init(),i}),function(t,e){"object"==typeof exports?module.exports=e(require("./punycode"),require("./IPv6"),require("./SecondLevelDomains")):"function"==typeof define&&define.amd?define(["./punycode","./IPv6","./SecondLevelDomains"],e):t.URI=e(t.punycode,t.IPv6,t.SecondLevelDomains,t)}(this,function(t,e,n,i){function r(t,e){return this instanceof r?(void 0===t&&(t="undefined"!=typeof location?location.href+"":""),this.href(t),void 0!==e?this.absoluteTo(e):this):new r(t,e)}function o(t){return t.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function s(t){return void 0===t?"Undefined":(Object.prototype.toString.call(t)+"").slice(8,-1)}function a(t){return"Array"===s(t)}function l(t,e){var n,i;if(a(e)){for(n=0,i=e.length;i>n;n++)if(!l(t,e[n]))return!1;return!0}var r=s(e);for(n=0,i=t.length;i>n;n++)if("RegExp"===r){if("string"==typeof t[n]&&t[n].match(e))return!0}else if(t[n]===e)return!0;return!1}function u(t,e){if(!a(t)||!a(e)||t.length!==e.length)return!1;t.sort(),e.sort();for(var n=0,i=t.length;i>n;n++)if(t[n]!==e[n])return!1;return!0}function c(t){return escape(t)}function h(t){return encodeURIComponent(t).replace(/[!'()*]/g,c).replace(/\*/g,"%2A")}var d=i&&i.URI,p=r.prototype,f=Object.prototype.hasOwnProperty;r._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:r.duplicateQueryParameters,escapeQuerySpace:r.escapeQuerySpace}},r.duplicateQueryParameters=!1,r.escapeQuerySpace=!0,r.protocol_expression=/^[a-z][a-z0-9-+-]*$/i,r.idn_expression=/[^a-z0-9\.-]/i,r.punycode_expression=/(xn--)/i,r.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,r.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,r.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u2018\u2019]))/gi,r.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},r.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/,r.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src"},r.getDomAttribute=function(t){if(t&&t.nodeName){var e=t.nodeName.toLowerCase();return"input"===e&&"image"!==t.type?void 0:r.domAttributes[e]}},r.encode=h,r.decode=decodeURIComponent,r.iso8859=function(){r.encode=escape,r.decode=unescape},r.unicode=function(){r.encode=h,r.decode=decodeURIComponent},r.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}}},r.encodeQuery=function(t,e){var n=r.encode(t+"");return e?n.replace(/%20/g,"+"):n},r.decodeQuery=function(t,e){t+="";try{return r.decode(e?t.replace(/\+/g,"%20"):t)}catch(n){return t}},r.recodePath=function(t){t=(t+"").split("/");for(var e=0,n=t.length;n>e;e++)t[e]=r.encodePathSegment(r.decode(t[e]));return t.join("/")},r.decodePath=function(t){t=(t+"").split("/");for(var e=0,n=t.length;n>e;e++)t[e]=r.decodePathSegment(t[e]);return t.join("/")};var g,m={encode:"encode",decode:"decode"},v=function(t,e){return function(n){return r[e](n+"").replace(r.characters[t][e].expression,function(n){return r.characters[t][e].map[n]})}};for(g in m)r[g+"PathSegment"]=v("pathname",m[g]);r.encodeReserved=v("reserved","encode"),r.parse=function(t,e){var n;return e||(e={}),n=t.indexOf("#"),n>-1&&(e.fragment=t.substring(n+1)||null,t=t.substring(0,n)),n=t.indexOf("?"),n>-1&&(e.query=t.substring(n+1)||null,t=t.substring(0,n)),"//"===t.substring(0,2)?(e.protocol=null,t=t.substring(2),t=r.parseAuthority(t,e)):(n=t.indexOf(":"),n>-1&&(e.protocol=t.substring(0,n)||null,e.protocol&&!e.protocol.match(r.protocol_expression)?e.protocol=void 0:"file"===e.protocol?t=t.substring(n+3):"//"===t.substring(n+1,n+3)?(t=t.substring(n+3),t=r.parseAuthority(t,e)):(t=t.substring(n+1),e.urn=!0))),e.path=t,e},r.parseHost=function(t,e){var n,i=t.indexOf("/");return-1===i&&(i=t.length),"["===t.charAt(0)?(n=t.indexOf("]"),e.hostname=t.substring(1,n)||null,e.port=t.substring(n+2,i)||null):t.indexOf(":")!==t.lastIndexOf(":")?(e.hostname=t.substring(0,i)||null,e.port=null):(n=t.substring(0,i).split(":"),e.hostname=n[0]||null,e.port=n[1]||null),e.hostname&&"/"!==t.substring(i).charAt(0)&&(i++,t="/"+t),t.substring(i)||"/"},r.parseAuthority=function(t,e){return t=r.parseUserinfo(t,e),r.parseHost(t,e)},r.parseUserinfo=function(t,e){var n=t.indexOf("/"),i=n>-1?t.lastIndexOf("@",n):t.indexOf("@");return i>-1&&(-1===n||n>i)?(n=t.substring(0,i).split(":"),e.username=n[0]?r.decode(n[0]):null,n.shift(),e.password=n[0]?r.decode(n.join(":")):null,t=t.substring(i+1)):(e.username=null,e.password=null),t},r.parseQuery=function(t,e){if(!t)return{};if(t=t.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!t)return{};for(var n,i,o={},s=t.split("&"),a=s.length,l=0;a>l;l++)n=s[l].split("="),i=r.decodeQuery(n.shift(),e),n=n.length?r.decodeQuery(n.join("="),e):null,o[i]?("string"==typeof o[i]&&(o[i]=[o[i]]),o[i].push(n)):o[i]=n;return o},r.build=function(t){var e="";return t.protocol&&(e+=t.protocol+":"),t.urn||!e&&!t.hostname||(e+="//"),e+=r.buildAuthority(t)||"","string"==typeof t.path&&("/"!==t.path.charAt(0)&&"string"==typeof t.hostname&&(e+="/"),e+=t.path),"string"==typeof t.query&&t.query&&(e+="?"+t.query),"string"==typeof t.fragment&&t.fragment&&(e+="#"+t.fragment),e},r.buildHost=function(t){var e="";return t.hostname?(r.ip6_expression.test(t.hostname)?e=t.port?e+("["+t.hostname+"]:"+t.port):e+t.hostname:(e+=t.hostname,t.port&&(e+=":"+t.port)),e):""},r.buildAuthority=function(t){return r.buildUserinfo(t)+r.buildHost(t)},r.buildUserinfo=function(t){var e="";return t.username&&(e+=r.encode(t.username),t.password&&(e+=":"+r.encode(t.password)),e+="@"),e},r.buildQuery=function(t,e,n){var i,o,s,l,u="";for(o in t)if(f.call(t,o)&&o)if(a(t[o]))for(i={},s=0,l=t[o].length;l>s;s++)void 0!==t[o][s]&&void 0===i[t[o][s]+""]&&(u+="&"+r.buildQueryParameter(o,t[o][s],n),!0!==e&&(i[t[o][s]+""]=!0));else void 0!==t[o]&&(u+="&"+r.buildQueryParameter(o,t[o],n));return u.substring(1)},r.buildQueryParameter=function(t,e,n){return r.encodeQuery(t,n)+(null!==e?"="+r.encodeQuery(e,n):"")},r.addQuery=function(t,e,n){if("object"==typeof e)for(var i in e)f.call(e,i)&&r.addQuery(t,i,e[i]);else{if("string"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");void 0===t[e]?t[e]=n:("string"==typeof t[e]&&(t[e]=[t[e]]),a(n)||(n=[n]),t[e]=t[e].concat(n))}},r.removeQuery=function(t,e,n){var i;if(a(e))for(n=0,i=e.length;i>n;n++)t[e[n]]=void 0;else if("object"==typeof e)for(i in e)f.call(e,i)&&r.removeQuery(t,i,e[i]);else{if("string"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the first parameter");if(void 0!==n){if(t[e]===n)t[e]=void 0;else if(a(t[e])){i=t[e];var o,s,l={};if(a(n))for(o=0,s=n.length;s>o;o++)l[n[o]]=!0;else l[n]=!0;for(o=0,s=i.length;s>o;o++)void 0!==l[i[o]]&&(i.splice(o,1),s--,o--);t[e]=i}}else t[e]=void 0}},r.hasQuery=function(t,e,n,i){if("object"==typeof e){for(var o in e)if(f.call(e,o)&&!r.hasQuery(t,o,e[o]))return!1;return!0}if("string"!=typeof e)throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter");switch(s(n)){case"Undefined":return e in t;case"Boolean":return t=Boolean(a(t[e])?t[e].length:t[e]),n===t;case"Function":return!!n(t[e],e,t);case"Array":return a(t[e])?(i?l:u)(t[e],n):!1;case"RegExp":return a(t[e])?i?l(t[e],n):!1:Boolean(t[e]&&t[e].match(n));case"Number":n+="";case"String":return a(t[e])?i?l(t[e],n):!1:t[e]===n;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},r.commonPath=function(t,e){var n,i=Math.min(t.length,e.length);for(n=0;i>n;n++)if(t.charAt(n)!==e.charAt(n)){n--;break}return 1>n?t.charAt(0)===e.charAt(0)&&"/"===t.charAt(0)?"/":"":(("/"!==t.charAt(n)||"/"!==e.charAt(n))&&(n=t.substring(0,n).lastIndexOf("/")),t.substring(0,n+1))},r.withinString=function(t,e){return t.replace(r.find_uri_expression,e)},r.ensureValidHostname=function(e){if(e.match(r.invalid_hostname_characters)){if(!t)throw new TypeError("Hostname '"+e+"' contains characters other than [A-Z0-9.-] and Punycode.js is not available");if(t.toASCII(e).match(r.invalid_hostname_characters))throw new TypeError("Hostname '"+e+"' contains characters other than [A-Z0-9.-]")}},r.noConflict=function(t){return t?(t={URI:this.noConflict()},URITemplate&&"function"==typeof URITemplate.noConflict&&(t.URITemplate=URITemplate.noConflict()),e&&"function"==typeof e.noConflict&&(t.IPv6=e.noConflict()),SecondLevelDomains&&"function"==typeof SecondLevelDomains.noConflict&&(t.SecondLevelDomains=SecondLevelDomains.noConflict()),t):(i.URI===this&&(i.URI=d),this)},p.build=function(t){return!0===t?this._deferred_build=!0:(void 0===t||this._deferred_build)&&(this._string=r.build(this._parts),this._deferred_build=!1),this},p.clone=function(){return new r(this)},p.valueOf=p.toString=function(){return this.build(!1)._string},m={protocol:"protocol",username:"username",password:"password",hostname:"hostname",port:"port"},v=function(t){return function(e,n){return void 0===e?this._parts[t]||"":(this._parts[t]=e||null,this.build(!n),this)}};for(g in m)p[g]=v(m[g]);m={query:"?",fragment:"#"},v=function(t,e){return function(n,i){return void 0===n?this._parts[t]||"":(null!==n&&(n+="",n.charAt(0)===e&&(n=n.substring(1))),this._parts[t]=n,this.build(!i),this)}};for(g in m)p[g]=v(g,m[g]);m={search:["?","query"],hash:["#","fragment"]},v=function(t,e){return function(n,i){var r=this[t](n,i);return"string"==typeof r&&r.length?e+r:r}};for(g in m)p[g]=v(m[g][1],m[g][0]);p.pathname=function(t,e){if(void 0===t||!0===t){var n=this._parts.path||(this._parts.hostname?"/":"");return t?r.decodePath(n):n}return this._parts.path=t?r.recodePath(t):"/",this.build(!e),this},p.path=p.pathname,p.href=function(t,e){var n;if(void 0===t)return""+this;this._string="",this._parts=r._parts();var i=t instanceof r,o="object"==typeof t&&(t.hostname||t.path||t.pathname);if(t.nodeName&&(o=r.getDomAttribute(t),t=t[o]||"",o=!1),!i&&o&&void 0!==t.pathname&&(t=""+t),"string"==typeof t)this._parts=r.parse(t,this._parts);else{if(!i&&!o)throw new TypeError("invalid input");for(n in i=i?t._parts:t)f.call(this._parts,n)&&(this._parts[n]=i[n])}return this.build(!e),this},p.is=function(t){var e=!1,i=!1,o=!1,s=!1,a=!1,l=!1,u=!1,c=!this._parts.urn;switch(this._parts.hostname&&(c=!1,i=r.ip4_expression.test(this._parts.hostname),o=r.ip6_expression.test(this._parts.hostname),e=i||o,a=(s=!e)&&n&&n.has(this._parts.hostname),l=s&&r.idn_expression.test(this._parts.hostname),u=s&&r.punycode_expression.test(this._parts.hostname)),t.toLowerCase()){case"relative":return c;case"absolute":return!c;case"domain":case"name":return s;case"sld":return a;case"ip":return e;case"ip4":case"ipv4":case"inet4":return i;case"ip6":case"ipv6":case"inet6":return o;case"idn":return l;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return u}return null};var y=p.protocol,b=p.port,w=p.hostname;p.protocol=function(t,e){if(void 0!==t&&t&&(t=t.replace(/:(\/\/)?$/,""),t.match(/[^a-zA-z0-9\.+-]/)))throw new TypeError("Protocol '"+t+"' contains characters other than [A-Z0-9.+-]");return y.call(this,t,e)},p.scheme=p.protocol,p.port=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0!==t&&(0===t&&(t=null),t&&(t+="",":"===t.charAt(0)&&(t=t.substring(1)),t.match(/[^0-9]/))))throw new TypeError("Port '"+t+"' contains characters other than [0-9]");return b.call(this,t,e)},p.hostname=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0!==t){var n={};r.parseHost(t,n),t=n.hostname}return w.call(this,t,e)},p.host=function(t,e){return this._parts.urn?void 0===t?"":this:void 0===t?this._parts.hostname?r.buildHost(this._parts):"":(r.parseHost(t,this._parts),this.build(!e),this)},p.authority=function(t,e){return this._parts.urn?void 0===t?"":this:void 0===t?this._parts.hostname?r.buildAuthority(this._parts):"":(r.parseAuthority(t,this._parts),this.build(!e),this)},p.userinfo=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){if(!this._parts.username)return"";var n=r.buildUserinfo(this._parts);return n.substring(0,n.length-1)}return"@"!==t[t.length-1]&&(t+="@"),r.parseUserinfo(t,this._parts),this.build(!e),this},p.resource=function(t,e){var n;return void 0===t?this.path()+this.search()+this.hash():(n=r.parse(t),this._parts.path=n.path,this._parts.query=n.query,this._parts.fragment=n.fragment,this.build(!e),this)},p.subdomain=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,n)||""}return n=this._parts.hostname.length-this.domain().length,n=this._parts.hostname.substring(0,n),n=RegExp("^"+o(n)),t&&"."!==t.charAt(t.length-1)&&(t+="."),t&&r.ensureValidHostname(t),this._parts.hostname=this._parts.hostname.replace(n,t),this.build(!e),this},p.domain=function(t,e){if(this._parts.urn)return void 0===t?"":this;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.match(/\./g);return n&&2>n.length?this._parts.hostname:(n=this._parts.hostname.length-this.tld(e).length-1,n=this._parts.hostname.lastIndexOf(".",n-1)+1,this._parts.hostname.substring(n)||"")}if(!t)throw new TypeError("cannot set domain empty");return r.ensureValidHostname(t),!this._parts.hostname||this.is("IP")?this._parts.hostname=t:(n=RegExp(o(this.domain())+"$"),this._parts.hostname=this._parts.hostname.replace(n,t)),this.build(!e),this},p.tld=function(t,e){if(this._parts.urn)return void 0===t?"":this;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var i=this._parts.hostname.lastIndexOf("."),i=this._parts.hostname.substring(i+1);return!0!==e&&n&&n.list[i.toLowerCase()]?n.get(this._parts.hostname)||i:i}if(!t)throw new TypeError("cannot set TLD empty");if(t.match(/[^a-zA-Z0-9-]/)){if(!n||!n.is(t))throw new TypeError("TLD '"+t+"' contains characters other than [A-Z0-9]");i=RegExp(o(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(i,t)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");i=RegExp(o(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(i,t)}return this.build(!e),this},p.directory=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||!0===t){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var n=this._parts.path.length-this.filename().length-1,n=this._parts.path.substring(0,n)||(this._parts.hostname?"/":"");return t?r.decodePath(n):n}return n=this._parts.path.length-this.filename().length,n=this._parts.path.substring(0,n),n=RegExp("^"+o(n)),this.is("relative")||(t||(t="/"),"/"!==t.charAt(0)&&(t="/"+t)),t&&"/"!==t.charAt(t.length-1)&&(t+="/"),t=r.recodePath(t),this._parts.path=this._parts.path.replace(n,t),this.build(!e),this},p.filename=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||!0===t){if(!this._parts.path||"/"===this._parts.path)return"";var n=this._parts.path.lastIndexOf("/"),n=this._parts.path.substring(n+1);return t?r.decodePathSegment(n):n}n=!1,"/"===t.charAt(0)&&(t=t.substring(1)),t.match(/\.?\//)&&(n=!0);var i=RegExp(o(this.filename())+"$");return t=r.recodePath(t),this._parts.path=this._parts.path.replace(i,t),n?this.normalizePath(e):this.build(!e),this},p.suffix=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||!0===t){if(!this._parts.path||"/"===this._parts.path)return"";var n=this.filename(),i=n.lastIndexOf(".");return-1===i?"":(n=n.substring(i+1),n=/^[a-z0-9%]+$/i.test(n)?n:"",t?r.decodePathSegment(n):n)}if("."===t.charAt(0)&&(t=t.substring(1)),n=this.suffix())i=t?RegExp(o(n)+"$"):RegExp(o("."+n)+"$");else{if(!t)return this;this._parts.path+="."+r.recodePath(t)}return i&&(t=r.recodePath(t),this._parts.path=this._parts.path.replace(i,t)),this.build(!e),this},p.segment=function(t,e,n){var i=this._parts.urn?":":"/",r=this.path(),o="/"===r.substring(0,1),r=r.split(i);if(void 0!==t&&"number"!=typeof t&&(n=e,e=t,t=void 0),void 0!==t&&"number"!=typeof t)throw Error("Bad segment '"+t+"', must be 0-based integer");if(o&&r.shift(),0>t&&(t=Math.max(r.length+t,0)),void 0===e)return void 0===t?r:r[t];if(null===t||void 0===r[t])if(a(e)){r=[],t=0;for(var s=e.length;s>t;t++)(e[t].length||r.length&&r[r.length-1].length)&&(r.length&&!r[r.length-1].length&&r.pop(),r.push(e[t]))}else(e||"string"==typeof e)&&(""===r[r.length-1]?r[r.length-1]=e:r.push(e));else e||"string"==typeof e&&e.length?r[t]=e:r.splice(t,1);return o&&r.unshift(""),this.path(r.join(i),n)},p.segmentCoded=function(t,e,n){var i,o;if("number"!=typeof t&&(n=e,e=t,t=void 0),void 0===e){if(t=this.segment(t,e,n),a(t))for(i=0,o=t.length;o>i;i++)t[i]=r.decode(t[i]);else t=void 0!==t?r.decode(t):void 0;return t}if(a(e))for(i=0,o=e.length;o>i;i++)e[i]=r.decode(e[i]);else e="string"==typeof e?r.encode(e):e;return this.segment(t,e,n)};var x=p.query;return p.query=function(t,e){if(!0===t)return r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof t){var n=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace),i=t.call(this,n);return this._parts.query=r.buildQuery(i||n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!e),this}return void 0!==t&&"string"!=typeof t?(this._parts.query=r.buildQuery(t,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!e),this):x.call(this,t,e)},p.setQuery=function(t,e,n){var i=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("object"==typeof t)for(var o in t)f.call(t,o)&&(i[o]=t[o]);else{if("string"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");i[t]=void 0!==e?e:null}return this._parts.query=r.buildQuery(i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(n=e),this.build(!n),this},p.addQuery=function(t,e,n){var i=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return r.addQuery(i,t,void 0===e?null:e),this._parts.query=r.buildQuery(i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(n=e),this.build(!n),this},p.removeQuery=function(t,e,n){var i=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return r.removeQuery(i,t,e),this._parts.query=r.buildQuery(i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(n=e),this.build(!n),this},p.hasQuery=function(t,e,n){var i=r.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return r.hasQuery(i,t,e,n)},p.setSearch=p.setQuery,p.addSearch=p.addQuery,p.removeSearch=p.removeQuery,p.hasSearch=p.hasQuery,p.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},p.normalizeProtocol=function(t){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!t)),this},p.normalizeHostname=function(n){return this._parts.hostname&&(this.is("IDN")&&t?this._parts.hostname=t.toASCII(this._parts.hostname):this.is("IPv6")&&e&&(this._parts.hostname=e.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!n)),this
},p.normalizePort=function(t){return"string"==typeof this._parts.protocol&&this._parts.port===r.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!t)),this},p.normalizePath=function(t){if(this._parts.urn||!this._parts.path||"/"===this._parts.path)return this;var e,n,i,o=this._parts.path;for("/"!==o.charAt(0)&&(e=!0,o="/"+o),o=o.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/");n=o.indexOf("/../"),-1!==n;){if(0===n){o=o.substring(3);break}i=o.substring(0,n).lastIndexOf("/"),-1===i&&(i=n),o=o.substring(0,i)+o.substring(n+3)}return e&&this.is("relative")&&(o=o.substring(1)),o=r.recodePath(o),this._parts.path=o,this.build(!t),this},p.normalizePathname=p.normalizePath,p.normalizeQuery=function(t){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(r.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!t)),this},p.normalizeFragment=function(t){return this._parts.fragment||(this._parts.fragment=null,this.build(!t)),this},p.normalizeSearch=p.normalizeQuery,p.normalizeHash=p.normalizeFragment,p.iso8859=function(){var t=r.encode,e=r.decode;return r.encode=escape,r.decode=decodeURIComponent,this.normalize(),r.encode=t,r.decode=e,this},p.unicode=function(){var t=r.encode,e=r.decode;return r.encode=h,r.decode=unescape,this.normalize(),r.encode=t,r.decode=e,this},p.readable=function(){var e=this.clone();e.username("").password("").normalize();var n="";if(e._parts.protocol&&(n+=e._parts.protocol+"://"),e._parts.hostname&&(e.is("punycode")&&t?(n+=t.toUnicode(e._parts.hostname),e._parts.port&&(n+=":"+e._parts.port)):n+=e.host()),e._parts.hostname&&e._parts.path&&"/"!==e._parts.path.charAt(0)&&(n+="/"),n+=e.path(!0),e._parts.query){for(var i="",o=0,s=e._parts.query.split("&"),a=s.length;a>o;o++){var l=(s[o]||"").split("="),i=i+("&"+r.decodeQuery(l[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"));void 0!==l[1]&&(i+="="+r.decodeQuery(l[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}n+="?"+i.substring(1)}return n+=r.decodeQuery(e.hash(),!0)},p.absoluteTo=function(t){var e,n,i=this.clone(),o=["protocol","username","password","hostname","port"];if(this._parts.urn)throw Error("URNs do not have any generally defined hierarchical components");if(t instanceof r||(t=new r(t)),i._parts.protocol||(i._parts.protocol=t._parts.protocol),this._parts.hostname)return i;for(e=0;n=o[e];e++)i._parts[n]=t._parts[n];for(o=["query","path"],e=0;n=o[e];e++)!i._parts[n]&&t._parts[n]&&(i._parts[n]=t._parts[n]);return"/"!==i.path().charAt(0)&&(t=t.directory(),i._parts.path=(t?t+"/":"")+i._parts.path,i.normalizePath()),i.build(),i},p.relativeTo=function(t){var e,n,i,o,s=this.clone().normalize();if(s._parts.urn)throw Error("URNs do not have any generally defined hierarchical components");if(t=new r(t).normalize(),e=s._parts,n=t._parts,i=s.path(),o=t.path(),"/"!==i.charAt(0))throw Error("URI is already relative");if("/"!==o.charAt(0))throw Error("Cannot calculate a URI relative to another relative URI");return e.protocol===n.protocol&&(e.protocol=null),e.username!==n.username||e.password!==n.password||null!==e.protocol||null!==e.username||null!==e.password||e.hostname!==n.hostname||e.port!==n.port?s.build():(e.hostname=null,e.port=null,i===o?(e.path="",s.build()):(t=r.commonPath(s.path(),t.path()))?(n=n.path.substring(t.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../"),e.path=n+e.path.substring(t.length),s.build()):s.build())},p.equals=function(t){var e=this.clone();t=new r(t);var n,i={},o={},s={};if(e.normalize(),t.normalize(),""+e==""+t)return!0;if(i=e.query(),o=t.query(),e.query(""),t.query(""),""+e!=""+t||i.length!==o.length)return!1;i=r.parseQuery(i,this._parts.escapeQuerySpace),o=r.parseQuery(o,this._parts.escapeQuerySpace);for(n in i)if(f.call(i,n)){if(a(i[n])){if(!u(i[n],o[n]))return!1}else if(i[n]!==o[n])return!1;s[n]=!0}for(n in o)if(f.call(o,n)&&!s[n])return!1;return!0},p.duplicateQueryParameters=function(t){return this._parts.duplicateQueryParameters=!!t,this},p.escapeQuerySpace=function(t){return this._parts.escapeQuerySpace=!!t,this},r}),function(t,e){"object"==typeof exports?module.exports=e(require("./URI")):"function"==typeof define&&define.amd?define(["./URI"],e):t.URITemplate=e(t.URI,t)}(this,function(t,e){function n(t){return n._cache[t]?n._cache[t]:this instanceof n?(this.expression=t,n._cache[t]=this,this):new n(t)}function i(t){this.data=t,this.cache={}}var r=e&&e.URITemplate,o=Object.prototype.hasOwnProperty,s=n.prototype,a={"":{prefix:"",separator:",",named:!1,empty_name_separator:!1,encode:"encode"},"+":{prefix:"",separator:",",named:!1,empty_name_separator:!1,encode:"encodeReserved"},"#":{prefix:"#",separator:",",named:!1,empty_name_separator:!1,encode:"encodeReserved"},".":{prefix:".",separator:".",named:!1,empty_name_separator:!1,encode:"encode"},"/":{prefix:"/",separator:"/",named:!1,empty_name_separator:!1,encode:"encode"},";":{prefix:";",separator:";",named:!0,empty_name_separator:!1,encode:"encode"},"?":{prefix:"?",separator:"&",named:!0,empty_name_separator:!0,encode:"encode"},"&":{prefix:"&",separator:"&",named:!0,empty_name_separator:!0,encode:"encode"}};return n._cache={},n.EXPRESSION_PATTERN=/\{([^a-zA-Z0-9%_]?)([^\}]+)(\}|$)/g,n.VARIABLE_PATTERN=/^([^*:]+)((\*)|:(\d+))?$/,n.VARIABLE_NAME_PATTERN=/[^a-zA-Z0-9%_]/,n.expand=function(t,e){var i,r,o,s=a[t.operator],l=s.named?"Named":"Unnamed",u=t.variables,c=[];for(o=0;r=u[o];o++)i=e.get(r.name),i.val.length?c.push(n["expand"+l](i,s,r.explode,r.explode&&s.separator||",",r.maxlength,r.name)):i.type&&c.push("");return c.length?s.prefix+c.join(s.separator):""},n.expandNamed=function(e,n,i,r,o,s){var a="",l=n.encode;n=n.empty_name_separator;var u,c,h,d=!e[l].length,p=2===e.type?"":t[l](s);for(c=0,h=e.val.length;h>c;c++)o?(u=t[l](e.val[c][1].substring(0,o)),2===e.type&&(p=t[l](e.val[c][0].substring(0,o)))):d?(u=t[l](e.val[c][1]),2===e.type?(p=t[l](e.val[c][0]),e[l].push([p,u])):e[l].push([void 0,u])):(u=e[l][c][1],2===e.type&&(p=e[l][c][0])),a&&(a+=r),i?a+=p+(n||u?"=":"")+u:(c||(a+=t[l](s)+(n||u?"=":"")),2===e.type&&(a+=p+","),a+=u);return a},n.expandUnnamed=function(e,n,i,r,o,s){s="";var a=n.encode;n=n.empty_name_separator;var l,u,c,h,d=!e[a].length;for(c=0,h=e.val.length;h>c;c++)o?u=t[a](e.val[c][1].substring(0,o)):d?(u=t[a](e.val[c][1]),e[a].push([2===e.type?t[a](e.val[c][0]):void 0,u])):u=e[a][c][1],s&&(s+=r),2===e.type&&(l=o?t[a](e.val[c][0].substring(0,o)):e[a][c][0],s+=l,s=i?s+(n||u?"=":""):s+","),s+=u;return s},n.noConflict=function(){return e.URITemplate===n&&(e.URITemplate=r),n},s.expand=function(t){var e="";this.parts&&this.parts.length||this.parse(),t instanceof i||(t=new i(t));for(var r=0,o=this.parts.length;o>r;r++)e+="string"==typeof this.parts[r]?this.parts[r]:n.expand(this.parts[r],t);return e},s.parse=function(){var t,e,i,r=this.expression,o=n.EXPRESSION_PATTERN,s=n.VARIABLE_PATTERN,l=n.VARIABLE_NAME_PATTERN,u=[],c=0;for(o.lastIndex=0;;){if(e=o.exec(r),null===e){u.push(r.substring(c));break}if(u.push(r.substring(c,e.index)),c=e.index+e[0].length,!a[e[1]])throw Error('Unknown Operator "'+e[1]+'" in "'+e[0]+'"');if(!e[3])throw Error('Unclosed Expression "'+e[0]+'"');t=e[2].split(",");for(var h=0,d=t.length;d>h;h++){if(i=t[h].match(s),null===i)throw Error('Invalid Variable "'+t[h]+'" in "'+e[0]+'"');if(i[1].match(l))throw Error('Invalid Variable Name "'+i[1]+'" in "'+e[0]+'"');t[h]={name:i[1],explode:!!i[3],maxlength:i[4]&&parseInt(i[4],10)}}if(!t.length)throw Error('Expression Missing Variable(s) "'+e[0]+'"');u.push({expression:e[0],operator:e[1],variables:t})}return u.length||u.push(r),this.parts=u,this},i.prototype.get=function(t){var e,n=this.data,i={type:0,val:[],encode:[],encodeReserved:[]};if(void 0!==this.cache[t])return this.cache[t];if(this.cache[t]=i,n="[object Function]"==Object.prototype.toString.call(n)+""?n(t):"[object Function]"==Object.prototype.toString.call(n[t])+""?n[t](t):n[t],void 0!==n&&null!==n)if("[object Array]"==Object.prototype.toString.call(n)+""){for(e=0,t=n.length;t>e;e++)void 0!==n[e]&&null!==n[e]&&i.val.push([void 0,n[e]+""]);i.val.length&&(i.type=3)}else if("[object Object]"==Object.prototype.toString.call(n)+""){for(e in n)o.call(n,e)&&void 0!==n[e]&&null!==n[e]&&i.val.push([e,n[e]+""]);i.val.length&&(i.type=2)}else i.type=1,i.val.push([void 0,n+""]);return i},t.expand=function(e,i){var r=new n(e).expand(i);return new t(r)},n}),window.Mirador=window.Mirador||function(t){Mirador.DEFAULT_SETTINGS.workspaceAutoSave&&(Mirador.settingsLoader=new Mirador.SettingsLoader(t),t=Mirador.settingsLoader.config),Mirador.viewer=new Mirador.Viewer(t),Mirador.manifests=new Mirador.ManifestsLoader(t)},function(t){t.DEFAULT_SETTINGS={workspaceAutoSave:!0,showNoImageChoiceOption:!0,initialLayout:"stackAll3Columns",availableViews:{imageView:{label:"Image View"},scrollView:{label:"Scroll View"},thumbnailsView:{label:"Thumbnails View"},metadataView:{label:"Metadata View"}},maxWidgetsLimit:10,mainMenu:{height:25,width:"100%"},statusBar:{show:!0,height:25,width:"100%"},scale:{height:60,maxWidth:230},widget:{height:400,width:400},widgetToolbar:{height:25},widgetStatusBar:{height:26},imageView:{height:400,width:350,annotationsList:{display:!0,width:200}},scrollView:{height:400,imageLabelHeight:25,toolbarHeight:25,width:600},thumbnailsView:{height:400,thumbsMaxHeight:150,thumbsMinHeight:50,thumbsDefaultZoom:.5,width:600},metadataView:{height:400,width:600},saveController:{saveInterval:8e3},lockController:{lockProfile:"lazyZoom",notifyMaxMin:!1}},t.isValidView=function(){return t.DEFAULT_SETTINGS.availableViews.view===void 0},t.inArrayToBoolean=function(t){return-1===t?!1:!0},t.castToArray=function(t){return"string"==typeof t?[t]:t},t.getUniques=function(t){for(var e={},n=[],i=0;t.length>i;i++)e[t[i]]=!0;for(var r in e)n.push(r);return n},t.getTitlePrefix=function(t){var e=[];return t&&t.label&&e.push(t.label),e.join(" / ")},t.trimString=function(t){return t.replace(/^\s+|\s+$/g,"")},t.trimStringBy=function(t,e){return t.length>e&&(t=t.substr(0,e)+"..."),t},t.stringifyObject=function(e,n){var i,r=!0,o=15,s="<br/>";if(e instanceof RegExp)return"/"+e.source+"/";if(n===void 0&&(n=0),e instanceof Array)return i="[ ",jQuery.each(e,function(e,r){i+=(0===e?"":", ")+t.stringifyObject(r,n+o)}),i+" ]";if("object"==typeof e){i='<div style="margin-left:'+n+'px">';for(var a in e)e.hasOwnProperty(a)&&(i+=(r?"":s)+a+": "+t.stringifyObject(e[a],n+o),r=!1);return i+"</div>"}return""+e},t.getJsonFromUrl=function(t,e){var n;return jQuery.ajax({url:t,dataType:"json",async:e||!1,success:function(t){n=t},error:function(t,e,n){console.error(t,e,n)}}),n},t.getViewLabel=function(e){var n=t.DEFAULT_SETTINGS.availableViews[e];return n&&n.label?n.label:e},t.extractLabelFromAttribute=function(t){var e=t;return e=e.replace(/^@/,""),e=e.replace(/([A-Z])/g," $1"),e=e.replace(/\s{2,}/g," "),e=e.replace(/\w\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})},t.toString=function(t,e){var n="",i=e||" ";return"string"===jQuery.type(t)&&(n=t),jQuery.isArray(t)&&(n=t.join(i)),n},t.getManifestIdByUri=function(e){var n;return n=jQuery.map(t.manifests,function(t,n){return e===t.uri?n:void 0}),n[0]||n},t.getMetadataByManifestId=function(e){return t.manifests[e].metadata},t.getImagesListByManifestId=function(e){return t.manifests[e].sequences[0].imagesList},t.getCollectionTitle=function(t){return t.details.label||""},t.getImageTitlesAndIds=function(t){var e=[];return jQuery.each(t,function(t,n){e.push({title:n.title,id:n.id})}),e},t.genUUID=function(){var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=0|16*Math.random(),n="x"==t?e:8|3&e;return n.toString(16)});return"uuid-"+t},t.throttle=function(t,e,n){var i,r,o,s=null,a=0;n!==void 0&&(n={});var l=function(){a=n.leading===!1?0:new Date,s=null,o=t.apply(i,r)};return function(){var u=new Date;a||n.leading!==!1||(a=u);var c=e-(u-a);return i=this,r=arguments,0>=c?(clearTimeout(s),s=null,a=u,o=t.apply(i,r)):s||n.trailing===!1||(s=setTimeout(l,c)),o}},t.debounce=function(t,e,n){var i,r,o,s,a;return function(){o=this,r=arguments,s=new Date;var l=function(){var u=new Date-s;e>u?i=setTimeout(l,e-u):(i=null,n||(a=t.apply(o,r)))},u=n&&!i;return i||(i=setTimeout(l,e)),u&&(a=t.apply(o,r)),a}},t.parseRegion=function(t){t=new URI(t);var e=t.hash();return regionArray=e.split("=")[1].split(",")},t.getOsdFrame=function(t,e){var n=e.width,i=e.height,r=e.canvasWidth,o=e.canvasHeight,s=n/r,a=i/o,l=t[0]*s/n,u=t[1]*a/n,c=t[2]*s/n,h=t[3]*a/n,d=new OpenSeadragon.Rect(l,u,c,h);return d}}(Mirador),jQuery.fn.scrollStop=function(t){$(this).scroll(function(){var e=this,n=$(e);n.data("scrollTimeout")&&clearTimeout(n.data("scrollTimeout")),n.data("scrollTimeout",setTimeout(t,250,e))})},function(t){var e=Array.prototype.slice;t.extend(t.event.special,{resizestop:{add:function(e){var n=e.handler;t(this).resize(function(i){clearTimeout(n._timer),i.type="resizestop";var r=t.proxy(n,this,i);n._timer=setTimeout(r,e.data||200)})}},resizestart:{add:function(e){var n=e.handler;t(this).on("resize",function(i){clearTimeout(n._timer),n._started||(i.type="resizestart",n.apply(this,arguments),n._started=!0),n._timer=setTimeout(t.proxy(function(){n._started=!1},this),e.data||300)})}}}),t.extend(t.fn,{resizestop:function(){t(this).on.apply(this,["resizestop"].concat(e.call(arguments)))},resizestart:function(){t(this).on.apply(this,["resizestart"].concat(e.call(arguments)))}})}(jQuery),function(t){t.ManifestsLoader=function(t){return this.getManifestsData(t)},t.ManifestsLoader.prototype={getManifestsData:function(e){var n=this,i={},r=[],o=[];return jQuery.each(e.data,function(t,e){n.hasWidgets(e)?r.unshift(t):r.push(t)}),jQuery.each(r,function(r,s){var a,l="manifest-"+t.genUUID(),u=e.data[s],c=jQuery.Deferred();jQuery.isEmptyObject(u)||(a=new t.Manifest(u.manifestUri,c),o.push(c),c.done(function(e){e&&(i[l]={uri:t.trimString(u.manifestUri),metadata:a.metadata,sequences:a.sequences,location:u.location||"-"},n.hasWidgets(u)&&t.viewer.renderWidgetsForCollection(u),t.viewer.addStatusBarMessage("left","Loaded "+u.manifestUri,600))}))}),jQuery.when.apply(null,o).done(function(){var e="Loaded "+t.viewer.numManifestsLoaded+" of "+o.length+" manifests to viewer";t.viewer.updateLoadWindowContent(),t.viewer.addStatusBarMessage("left",e,1e3,!0)}).done(function(){t.viewer.workspaceAutoSave&&t.viewer.saveController.save()}),i},hasWidgets:function(t){return t.widgets!==void 0&&t.widgets&&!jQuery.isEmptyObject(t.widgets)&&t.widgets.length>0}}}(Mirador),function(t){t.Viewer=function(e){jQuery.extend(!0,this,{id:e.id,hash:e.id,data:null,element:null,canvas:null,initialLayout:t.DEFAULT_SETTINGS.initialLayout||"cascade",currentLayout:null,layout:null,mainMenu:null,numManifestsLoaded:0,showStatusBar:t.DEFAULT_SETTINGS.statusBar.show,statusBar:null,widgets:[],collectionsListingCls:"mirador-listing-collections",mainMenuLoadWindowCls:".mirador-main-menu .load-window",workspaceAutoSave:t.DEFAULT_SETTINGS.workspaceAutoSave,windowSize:{},resizeRatio:{},lastWidgetPosition:{x:"left",y:"top",offset:0}},t.DEFAULT_SETTINGS,e),this.element=this.element||jQuery("#"+this.id),this.data&&this.create(),this.lockController=new t.LockController,this.workspaceAutoSave&&(this.saveController=new t.SaveController)},t.Viewer.prototype={create:function(){this.mainMenu=new t.MainMenu({appendTo:this.element}),this.canvas=jQuery("<div/>").addClass("mirador-viewer").appendTo(this.element),this.showStatusBar&&(this.statusBar=new t.StatusBar({appendTo:this.element})),this.layout=new t.Layout,this.alignViewerElements(),this.attachEvents()},alignViewerElements:function(){this.canvas.height(this.element.height()-this.mainMenu.element.outerHeight(!0)),this.showStatusBar&&this.canvas.height(this.canvas.height()-this.statusBar.element.outerHeight(!0))},renderWidgetsForCollection:function(e){var n=this;jQuery.each(e.widgets,function(i,r){!jQuery.isEmptyObject(r)&&t.isValidView(r.type)&&(r.manifestId=t.getManifestIdByUri(e.manifestUri),n.addWidget(r))}),this.initialLayout!==void 0&&(t.viewer.layout.applyLayout(this.initialLayout),this.currentLayout=this.initialLayout)},addWidget:function(e){jQuery.extend(!0,e,{appendTo:this.canvas,id:"mirador-widget-"+t.genUUID(),position:{my:this.getWidgetPosition()}}),this.widgets.push(new t.Widget(e))},removeWidget:function(e){jQuery.each(t.viewer.widgets,function(n,i){i&&i.id===e&&("imageView"===i.type&&t.viewer.lockController.removeLockedView(i.id),t.viewer.widgets.splice(n,1))})},findWidget:function(e,n,i){var r=[];return jQuery.each(t.viewer.widgets,function(t,o){o.type==e&&o.manifestId==n&&(i&&this.imageId!=i||r.push(o))}),r},loadView:function(e,n,i,r){t.viewer.addWidget({height:t.DEFAULT_SETTINGS[e].height,manifestId:n,openAt:r,imageId:i,type:e,width:t.DEFAULT_SETTINGS[e].width})},getWidgetPosition:function(){var t=25,e=this.lastWidgetPosition.x+"+"+this.lastWidgetPosition.offset,n=this.lastWidgetPosition.y+"+"+this.lastWidgetPosition.offset;return this.lastWidgetPosition.offset+=t,e+" "+n},updateLoadWindowContent:function(){var e={cssCls:this.collectionsListingCls,collections:[]},n=this.arrangeCollectionsFromManifests(),i=[];jQuery.each(n,function(t){i.push(t)}),jQuery.each(i.sort(),function(t,i){e.collections.push({location:i,list:n[i]})}),t.loadWindowContent=t.Templates.mainMenu.loadWindowContent(e),jQuery(this.mainMenuLoadWindowCls).tooltipster("update",t.loadWindowContent)},arrangeCollectionsFromManifests:function(){var e={};return jQuery.isEmptyObject(t.manifests)||jQuery.each(t.manifests,function(n,i){var r=i.location;e[r]===void 0&&(e[r]=[]),e[r].push({manifestId:n,collectionTitle:t.trimStringBy(t.getCollectionTitle(i.metadata),60),imageData:t.getImageTitlesAndIds(i.sequences[0].imagesList)})}),jQuery.each(e,function(t){e[t]=e[t].sort(function(t,e){return t.collectionTitle.localeCompare(e.collectionTitle)})}),e},addStatusBarMessage:function(t,e,n,i){var r=this.statusBar.element.find(".mirador-status-bar-msg-"+t);n=isNaN(n)?0:n,i&&"boolean"!=typeof i&&(i=!0),r.text(e),i&&setTimeout(function(){r.fadeOut()},n)},attachEvents:function(){var t=this;jQuery(window).on("resizestart",function(e){e.target==window&&t.saveCurrentWindowSize()}),jQuery(window).on("resizestop",function(e){e.target==window&&t.resizeViewer()})},resizeWidgets:function(){var e=this;null!==this.currentLayout?t.viewer.layout.applyLayout(this.currentLayout):jQuery.each(this.widgets,function(t,n){var i,r,o=n.getPosition(),s=o[0],a=o[1];i=e.resizeRatio.width*s,r=e.resizeRatio.height*a,1>e.resizeRatio.width&&(n.setPosition(i,a),n.setWidth(e.resizeRatio.width*n.getWidth())),1>e.resizeRatio.height&&(n.setPosition(s,r),n.setHeight(e.resizeRatio.height*n.getHeight()))})},resizeViewer:function(){this.resizeRatio.width=(jQuery(window).width()/this.windowSize.width).toFixed(2),this.resizeRatio.height=(jQuery(window).height()/this.windowSize.height).toFixed(2),this.alignViewerElements(),this.resizeWidgets(),this.saveCurrentWindowSize()},saveCurrentWindowSize:function(){this.windowSize.width=jQuery(window).width(),this.windowSize.height=jQuery(window).height()},saveCurrentLayout:function(t){this.currentLayout=t}}}(Mirador),function(t){t.Templates={mainMenu:{menuItems:Handlebars.compile(['<ul class="{{mainMenuCls}}">',"<li>",'<a href="javascript:;" class="bookmark-workspace" title="Bookmark Workspace">','<span class="icon-bookmark-workspace"></span>Bookmark Workspace',"</a>","</li>","<li>",'<a href="javascript:;" class="load-window" title="Load Window">','<span class="icon-load-window"></span>Load Window',"</a>","</li>","<li>",'<a href="javascript:;" class="window-options" title="Window Options">','<span class="icon-window-options"></span>Window Options',"</a>","</li>","<li>",'<a href="javascript:;" class="clear-local-storage" title="Clear saved workspace and reload">','<span class="icon-clear-local-storage"></span>',"</a>","</li>","</ul>"].join("")),windowOptionsMenu:Handlebars.compile(['<ul class="{{windowOptionsMenuCls}}">','<li><a class="cascade-all" href="javascript:;">Cascade All</a></li>','<li><a class="tile-all-vertically" href="javascript:;">Tile All Vertically</li>','<li><a class="tile-all-horizontally" href="javascript:;">Tile All Horizontally</a></li>','<li><a class="stack-all-vertically-2-cols" href="javascript:;">Stack Vertically (2 columns)</a></li>','<li><a class="stack-all-vertically-3-cols" href="javascript:;">Stack Vertically (3 columns)</a></li>','<li class="ui-state-disabled"><a href="javascript:;">Open Recent</a></li>','<li><a class="close-all" href="javascript:;">Close All</a></li>',"</ul>"].join("")),loadWindowContent:Handlebars.compile(['<fieldset class="{{cssCls}}">',"<legend>Available/Loaded manuscripts</legend>","<select>","{{#collections}}",'<optgroup label="{{location}}">',"{{#list}}",'<option data-manifest-id="{{manifestId}}">{{collectionTitle}}</option>',"{{/list}}","</optgroup>","{{/collections}}","</select><br/>",'<a href="javascript:;" class="mirador-btn mirador-icon-thumbnails-view"></a>','<a href="javascript:;" class="mirador-btn mirador-icon-scroll-view"></a>','<a href="javascript:;" class="mirador-btn mirador-icon-metadata-view"></a>',"{{#collections}}","{{#list}}",'<ul class="ul-{{manifestId}}">',"{{#imageData}}",'<li><a href="javascript:;" data-image-id="{{id}}" data-manifest-id="{{../manifestId}}">{{trimTitlePrefix title}}</a></li>',"{{/imageData}}","</ul>","{{/list}}","{{/collections}}","</fieldset>"].join("")),clearLocalStorage:Handlebars.compile(['<div class="{{cssCls}}">',"<p>Do you want to delete your saved workspace, and reload the viewer?</p>","<p>","<a class=\"btn-cancel\" href=\"javascript: jQuery('{{selectorClearLocalStorage}}').tooltipster('hide');\">Cancel</a>",'<a class="btn-clear" href="javascript: localStorage.clear(); location.reload();">Clear</a>',"</p>","</div>"].join(""))},statusBar:{textFrames:Handlebars.compile(['<div class="mirador-status-bar-msg-left"></div>','<div class="mirador-status-bar-msg-right"></div>'].join(""))},widget:{initialLayout:Handlebars.compile(['<div class="{{widgetToolbarCls}}"></div>','<div class="{{widgetContentCls}}">Loading...</div>','<div class="{{widgetStatusBarCls}}"></div>'].join(""))},imageView:{navToolbar:Handlebars.compile(['<div class="{{navToolbarCls}}">','<a href="javascript:;" class="mirador-btn mirador-icon-annotations"><i class="icon-comments"></i></a>','<a href="javascript:;" class="mirador-btn mirador-icon-choices"></a>','<a href="javascript:;" class="mirador-btn mirador-icon-metadata-view"></a>','<a href="javascript:;" class="mirador-btn mirador-icon-scroll-view"></a>','<a href="javascript:;" class="mirador-btn mirador-icon-thumbnails-view"></a>','<a href="javascript:;" class="mirador-btn mirador-icon-previous"></a>','<a href="javascript:;" class="mirador-btn mirador-icon-next"></a>',"</div>"].join("")),statusbar:Handlebars.compile(['<div class="{{statusbarCls}}">','<a href="javascript:;" class="mirador-btn mirador-icon-lock"></a>','<div class="mirador-image-dimensions">','<span class="noDimensionsWarning">No Dimensions Given</span>','<textarea rows="1" class="mirador-image-view-physical-dimensions x">{{width}}</textarea>',"<span>✕</span>",'<textarea rows="1" class="mirador-image-view-physical-dimensions y">{{height}}</textarea>','<span class="units">mm','<select class="unit-selector">','<option value="mm">millimeters</option>','<option value="cm">centimeters</option>','<option value="m">meters</option>',"</select>","</span>","</div>","</div>"].join("")),annotationPanel:Handlebars.compile(['<div class="annotationListPanel">','<div class="resizeGrip"></div>',"{{> annotationStats}}",'<ul class="annotationList">',"{{#each annotations}}","{{> annotationListing}}","{{/each}}","</ul>","</div>"].join("")),annotationStats:function(){var t=['<div class="annotationPanelHeader">','<h4>Annotation List (<span class="annotationsTotal">{{annotationCount}}</span>)</h4>','<div class="annoSearch">','<select id="annotationTypeSelector" name="annotationTypes">','<option value="">All (<span class="annotationCount">{{annotationCount}}</span>)</option>','<option value="commenting">Commentary (<span class="imageAnnotationCount">{{imageAnnotationCount}}</span>)</option>','<option value="painting">Transcription (<span class="textAnnotationCount">{{textAnnotationCount}}</span>)</option>',"</select>","</div>","</div>"].join("");return Handlebars.registerPartial("annotationStats",t),Handlebars.compile(t)}(),noAnnotationMessage:function(){var t=['<div class="annotationPanelHeader">',"<h4>No Annotations Provided</h4>","</div>"].join("");return Handlebars.registerPartial("annotationStats",t),Handlebars.compile(t)}(),annotationListing:function(){var t=['<li id="listing_{{id}}" class="annotationListing">',"{{#if title}}","<h3>{{{title}}}</h3>","{{/if}}","<p>{{{content}}}</p>","</li>"].join("");return Handlebars.registerPartial("annotationListing",t),Handlebars.compile(t)}(),annotationDetail:Handlebars.compile(['<div class="annotationDetails">','<div class="annotationNumber">{{annotationNumber}}</div>','<a class="annotationDetailToggle mirador-icon-annotationDetail-toggle" title="Hide this detail panel."><i class="icon-eye-close"></i></a>',"<p>{{{body}}}</p>","</div>"].join("")),annotationDetailToggle:Handlebars.compile(['<div class="displayBottomPanelButton">','<a class="annotationDetailToggle mirador-icon-annotationDetail-toggle" title="Display annotation details in bottom panel."><i class="icon-eye-open"></i></a>',"</div>"].join("")),imageChoices:Handlebars.compile(['<ul class="mirador-image-view-choices">',"{{#choicesInfo}}",'<li><a href="javascript:;" class="mirador-image-view-choice" data-choice="{{label}}" data-image-url="{{imageUrl}}">{{label}}</a></li>',"{{/choicesInfo}}","</ul>"].join(""))},scrollView:{imagesFrame:Handlebars.compile(['<div class="{{frameCls}}"></div>'].join("")),listImages:Handlebars.compile(["{{#images}}",'<div id="{{id}}" class="item">','<div class="header" style="height: {{../toolbarHeight}}px">','<div id="{{id}}-osd-toolbar" class="toolbar">','<a href="javascript:;" class="enable-zoom">Enable zoom</a>',"</div>","</div>",'<div id="{{id}}-osd" class="image-instance">','<img class="static-thumb">',"</div>",'<div class="title">{{title}}</div>',"</div>","{{/images}}"].join("")),navToolbar:Handlebars.compile(['<div class="{{navToolbarCls}}">','<a href="javascript:;" class="mirador-btn mirador-icon-metadata-view"></a>','<a href="javascript:;" class="mirador-btn mirador-icon-thumbnails-view"></a>',"</div>"].join(""))},thumbnailsView:{listImages:Handlebars.compile(['<ul class="{{listingCssCls}} listing-thumbs">',"{{#thumbs}}","<li>",'<a href="javascript:;">','<img title="{{title}}" data-image-id="{{id}}" src="{{thumbUrl}}" height="{{../defaultHeight}}">','<div class="thumb-label">{{title}}</div>',"</a>","</li>","{{/thumbs}}","</ul>"].join("")),navToolbar:Handlebars.compile(['<div class="{{navToolbarCls}}">','<a href="javascript:;" class="mirador-btn mirador-icon-metadata-view"></a>','<a href="javascript:;" class="mirador-btn mirador-icon-scroll-view"></a>',"</div>"].join(""))},metadataView:{listTerms:Handlebars.compile(['<div class="sub-title">Details (Metadata about physical object/intellectual work):</div>','<dl class="{{metadataListingCls}}">',"{{#each details}}","<dt>{{label}}:</dt><dd>{{value}}</dd>","{{/each}}","</dl>",'<div class="sub-title">Rights Metadata:</div>','<dl class="{{metadataListingCls}}">',"{{#each rights}}","<dt>{{label}}:</dt><dd>{{value}}</dd>","{{/each}}","</dl>",'<div class="sub-title">Linking Metadata:</div>','<dl class="{{metadataListingCls}}">',"{{#each links}}","<dt>{{label}}:</dt><dd>{{value}}</dd>","{{/each}}","</dl>",'<div class="sub-title">About (Metadata about this manuscript\'s manifest file):</div>','<dl class="{{metadataListingCls}}">',"{{#each about}}","<dt>{{label}}:</dt><dd>{{value}}</dd>","{{/each}}","</dl>"].join(""),{noEscape:!0}),navToolbar:Handlebars.compile(['<div class="{{navToolbarCls}}">','<a href="javascript:;" class="mirador-btn mirador-icon-scroll-view"></a>','<a href="javascript:;" class="mirador-btn mirador-icon-thumbnails-view"></a>',"</div>"].join(""))}},Handlebars.registerHelper("trimTitlePrefix",function(t){return t=t.replace(/^Beinecke MS \w+,? \[?/,""),t=t.replace(/\]$/,"")})}(Mirador),function(t){t.MainMenuWindowOptions=function(t){jQuery.extend(!0,this,{menuContent:null,windowOptionsMenuCls:"window-options-menu"},t),this.html=this.html||"<div/>",this.render(),this.attachEvents()},t.MainMenuWindowOptions.prototype={render:function(){this.html=t.Templates.mainMenu.windowOptionsMenu({windowOptionsMenuCls:this.windowOptionsMenuCls})},attachEvents:function(){var e="."+this.windowOptionsMenuCls+" .cascade-all",n="."+this.windowOptionsMenuCls+" .tile-all-vertically",i="."+this.windowOptionsMenuCls+" .tile-all-horizontally",r="."+this.windowOptionsMenuCls+" .stack-all-vertically-2-cols",o="."+this.windowOptionsMenuCls+" .stack-all-vertically-3-cols",s="."+this.windowOptionsMenuCls+" .close-all";jQuery(document).on("click",e,function(){t.viewer.layout.applyLayout("cascade")}),jQuery(document).on("click",n,function(){t.viewer.layout.applyLayout("tileAllVertically")}),jQuery(document).on("click",i,function(){t.viewer.layout.applyLayout("tileAllHorizontally")}),jQuery(document).on("click",r,function(){t.viewer.layout.applyLayout("stackAll2Columns")}),jQuery(document).on("click",o,function(){t.viewer.layout.applyLayout("stackAll3Columns")}),jQuery(document).on("click",s,function(){t.viewer.layout.closeAll()})}}}(Mirador),function(t){t.MainMenuLoadWindow=function(t){jQuery.extend(!0,this,{element:null,width:300,collectionsListingCls:"mirador-listing-collections"},t),this.element=this.element||jQuery("<div/>"),this.attachEvents()},t.MainMenuLoadWindow.prototype={attachEvents:function(){var e="."+this.collectionsListingCls,n=e+" select",i=e+" ul",r=e+" a.mirador-icon-scroll-view",o=e+" a.mirador-icon-metadata-view",s=e+" a.mirador-icon-thumbnails-view";jQuery(document).on("change",n,function(){var t=jQuery(this).find("option:selected").data("manifest-id");jQuery(i).hide(),jQuery(i+".ul-"+t).show()}),jQuery(document).on("click",i,function(e){var n,i,r=jQuery(e.target);n=r.data("manifest-id"),i=r.data("image-id"),t.viewer.loadView("imageView",n,i)}),jQuery(document).on("click",s,function(){var e=jQuery(n).find("option:selected").data("manifest-id");t.viewer.loadView("thumbnailsView",e)}),jQuery(document).on("click",r,function(){var e=jQuery(n).find("option:selected").data("manifest-id");t.viewer.loadView("scrollView",e)}),jQuery(document).on("click",o,function(){var e=jQuery(n).find("option:selected").data("manifest-id");t.viewer.loadView("metadataView",e)})}}}(Mirador),function(t){t.MainMenu=function(e){jQuery.extend(!0,this,{element:null,mainMenuHeight:t.DEFAULT_SETTINGS.mainMenu.height,mainMenuWidth:t.DEFAULT_SETTINGS.mainMenu.width,windowOptionsMenu:null,loadWindow:null,clearLocalStorage:"",viewerCls:"mirador-viewer",mainMenuBarCls:"mirador-main-menu-bar",mainMenuCls:"mirador-main-menu",windowOptionsMenuCls:"mirador-window-options-menu",clearLocalStorageCls:"clear-local-storage",clearLocalStorageDialogCls:"mirador-main-menu-clear-local-storage",collectionsListingCls:"mirador-listing-collections"},e),this.element=this.element||jQuery("<div/>"),this.render(),this.attachMainMenuEvents()},t.MainMenu.prototype={render:function(){this.element.addClass(this.mainMenuBarCls).height(this.mainMenuHeight).width(this.mainMenuWidth).appendTo(this.appendTo),this.element.append(t.Templates.mainMenu.menuItems({mainMenuCls:this.mainMenuCls})),this.windowOptionsMenu=new t.MainMenuWindowOptions({windowOptionsMenuCls:this.windowOptionsMenuCls}),t.loadWindowContent="Loading...",this.loadWindow=new t.MainMenuLoadWindow({collectionsListingCls:this.collectionsListingCls}),this.clearLocalStorage=t.Templates.mainMenu.clearLocalStorage({cssCls:this.clearLocalStorageDialogCls,selectorClearLocalStorage:"."+this.mainMenuCls+" ."+this.clearLocalStorageCls})},attachMainMenuEvents:function(){var t=this.element.find("."+this.mainMenuCls);selectorBookmarkWorkspace=".bookmark-workspace",selectorLoadWindow=".load-window",selectorWindowOptions=".window-options",selectorClearLocalStorage="."+this.clearLocalStorageCls,selectorWindowOptionsMenu="."+this.mainMenuBarCls+" ."+this.windowOptionsMenuCls,_this=this,t.on("click",selectorBookmarkWorkspace,function(){}),t.find(selectorLoadWindow).tooltipster({arrow:!0,content:_this.loadWindow.element,interactive:!0,position:"bottom",theme:".tooltipster-mirador",functionReady:function(){var t=.8*jQuery("."+_this.viewerCls).height();
jQuery("."+_this.collectionsListingCls).height(t),jQuery("."+_this.collectionsListingCls+" ul").height(t-70)}}),t.find(selectorWindowOptions).tooltipster({arrow:!0,content:_this.windowOptionsMenu.html,interactive:!0,theme:".tooltipster-mirador"}),t.find(selectorClearLocalStorage).tooltipster({arrow:!0,content:_this.clearLocalStorage,interactive:!0,theme:".tooltipster-mirador"})}}}(Mirador),function(t){t.StatusBar=function(e){jQuery.extend(!0,this,{element:null,statusBarHeight:t.DEFAULT_SETTINGS.statusBar.height,statusBarWidth:t.DEFAULT_SETTINGS.statusBar.width,statusBarBarCls:"mirador-status-bar"},e),this.element=this.element||jQuery("<div/>"),this.render()},t.StatusBar.prototype={render:function(){this.element.addClass(this.statusBarBarCls).height(this.statusBarHeight).width(this.statusBarWidth).appendTo(this.appendTo),this.element.append(t.Templates.statusBar.textFrames({})),this.xbox=this.element.find(".x"),this.ybox=this.element.find(".y")}}}(Mirador),function(t){t.Layout=function(t){jQuery.extend(!0,this,{rowPadding:10,columnPadding:10,cascade:{x:10,y:40,offset:25}},t)},t.Layout.prototype={cascadeAll:function(){var e,n,i=this,r=0,o={};o.top=t.viewer.mainMenu.element.outerHeight(!0),o.left=this.columnPadding,jQuery.each(t.viewer.widgets,function(t,o){e=i.cascade.x+r,n=i.cascade.y+r,o.setPosition(e,n),o.moveToTop(),r+=i.cascade.offset})},tileAllVertically:function(){this.stackAllByColumns(1)},tileAllHorizontally:function(){this.stackAllByColumns(t.viewer.widgets.length)},stackAllByColumns:function(e){var n,i,r,o,s=this,a={},l=0;a.top=t.viewer.mainMenu.element.outerHeight(!0)+this.rowPadding,a.width=t.viewer.canvas.width()-this.columnPadding,a.height=t.viewer.canvas.height()-this.rowPadding,n=Math.ceil(t.viewer.widgets.length/e),i=Math.floor(a.width/e)-this.columnPadding,r=Math.ceil(a.height/n)-this.rowPadding,jQuery.each(t.viewer.widgets,function(t,n){var u=0,c=0;o=t%e,0===o&&0!==t&&++l,u=s.columnPadding+o*(s.columnPadding+i),c=a.top+l*(s.rowPadding+r),n.setPositionAndSize(u,c,i,r)})},closeAll:function(){jQuery.each(t.viewer.widgets.slice(),function(t,e){e&&e.close()})},applyLayout:function(e){switch(e){case"cascade":this.cascadeAll();break;case"tileAllVertically":this.tileAllVertically();break;case"tileAllHorizontally":this.tileAllHorizontally();break;case"stackAll2Columns":this.stackAllByColumns(2);break;case"stackAll3Columns":this.stackAllByColumns(3);break;default:e="cascade",this.cascadeAll()}t.viewer.saveCurrentLayout(e)}}}(Mirador),function(t){t.Manifest=function(e,n){jQuery.extend(!0,this,{uri:e,jsonLd:null,sequences:[],metadata:{about:{},details:{},rights:{},links:{}},showNoImageChoiceOption:t.DEFAULT_SETTINGS.showNoImageChoiceOption}),this.loadManifestDataFromURI(n)},t.Manifest.prototype={loadManifestDataFromURI:function(t){var e=this;jQuery.ajax({url:e.uri,dataType:"json",async:!0,success:function(n){e.jsonLd=n,e.sequences=e.parseSequences(),e.parseMetadata(),t.resolve(!0)},error:function(){console.log("Failed loading "+e.uri),t.resolve(!1)}})},parseSequences:function(){var t=this,e=[];return jQuery.each(this.jsonLd.sequences,function(n,i){"sc:Sequence"===i["@type"]&&e.push({id:i["@id"],imagesList:t.getImagesList(i)})}),e},getImagesList:function(t){var e=this,n=[];return jQuery.each(t.canvases,function(t,i){var r,o=[];"sc:Canvas"===i["@type"]&&(o=i.resources||i.images,jQuery.each(o,function(t,o){"oa:Annotation"===o["@type"]&&(r=e.getImageObject(o),r.title=i.label||"",r.canvasWidth=i.width,r.canvasHeight=i.height,r.canvasId=i["@id"],i.otherContent&&(r.annotations=jQuery.map(i.otherContent,function(t){return t["@id"].indexOf(".json")>=0?t["@id"]:t["@id"]+".json"})),e.isDetailImage(o.on)||n.push(r))}))}),n},getImageObject:function(t){var e,n=t.resource;return e=n.hasOwnProperty("@type")&&"oa:Choice"===n["@type"]?this.getImageObjWithChoices(t.resource):this.getImageProperties(n),this.showNoImageChoiceOption&&e.choices.push(this.getNoImageChoiceObj()),e},getImageProperties:function(t){var e={height:t.height||0,width:t.width||0,id:t.service["@id"],imageUrl:t.service["@id"].replace(/\/$/,""),choices:[],choiceLabel:t.label||"Default"};return e.aspectRatio=e.width/e.height||1,e},getImageObjWithChoices:function(t){var e,n,i=this,r=[],o=1;return jQuery.isArray(t.item)?r=t.item:r.push(t.item),e=this.getImageProperties(t["default"]),""===e.choiceLabel&&(e.choiceLabel="Choice "+o),jQuery.each(r,function(t,r){n=i.getImageProperties(r),""===n.choiceLabel&&(o+=1,n.choiceLabel="Choice "+o),e.choices.push(n)}),e},getNoImageChoiceObj:function(){return{height:0,width:0,imageUrl:null,choices:[],choiceLabel:"No Image",aspectRatio:1}},isDetailImage:function(t){return/#xywh/.test(t)},parseMetadata:function(){this.parseMetadataAbout(),this.parseMetadataDetails(),this.parseMetadataRights(),this.parseMetadataLinks(),++t.viewer.numManifestsLoaded},parseMetadataAbout:function(){this.metadata.about={"@context":this.jsonLd["@context"]||"","@id":this.jsonLd["@id"]||""}},parseMetadataDetails:function(){this.metadata.details={label:this.jsonLd.label||"",agent:this.jsonLd.agent||"",location:this.jsonLd.location||"",date:this.jsonLd.date||"",description:this.jsonLd.description||""};var t={};this.jsonLd.metadata!==void 0&&jQuery.each(this.jsonLd.metadata,function(e,n){t[n.label]=n.value}),this.metadata.metadata=t},parseMetadataRights:function(){this.metadata.rights={license:this.jsonLd.license||"",attribution:this.jsonLd.attribution||""}},parseMetadataLinks:function(){this.metadata.links={service:this.jsonLd.service||"",seeAlso:this.jsonLd.seeAlso||"",within:this.jsonLd.within||""}}}}(Mirador),function(t){t.AnnotationsLayer=function(e){jQuery.extend(!0,this,{sidePanel:null,bottomPanel:null,regionController:null,width:t.DEFAULT_SETTINGS.imageView.annotationsList.width,parent:null,stateEvents:{},showList:!0,annotationUrls:null,annotations:[],commentAnnotations:0,textAnnotations:0,visible:!1,selectedAnnotation:null,hoveredAnnotation:null,annotationListCls:"mirador-annotation-list",filter:null},e),this.create()},t.AnnotationsLayer.prototype={create:function(){var e=this;e.getAnnotations().done(function(){e.bottomPanel=new t.AnnotationBottomPanel({parent:e}),e.regionController=new t.AnnotationLayerRegionController({parent:e}),e.sidePanel=new t.AnnotationLayerSidePanel({parent:e})}),this.bindEvents()},get:function(t){return this[t]},set:function(t,e,n){_this=this,this[t]=e,_this.event(t+":set").publish(e,n)},event:function(t){var e=t&&this.stateEvents[t];return e||(this.callbacks=jQuery.Callbacks(),e={publish:this.callbacks.fire,subscribe:this.callbacks.add,unsubscribe:this.callbacks.remove},t&&(this.stateEvents[t]=e)),e},getAnnotations:function(){var e=this,n=[];return e.set("annotations",[]),e.annotationUrls?(jQuery.each(e.annotationUrls,function(i,r){var o=jQuery.ajax({url:r,dataType:"json",async:!0,cache:!1,success:function(n){jQuery.each(n.resources,function(n,i){var r={region:t.parseRegion(i.on),title:null,content:i.resource.full?i.resource.full.chars:i.resource.chars,type:i.motivation.split(":")[1],id:t.genUUID()};r.osdFrame=t.getOsdFrame(r.region,e.parent.currentImg),e.annotations.push(r)}),e.computeAnnotationStats()},error:function(){console.log("Failed loading "+uri)}});n.push(o)}),jQuery.when.apply(this,n)):(e.annotations=[],jQuery.when(function(){}))},bindEvents:function(){var t=this;t.event("visible:set").subscribe(function(e){e===!1?t.hide():t.show()}),t.event("disabled:set").subscribe(function(e){e===!0?t.hide():t.show()}),t.event("selectedAnnotation:set").subscribe(function(e,n){return null===e?(t.deselect(),void 0):(t.focusSelected(e,n),void 0)}),t.event("hoveredAnnotation:set").subscribe(function(e,n){t.accentHovered(e,n)}),t.event("annotationUrls:set").subscribe(function(e){e&&console.log(e),t.changePage()}),t.event("filter:set").subscribe(function(e,n){t.filterAnnotations(e,n)})},computeAnnotationStats:function(){var t=0,e=0;jQuery.each(_this.annotations,function(n,i){"commenting"===i.type?t++:e++}),_this.commentAnnotations=t,_this.textAnnotations=e},setVisible:function(){var t=this;t.get("visible")===!1?t.set("visible",!0):t.set("visible",!1)},changePage:function(){var t=this;return null===t.annotations?(t.set("visible",!1),void 0):(t.selectedAnnotation&&t.set("selectedAnnotation",null),t.getAnnotations().done(function(){t.sidePanel.render(),t.regionController.render()}),void 0)},accentHovered:function(t,e){var n=this;"listing"===e?n.regionController.accentHovered(t):n.sidePanel.accentHovered(t)},focusSelected:function(t,e){var n=this;n.sidePanel.focusSelected(t,e),n.regionController.focusSelected(t),n.bottomPanel.focusSelected(t)},deselect:function(){var t=this;t.bottomPanel.deselect(),t.sidePanel.deselect(),t.regionController.deselect()},filterAnnotations:function(t){_this=this,filteredAnnos=jQuery.grep(_this.annotations,function(e){return e.type!==t}),filteredIds=jQuery.map(filteredAnnos,function(t){return t.id}),filteredRegions=jQuery.map(filteredIds,function(t){var e="#region_"+t;return jQuery(e)}),filteredListings=jQuery.map(filteredIds,function(t){var e="#listing_"+t;return jQuery(e)}),console.log(_this),_this.parent.element.find(".annotation").fadeIn(),_this.parent.element.find(".annotationListing").slideDown(),_this.bottomPanel.deselect(),""!==t&&(jQuery(filteredRegions).map(function(){return this.toArray()}).fadeOut(),jQuery(filteredListings).map(function(){return this.toArray()}).slideUp())},append:function(t){this.element.append(t)},show:function(){var t=this;this.parent.parent.element.find(".mirador-widget-content").css("padding-right",t.width),this.sidePanel.show(),this.regionController.show(),this.bottomPanel.show()},hide:function(){this.parent.parent.element.find(".mirador-widget-content").css("padding-right",0),this.sidePanel.hide(),this.regionController.hide(),this.bottomPanel.hide(),this.bottomPanel.hidden=!1}}}(Mirador),function(t){t.Widget=function(e){jQuery.extend(!0,this,{appendTo:"body",autoOpen:!0,containerCls:".mirador-viewer",closeOnEscape:!1,content:null,draggable:!0,element:null,height:t.DEFAULT_SETTINGS.widget.height,id:null,metadataDetails:null,openAt:null,showStatusbar:!0,showToolbar:!0,statusbar:null,toolbar:null,type:"thumbnailsView",viewObj:null,widgetCls:"mirador-widget",widgetContentCls:"mirador-widget-content",widgetStatusbarCls:"mirador-widget-statusbar",widgetToolbarCls:"mirador-widget-toolbar",width:t.DEFAULT_SETTINGS.widget.width,position:{my:"left top",at:"left+50 top+50",of:".mirador-viewer",collision:"fit",within:".mirador-viewer"},dialogOptions:{resize:function(){},resizeStop:function(){},close:function(){}},dialogExtendOptions:{maximizable:!0,collapsable:!0,icons:{maximize:"ui-icon-arrow-4-diag",collapse:"ui-icon-minus"},mainMenuHeight:t.viewer.mainMenu.element.outerHeight(!0),statusBarHeight:t.viewer.statusBar.element.outerHeight(!0)}},e),this.element=this.element||jQuery("<div/>"),this.metadataDetails=t.getMetadataByManifestId(this.manifestId).details,this.imagesList=t.getImagesListByManifestId(this.manifestId),this.create(),this.attachEvents()},t.Widget.prototype={create:function(){this.dialogExtendOptions.containerCls=this.containerCls,this.element.addClass(this.widgetCls).attr("id",this.id).attr("title",this.getTitle()).appendTo(this.appendTo).dialog(this).dialog(this.dialogOptions).dialogExtend(this.dialogExtendOptions).dialog("option","id",this.id).parent().resizable({containment:this.containerCls}).draggable({containment:this.containerCls}),this.toolbar=new t.WidgetToolbar({parent:this,showToolbar:this.showToolbar}),this.statusbar=new t.WidgetStatusBar({parent:this,showStatusbar:this.showStatusbar}),this.content=new t.WidgetContent({parent:this}),this.render()},render:function(){var e=this.type[0].toUpperCase()+this.type.substring(1,1e3);this.viewObj=new t[e]({imagesList:this.imagesList,manifestId:this.manifestId,element:this.content.element,imageId:this.imageId,openAt:this.openAt,parent:this}),this.viewObj.render()},setPosition:function(t,e){t=Math.round(t),e=Math.round(e),this.element.dialog("option","position",[t,e])},setWidth:function(t){this.element.dialog("option","width",Math.round(t))},setHeight:function(t){this.element.dialog("option","height",Math.round(t))},setSize:function(t,e){this.setWidth(Math.round(t)),this.setHeight(Math.round(e)),this.element.trigger("dialogresize"),this.element.trigger("dialogresizestop")},setPositionAndSize:function(t,e,n,i){this.setPosition(t,e),this.setSize(n,i)},getPosition:function(){return this.element.dialog("option","position")},getHeight:function(){return this.element.dialog("option","height")},getWidth:function(){return this.element.dialog("option","width")},moveToTop:function(){this.element.dialog("moveToTop")},close:function(){this.element.dialog("destroy"),this.element.remove(),t.viewer.removeWidget(this.id)},attachEvents:function(){var e=this;this.element.dialog({close:function(){e.close()},drag:function(){t.viewer.saveCurrentLayout(null)},resize:function(){t.viewer.saveCurrentLayout(null)}})},getTitle:function(){return t.getViewLabel(this.type)+" : "+t.getTitlePrefix(this.metadataDetails)}}}(Mirador),function(t){t.WidgetToolbar=function(e){jQuery.extend(!0,this,{appendTo:"body",element:null,height:t.DEFAULT_SETTINGS.widgetToolbar.height,parent:null,showToolbar:!1,toolbarCls:"mirador-widget-toolbar"},e),this.element=this.element||jQuery("<div/>"),this.create()},t.WidgetToolbar.prototype={create:function(){this.element.addClass(this.toolbarCls).height(this.height).appendTo(this.parent.element),this.hide(),this.showToolbar&&this.show()},append:function(t){this.element.append(t)},show:function(){this.element.show()},hide:function(){this.element.hide()}}}(Mirador),function(t){t.LockController=function(t){jQuery.extend(this,{translationMethod:null,lockedViews:[],lockProfile:"lazyZoom"},t)},t.LockController.prototype={LockOptions:{relativeZoom:function(t,e){t.viewport.panTo(t.viewport.getCenter()),t.viewport.zoomTo(e.leaderZoom,t.viewport.getCenter())},relativeLock:function(t,e){var n=e.leaderBounds;t.viewport.fitBounds(n)},dimensionalZoom:function(t,e){var n=t.viewport.getCenter();leaderViewportPixelWidth=e.leaderContainerWidth,followerViewportPixelWidth=t.viewport.getContainerSize().x,viewportRatio=followerViewportPixelWidth/leaderViewportPixelWidth;var i=e.leaderBounds.width*e.leaderWidth/t.width*viewportRatio,r=t.viewport.getAspectRatio()*i,o=n.x-i/2,s=n.y-r/2;console.log(r),followerTargetRect=new OpenSeadragon.Rect(o,s,i,r),console.log(followerTargetRect),console.log("updated"),t.viewport.fitBounds(followerTargetRect)},dimensionalLock:function(t,e){var n=t.viewport.getCenter();leaderViewportPixelWidth=e.leaderContainerWidth,followerViewportPixelWidth=t.viewport.getContainerSize().x,viewportRatio=followerViewportPixelWidth/leaderViewportPixelWidth;var i=e.leaderBounds.width*e.leaderWidth/t.width*viewportRatio,r=t.viewport.getAspectRatio*i,o=n.x-i/2,s=n.y-r/2;followerTargetRect=new OpenSeadragon.Rect(o,s,i,r),t.viewport.fitBounds(followerTargetRect)},lazyZoom:function(t,e){var n=t.viewport.getCenter(),i=e.leaderZoom/e.leaderOldZoom,r=t.viewport.getMaxZoom(),o=t.viewport.getMinZoom(),s=t.viewport.getZoom()*i;console.log("factor: "+i),r>=s&&s>=o?t.viewport.zoomBy(i,n):s>r?(t.viewport.zoomTo(r,n),console.log("reachedMax")):o>s&&(t.viewport.zoomTo(o,n),console.log("reachedMin"))},lazyLock:function(){}},addLockedView:function(t){lockObj={viewId:t.parent.id,rectObj:t.osd.viewport.getBounds(),zoomLevel:t.zoomLevel,width:t.width,units:t.units,viewport:t.osd.viewport},this.lockedViews.push(lockObj)},broadcast:function(t){var e=this,n=jQuery.map(e.lockedViews,function(e){return e.viewId===t?e:void 0})[0],i={leaderId:t,leaderBounds:n.viewport.getBounds(),leaderCenter:n.viewport.getCenter(),leaderOldZoom:n.zoomLevel,leaderZoom:n.viewport.getZoom(),leaderWidth:n.width,leaderContainerWidth:n.viewport.getContainerSize().x},r=jQuery.map(e.lockedViews,function(e){return e.viewId!=t?e:void 0});jQuery.each(r,function(t,n){e.LockOptions[e.lockProfile](n,i)}),n.zoomLevel=n.viewport.getZoom()},removeLockedView:function(t){for(var e=0;this.lockedViews.length>e;e++)if(this.lockedViews[e].viewId===t){this.lockedViews.splice(e,1);break}}}}(Mirador),function(t){t.Iiif={getUri:function(t){var e=t,n=/http?:\/\/stacks.stanford.edu\/image\/(\w+\/\S+)/i.exec(t);return n&&2===n.length&&(e="https://stacks.stanford.edu/image/iiif/"+encodeURIComponent(n[1])),e},getVersionFromContext:function(t){return"http://iiif.io/api/image/2/context.json"==t?"2.0":"1.1"},getUriWithHeight:function(t,e){return t=t.replace(/\/$/,""),this.getUri(t)+"/full/,"+e+"/0/default.jpg"},prepJsonForOsd:function(t){return version=this.getVersionFromContext(t["@context"]),"1.1"==version&&(t.image_host=this.getImageHostUrl(t),t.scale_factors=this.packageScaleFactors(t),t.profile=t.profile.replace(/image-api\/1.\d/,"image-api")),t.tile_width||(t.tile_width=256,t.tile_height=256),t},getImageHostUrl:function(t){var e,n=[];return t.hasOwnProperty("image_host")||(t.image_host=t.tilesUrl||t["@id"]||"",t.hasOwnProperty("identifier")?(e=RegExp("/?"+t.identifier+"/?$","i"),t.image_host=t.image_host.replace(e,"")):(e=RegExp("(.*)/(.*)$"),n=e.exec(t.image_host),n.length>1&&(t.image_host=n[1],t.identifier=n[2]))),t.image_host},packageScaleFactors:function(t){var e=[];if(t.hasOwnProperty("scale_factors")&&jQuery.isArray(t.scale_factors))for(var n=0;t.scale_factors.length>n;n++)e.push(n);return e}}}(Mirador),function(t){t.ImageView=function(t){jQuery.extend(this,{currentImg:null,currentImgIndex:0,element:null,elemChoice:null,height:null,width:null,units:"mm",unitsLong:"Millimetres",imageId:null,imagesList:[],leading:!1,locked:!1,navToolbarCls:"mirador-image-view-nav-toolbar",annotationsLayer:null,openAt:null,zoomLevel:null,osd:null,osdBounds:null,osdCls:"mirador-osd",osdToolbarCls:"mirador-osd-toolbar",parent:null,scale:null,scaleCls:"mirador-image-scale",selectedChoice:"",statusbarCls:"mirador-image-view-statusbar",imageViewBgCls:"mirador-image-view-bg"},t),null!==this.imageId&&(this.currentImgIndex=this.getImageIndexById(this.imageId)),null!==this.openAt&&(this.currentImgIndex=this.getImageIndexByTitle(this.openAt)),this.parent.element.find(".mirador-widget-content").addClass(this.imageViewBgCls),this.currentImg=this.imagesList[this.currentImgIndex]},t.ImageView.prototype={render:function(){this.addToolbarNav(),this.createOpenSeadragonInstance(this.currentImg.imageUrl),this.addStatusbarNav(),this.attachWindowEvents(),this.addAnnotationsLayer()},createOpenSeadragonInstance:function(e,n){console.log("image: "+e);var i,r,o=t.Iiif.getUri(e)+"/info.json",s="mirador-osd-"+t.genUUID(),a=s+"-toolbar",l=this;this.element.find("."+this.osdCls).remove(),this.addOpenSeadragonToolBar(a),i=t.getJsonFromUrl(o,!1),console.log(i),r=jQuery("<div/>").addClass(this.osdCls).attr("id",s).appendTo(this.element),this.osd=t.OpenSeadragon({id:r.attr("id"),toolbar:a,tileSources:t.Iiif.prepJsonForOsd(i)}),this.osd.addHandler("open",function(){l.addScale(),l.attachOsdEvents(),l.zoomLevel=l.osd.viewport.getZoom(),n!==void 0&&l.osd.viewport.fitBounds(n,!0)}),this.parent.element.dialog("option","title",this.getTitle()),this.parent.toolbar.element.find("."+this.osdToolbarCls+" button:last-child").hide(),this.renderChoices()},clearOpenSeadragonInstance:function(){this.element.find("."+this.osdCls).remove(),this.osd=null,this.renderChoices()},addOpenSeadragonToolBar:function(t){var e=jQuery("<div/>").addClass(this.osdToolbarCls).attr("id",t);this.parent.toolbar.element.find("."+this.osdToolbarCls).remove(),this.parent.toolbar.append(e)},renderChoices:function(){var e=this,n=[];this.clearChoices(),this.currentImg.choices.length>0&&(n.push({label:this.currentImg.choiceLabel,imageUrl:this.currentImg.imageUrl}),jQuery.each(this.currentImg.choices,function(t,e){n.push({label:e.choiceLabel,imageUrl:e.imageUrl})}),this.elemChoice.show(),this.selectedChoice=this.currentImg.choiceLabel,this.elemChoice.tooltipster({arrow:!0,content:t.Templates.imageView.imageChoices({choicesInfo:n}),functionReady:function(){e.addImageChoiceEvents()},interactive:!0,position:"bottom",theme:".tooltipster-mirador"}),this.addImageChoiceEvents())},addImageChoiceEvents:function(){var t=this,e=jQuery(document).find(".mirador-image-view-choices");e.find("li a").each(function(){jQuery(this).removeClass("mirador-image-view-choice-selected"),jQuery(this).data("choice")===t.selectedChoice&&jQuery(this).addClass("mirador-image-view-choice-selected")}),e.on("click","li a",function(n){var i=jQuery(n.target),r=jQuery.Deferred();t.storeCurrentOsdBounds(r),r.done(function(){"No Image"!==i.data("choice")?t.createOpenSeadragonInstance(i.data("image-url"),t.osdBounds):t.clearOpenSeadragonInstance()}),t.selectedChoice=i.data("choice"),e.find("li a").removeClass("mirador-image-view-choice-selected"),i.addClass("mirador-image-view-choice-selected")})},clearChoices:function(){""!==this.elemChoice.data("plugin_tooltipster")&&this.elemChoice.tooltipster("destroy"),this.elemChoice.hide()},storeCurrentOsdBounds:function(t){null!==this.parent.viewObj.osd&&(this.osdBounds=this.parent.viewObj.osd.viewport.getBounds()),t.resolve()},addToolbarNav:function(){this.parent.toolbar.append(t.Templates.imageView.navToolbar({navToolbarCls:this.navToolbarCls,hasAnnotations:this.currentImg.annotations})),this.elemChoice=this.parent.toolbar.element.find("."+this.navToolbarCls+" .mirador-icon-choices"),this.elemChoice.hide(),this.attachNavEvents()},addStatusbarNav:function(){this.parent.statusbar.append(t.Templates.imageView.statusbar({statusbarCls:this.statusbarCls,width:this.width,height:this.height})),this.attachStatusbarEvents()},addScale:function(){this.scale||(this.scale=new t.WidgetScale({parent:this,showScale:!0}))},addAnnotationsLayer:function(){this.annotationsLayer=new t.AnnotationsLayer({parent:this,annotationUrls:this.currentImg.annotations})},getImageIndexByTitle:function(e){var n=0;return jQuery.each(this.imagesList,function(i,r){t.trimString(r.title)===t.trimString(e)&&(n=i)}),n},getImageIndexById:function(e){var n=0;return jQuery.each(this.imagesList,function(i,r){t.trimString(r.id)===t.trimString(e)&&(n=i)}),n},getTitle:function(){var e=[];return e.push(t.getViewLabel(this.parent.type)+" : "+t.getTitlePrefix(this.parent.metadataDetails)),this.currentImg.title&&e.push(this.currentImg.title),e.join(" / ")},setHeight:function(t){this.height=t},setWidth:function(t){this.width=t},next:function(){var t,e=this.currentImgIndex+1;this.locked||this.imagesList.length>e&&(this.currentImgIndex=e,this.currentImg=this.imagesList[e],t=this.currentImg.imageUrl,this.createOpenSeadragonInstance(t),this.annotationsLayer.set("annotationUrls",this.currentImg.annotations))},prev:function(){var t=this.currentImgIndex-1;this.locked||t>=0&&(this.currentImgIndex=t,this.currentImg=this.imagesList[t],this.createOpenSeadragonInstance(this.currentImg.imageUrl),this.annotationsLayer.set("annotationUrls",this.currentImg.annotations))},attachWindowEvents:function(){var t=this;this.parent.element.on({mouseenter:function(){t.leading=!0},mouseleave:function(){t.leading=!1}}),this.parent.element.dialog({resize:function(){t.osd.viewport.ensureVisible()}}),this.parent.element.bind("dialogextendmaximize dialogextendrestore",function(){t.osd.viewport.ensureVisible()})},attachOsdEvents:function(){var t=this;this.osd.addHandler("zoom",function(){t.broadcast()}),this.osd.addHandler("pan",function(){t.broadcast()})},attachNavEvents:function(){var e=this.parent.toolbar.element.find("."+this.navToolbarCls),n=".mirador-icon-annotations",i=".mirador-icon-metadata-view",r=".mirador-icon-scroll-view",o=".mirador-icon-thumbnails-view",s=".mirador-icon-next",a=".mirador-icon-previous",l=this;e.on("click",a,function(){l.prev()}),e.on("click",s,function(){l.next()}),e.on("click",i,function(){t.viewer.loadView("metadataView",l.manifestId)}),e.on("click",r,function(){t.viewer.loadView("scrollView",l.manifestId)}),e.on("click",o,function(){t.viewer.loadView("thumbnailsView",l.manifestId)}),e.on("click",n,function(){l.annotationsLayer.setVisible()})},attachStatusbarEvents:function(){var t=this.parent.statusbar.element.find("."+this.statusbarCls),e=".mirador-icon-lock",n=".mirador-image-view-physical-dimensions",i=".units",r=this;t.on("click",e,function(){r.locked?r.unlock():r.lock()}),t.on("keypress paste keyup",n,function(t){r.dimensionChange(t)}),t.on("input",i,function(){r.unitChange()})},broadcast:function(){this.scale.render(),null!==this.osd&&null!==this.osd.viewport&&(this.zoomLevel=this.osd.viewport.getZoom()),this.locked===!0&&this.leading===!0&&t.viewer.lockController.broadcast(this.parent.id)},reachedExtent:function(){},lock:function(){this.locked=!0,this.parent.element.parent().addClass("locked"),t.viewer.lockController.addLockedView(this.parent.viewObj)},unlock:function(){this.locked=!1,this.parent.element.parent().removeClass("locked"),t.viewer.lockController.removeLockedView(this.parent.id)},dimensionChange:function(t){var e,n,i=/[0-9]|\./.test(String.fromCharCode(t.keyCode))&&!t.shiftKey,r=t.currentTarget.className,o=r.charAt(r.length-1),s=this.parent.viewObj.currentImg.aspectRatio;i||t.preventDefault(),13===(t.keyCode||t.which)&&t.target.blur(),"x"===o?(e=this.parent.statusbar.element.find(".x").val(),n=Math.floor(s*e),e?this.parent.statusbar.element.find(".y").val(n):this.parent.statusbar.element.find(".y").val("")):(n=this.parent.statusbar.element.find(".y").val(),e=Math.floor(n/s),n?this.parent.statusbar.element.find(".x").val(e):this.parent.statusbar.element.find(".x").val(""),this.height=n,this.width=e),unitCls=".units",this.setWidth(e),this.setHeight(n),this.scale.dimensionsProvided=e?!0:!1,this.scale.render()},unitChange:function(){}}}(Mirador),function(t){t.ScrollView=function(e){jQuery.extend(this,{element:null,imagesList:[],currentImg:null,frameCls:"scroll-view-frame",imageItemCls:"item",parent:null,imagesFrame:null,tplData:{},toolbarHeight:t.DEFAULT_SETTINGS.scrollView.toolbarHeight,imageLabelHeight:t.DEFAULT_SETTINGS.scrollView.imageLabelHeight,maxItemHeight:0,navToolbarCls:"mirador-scroll-view-nav-toolbar"},e)},t.ScrollView.prototype={render:function(){this.element.html(""),this.setProperties(),this.loadContent(),this.attachEvents()},setProperties:function(){var e=this,n=[];jQuery.each(this.imagesList,function(i,r){var o=e.parent.element.attr("id")+"-item-"+i;n[o]={},n[o].aspectRatio=(r.width/r.height).toFixed(2),n[o].infoJsonUrl=t.Iiif.getUri(r.imageUrl)+"/info.json",n[o].imageUrl=r.imageUrl}),this.imagesList.attrs=n},appendImagesFrame:function(){this.imagesFrame=jQuery(t.Templates.scrollView.imagesFrame({frameCls:this.frameCls})),this.element.append(this.imagesFrame)},generateTemplateData:function(){var t=this,e=[];return jQuery.each(this.imagesList,function(n,i){var r=t.parent.element.attr("id")+"-item-"+n;e.push({id:r,title:i.title})}),{toolbarHeight:this.toolbarHeight,images:e}},addToolbarNav:function(){this.parent.toolbar.append(t.Templates.scrollView.navToolbar({navToolbarCls:this.navToolbarCls}))},getMaxItemHeight:function(){var t=0;return t+=parseInt(this.imagesFrame.css("padding-top"),10),t+=parseInt(this.imagesFrame.css("padding-bottom"),10),this.imagesFrame.height()-t},loadContent:function(){this.appendImagesFrame(),this.addToolbarNav(),this.imagesFrame.append(t.Templates.scrollView.listImages(this.generateTemplateData())),this.setFrameAndItemsDimensions(),this.loadImagesInViewPort()},setFrameAndItemsDimensions:function(){var t=this,e="."+this.imageItemCls,n=this.getMaxItemHeight(),i=n-(this.toolbarHeight+this.imageLabelHeight);totalItemWidth=0,this.imagesFrame.find(e).each(function(e){var r=t.parent.element.attr("id")+"-item-"+e,o=Math.round(t.imagesList.attrs[r].aspectRatio*i),s=jQuery(this).find(".image-instance");jQuery(this).width(o).height(n),s.height(i),totalItemWidth+=jQuery(this).outerWidth(!0)}),this.imagesFrame.width(totalItemWidth+15)},loadImagesInViewPort:function(){var e=this,n=this.element.find("."+this.frameCls+" ."+this.imageItemCls),i=jQuery(this.element).width();jQuery(n).each(function(){var n,r,o=jQuery(this),s=o.attr("id"),a=o.find(".image-instance"),l=o.find(".static-thumb"),u=o.find(".enable-zoom"),c=e.isItemInViewport(i,o);a.find(".openseadragon-container").remove(),o.find(".toolbar form").remove(),u.unbind().show().click(function(){e.showOsdContent(s,l,u)}),l.height("100%").width("100%").show(),c&&(r=e.imagesList.attrs[s].imageUrl,n=t.Iiif.getUriWithHeight(r,jQuery(a).height()),l.attr("src",n))})},showOsdContent:function(e,n,i){var r;i.hide(),n.hide(),r=t.getJsonFromUrl(this.imagesList.attrs[e].infoJsonUrl,!1),t.OpenSeadragon({id:e+"-osd",toolbar:e+"-osd-toolbar",tileSources:t.Iiif.prepJsonForOsd(r)}),jQuery("#"+e+"-osd-toolbar button:last-child").hide()},isItemInViewport:function(t,e){var n=e.position().left+e.width();return n>0&&t>e.position().left},attachEvents:function(){this.attachWindowEvents(),this.attachNavEvents(),this.attachKeyboardScrollingEvents()},attachWindowEvents:function(){var t=this;this.parent.element.dialog({resizeStop:function(){t.setFrameAndItemsDimensions(),t.loadImagesInViewPort()}}),this.parent.element.on("dialogresizestop dialogextendmaximize dialogextendrestore",function(){t.setFrameAndItemsDimensions(),t.loadImagesInViewPort()})},attachKeyboardScrollingEvents:function(){var t=this,e=300,n=37,i=39,r=jQuery("#"+this.parent.id+" ."+this.frameCls);r.on("mouseenter",function(){r.data("hover",!0)}),r.on("mouseleave",function(){r.data("hover",!1)}),jQuery(document).on("keydown",function(o){var s,a=t.element.width();r.data("hover")&&(s=t.element.scrollLeft(),o.keyCode===n&&t.element.animate({scrollLeft:s-a},e),o.keyCode===i&&t.element.animate({scrollLeft:s+a},e))})},attachNavEvents:function(){var e=this,n=this.parent.toolbar.element.find("."+this.navToolbarCls),i=".mirador-icon-metadata-view",r=".mirador-icon-thumbnails-view";this.element.scrollStop(function(){e.loadImagesInViewPort()}),n.on("click",i,function(){t.viewer.loadView("metadataView",e.manifestId)}),n.on("click",r,function(){t.viewer.loadView("thumbnailsView",e.manifestId)})}}}(Mirador),function(t){t.MetadataView=function(e){jQuery.extend(this,{currentImg:null,element:null,parent:null,metadata:null,metadataListingCls:"metadata-listing",navToolbarCls:"mirador-metadata-view-nav-toolbar"},e),this.metadata=t.getMetadataByManifestId(this.manifestId)},t.MetadataView.prototype={render:function(){var e=this,n=["about","details","rights","links","metadata"],i={metadataListingCls:this.metadataListingCls};jQuery.each(n,function(n,r){i[r]=[],jQuery.each(e.metadata[r],function(n,o){"object"==typeof o&&(o=t.stringifyObject(o)),"string"==typeof o&&""!==o&&i[r].push({label:t.extractLabelFromAttribute(n),value:e.addLinksToUris(o)})})}),this.element.append(t.Templates.metadataView.listTerms(i)),this.addToolbarNav(),this.attachEvents()},addToolbarNav:function(){this.parent.toolbar.append(t.Templates.metadataView.navToolbar({navToolbarCls:this.navToolbarCls}))},attachEvents:function(){var e=this.parent.toolbar.element.find("."+this.navToolbarCls),n=".mirador-icon-scroll-view",i=".mirador-icon-thumbnails-view",r=this;e.on("click",n,function(){t.viewer.loadView("scrollView",r.manifestId)}),e.on("click",i,function(){t.viewer.loadView("thumbnailsView",r.manifestId)})},addLinksToUris:function(t){var e,n=/(http|ftp|https):\/\/[\w\-]+(\.[\w\-]+)+([\w.,@?\^=%&amp;:\/~+#\-]*[\w@?\^=%&amp;\/~+#\-])?/gi,i=t;return"string"==typeof t&&(e=t.match(n),e&&jQuery.each(e,function(t,e){i=i.replace(e,'<a href="'+e+'" target="_blank">'+e+"</a>")})),i}}}(Mirador),function(t){t.ThumbnailsView=function(e){jQuery.extend(this,{currentImg:null,element:null,imagesList:[],sliderCls:"thumbnails-view-slider",sliderId:"",thumbsListingCls:"",thumbsMaxHeight:t.DEFAULT_SETTINGS.thumbnailsView.thumbsMaxHeight,thumbsMinHeight:t.DEFAULT_SETTINGS.thumbnailsView.thumbsMinHeight,thumbsDefaultZoom:t.DEFAULT_SETTINGS.thumbnailsView.thumbsDefaultZoom,thumbsDefaultHeight:this.thumbsMinHeight,parent:null,navToolbarCls:"mirador-thumbnails-view-nav-toolbar"},e)},t.ThumbnailsView.prototype={render:function(){this.sliderId=this.parent.element.attr("id")+"-thumbs-slider",this.thumbsListingCls=this.parent.element.attr("id")+"-thumbs-listing",this.thumbsDefaultHeight=this.thumbsMinHeight+(this.thumbsMaxHeight-this.thumbsMinHeight)*this.thumbsDefaultZoom,this.element.html(""),this.addToolbarNav(),this.loadContent(),this.setUpSlider(),this.attachEvents()
},loadContent:function(){var e=this,n={defaultHeight:this.thumbsDefaultHeight,listingCssCls:this.thumbsListingCls};console.log("thumbs this"),console.log(e),n.thumbs=jQuery.map(this.imagesList,function(n){return{thumbUrl:t.Iiif.getUriWithHeight(n.imageUrl,e.thumbsMaxHeight),title:n.title,id:n.id}}),this.element.append(t.Templates.thumbnailsView.listImages(n))},addToolbarNav:function(){this.parent.toolbar.append(t.Templates.thumbnailsView.navToolbar({navToolbarCls:this.navToolbarCls}))},setUpSlider:function(){var t=jQuery("<div/>").attr("id",this.sliderId).addClass(this.sliderCls).slider({max:this.thumbsMaxHeight,min:this.thumbsMinHeight,value:this.thumbsDefaultHeight,step:1});this.parent.toolbar.append(t)},attachEvents:function(){this.attachKeyboardScrollingEvents(),this.attachNavEvents()},attachKeyboardScrollingEvents:function(){var t=this,e=300,n=38,i=40,r=this.parent.content.element;r.on("mouseenter",function(){r.data("hover",!0)}),r.on("mouseleave",function(){r.data("hover",!1)}),jQuery(document).on("keydown",function(o){var s,a=t.parent.content.element.height();r.data("hover")&&(s=t.element.scrollTop(),o.keyCode===n&&t.element.animate({scrollTop:s-a},e),o.keyCode===i&&t.element.animate({scrollTop:s+a},e))})},attachNavEvents:function(){var e="."+this.thumbsListingCls+" li img",n="."+this.thumbsListingCls+" li a",i="#"+this.sliderId,r=this.parent.toolbar.element.find("."+this.navToolbarCls),o=".mirador-icon-scroll-view",s=".mirador-icon-metadata-view",a=this;jQuery(i).on("slide",function(t,n){jQuery(e).attr("height",n.value)}),jQuery(n).on("click",function(e){var n,i=jQuery(e.target);n=i.data("image-id"),t.viewer.loadView("imageView",a.manifestId,n)}),r.on("click",s,function(){t.viewer.loadView("metadataView",a.manifestId)}),r.on("click",o,function(){t.viewer.loadView("scrollView",a.manifestId)})}}}(Mirador),function(t){t.WidgetStatusBar=function(e){jQuery.extend(!0,this,{appendTo:"body",element:null,height:t.DEFAULT_SETTINGS.widgetStatusBar.height,parent:null,showStatusbar:!1,statusbarCls:"mirador-widget-statusbar"},e),this.element=this.element||jQuery("<div/>"),this.create()},t.WidgetStatusBar.prototype={create:function(){this.element.addClass(this.statusbarCls).height(this.height).appendTo(this.parent.element),this.hide(),this.showStatusbar&&this.show()},append:function(t){this.element.append(t)},show:function(){this.element.show()},hide:function(){this.element.hide()}}}(Mirador),function(t){t.WidgetContent=function(t){jQuery.extend(!0,this,{appendTo:"body",element:null,contentCls:"mirador-widget-content",parent:null},t),this.element=this.element||jQuery("<div/>"),this.create()},t.WidgetContent.prototype={create:function(){var t=this;this.element.addClass(this.contentCls).height(t.getHeight()).appendTo(this.parent.element),this.parent.element.on("dialogresize dialogresizestop dialogextendmaximize dialogextendrestore",function(){t.updateHeight()})},updateHeight:function(){this.element.height(this.getHeight())},getHeight:function(){var t=this.parent.element.height();return t-=this.parent.toolbar.element.outerHeight(!0),t-=this.parent.statusbar.element.outerHeight(!0)},show:function(){this.element.show()},hide:function(){this.element.hide()}}}(Mirador),function(t){t.OpenSeadragon=function(t){return OpenSeadragon(jQuery.extend({preserveViewport:!0,visibilityRatio:1,minZoomLevel:0,defaultZoomLevel:0,prefixUrl:"images/openseadragon/",navImages:{zoomIn:{REST:"zoom-in.png",GROUP:"zoom-in.png",HOVER:"zoom-in-hover.png",DOWN:"zoom-in-hover.png"},zoomOut:{REST:"zoom-out.png",GROUP:"zoom-out.png",HOVER:"zoom-out-hover.png",DOWN:"zoom-out-hover.png"},home:{REST:"fit.png",GROUP:"fit.png",HOVER:"fit-hover.png",DOWN:"fit-hover.png"},fullpage:{REST:"full-screen.png",GROUP:"full-screen.png",HOVER:"full-screen-hover.png",DOWN:"full-screen-hover.png"},previous:{REST:"previous.png",GROUP:"previous.png",HOVER:"previous-hover.png",DOWN:"previous-hover.png"},next:{REST:"next.png",GROUP:"next.png",HOVER:"next-hover.png",DOWN:"next-hover.png"}}},t))}}(Mirador),function(t){t.WidgetScale=function(e){jQuery.extend(!0,this,{appendTo:"body",element:null,parent:null,height:t.DEFAULT_SETTINGS.scale.height,width:t.DEFAULT_SETTINGS.scale.maxWidth,physicalScaleWidth:null,showScale:!1,scaleCls:"mirador-image-scale",dimensionsProvided:!1,visualisation:{},controlElement:null},e),jQuery(this.parent.element).find("."+this.scaleCls).remove(),this.element=this.element||jQuery("<svg/>"),this.create()},t.WidgetScale.prototype={create:function(){var t=this;scaleDimensions=this.calculateScaleDimensions(),visPadding=10;var e=this.width+3*visPadding,n=this.height;t.controlElement=t.parent.parent.element.find(".mirador-image-dimensions");var i=this.visualisation.scale=d3.select(this.parent.element[0]).append("svg").attr("class",this.scaleCls).attr("height",n).attr("width",e),r=this.visualisation.xScaleFunction=d3.scale.linear().domain([0,d3.max(scaleDimensions)]).range([visPadding,e-2*visPadding]),o=this.visualisation.axis=d3.svg.axis().scale(r).orient("bottom").ticks(4);i.append("g").attr("class","axis x").attr("transform","translate("+visPadding+","+(n-4.5*visPadding)+")").call(o),i.append("text").attr("class","scale-units").text(t.parent.unitsLong).attr("transform","translate("+visPadding+","+(n-visPadding)+")"),this.render()},render:function(){return t.debounce(function(){var t=this,e=this.visualisation.scale,n=this.visualisation.axis,i=this.visualisation.xScaleFunction,r=this.calculateScaleDimensions();i.domain([0,d3.max(r)]),e.select(".x.axis").transition().duration(850).call(n),this.showScale&&this.dimensionsProvided?(this.visualisation.scale.attr("class",this.scaleCls),this.controlElement.removeClass("noDimensionsSet")):(this.visualisation.scale.attr("class",function(){return t.scaleCls+" hidden"}),this.controlElement.addClass("noDimensionsSet"))},50)}(),calculateScaleDimensions:function(){var t,e=this,n=null,i=e.parent.parent.element.width(),r=e.width,o=r/i;return null!==e.parent.osd&&null!==e.parent.osd.viewport&&(t=e.parent.osd.viewport.getBounds().width),physicalViewportWidth=e.parent.width*t,n=physicalViewportWidth*o,[n]},show:function(){this.element.fadeIn()},hide:function(){this.element.fadeOut()}}}(Mirador),function(t){t.SettingsLoader=function(t){var e=this;jQuery.extend(!0,this,{config:e.load()?e.load():t})},t.SettingsLoader.prototype={load:function(){return localStorage.getItem("Mirador_data")?(console.log("session restored"),JSON.parse(localStorage.getItem("Mirador_data"))):!1}}}(Mirador),function(t){t.SaveController=function(){jQuery.extend(!0,this,{saveInterval:t.DEFAULT_SETTINGS.saveController.saveInterval})},t.SaveController.prototype={buildJSON:function(){var e,n={},i={id:"viewer",data:[]};return e=function(t){var e={height:t.getHeight(),width:t.getWidth(),type:t.type,position:t.position};return"imageView"===e.type&&(e.openAt=t.openAt,e.zoomState=function(t){return{x:t.x,y:t.y,width:t.width,height:t.height}}(t.viewObj.osd.viewport.getBounds()),e.dimensions=[],e.lockedViews=[]),"thumbnailsView"===e.type,"scrollView"===e.type,e},jQuery.each(t.viewer.widgets,function(t,i){n[i.manifestId]||(n[i.manifestId]=[]),n[i.manifestId].push(e(i))}),jQuery.each(t.manifests,function(e){var r={manifestUri:t.manifests[e].uri,title:t.getTitlePrefix(t.getMetadataByManifestId(e).details)[0],widgets:[],location:t.manifests[e].location||"-"};n.hasOwnProperty(e)&&(r.widgets=n[e]),i.data.push(r)}),JSON.stringify(i)},save:function(){t.viewer&&localStorage.setItem("Mirador_data",this.buildJSON()),setTimeout(function(){t.viewer.saveController.save(),t.viewer.addStatusBarMessage("right","Workspace saved at "+new Date,1e3,!1)},t.viewer?t.viewer.saveController.saveInterval:t.DEFAULT_SETTINGS.saveController.saveInterval)}}}(Mirador),function(t){t.AnnotationBottomPanel=function(t){jQuery.extend(!0,this,{visible:!1,parent:null,hidden:!1},t),this.create()},t.AnnotationBottomPanel.prototype={create:function(){var e=this,n=null;this.element=jQuery(t.Templates.imageView.annotationDetail(n)),this.showPanelButton=jQuery(t.Templates.imageView.annotationDetailToggle()),this.annotationViewport=e.parent.parent.parent.element.find(".mirador-widget-content"),this.annotationViewport.append(e.element),this.annotationViewport.append(e.showPanelButton.hide()),e.hide(),e.bindEvents()},focusSelected:function(){this.visible=!0,this.render(),this.show()},bindEvents:function(){var t=this;this.element.find(".annotationDetailToggle").on("click",function(){t.toggleHidden()}),this.showPanelButton.find(".annotationDetailToggle").on("click",function(){t.toggleHidden()})},render:function(){var t=this,e=t.parent.selectedAnnotation,n=jQuery.grep(t.parent.annotations,function(t){return t.id===e})[0].content;t.element.find("p").fadeOut(function(){jQuery(this).text(n).fadeIn()})},deselect:function(){var t=this;t.visible=!1,t.hidden=!1,t.hide()},toggleHidden:function(){var t=this;return console.log("toggle called"),t.hidden?(t.hidden=!1,t.show(),void 0):(t.hidden=!0,t.hide(),void 0)},show:function(){var t=this;!this.hidden&&this.visible&&(t.showPanelButton.fadeOut("fast"),this.element.animate({height:"20%",opacity:1,display:"block"}))},hide:function(){var t=this;return this.element.animate({height:0,opacity:0,display:"none"}),t.hidden&&t.visible?(t.showPanelButton.fadeIn("slow"),void 0):(t.showPanelButton.fadeOut("fast"),void 0)}}}(Mirador),function(t){t.AnnotationLayerRegionController=function(t){jQuery.extend(!0,this,{visible:!0,lastSelected:null,lastHovered:null},t),this.create()},t.AnnotationLayerRegionController.prototype={create:function(){this.render(),this.hide()},append:function(t){this.element.append(t)},sortRegionsBySize:function(t,e){var n=parseInt(t.region[2],10)*parseInt(t.region[3],10),i=parseInt(e.region[2],10)*parseInt(e.region[3],10);return i-n},render:function(){var t=this,e=this.parent.get("annotations").slice().sort(this.sortRegionsBySize);t.parent.get("visible")&&(jQuery.each(e,function(e,n){var i='<div class="annotation" id="region_'+n.id+'">',r=jQuery(i)[0];t.parent.parent.osd.drawer.addOverlay(r,n.osdFrame)}),setTimeout(function(){t.bindEvents()},200))},bindEvents:function(){var t=this;jQuery(".annotation").on("click",function(e){t.clickRegion(e)}),jQuery(".annotation").on("mouseenter",function(e){t.hoverRegion(e)}),jQuery(".annotation").on("mouseleave",function(){t.leaveRegion(event)})},leaveRegion:function(){this.parent.set("hoveredAnnotation",null,"region")},clickRegion:function(t){var e=this,n=jQuery(t.target).attr("id").split("_")[1];e.parent.set("selectedAnnotation",n,"region")},hoverRegion:function(t){var e=this,n=jQuery(t.target).attr("id").split("_")[1];e.parent.set("hoveredAnnotation",n,"region")},accentHovered:function(t){var e=this;null===t&&(null===e.lastHovered||e.lastHovered.removeClass("hovered"));var n="#region_"+t,i=jQuery(n);null===e.lastHovered||e.lastHovered.removeClass("hovered"),i.hasClass("selected")||i.addClass("hovered"),e.lastHovered=i},focusSelected:function(t){var e=this,n="#region_"+t,i=jQuery(n);null===e.lastSelected||e.lastSelected.removeClass("selected"),i.removeClass("hovered"),i.addClass("selected"),e.lastSelected=i;var r=jQuery.grep(e.parent.annotations,function(e){return e.id===t})[0].osdFrame;e.parent.parent.osd.viewport.fitBounds(r)},deselect:function(){var t=this;t.lastSelected.removeClass("selected")},show:function(){this.render()},hide:function(){this.parent.annotationUrls&&this.parent.parent.osd.drawer.clearOverlays()}}}(Mirador),function(t){t.AnnotationListing=function(t){jQuery.extend(!0,this,{element:null,id:null,title:null,content:null,type:null},t),this.create()},t.AnnotationListing.prototype={create:function(){this.render()},render:function(){templateData={id:this.id,title:this.title,content:this.content},this.element=jQuery(t.Templates.imageView.annotationListing(templateData)),this.parent.listShell.append(this.element),this.bindEvents()},bindEvents:function(){var t=this;this.element.on("click",function(){t.parent.parent.set("selectedAnnotation",t.id,"listing")}),this.element.on("mouseover",function(){t.parent.parent.set("hoveredAnnotation",t.id,"listing")}),this.element.on("mouseleave",function(){t.parent.parent.set("hoveredAnnotation",null,"listing")})},show:function(){this.element.fadeIn()},hide:function(){this.element.fadeOut()}}}(Mirador),function(t){t.AnnotationLayerSidePanel=function(t){jQuery.extend(!0,this,{element:null,listShell:null,visible:!0,listings:[],lastSelected:null,lastHovered:null},t),this.create()},t.AnnotationLayerSidePanel.prototype={create:function(){var e={annotations:this.parent.get("annotations"),annotationCount:this.parent.get("annotations").length,imageAnnotationCount:this.parent.get("commentAnnotations"),textAnnotationCount:this.parent.get("textAnnotations")};this.element=jQuery(t.Templates.imageView.annotationPanel(e)),this.listShell=this.element.find(".annotationList"),this.listStats=this.element.find(".annotationPanelHeader"),this.parent.parent.element.append(this.element),this.render(),this.parent.get("visible")||this.element.hide()},bindEvents:function(){var t=this;this.annoSelector.on("change",function(){t.parent.set("filter",t.annoSelector.val())})},render:function(){var e=this;this.listings=[],this.listShell.empty();var n={annotations:this.parent.get("annotations"),annotationCount:this.parent.get("annotations").length,imageAnnotationCount:this.parent.get("commentAnnotations"),textAnnotationCount:this.parent.get("textAnnotations")};this.listStats.replaceWith(t.Templates.imageView.annotationStats(n)),this.listStats=this.element.find(".annotationPanelHeader"),this.annoSelector=this.element.find("select"),console.log(this.annoSelector),jQuery.each(this.parent.get("annotations"),function(n,i){var r=new t.AnnotationListing({id:i.id,title:i.title,content:i.content,type:i.type,parent:e});e.listings.push(r)}),this.bindEvents()},focusSelected:function(t,e){var n=this,i="#listing_"+t,r=jQuery(i);null===n.lastSelected||n.lastSelected.removeClass("selected"),r.removeClass("hovered"),r.addClass("selected"),n.lastSelected=r,"listing"!==e&&n.listShell.stop().scrollTo(r,500)},deselect:function(){var t=this;null===t.lastSelected||t.lastSelected.removeClass("selected"),t.lastSelected=null},accentHovered:function(t){var e=this;null===t&&(null===e.lastHovered||e.lastHovered.removeClass("hovered"));var n="#listing_"+t,i=jQuery(n);null===e.lastHovered||e.lastHovered.removeClass("hovered"),i.hasClass("selected")||i.addClass("hovered"),e.lastHovered=i},show:function(){this.render(),this.element.stop().show()},hide:function(){this.element.stop().hide()}}}(Mirador);